<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: crafting Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacecrafting.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">crafting Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5844edf7e04b20037d08a1215cf62236"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; <a class="el" href="structavail__tool__comp.html">avail_tool_comp</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a5844edf7e04b20037d08a1215cf62236">find_tool_component</a> (const <a class="el" href="classCharacter.html">Character</a> *player_with_inv, const std::vector&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; &amp;tools, int batch, const <a class="el" href="classinventory.html">inventory</a> &amp;map_inv, <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131">cost_adjustment</a> charge_mod)</td></tr>
<tr class="separator:a5844edf7e04b20037d08a1215cf62236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4dc51f886647b644d25e4e7d45de094"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structcomp__selection.html">comp_selection</a>&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#af4dc51f886647b644d25e4e7d45de094">query_tool_selection</a> (const std::vector&lt; <a class="el" href="structavail__tool__comp.html">avail_tool_comp</a> &gt; &amp;available_tools, const std::string &amp;hotkeys, bool can_cancel, bool is_npc)</td></tr>
<tr class="separator:af4dc51f886647b644d25e4e7d45de094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07496c9e8d995433ae9debe590894c3e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcomp__selection.html">comp_selection</a>&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a07496c9e8d995433ae9debe590894c3e">select_tool_component</a> (const std::vector&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; &amp;tools, int batch, const <a class="el" href="classinventory.html">inventory</a> &amp;map_inv, const <a class="el" href="classCharacter.html">Character</a> *player_with_inv, bool can_cancel, const std::string &amp;hotkeys, <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131">cost_adjustment</a> adjustment)</td></tr>
<tr class="memdesc:a07496c9e8d995433ae9debe590894c3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns selected tool component that matches one of the expected ones.  <a href="namespacecrafting.html#a07496c9e8d995433ae9debe590894c3e">More...</a><br /></td></tr>
<tr class="separator:a07496c9e8d995433ae9debe590894c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a942e117de7c377ddfab0cb29c6584aca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcomp__selection.html">comp_selection</a>&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a942e117de7c377ddfab0cb29c6584aca">select_tool_component</a> (const std::vector&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; &amp;tools, int batch, const <a class="el" href="classinventory.html">inventory</a> &amp;map_inv, const <a class="el" href="classCharacter.html">Character</a> *player_with_inv, bool can_cancel)</td></tr>
<tr class="separator:a942e117de7c377ddfab0cb29c6584aca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d310e1d954941b884e3806116ae6f7b"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a0d310e1d954941b884e3806116ae6f7b">get_books_for_recipe</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;<a class="el" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, const <a class="el" href="classinventory.html">inventory</a> &amp;crafting_inv, const <a class="el" href="classrecipe.html">recipe</a> *r)</td></tr>
<tr class="memdesc:a0d310e1d954941b884e3806116ae6f7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the set of book types in crafting_inv that provide the given recipe.  <a href="namespacecrafting.html#a0d310e1d954941b884e3806116ae6f7b">More...</a><br /></td></tr>
<tr class="separator:a0d310e1d954941b884e3806116ae6f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22e3c95d08749d4a4a07b9aaf64db9e8"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a22e3c95d08749d4a4a07b9aaf64db9e8">get_books_for_recipe</a> (const <a class="el" href="classrecipe.html">recipe</a> *r)</td></tr>
<tr class="memdesc:a22e3c95d08749d4a4a07b9aaf64db9e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the set of book types that provide the given recipe.  <a href="namespacecrafting.html#a22e3c95d08749d4a4a07b9aaf64db9e8">More...</a><br /></td></tr>
<tr class="separator:a22e3c95d08749d4a4a07b9aaf64db9e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f83eefe72e71cf1a8831fde5afe0aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a66f83eefe72e71cf1a8831fde5afe0aa">charges_for_complete</a> (int full_charges)</td></tr>
<tr class="separator:a66f83eefe72e71cf1a8831fde5afe0aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd0760f7e4a7e545662d263469fb277"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a6bd0760f7e4a7e545662d263469fb277">charges_for_starting</a> (int full_charges)</td></tr>
<tr class="separator:a6bd0760f7e4a7e545662d263469fb277"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a653e8b3027cf7e8256c46600bdea2697"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a653e8b3027cf7e8256c46600bdea2697">charges_for_continuing</a> (int full_charges)</td></tr>
<tr class="separator:a653e8b3027cf7e8256c46600bdea2697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e973ebbe76aa946752c7f3b4a4392d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classret__val.html">ret_val</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a33e973ebbe76aa946752c7f3b4a4392d">can_disassemble</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who, const <a class="el" href="classitem.html">item</a> &amp;obj, const <a class="el" href="classinventory.html">inventory</a> &amp;inv)</td></tr>
<tr class="memdesc:a33e973ebbe76aa946752c7f3b4a4392d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if character can disassemble an item using the given crafting inventory.  <a href="namespacecrafting.html#a33e973ebbe76aa946752c7f3b4a4392d">More...</a><br /></td></tr>
<tr class="separator:a33e973ebbe76aa946752c7f3b4a4392d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f70f042817b423f427532947f6bf4dd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a6f70f042817b423f427532947f6bf4dd">disassemble</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you)</td></tr>
<tr class="memdesc:a6f70f042817b423f427532947f6bf4dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt for an item to disassemble, then start activity.  <a href="namespacecrafting.html#a6f70f042817b423f427532947f6bf4dd">More...</a><br /></td></tr>
<tr class="separator:a6f70f042817b423f427532947f6bf4dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e0fbc3f9cae7380bb61c26f60dbd821"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a6e0fbc3f9cae7380bb61c26f60dbd821">disassemble</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, <a class="el" href="classitem__location.html">item_location</a> target)</td></tr>
<tr class="memdesc:a6e0fbc3f9cae7380bb61c26f60dbd821"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt to disassemble given item, then start activity.  <a href="namespacecrafting.html#a6e0fbc3f9cae7380bb61c26f60dbd821">More...</a><br /></td></tr>
<tr class="separator:a6e0fbc3f9cae7380bb61c26f60dbd821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb3b3e5acddfb384496ef6157d17c3c6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#adb3b3e5acddfb384496ef6157d17c3c6">disassemble_all</a> (<a class="el" href="classavatar.html">avatar</a> &amp;you, bool recursively)</td></tr>
<tr class="memdesc:adb3b3e5acddfb384496ef6157d17c3c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start an activity to disassemble all items in avatar's square.  <a href="namespacecrafting.html#adb3b3e5acddfb384496ef6157d17c3c6">More...</a><br /></td></tr>
<tr class="separator:adb3b3e5acddfb384496ef6157d17c3c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6895224ef92a2b991f276b2ea25ca15f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a6895224ef92a2b991f276b2ea25ca15f">complete_disassemble</a> (<a class="el" href="classCharacter.html">Character</a> &amp;who, <a class="el" href="structiuse__location.html">iuse_location</a> target, const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos)</td></tr>
<tr class="memdesc:a6895224ef92a2b991f276b2ea25ca15f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Complete disassembly of target item.  <a href="namespacecrafting.html#a6895224ef92a2b991f276b2ea25ca15f">More...</a><br /></td></tr>
<tr class="separator:a6895224ef92a2b991f276b2ea25ca15f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a33e973ebbe76aa946752c7f3b4a4392d" name="a33e973ebbe76aa946752c7f3b4a4392d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33e973ebbe76aa946752c7f3b4a4392d">&#9670;&nbsp;</a></span>can_disassemble()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classret__val.html">ret_val</a>&lt; bool &gt; crafting::can_disassemble </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classinventory.html">inventory</a> &amp;&#160;</td>
          <td class="paramname"><em>inv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if character can disassemble an item using the given crafting inventory. </p>

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l01881">1881</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>{</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;r = <a class="code hl_function" href="classrecipe__dictionary.html#a93af439fed4b5043d9709235e0cea03e">recipe_dictionary::get_uncraft</a>( <a class="code hl_function" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>.typeId() );</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span> </div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>    <span class="keywordflow">if</span>( !r || <a class="code hl_function" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>.has_flag( <a class="code hl_function" href="crafting_8cpp.html#a09be785730be8d8b735277a2434fa57b">flag_ETHEREAL_ITEM</a> ) ) {</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;bool&gt;::make_failure</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You cannot disassemble this.&quot;</span> ) );</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>    }</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span> </div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>    <span class="comment">// check sufficient light</span></div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="crafting_8cpp.html#a6582cc1f2797909d958c3123c33cf414">lighting_crafting_speed_multiplier</a>( who, r ) == 0.0f ) {</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;bool&gt;::make_failure</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t see to craft!&quot;</span> ) );</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>    }</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span> </div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>    <span class="comment">// refuse to disassemble rotten items</span></div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>    <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> *food = <a class="code hl_function" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>.get_food();</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>    <span class="keywordflow">if</span>( ( <a class="code hl_function" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>.goes_bad() &amp;&amp; <a class="code hl_function" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>.rotten() ) || ( food &amp;&amp; food-&gt;<a class="code hl_function" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() &amp;&amp; food-&gt;<a class="code hl_function" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() ) ) {</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;bool&gt;::make_failure</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It&#39;s rotten, I&#39;m not taking that apart.&quot;</span> ) );</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>    }</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span> </div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>    <span class="comment">// refuse to disassemble items containing monsters/pets</span></div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>    std::string <a class="code hl_class" href="classmonster.html">monster</a> = <a class="code hl_function" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>.get_var( <span class="stringliteral">&quot;contained_name&quot;</span> );</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>    <span class="keywordflow">if</span>( !<a class="code hl_class" href="classmonster.html">monster</a>.empty() ) {</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;bool&gt;::make_failure</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You must remove the %s before you can disassemble this.&quot;</span> ),</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>                                            <a class="code hl_class" href="classmonster.html">monster</a> );</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>    }</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span> </div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>.count_by_charges() ) {</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>        <span class="keywordtype">int</span> batch_size = r.disassembly_batch_size();</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>.charges &lt; batch_size ) {</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>            <span class="keyword">auto</span> msg = <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;You need at least %d charge of %s.&quot;</span>,</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>                                 <span class="stringliteral">&quot;You need at least %d charges of %s.&quot;</span>, batch_size );</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;bool&gt;::make_failure</a>( msg, batch_size, <a class="code hl_function" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>.tname() );</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>        }</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>    }</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;dis = r.disassembly_requirements();</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span> </div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;opts : dis.get_qualities() ) {</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;qual : opts ) {</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>            <span class="keywordflow">if</span>( !qual.has( inv, return_true&lt;item&gt; ) ) {</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>                <span class="comment">// Here should be no dot at the end of the string as &#39;to_string()&#39; provides it.</span></div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;bool&gt;::make_failure</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need %s&quot;</span> ), qual.to_string() );</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>            }</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>        }</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>    }</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span> </div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;opts : dis.get_tools() ) {</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> found = std::any_of( opts.begin(), opts.end(),</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>        [&amp;]( <span class="keyword">const</span> <a class="code hl_struct" href="structtool__comp.html">tool_comp</a> &amp; tool ) {</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>            return ( tool.count &lt;= 0 &amp;&amp; inv.has_tools( tool.type, 1 ) ) ||</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>                   ( tool.count  &gt; 0 &amp;&amp; inv.has_charges( tool.type, tool.count ) );</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>        } );</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span> </div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>        <span class="keywordflow">if</span>( !found ) {</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structtool__comp.html">tool_comp</a> &amp;tool_required = opts.front();</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>            <span class="keywordflow">if</span>( tool_required.<a class="code hl_variable" href="structcomponent.html#aa6596b552ee2f19c2440c5a6aed9ecf4">count</a> &lt;= 0 ) {</div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;bool&gt;::make_failure</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need %s.&quot;</span> ),</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>                                                    <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( tool_required.<a class="code hl_variable" href="structcomponent.html#a9c114293306257abbc1db25073fc0492">type</a> ) );</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>                <span class="comment">//~ %1$s: tool name, %2$d: needed charges</span></div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;bool&gt;::make_failure</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;You need a %1$s with %2$d charge.&quot;</span>,</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>                                                    <span class="stringliteral">&quot;You need a %1$s with %2$d charges.&quot;</span>, tool_required.<a class="code hl_variable" href="structcomponent.html#aa6596b552ee2f19c2440c5a6aed9ecf4">count</a> ),</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>                                                    <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( tool_required.<a class="code hl_variable" href="structcomponent.html#a9c114293306257abbc1db25073fc0492">type</a> ),</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>                                                    tool_required.<a class="code hl_variable" href="structcomponent.html#aa6596b552ee2f19c2440c5a6aed9ecf4">count</a> );</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>            }</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>        }</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>    }</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span> </div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val&lt;bool&gt;::make_success</a>();</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>}</div>
<div class="ttc" id="aclassint__id_html_a315169d32cce4267b7c8dceff4b0d1d7"><div class="ttname"><a href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">int_id::obj</a></div><div class="ttdeci">const ammo_effect &amp; obj() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00026">ammo_effect.cpp:26</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00209">item.h:210</a></div></div>
<div class="ttc" id="aclassitem_html_a34f7ae5deade2f4a8fed4f04e81797ce"><div class="ttname"><a href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">item::rotten</a></div><div class="ttdeci">bool rotten() const</div><div class="ttdoc">returns true if item is now rotten after all shelf life has elapsed</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00849">item.h:849</a></div></div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09951">item.cpp:9951</a></div></div>
<div class="ttc" id="aclassitem_html_a9e073e3ce3fcc2e91bdaea5d603e798b"><div class="ttname"><a href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">item::goes_bad</a></div><div class="ttdeci">bool goes_bad() const</div><div class="ttdoc">whether an item is perishable (can rot)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05523">item.cpp:5523</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00084">monster.h:85</a></div></div>
<div class="ttc" id="aclassrecipe__dictionary_html_a93af439fed4b5043d9709235e0cea03e"><div class="ttname"><a href="classrecipe__dictionary.html#a93af439fed4b5043d9709235e0cea03e">recipe_dictionary::get_uncraft</a></div><div class="ttdeci">static const recipe &amp; get_uncraft(const itype_id &amp;id)</div><div class="ttdoc">Returns disassembly recipe (or null recipe if no match)</div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8cpp_source.html#l00075">recipe_dictionary.cpp:75</a></div></div>
<div class="ttc" id="aclassret__val_html_a0bbde13713bc279563fa85782599f957"><div class="ttname"><a href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val::make_success</a></div><div class="ttdeci">static ret_val make_success(T val=default_success::value)</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00042">ret_val.h:42</a></div></div>
<div class="ttc" id="aclassret__val_html_a415798e6fd736bd724329890cae0df4a"><div class="ttname"><a href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val::make_failure</a></div><div class="ttdeci">static ret_val make_failure(T val=default_failure::value)</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00046">ret_val.h:46</a></div></div>
<div class="ttc" id="acrafting_8cpp_html_a09be785730be8d8b735277a2434fa57b"><div class="ttname"><a href="crafting_8cpp.html#a09be785730be8d8b735277a2434fa57b">flag_ETHEREAL_ITEM</a></div><div class="ttdeci">static const std::string flag_ETHEREAL_ITEM(&quot;ETHEREAL_ITEM&quot;)</div></div>
<div class="ttc" id="acrafting_8cpp_html_a6582cc1f2797909d958c3123c33cf414"><div class="ttname"><a href="crafting_8cpp.html#a6582cc1f2797909d958c3123c33cf414">lighting_crafting_speed_multiplier</a></div><div class="ttdeci">float lighting_crafting_speed_multiplier(const Character &amp;who, const recipe &amp;rec)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00132">crafting.cpp:132</a></div></div>
<div class="ttc" id="astructcomponent_html_a9c114293306257abbc1db25073fc0492"><div class="ttname"><a href="structcomponent.html#a9c114293306257abbc1db25073fc0492">component::type</a></div><div class="ttdeci">itype_id type</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00058">requirements.h:58</a></div></div>
<div class="ttc" id="astructcomponent_html_aa6596b552ee2f19c2440c5a6aed9ecf4"><div class="ttname"><a href="structcomponent.html#aa6596b552ee2f19c2440c5a6aed9ecf4">component::count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00059">requirements.h:59</a></div></div>
<div class="ttc" id="astructtool__comp_html"><div class="ttname"><a href="structtool__comp.html">tool_comp</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00090">requirements.h:90</a></div></div>
<div class="ttc" id="atranslations_8cpp_html_a82b835742108b8d7f5f6a291b41e208e"><div class="ttname"><a href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a></div><div class="ttdeci">const char * vgettext(const char *msgid, const char *msgid_plural, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8cpp_source.html#l00036">translations.cpp:36</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="requirements_8h_source.html#l00059">component::count</a>, <a class="el" href="crafting_8cpp.html#a09be785730be8d8b735277a2434fa57b">flag_ETHEREAL_ITEM()</a>, <a class="el" href="recipe__dictionary_8cpp_source.html#l00075">recipe_dictionary::get_uncraft()</a>, <a class="el" href="item_8cpp_source.html#l05523">item::goes_bad()</a>, <a class="el" href="crafting_8cpp_source.html#l00132">lighting_crafting_speed_multiplier()</a>, <a class="el" href="ret__val_8h_source.html#l00046">ret_val&lt; T &gt;::make_failure()</a>, <a class="el" href="ret__val_8h_source.html#l00042">ret_val&lt; T &gt;::make_success()</a>, <a class="el" href="item_8cpp_source.html#l09951">item::nname()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="item_8h_source.html#l00849">item::rotten()</a>, <a class="el" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>, <a class="el" href="requirements_8h_source.html#l00058">component::type</a>, and <a class="el" href="translations_8cpp_source.html#l00036">vgettext()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l08316">game::butcher()</a>, <a class="el" href="action_8cpp_source.html#l00548">can_butcher_at()</a>, <a class="el" href="game__inventory_8cpp_source.html#l00482">disassemble_inventory_preset::get_denial()</a>, <a class="el" href="crafting_8cpp_source.html#l01958">prompt_disassemble_in_seq()</a>, <a class="el" href="examine__item__menu_8cpp_source.html#l00425">examine_item_menu::rate_action_disassemble()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l00569">disassemble_activity_actor::try_start_single()</a>.</p>

</div>
</div>
<a id="a66f83eefe72e71cf1a8831fde5afe0aa" name="a66f83eefe72e71cf1a8831fde5afe0aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66f83eefe72e71cf1a8831fde5afe0aa">&#9670;&nbsp;</a></span>charges_for_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crafting::charges_for_complete </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>full_charges</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02394">2394</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>{</div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>    <span class="keywordflow">return</span> full_charges;</div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01599">find_tool_component()</a>.</p>

</div>
</div>
<a id="a653e8b3027cf7e8256c46600bdea2697" name="a653e8b3027cf7e8256c46600bdea2697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a653e8b3027cf7e8256c46600bdea2697">&#9670;&nbsp;</a></span>charges_for_continuing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crafting::charges_for_continuing </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>full_charges</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02402">2402</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>{</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>    <span class="keywordflow">return</span> full_charges / 20;</div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01162">player::can_continue_craft()</a>, <a class="el" href="crafting_8cpp_source.html#l01756">player::craft_consume_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l01599">find_tool_component()</a>, and <a class="el" href="requirements_8cpp_source.html#l00778">tool_comp::has()</a>.</p>

</div>
</div>
<a id="a6bd0760f7e4a7e545662d263469fb277" name="a6bd0760f7e4a7e545662d263469fb277"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bd0760f7e4a7e545662d263469fb277">&#9670;&nbsp;</a></span>charges_for_starting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crafting::charges_for_starting </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>full_charges</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02398">2398</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>{</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>    <span class="keywordflow">return</span> full_charges / 20 + full_charges % 20;</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01756">player::craft_consume_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l01599">find_tool_component()</a>, and <a class="el" href="requirements_8cpp_source.html#l00778">tool_comp::has()</a>.</p>

</div>
</div>
<a id="a6895224ef92a2b991f276b2ea25ca15f" name="a6895224ef92a2b991f276b2ea25ca15f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6895224ef92a2b991f276b2ea25ca15f">&#9670;&nbsp;</a></span>complete_disassemble()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void crafting::complete_disassemble </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structiuse__location.html">iuse_location</a>&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Complete disassembly of target item. </p>
Intelligence increases success rate for disassembling items 
<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02102">2102</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>{</div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>    <a class="code hl_class" href="classitem.html">item</a> &amp;org_item = *target.<a class="code hl_variable" href="structiuse__location.html#a7d87586728cb293f24a5be9a102e8823">loc</a>;</div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>    <span class="keyword">const</span> <a class="code hl_class" href="classrecipe.html">recipe</a> &amp;dis = <a class="code hl_function" href="classrecipe__dictionary.html#a93af439fed4b5043d9709235e0cea03e">recipe_dictionary::get_uncraft</a>( org_item.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() );</div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span> </div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>    <span class="comment">// Get the proper recipe - the one for disassembly, not assembly</span></div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>    <span class="keyword">const</span> <span class="keyword">auto</span> dis_requirements = dis.<a class="code hl_function" href="classrecipe.html#a555772480849b6e628c94dd0f56af81e">disassembly_requirements</a>();</div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> filthy = org_item.<a class="code hl_function" href="classitem.html#a5093379156498b4d523b3ac1f733adc4">is_filthy</a>();</div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span> </div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>    <span class="comment">// Make a copy to keep its data (damage/components) even after it</span></div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>    <span class="comment">// has been removed.</span></div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>    <a class="code hl_class" href="classitem.html">item</a> dis_item = org_item;</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span> </div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>    <span class="keywordtype">float</span> component_success_chance = std::min( std::pow( 0.8, dis_item.<a class="code hl_function" href="classitem.html#a5be1c00110bff10a98ab02b8410c9af7">damage_level</a>( 4 ) ), 1.0 );</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span> </div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You disassemble the %s into its components.&quot;</span> ), dis_item.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>    <span class="comment">// Remove any batteries, ammo and mods first</span></div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>    <a class="code hl_function" href="crafting_8cpp.html#a64975cca8f4337f6e791f11ba44c0bfd">remove_ammo</a>( dis_item, who );</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>    <a class="code hl_function" href="iuse_8cpp.html#a5deb1b5f4e652e223349f90b8b190ff5">remove_radio_mod</a>( dis_item, *who.<a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>() );</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span> </div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>    <span class="keywordflow">if</span>( org_item.<a class="code hl_function" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>        <span class="keywordtype">int</span> batch_size = dis.<a class="code hl_function" href="classrecipe.html#aa0ccdbf0781d345bd97abe1ff4781018">disassembly_batch_size</a>();</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>        org_item.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> -= batch_size * target.<a class="code hl_variable" href="structiuse__location.html#a29aec7600a82f71e49beea6f65d933bf">count</a>;</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>    }</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>    <span class="comment">// remove the item, except when it&#39;s counted by charges and still has some</span></div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>    <span class="keywordflow">if</span>( !org_item.<a class="code hl_function" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() || org_item.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &lt;= 0 ) {</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>        target.<a class="code hl_variable" href="structiuse__location.html#a7d87586728cb293f24a5be9a102e8823">loc</a>.<a class="code hl_function" href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">remove_item</a>();</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>    }</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span> </div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>    <span class="comment">// Consume tool charges</span></div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;it : dis_requirements.get_tools() ) {</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>        who.<a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>()-&gt;<a class="code hl_function" href="classplayer.html#aafa6cc2db2568af687ab21f09f8e4c2e">consume_tools</a>( it );</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>    }</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span> </div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>    <span class="comment">// add the components to the map</span></div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>    <span class="comment">// Player skills should determine how many components are returned</span></div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span> </div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>    <span class="keywordtype">int</span> skill_dice = 2 + who.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( dis.<a class="code hl_variable" href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">skill_used</a> ) * 3;</div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>    skill_dice += who.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( dis.<a class="code hl_variable" href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">skill_used</a> );</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span> </div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>    <span class="comment">// Sides on dice is 16 plus your current intelligence</span><span class="comment"></span></div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span><span class="comment">    ///\EFFECT_INT increases success rate for disassembling items</span></div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span><span class="comment"></span>    <span class="keywordtype">int</span> skill_sides = 16 + who.<a class="code hl_variable" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a>;</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span> </div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>    <span class="keywordtype">int</span> diff_dice = dis.<a class="code hl_variable" href="classrecipe.html#a10e4e7582e7174825ead3d07c3e4fca1">difficulty</a>;</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>    <span class="keywordtype">int</span> diff_sides = 24; <span class="comment">// 16 + 8 (default intelligence)</span></div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span> </div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>    <span class="comment">// disassembly only nets a bit of practice</span></div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>    <span class="keywordflow">if</span>( dis.<a class="code hl_variable" href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">skill_used</a> ) {</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>        who.<a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>()-&gt;<a class="code hl_function" href="classCharacter.html#a3d70ebd707bada8879208e98f07f7223">practice</a>( dis.<a class="code hl_variable" href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">skill_used</a>, ( dis.<a class="code hl_variable" href="classrecipe.html#a10e4e7582e7174825ead3d07c3e4fca1">difficulty</a> ) * 2, dis.<a class="code hl_variable" href="classrecipe.html#a10e4e7582e7174825ead3d07c3e4fca1">difficulty</a> );</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>    }</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span> </div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>    <span class="comment">// If the components aren&#39;t empty, we want items exactly identical to them</span></div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>    <span class="comment">// Even if the best-fit recipe does not involve those items</span></div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>    std::list&lt;item&gt; components = dis_item.<a class="code hl_variable" href="classitem.html#a891e49f36521b955b9ad58817ddf65d8">components</a>;</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span> </div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>    <span class="comment">// If the components are empty, item is the default kind and made of default components</span></div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>    <span class="keywordflow">if</span>( components.empty() ) {</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> uncraft_liquids_contained = dis.<a class="code hl_function" href="classrecipe.html#aca293605940df4e5c431fa8ba5009074">has_flag</a>( <a class="code hl_function" href="crafting_8cpp.html#aa00701e4370166ae577bf173fd05672f">flag_UNCRAFT_LIQUIDS_CONTAINED</a> );</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;altercomps : dis_requirements.get_components() ) {</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structitem__comp.html">item_comp</a> &amp;comp = altercomps.front();</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>            <span class="keywordtype">int</span> compcount = comp.<a class="code hl_variable" href="structcomponent.html#aa6596b552ee2f19c2440c5a6aed9ecf4">count</a> * target.<a class="code hl_variable" href="structiuse__location.html#a29aec7600a82f71e49beea6f65d933bf">count</a>;</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>            <a class="code hl_class" href="classitem.html">item</a> newit( comp.<a class="code hl_variable" href="structcomponent.html#a9c114293306257abbc1db25073fc0492">type</a>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> is_liquid = newit.made_of( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> );</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>            <span class="keywordflow">if</span>( uncraft_liquids_contained &amp;&amp; is_liquid &amp;&amp; newit.charges != 0 ) {</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>                <span class="comment">// Spawn liquid item in its default container</span></div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>                compcount = compcount / newit.charges;</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>                <span class="keywordflow">if</span>( compcount != 0 ) {</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>                    newit = newit.in_its_container();</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>                }</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>                <span class="comment">// Compress liquids and counted-by-charges items into one item,</span></div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>                <span class="comment">// they are added together on the map anyway and handle_liquid</span></div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>                <span class="comment">// should only be called once to put it all into a container at once.</span></div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>                <span class="keywordflow">if</span>( newit.count_by_charges() || is_liquid ) {</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>                    newit.charges = compcount;</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>                    compcount = 1;</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !newit.craft_has_charges() &amp;&amp; newit.charges &gt; 0 ) {</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>                    <span class="comment">// tools that can be unloaded should be created unloaded,</span></div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>                    <span class="comment">// tools that can&#39;t be unloaded will keep their default charges.</span></div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>                    newit.charges = 0;</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>                }</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>            }</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span> </div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>            <span class="comment">// If the recipe has a `FULL_MAGAZINE` flag, spawn any magazines full of ammo</span></div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>            <span class="keywordflow">if</span>( newit.is_magazine() &amp;&amp; dis.<a class="code hl_function" href="classrecipe.html#aca293605940df4e5c431fa8ba5009074">has_flag</a>( <a class="code hl_function" href="crafting_8cpp.html#a5d187ba748889447c68918465e3b4300">flag_FULL_MAGAZINE</a> ) ) {</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>                newit.ammo_set( newit.ammo_default(), newit.ammo_capacity() );</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>            }</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span> </div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>            <span class="keywordflow">for</span>( ; compcount &gt; 0; compcount-- ) {</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>                components.emplace_back( newit );</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>            }</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>        }</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>    }</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span> </div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>    std::list&lt;item&gt; drop_items;</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span> </div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;newit : components ) {</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> comp_success = ( <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( skill_dice, skill_sides ) &gt; <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( diff_dice,  diff_sides ) );</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>        <span class="keywordflow">if</span>( dis.<a class="code hl_variable" href="classrecipe.html#a10e4e7582e7174825ead3d07c3e4fca1">difficulty</a> != 0 &amp;&amp; !comp_success ) {</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You fail to recover %s.&quot;</span> ), newit.tname() );</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>        }</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> dmg_success = component_success_chance &gt; <a class="code hl_function" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 0, 1 );</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>        <span class="keywordflow">if</span>( !dmg_success ) {</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>            <span class="comment">// Show reason for failure (damaged item, tname contains the damage adjective)</span></div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>            <span class="comment">//~ %1s - material, %2$s - disassembled item</span></div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You fail to recover %1$s from the %2$s.&quot;</span> ), newit.tname(),</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>                     dis_item.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>        }</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>        <span class="comment">// Use item from components list, or (if not contained)</span></div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>        <span class="comment">// use newit, the default constructed.</span></div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>        <a class="code hl_class" href="classitem.html">item</a> act_item = newit;</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span> </div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>        <span class="comment">// Refitted clothing disassembles into refitted components (when applicable)</span></div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>        <span class="keywordflow">if</span>( dis_item.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <a class="code hl_function" href="crafting_8cpp.html#a614c2056b7d8fcc6773e3441a3feacc3">flag_FIT</a> ) &amp;&amp; act_item.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <a class="code hl_function" href="crafting_8cpp.html#ad66d76d379c8d5dcdbb69ceac398607b">flag_VARSIZE</a> ) ) {</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>            act_item.<a class="code hl_function" href="classitem.html#aaf0e79cb1bc190daa4804cfd62f279c4">set_flag</a>( <a class="code hl_function" href="crafting_8cpp.html#a614c2056b7d8fcc6773e3441a3feacc3">flag_FIT</a> );</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>        }</div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span> </div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>        <span class="keywordflow">if</span>( filthy ) {</div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>            act_item.<a class="code hl_function" href="classitem.html#aaf0e79cb1bc190daa4804cfd62f279c4">set_flag</a>( <span class="stringliteral">&quot;FILTHY&quot;</span> );</div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>        }</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span> </div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>        <span class="keywordflow">for</span>( std::list&lt;item&gt;::iterator <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> = dis_item.<a class="code hl_variable" href="classitem.html#a891e49f36521b955b9ad58817ddf65d8">components</a>.begin(); <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> != dis_item.<a class="code hl_variable" href="classitem.html#a891e49f36521b955b9ad58817ddf65d8">components</a>.end();</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>             ++<a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> ) {</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>-&gt;type == newit.type ) {</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>                act_item = *<a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>;</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>                dis_item.<a class="code hl_variable" href="classitem.html#a891e49f36521b955b9ad58817ddf65d8">components</a>.erase( <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> );</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>            }</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span>        }</div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span> </div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span>        <span class="keywordflow">if</span>( act_item.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) ) {</div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>            <a class="code hl_function" href="namespaceliquid__handler.html#abdd687d6de27a042558f41fd9f7a0aba">liquid_handler::handle_all_liquid</a>( act_item, <a class="code hl_variable" href="cached__options_8cpp.html#a1467e25ae6a1c8f9d4489be4a8e014a3">PICKUP_RANGE</a> );</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>            drop_items.push_back( act_item );</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>        }</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>    }</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span> </div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>    <a class="code hl_function" href="activity__handlers_8h.html#aaffe872a8e49c99b600d61b6e1b4062e">put_into_vehicle_or_drop</a>( who, <a class="code hl_enumvalue" href="activity__handlers_8h.html#a3931cba30166834e066ef80c02d84611a38dd6f2bec3ea3b3cde92db954842bdb">item_drop_reason::deliberate</a>, drop_items );</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span> </div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>    <span class="keywordflow">if</span>( !dis.<a class="code hl_variable" href="classrecipe.html#a1e30e83416b78d0cbbb071fc05a81267">learn_by_disassembly</a>.empty() &amp;&amp; !who.<a class="code hl_function" href="classCharacter.html#a7950b035ea05fa28a0851b4107377265">knows_recipe</a>( &amp;dis ) ) {</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>        <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#a84a22811ef75f1dc00d23d37e4794f0f">can_learn_by_disassembly</a>( dis ) ) {</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>            <span class="comment">// TODO: make this depend on intelligence</span></div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>                <span class="comment">// TODO: change to forward an id or a reference</span></div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>                who.<a class="code hl_function" href="classCharacter.html#a3bde4322167b9f9a0260f0635b82c413">learn_recipe</a>( &amp;dis.<a class="code hl_function" href="classrecipe.html#a5f1fa30e49785a8c16c4f5951d039afb">ident</a>().<a class="code hl_function" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>() );</div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You learned a recipe for %s from disassembling it!&quot;</span> ),</div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>                         dis_item.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You might be able to learn a recipe for %s if you disassemble another.&quot;</span> ),</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>                         dis_item.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>            }</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;If you had better skills, you might learn a recipe next time.&quot;</span> ) );</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>        }</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>    }</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>}</div>
<div class="ttc" id="aactivity__handlers_8h_html_a3931cba30166834e066ef80c02d84611a38dd6f2bec3ea3b3cde92db954842bdb"><div class="ttname"><a href="activity__handlers_8h.html#a3931cba30166834e066ef80c02d84611a38dd6f2bec3ea3b3cde92db954842bdb">item_drop_reason::deliberate</a></div><div class="ttdeci">@ deliberate</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_aaffe872a8e49c99b600d61b6e1b4062e"><div class="ttname"><a href="activity__handlers_8h.html#aaffe872a8e49c99b600d61b6e1b4062e">put_into_vehicle_or_drop</a></div><div class="ttdeci">void put_into_vehicle_or_drop(Character &amp;c, item_drop_reason, const std::list&lt; item &gt; &amp;items)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00394">activity_item_handling.cpp:394</a></div></div>
<div class="ttc" id="acached__options_8cpp_html_a1467e25ae6a1c8f9d4489be4a8e014a3"><div class="ttname"><a href="cached__options_8cpp.html#a1467e25ae6a1c8f9d4489be4a8e014a3">PICKUP_RANGE</a></div><div class="ttdeci">int PICKUP_RANGE</div><div class="ttdoc">Items on the map with at most this distance to the player are considered available for crafting,...</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00019">cached_options.cpp:19</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3bde4322167b9f9a0260f0635b82c413"><div class="ttname"><a href="classCharacter.html#a3bde4322167b9f9a0260f0635b82c413">Character::learn_recipe</a></div><div class="ttdeci">void learn_recipe(const recipe *rec)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10603">character.cpp:10603</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3d70ebd707bada8879208e98f07f7223"><div class="ttname"><a href="classCharacter.html#a3d70ebd707bada8879208e98f07f7223">Character::practice</a></div><div class="ttdeci">void practice(const skill_id &amp;id, int amount, int cap=99, bool suppress_warning=false)</div><div class="ttdoc">This handles giving xp for a skill.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03417">character.cpp:3417</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7950b035ea05fa28a0851b4107377265"><div class="ttname"><a href="classCharacter.html#a7950b035ea05fa28a0851b4107377265">Character::knows_recipe</a></div><div class="ttdeci">bool knows_recipe(const recipe *rec) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10598">character.cpp:10598</a></div></div>
<div class="ttc" id="aclassCharacter_html_a84a22811ef75f1dc00d23d37e4794f0f"><div class="ttname"><a href="classCharacter.html#a84a22811ef75f1dc00d23d37e4794f0f">Character::can_learn_by_disassembly</a></div><div class="ttdeci">bool can_learn_by_disassembly(const recipe &amp;rec) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10611">character.cpp:10611</a></div></div>
<div class="ttc" id="aclassCharacter_html_a994c83d61054215e81a6e87478d81203"><div class="ttname"><a href="classCharacter.html#a994c83d61054215e81a6e87478d81203">Character::int_cur</a></div><div class="ttdeci">int int_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00266">character.h:266</a></div></div>
<div class="ttc" id="aclassCharacter_html_afa95fe499ca6b55ab97f1b442a4c95c5"><div class="ttname"><a href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">Character::get_skill_level</a></div><div class="ttdeci">int get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03351">character.cpp:3351</a></div></div>
<div class="ttc" id="aclassCreature_html_acb1d0a1210d3dd4c86350f3ad4c58649"><div class="ttname"><a href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">Creature::as_player</a></div><div class="ttdeci">virtual player * as_player()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00122">creature.h:122</a></div></div>
<div class="ttc" id="aclassitem__location_html_a41e90133672d99aa1cecde670e37c23c"><div class="ttname"><a href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">item_location::remove_item</a></div><div class="ttdeci">void remove_item()</div><div class="ttdoc">Removes the selected item from the game.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l00758">item_location.cpp:758</a></div></div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06030">item.cpp:6030</a></div></div>
<div class="ttc" id="aclassitem_html_a4326944ae95f4d265c8ca1c76ed89a03"><div class="ttname"><a href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">item::made_of</a></div><div class="ttdeci">const std::vector&lt; material_id &gt; &amp; made_of() const</div><div class="ttdoc">The ids of all the materials this is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06438">item.cpp:6438</a></div></div>
<div class="ttc" id="aclassitem_html_a5093379156498b4d523b3ac1f733adc4"><div class="ttname"><a href="classitem.html#a5093379156498b4d523b3ac1f733adc4">item::is_filthy</a></div><div class="ttdeci">bool is_filthy() const</div><div class="ttdoc">Marks the item as filthy, so characters with squeamish trait can't wear it.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10010">item.cpp:10010</a></div></div>
<div class="ttc" id="aclassitem_html_a5be1c00110bff10a98ab02b8410c9af7"><div class="ttname"><a href="classitem.html#a5be1c00110bff10a98ab02b8410c9af7">item::damage_level</a></div><div class="ttdeci">int damage_level(int max) const</div><div class="ttdoc">Scale item damage to the given number of levels.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00704">item.cpp:704</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02199">item.h:2199</a></div></div>
<div class="ttc" id="aclassitem_html_a7e78e26dcf9b357cda769c3ca2938eda"><div class="ttname"><a href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, bool with_prefix=true, unsigned int truncate=0) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04574">item.cpp:4574</a></div></div>
<div class="ttc" id="aclassitem_html_a891e49f36521b955b9ad58817ddf65d8"><div class="ttname"><a href="classitem.html#a891e49f36521b955b9ad58817ddf65d8">item::components</a></div><div class="ttdeci">std::list&lt; item &gt; components</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02162">item.h:2162</a></div></div>
<div class="ttc" id="aclassitem_html_aa79dad64e1ef6347219be2f8666e2752"><div class="ttname"><a href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">item::typeId</a></div><div class="ttdeci">const itype_id &amp; typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08374">item.cpp:8374</a></div></div>
<div class="ttc" id="aclassitem_html_aaa5aeb6f838927babb10ede535cf2a73"><div class="ttname"><a href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">item::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05328">item.cpp:5328</a></div></div>
<div class="ttc" id="aclassitem_html_aaf0e79cb1bc190daa4804cfd62f279c4"><div class="ttname"><a href="classitem.html#aaf0e79cb1bc190daa4804cfd62f279c4">item::set_flag</a></div><div class="ttdeci">item &amp; set_flag(const std::string &amp;flag)</div><div class="ttdoc">Idempotent filter setting an item specific flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05357">item.cpp:5357</a></div></div>
<div class="ttc" id="aclassplayer_html_aafa6cc2db2568af687ab21f09f8e4c2e"><div class="ttname"><a href="classplayer.html#aafa6cc2db2568af687ab21f09f8e4c2e">player::consume_tools</a></div><div class="ttdeci">void consume_tools(const comp_selection&lt; tool_comp &gt; &amp;tool, int batch)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01845">crafting.cpp:1845</a></div></div>
<div class="ttc" id="aclassrecipe_html"><div class="ttname"><a href="classrecipe.html">recipe</a></div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00034">recipe.h:35</a></div></div>
<div class="ttc" id="aclassrecipe_html_a0af03931c6f034e6b5269a5206e31bd2"><div class="ttname"><a href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">recipe::skill_used</a></div><div class="ttdeci">skill_id skill_used</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00109">recipe.h:109</a></div></div>
<div class="ttc" id="aclassrecipe_html_a10e4e7582e7174825ead3d07c3e4fca1"><div class="ttname"><a href="classrecipe.html#a10e4e7582e7174825ead3d07c3e4fca1">recipe::difficulty</a></div><div class="ttdeci">int difficulty</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00062">recipe.h:62</a></div></div>
<div class="ttc" id="aclassrecipe_html_a1e30e83416b78d0cbbb071fc05a81267"><div class="ttname"><a href="classrecipe.html#a1e30e83416b78d0cbbb071fc05a81267">recipe::learn_by_disassembly</a></div><div class="ttdeci">std::map&lt; skill_id, int &gt; learn_by_disassembly</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00113">recipe.h:113</a></div></div>
<div class="ttc" id="aclassrecipe_html_a555772480849b6e628c94dd0f56af81e"><div class="ttname"><a href="classrecipe.html#a555772480849b6e628c94dd0f56af81e">recipe::disassembly_requirements</a></div><div class="ttdeci">requirement_data disassembly_requirements() const</div><div class="ttdoc">If recipe can be used for disassembly fetch the combined requirements.</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00096">recipe.h:96</a></div></div>
<div class="ttc" id="aclassrecipe_html_a5f1fa30e49785a8c16c4f5951d039afb"><div class="ttname"><a href="classrecipe.html#a5f1fa30e49785a8c16c4f5951d039afb">recipe::ident</a></div><div class="ttdeci">const recipe_id &amp; ident() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00077">recipe.h:77</a></div></div>
<div class="ttc" id="aclassrecipe_html_aa0ccdbf0781d345bd97abe1ff4781018"><div class="ttname"><a href="classrecipe.html#aa0ccdbf0781d345bd97abe1ff4781018">recipe::disassembly_batch_size</a></div><div class="ttdeci">int disassembly_batch_size() const</div><div class="ttdoc">Returns number of charges of the item needed for single disassembly.</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l00864">recipe.cpp:864</a></div></div>
<div class="ttc" id="aclassrecipe_html_aca293605940df4e5c431fa8ba5009074"><div class="ttname"><a href="classrecipe.html#aca293605940df4e5c431fa8ba5009074">recipe::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag_name) const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l00095">recipe.cpp:95</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00063">achievement.cpp:63</a></div></div>
<div class="ttc" id="acrafting_8cpp_html_a5d187ba748889447c68918465e3b4300"><div class="ttname"><a href="crafting_8cpp.html#a5d187ba748889447c68918465e3b4300">flag_FULL_MAGAZINE</a></div><div class="ttdeci">static const std::string flag_FULL_MAGAZINE(&quot;FULL_MAGAZINE&quot;)</div></div>
<div class="ttc" id="acrafting_8cpp_html_a614c2056b7d8fcc6773e3441a3feacc3"><div class="ttname"><a href="crafting_8cpp.html#a614c2056b7d8fcc6773e3441a3feacc3">flag_FIT</a></div><div class="ttdeci">static const std::string flag_FIT(&quot;FIT&quot;)</div></div>
<div class="ttc" id="acrafting_8cpp_html_a64975cca8f4337f6e791f11ba44c0bfd"><div class="ttname"><a href="crafting_8cpp.html#a64975cca8f4337f6e791f11ba44c0bfd">remove_ammo</a></div><div class="ttdeci">void remove_ammo(std::list&lt; item &gt; &amp;dis_items, Character &amp;who)</div><div class="ttdoc">Removes any (removable) ammo from each item and stores it in character's inventory.</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02262">crafting.cpp:2262</a></div></div>
<div class="ttc" id="acrafting_8cpp_html_aa00701e4370166ae577bf173fd05672f"><div class="ttname"><a href="crafting_8cpp.html#aa00701e4370166ae577bf173fd05672f">flag_UNCRAFT_LIQUIDS_CONTAINED</a></div><div class="ttdeci">static const std::string flag_UNCRAFT_LIQUIDS_CONTAINED(&quot;UNCRAFT_LIQUIDS_CONTAINED&quot;)</div></div>
<div class="ttc" id="acrafting_8cpp_html_ad66d76d379c8d5dcdbb69ceac398607b"><div class="ttname"><a href="crafting_8cpp.html#ad66d76d379c8d5dcdbb69ceac398607b">flag_VARSIZE</a></div><div class="ttdeci">static const std::string flag_VARSIZE(&quot;VARSIZE&quot;)</div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00260">enums.h:260</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00265">enums.h:265</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00261">enums.h:261</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a></div><div class="ttdeci">@ LIQUID</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00175">enums.h:175</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a5deb1b5f4e652e223349f90b8b190ff5"><div class="ttname"><a href="iuse_8cpp.html#a5deb1b5f4e652e223349f90b8b190ff5">remove_radio_mod</a></div><div class="ttdeci">void remove_radio_mod(item &amp;it, player &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00423">iuse.cpp:423</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a188caae18b60b66f9f44214c7e28ac1f"><div class="ttname"><a href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a></div><div class="ttdeci">constexpr double a</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01030">magic.cpp:1030</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00910">messages.cpp:910</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00036">calendar.cpp:36</a></div></div>
<div class="ttc" id="anamespaceliquid__handler_html_abdd687d6de27a042558f41fd9f7a0aba"><div class="ttname"><a href="namespaceliquid__handler.html#abdd687d6de27a042558f41fd9f7a0aba">liquid_handler::handle_all_liquid</a></div><div class="ttdeci">void handle_all_liquid(item liquid, const int radius)</div><div class="ttdoc">Consume / handle all of the liquid.</div><div class="ttdef"><b>Definition:</b> <a href="handle__liquid_8cpp_source.html#l00095">handle_liquid.cpp:95</a></div></div>
<div class="ttc" id="arng_8cpp_html_a0c88381d6334a2fbaa726c53f5cf9bb9"><div class="ttname"><a href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a></div><div class="ttdeci">double rng_float(double lo, double hi)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00028">rng.cpp:28</a></div></div>
<div class="ttc" id="arng_8cpp_html_a7ba03e7147e43d808dc29c54bce9e57f"><div class="ttname"><a href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a></div><div class="ttdeci">int dice(int number, int sides)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00085">rng.cpp:85</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00065">rng.cpp:65</a></div></div>
<div class="ttc" id="astructitem__comp_html"><div class="ttname"><a href="structitem__comp.html">item_comp</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00116">requirements.h:116</a></div></div>
<div class="ttc" id="astructiuse__location_html_a29aec7600a82f71e49beea6f65d933bf"><div class="ttname"><a href="structiuse__location.html#a29aec7600a82f71e49beea6f65d933bf">iuse_location::count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> <a href="item__handling__util_8h_source.html#l00018">item_handling_util.h:18</a></div></div>
<div class="ttc" id="astructiuse__location_html_a7d87586728cb293f24a5be9a102e8823"><div class="ttname"><a href="structiuse__location.html#a7d87586728cb293f24a5be9a102e8823">iuse_location::loc</a></div><div class="ttdeci">item_location loc</div><div class="ttdef"><b>Definition:</b> <a href="item__handling__util_8h_source.html#l00017">item_handling_util.h:17</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="magic_8cpp_source.html#l01030">a</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l07426">item::ammo_capacity()</a>, <a class="el" href="item_8cpp_source.html#l07613">item::ammo_default()</a>, <a class="el" href="item_8cpp_source.html#l00593">item::ammo_set()</a>, <a class="el" href="creature_8h_source.html#l00122">Creature::as_player()</a>, <a class="el" href="character_8cpp_source.html#l10611">Character::can_learn_by_disassembly()</a>, <a class="el" href="item_8h_source.html#l02199">item::charges</a>, <a class="el" href="item_8h_source.html#l02162">item::components</a>, <a class="el" href="crafting_8cpp_source.html#l01845">player::consume_tools()</a>, <a class="el" href="item__handling__util_8h_source.html#l00018">iuse_location::count</a>, <a class="el" href="requirements_8h_source.html#l00059">component::count</a>, <a class="el" href="item_8cpp_source.html#l06030">item::count_by_charges()</a>, <a class="el" href="item_8cpp_source.html#l06040">item::craft_has_charges()</a>, <a class="el" href="item_8cpp_source.html#l00704">item::damage_level()</a>, <a class="el" href="activity__handlers_8h.html#a3931cba30166834e066ef80c02d84611a38dd6f2bec3ea3b3cde92db954842bdb">deliberate</a>, <a class="el" href="rng_8cpp_source.html#l00085">dice()</a>, <a class="el" href="recipe_8h_source.html#l00062">recipe::difficulty</a>, <a class="el" href="recipe_8cpp_source.html#l00864">recipe::disassembly_batch_size()</a>, <a class="el" href="recipe_8h_source.html#l00096">recipe::disassembly_requirements()</a>, <a class="el" href="crafting_8cpp.html#a614c2056b7d8fcc6773e3441a3feacc3">flag_FIT()</a>, <a class="el" href="crafting_8cpp.html#a5d187ba748889447c68918465e3b4300">flag_FULL_MAGAZINE()</a>, <a class="el" href="crafting_8cpp.html#aa00701e4370166ae577bf173fd05672f">flag_UNCRAFT_LIQUIDS_CONTAINED()</a>, <a class="el" href="crafting_8cpp.html#ad66d76d379c8d5dcdbb69ceac398607b">flag_VARSIZE()</a>, <a class="el" href="character_8cpp_source.html#l03351">Character::get_skill_level()</a>, <a class="el" href="recipe__dictionary_8cpp_source.html#l00075">recipe_dictionary::get_uncraft()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00095">liquid_handler::handle_all_liquid()</a>, <a class="el" href="item_8cpp_source.html#l05328">item::has_flag()</a>, <a class="el" href="recipe_8cpp_source.html#l00095">recipe::has_flag()</a>, <a class="el" href="recipe_8h_source.html#l00077">recipe::ident()</a>, <a class="el" href="item_8cpp_source.html#l00844">item::in_its_container()</a>, <a class="el" href="character_8h_source.html#l00266">Character::int_cur</a>, <a class="el" href="item_8cpp_source.html#l10010">item::is_filthy()</a>, <a class="el" href="item_8cpp_source.html#l06582">item::is_magazine()</a>, <a class="el" href="character_8cpp_source.html#l10598">Character::knows_recipe()</a>, <a class="el" href="recipe_8h_source.html#l00113">recipe::learn_by_disassembly</a>, <a class="el" href="character_8cpp_source.html#l10603">Character::learn_recipe()</a>, <a class="el" href="enums_8h_source.html#l00175">LIQUID</a>, <a class="el" href="item__handling__util_8h_source.html#l00017">iuse_location::loc</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="enums_8h_source.html#l00260">m_good</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="item_8cpp_source.html#l06438">item::made_of()</a>, <a class="el" href="achievement_8cpp_source.html#l00063">string_id&lt; T &gt;::obj()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="cached__options_8cpp_source.html#l00019">PICKUP_RANGE</a>, <a class="el" href="character_8cpp_source.html#l03417">Character::practice()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00394">put_into_vehicle_or_drop()</a>, <a class="el" href="crafting_8cpp_source.html#l02262">remove_ammo()</a>, <a class="el" href="item__location_8cpp_source.html#l00758">item_location::remove_item()</a>, <a class="el" href="iuse_8cpp_source.html#l00423">remove_radio_mod()</a>, <a class="el" href="rng_8cpp_source.html#l00028">rng_float()</a>, <a class="el" href="item_8cpp_source.html#l05357">item::set_flag()</a>, <a class="el" href="recipe_8h_source.html#l00109">recipe::skill_used</a>, <a class="el" href="item_8cpp_source.html#l04574">item::tname()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="requirements_8h_source.html#l00058">component::type</a>, and <a class="el" href="item_8cpp_source.html#l08374">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00613">disassemble_activity_actor::finish()</a>.</p>

</div>
</div>
<a id="a6f70f042817b423f427532947f6bf4dd" name="a6f70f042817b423f427532947f6bf4dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f70f042817b423f427532947f6bf4dd">&#9670;&nbsp;</a></span>disassemble() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool crafting::disassemble </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompt for an item to disassemble, then start activity. </p>

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02065">2065</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>{</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>    <a class="code hl_class" href="classitem__location.html">item_location</a> target = <a class="code hl_function" href="namespacegame__menus_1_1inv.html#a0de2b203e47ecc2c48ca3efbe7c70ffb">game_menus::inv::disassemble</a>( you );</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="crafting_8cpp.html#a947980450761ae0e0c1282c03d57b60d">prompt_disassemble_single</a>( you, target, <span class="keyword">false</span> );</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>}</div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00022">item_location.h:23</a></div></div>
<div class="ttc" id="acrafting_8cpp_html_a947980450761ae0e0c1282c03d57b60d"><div class="ttname"><a href="crafting_8cpp.html#a947980450761ae0e0c1282c03d57b60d">prompt_disassemble_single</a></div><div class="ttdeci">static bool prompt_disassemble_single(avatar &amp;you, item_location target, bool interactive)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02041">crafting.cpp:2041</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a0de2b203e47ecc2c48ca3efbe7c70ffb"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a0de2b203e47ecc2c48ca3efbe7c70ffb">game_menus::inv::disassemble</a></div><div class="ttdeci">item_location disassemble(player &amp;p)</div><div class="ttdoc">Item disassembling menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l00500">game_inventory.cpp:500</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game__inventory_8cpp_source.html#l00500">game_menus::inv::disassemble()</a>, and <a class="el" href="crafting_8cpp_source.html#l02041">prompt_disassemble_single()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l08316">game::butcher()</a>, <a class="el" href="iuse_8cpp_source.html#l09558">iuse::disassemble()</a>, <a class="el" href="handle__action_8cpp_source.html#l01527">game::handle_action()</a>, and <a class="el" href="examine__item__menu_8cpp_source.html#l00032">examine_item_menu::run()</a>.</p>

</div>
</div>
<a id="a6e0fbc3f9cae7380bb61c26f60dbd821" name="a6e0fbc3f9cae7380bb61c26f60dbd821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e0fbc3f9cae7380bb61c26f60dbd821">&#9670;&nbsp;</a></span>disassemble() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool crafting::disassemble </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem__location.html">item_location</a>&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompt to disassemble given item, then start activity. </p>

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02071">2071</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>{</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="crafting_8cpp.html#a947980450761ae0e0c1282c03d57b60d">prompt_disassemble_single</a>( you, target, <span class="keyword">true</span> );</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="crafting_8cpp_source.html#l02041">prompt_disassemble_single()</a>.</p>

</div>
</div>
<a id="adb3b3e5acddfb384496ef6157d17c3c6" name="adb3b3e5acddfb384496ef6157d17c3c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb3b3e5acddfb384496ef6157d17c3c6">&#9670;&nbsp;</a></span>disassemble_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool crafting::disassemble_all </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classavatar.html">avatar</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>recursively</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start an activity to disassemble all items in avatar's square. </p>

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02076">2076</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>{</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>    std::vector&lt;iuse_location&gt; targets;</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span> </div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> pos = you.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>();</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span> </div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> &amp;itm : <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().i_at( pos ) ) {</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>        <a class="code hl_struct" href="structdisass__prompt__result.html">disass_prompt_result</a> res = <a class="code hl_function" href="crafting_8cpp.html#a4f5ff686ffa5ec735f3c33caed08db7c">prompt_disassemble_in_seq</a>( you, itm, <span class="keyword">false</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>        <span class="keywordflow">if</span>( res.<a class="code hl_variable" href="structdisass__prompt__result.html#ae225e21c79185919375281994fc72687">success</a> ) {</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>            <a class="code hl_struct" href="structiuse__location.html">iuse_location</a> loc;</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>            loc.<a class="code hl_variable" href="structiuse__location.html#a7d87586728cb293f24a5be9a102e8823">loc</a> = <a class="code hl_class" href="classitem__location.html">item_location</a>( <a class="code hl_class" href="classmap__cursor.html">map_cursor</a>( pos ), &amp;itm );</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>            loc.<a class="code hl_variable" href="structiuse__location.html#a29aec7600a82f71e49beea6f65d933bf">count</a> = res.<a class="code hl_variable" href="structdisass__prompt__result.html#a9a292c35d1c5131ded25356b59d0b15f">batches</a> ? *res.<a class="code hl_variable" href="structdisass__prompt__result.html#a9a292c35d1c5131ded25356b59d0b15f">batches</a> : 1;</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>            targets.push_back( <a class="code hl_function" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">std::move</a>( loc ) );</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>        }</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>    }</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span> </div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>    <span class="keywordflow">if</span>( !targets.empty() ) {</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>        <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> pos_abs( <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().getabs( you.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) );</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span> </div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>        you.<a class="code hl_function" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code hl_class" href="classdisassemble__activity__actor.html">disassemble_activity_actor</a>( <a class="code hl_function" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">std::move</a>( targets ), pos_abs, recursively ) );</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>    }</div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>}</div>
<div class="ttc" id="aclassCharacter_html_ad24859164517ed6e392e21df69527199"><div class="ttname"><a href="classCharacter.html#ad24859164517ed6e392e21df69527199">Character::pos</a></div><div class="ttdeci">const tripoint &amp; pos() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00601">character.cpp:601</a></div></div>
<div class="ttc" id="aclassCharacter_html_af7d50915d362a56eeff40bc6b392326d"><div class="ttname"><a href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">Character::assign_activity</a></div><div class="ttdeci">void assign_activity(const activity_id &amp;type, int moves=calendar::INDEFINITELY_LONG, int index=-1, int pos=INT_MIN, const std::string &amp;name=&quot;&quot;)</div><div class="ttdoc">Legacy activity assignment, does not work for any activites using the new activity_actor class and ma...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09193">character.cpp:9193</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::abs, coords::ms &gt;</a></div></div>
<div class="ttc" id="aclassdisassemble__activity__actor_html"><div class="ttname"><a href="classdisassemble__activity__actor.html">disassemble_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00233">activity_actor_definitions.h:234</a></div></div>
<div class="ttc" id="aclassmap__cursor_html"><div class="ttname"><a href="classmap__cursor.html">map_cursor</a></div><div class="ttdef"><b>Definition:</b> <a href="map__selector_8h_source.html#l00010">map_selector.h:11</a></div></div>
<div class="ttc" id="acrafting_8cpp_html_a4f5ff686ffa5ec735f3c33caed08db7c"><div class="ttname"><a href="crafting_8cpp.html#a4f5ff686ffa5ec735f3c33caed08db7c">prompt_disassemble_in_seq</a></div><div class="ttdeci">static disass_prompt_result prompt_disassemble_in_seq(avatar &amp;you, const item &amp;obj, bool interactive, bool autoselect_max)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01958">crafting.cpp:1958</a></div></div>
<div class="ttc" id="amap_8cpp_html_acb0b34be6e497bdd2f9f40ae6929d562"><div class="ttname"><a href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00147">map.cpp:147</a></div></div>
<div class="ttc" id="anamespaceavatar__action_html_a76ba74774376a08222b8cdcce08f7304"><div class="ttname"><a href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">avatar_action::move</a></div><div class="ttdeci">bool move(avatar &amp;you, map &amp;m, const tripoint &amp;d)</div><div class="ttdef"><b>Definition:</b> <a href="avatar__action_8cpp_source.html#l00096">avatar_action.cpp:96</a></div></div>
<div class="ttc" id="astructdisass__prompt__result_html"><div class="ttname"><a href="structdisass__prompt__result.html">disass_prompt_result</a></div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01952">crafting.cpp:1952</a></div></div>
<div class="ttc" id="astructdisass__prompt__result_html_a9a292c35d1c5131ded25356b59d0b15f"><div class="ttname"><a href="structdisass__prompt__result.html#a9a292c35d1c5131ded25356b59d0b15f">disass_prompt_result::batches</a></div><div class="ttdeci">std::optional&lt; int &gt; batches</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01954">crafting.cpp:1954</a></div></div>
<div class="ttc" id="astructdisass__prompt__result_html_ae225e21c79185919375281994fc72687"><div class="ttname"><a href="structdisass__prompt__result.html#ae225e21c79185919375281994fc72687">disass_prompt_result::success</a></div><div class="ttdeci">bool success</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01953">crafting.cpp:1953</a></div></div>
<div class="ttc" id="astructiuse__location_html"><div class="ttname"><a href="structiuse__location.html">iuse_location</a></div><div class="ttdef"><b>Definition:</b> <a href="item__handling__util_8h_source.html#l00012">item_handling_util.h:12</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00133">point.h:133</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l09193">Character::assign_activity()</a>, <a class="el" href="crafting_8cpp_source.html#l01954">disass_prompt_result::batches</a>, <a class="el" href="item__handling__util_8h_source.html#l00018">iuse_location::count</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="item__handling__util_8h_source.html#l00017">iuse_location::loc</a>, <a class="el" href="avatar__action_8cpp_source.html#l00096">avatar_action::move()</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="crafting_8cpp_source.html#l01958">prompt_disassemble_in_seq()</a>, and <a class="el" href="crafting_8cpp_source.html#l01953">disass_prompt_result::success</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l08316">game::butcher()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l00613">disassemble_activity_actor::finish()</a>.</p>

</div>
</div>
<a id="a5844edf7e04b20037d08a1215cf62236" name="a5844edf7e04b20037d08a1215cf62236"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5844edf7e04b20037d08a1215cf62236">&#9670;&nbsp;</a></span>find_tool_component()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::vector&lt; <a class="el" href="structavail__tool__comp.html">avail_tool_comp</a> &gt; crafting::find_tool_component </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>player_with_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>tools</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classinventory.html">inventory</a> &amp;&#160;</td>
          <td class="paramname"><em>map_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131">cost_adjustment</a>&#160;</td>
          <td class="paramname"><em>charge_mod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l01599">1599</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>{</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>    std::vector&lt;avail_tool_comp&gt; available_tools;</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span> </div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>    <span class="keyword">auto</span> calc_charges = [&amp;]( <span class="keyword">const</span> <a class="code hl_struct" href="structtool__comp.html">tool_comp</a> &amp; t ) {</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> full_craft_charges = std::max( 1, t.count * batch );</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>        <span class="keywordflow">switch</span>( charge_mod ) {</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131a334c4a4c42fdb79d7ebc3e73b517e6f8">cost_adjustment::none</a>:</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>                <span class="keywordflow">return</span> std::make_pair( <a class="code hl_function" href="namespacecrafting.html#a66f83eefe72e71cf1a8831fde5afe0aa">charges_for_complete</a>( full_craft_charges ),</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>                                       <a class="code hl_function" href="namespacecrafting.html#a66f83eefe72e71cf1a8831fde5afe0aa">charges_for_complete</a>( full_craft_charges ) );</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131ac09b0863169aa4c63d88adf3644aef93">cost_adjustment::start_only</a>:</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>                <span class="keywordflow">return</span> std::make_pair( <a class="code hl_function" href="namespacecrafting.html#a6bd0760f7e4a7e545662d263469fb277">charges_for_starting</a>( full_craft_charges ),</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>                                       <a class="code hl_function" href="namespacecrafting.html#a66f83eefe72e71cf1a8831fde5afe0aa">charges_for_complete</a>( full_craft_charges ) );</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131abe578bdd9326ee6b1aa8d5672dd4c64f">cost_adjustment::continue_only</a>:</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>                <span class="keywordflow">return</span> std::make_pair( <a class="code hl_function" href="namespacecrafting.html#a653e8b3027cf7e8256c46600bdea2697">charges_for_continuing</a>( full_craft_charges ),</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>                                       <a class="code hl_function" href="namespacecrafting.html#a66f83eefe72e71cf1a8831fde5afe0aa">charges_for_complete</a>( full_craft_charges ) );</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>        }</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span> </div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Invalid tool_charge_mod&quot;</span> );</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>        <span class="keywordflow">return</span> std::make_pair( INT_MAX, INT_MAX );</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>    };</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span> </div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>    <span class="keywordtype">bool</span> found_nocharge = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>    <span class="comment">// Use charges of any tools that require charges used</span></div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = tools.begin(); it != tools.end() &amp;&amp; !found_nocharge; ++it ) {</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>        <a class="code hl_class" href="classstring__id.html">itype_id</a> <a class="code hl_enumeration" href="namespacedetail.html#ad46d232fb6116de4dac0c43dbde8e7a9">type</a> = it-&gt;type;</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>        <span class="keywordflow">if</span>( it-&gt;count &gt; 0 ) {</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>            <span class="keyword">const</span> std::pair&lt;int, int&gt; &amp;expected_count = calc_charges( *it );</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = expected_count.first;</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> ideal = expected_count.second;</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>            <span class="keywordflow">if</span>( player_with_inv ) {</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>                <span class="keywordflow">if</span>( player_with_inv-&gt;<a class="code hl_function" href="classCharacter.html#a9bff3208a5e121c4e3a71b81b378e4e7">has_charges</a>( type, <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> ) ) {</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>                    <span class="keywordtype">int</span> total_charges = player_with_inv-&gt;<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( type );</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>                    <a class="code hl_struct" href="structcomp__selection.html">comp_selection&lt;tool_comp&gt;</a> sel( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a3d96eab6e691ab4aea5cdad7a15dd08f">use_from_player</a>, *it );</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>                    available_tools.emplace_back( sel, total_charges, ideal );</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>                }</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>            }</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>            <span class="keywordflow">if</span>( map_inv.<a class="code hl_function" href="classinventory.html#a166c107e18ca4eea3ca2f37be350796c">has_charges</a>( type, <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> ) ) {</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>                <span class="keywordtype">int</span> total_charges = map_inv.<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( type );</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>                <a class="code hl_struct" href="structcomp__selection.html">comp_selection&lt;tool_comp&gt;</a> sel( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726ae0cfa7503d9e51c0f908fe4f210a56cb">use_from_map</a>, *it );</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>                available_tools.emplace_back( sel, total_charges, ideal );</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>            }</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( player_with_inv &amp;&amp; player_with_inv-&gt;<a class="code hl_function" href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">has_amount</a>( type, 1 ) )</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>                   || map_inv.<a class="code hl_function" href="classinventory.html#a20755b405c4369fe85313cfdee366bff">has_tools</a>( type, 1 ) ) {</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>            <a class="code hl_struct" href="structcomp__selection.html">comp_selection&lt;tool_comp&gt;</a> sel( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a87a06975828a650a938662676287691c">use_from_none</a>, *it );</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>            available_tools.emplace_back( sel, 0, 0 );</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>        }</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>    }</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span> </div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>    std::sort( available_tools.begin(), available_tools.end(),</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>    []( <span class="keyword">const</span> <a class="code hl_struct" href="structavail__tool__comp.html">avail_tool_comp</a> &amp; lhs, <span class="keyword">const</span> <a class="code hl_struct" href="structavail__tool__comp.html">avail_tool_comp</a> &amp; rhs ) {</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>        if( lhs.comp.use_from == use_from_none &amp;&amp; rhs.comp.use_from != use_from_none ) {</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>            return true;</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>        }</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>        <span class="keywordflow">if</span>( rhs.<a class="code hl_variable" href="structavail__tool__comp.html#a18cc796cf9362c0e525c11428be471b3">comp</a>.use_from == <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a87a06975828a650a938662676287691c">use_from_none</a> ) {</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>            return false;</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>        }</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>        <span class="keywordflow">if</span>( lhs.<a class="code hl_variable" href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">charges</a> &gt;= lhs.<a class="code hl_variable" href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">ideal</a> &amp;&amp; rhs.<a class="code hl_variable" href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">charges</a> &lt; rhs.<a class="code hl_variable" href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">ideal</a> ) {</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>            return true;</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>        }</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>        <span class="keywordflow">if</span>( lhs.<a class="code hl_variable" href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">charges</a> &lt; lhs.<a class="code hl_variable" href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">ideal</a> &amp;&amp; rhs.<a class="code hl_variable" href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">charges</a> &gt;= rhs.<a class="code hl_variable" href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">ideal</a> ) {</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>            return false;</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>        }</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>        <span class="comment">// We want &quot;bigger&quot; tools first because those are likely to be vehicle mounted</span></div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( lhs.<a class="code hl_variable" href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">ideal</a> ) / lhs.<a class="code hl_variable" href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">charges</a> &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span></div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>               ( rhs.<a class="code hl_variable" href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">ideal</a> ) / rhs.<a class="code hl_variable" href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">charges</a>;</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>    } );</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>    <span class="keywordflow">return</span> available_tools;</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>}</div>
<div class="ttc" id="aclassCharacter_html_a9bff3208a5e121c4e3a71b81b378e4e7"><div class="ttname"><a href="classCharacter.html#a9bff3208a5e121c4e3a71b81b378e4e7">Character::has_charges</a></div><div class="ttdeci">bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09605">character.cpp:9605</a></div></div>
<div class="ttc" id="aclassinventory_html_a166c107e18ca4eea3ca2f37be350796c"><div class="ttname"><a href="classinventory.html#a166c107e18ca4eea3ca2f37be350796c">inventory::has_charges</a></div><div class="ttdeci">bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00893">inventory.cpp:893</a></div></div>
<div class="ttc" id="aclassinventory_html_a20755b405c4369fe85313cfdee366bff"><div class="ttname"><a href="classinventory.html#a20755b405c4369fe85313cfdee366bff">inventory::has_tools</a></div><div class="ttdeci">bool has_tools(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00881">inventory.cpp:881</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; itype &gt;</a></div></div>
<div class="ttc" id="aclassvisitable_html_a517e20b6f6c13b8316d5cce8e310b871"><div class="ttname"><a href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">visitable::charges_of</a></div><div class="ttdeci">int charges_of(const itype_id &amp;what, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, std::function&lt; void(int)&gt; visitor=nullptr) const</div><div class="ttdoc">Count maximum available charges from this instance and any contained items.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00946">visitable.cpp:946</a></div></div>
<div class="ttc" id="aclassvisitable_html_ac50bc4422d4636a70a97d41787f22d0d"><div class="ttname"><a href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">visitable::has_amount</a></div><div class="ttdeci">bool has_amount(const itype_id &amp;what, int qty, bool pseudo=true, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdoc">Check instance provides at least qty of an item (.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l01111">visitable.cpp:1111</a></div></div>
<div class="ttc" id="acraft__command_8h_html_a5684f219761d78b4f98e7b2869dd1726a3d96eab6e691ab4aea5cdad7a15dd08f"><div class="ttname"><a href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a3d96eab6e691ab4aea5cdad7a15dd08f">use_from_player</a></div><div class="ttdeci">@ use_from_player</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00026">craft_command.h:26</a></div></div>
<div class="ttc" id="acraft__command_8h_html_a5684f219761d78b4f98e7b2869dd1726a87a06975828a650a938662676287691c"><div class="ttname"><a href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a87a06975828a650a938662676287691c">use_from_none</a></div><div class="ttdeci">@ use_from_none</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00024">craft_command.h:24</a></div></div>
<div class="ttc" id="acraft__command_8h_html_a5684f219761d78b4f98e7b2869dd1726ae0cfa7503d9e51c0f908fe4f210a56cb"><div class="ttname"><a href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726ae0cfa7503d9e51c0f908fe4f210a56cb">use_from_map</a></div><div class="ttdeci">@ use_from_map</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00025">craft_command.h:25</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
<div class="ttc" id="anamespacecrafting_html_a653e8b3027cf7e8256c46600bdea2697"><div class="ttname"><a href="namespacecrafting.html#a653e8b3027cf7e8256c46600bdea2697">crafting::charges_for_continuing</a></div><div class="ttdeci">int charges_for_continuing(int full_charges)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02402">crafting.cpp:2402</a></div></div>
<div class="ttc" id="anamespacecrafting_html_a66f83eefe72e71cf1a8831fde5afe0aa"><div class="ttname"><a href="namespacecrafting.html#a66f83eefe72e71cf1a8831fde5afe0aa">crafting::charges_for_complete</a></div><div class="ttdeci">int charges_for_complete(int full_charges)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02394">crafting.cpp:2394</a></div></div>
<div class="ttc" id="anamespacecrafting_html_a6bd0760f7e4a7e545662d263469fb277"><div class="ttname"><a href="namespacecrafting.html#a6bd0760f7e4a7e545662d263469fb277">crafting::charges_for_starting</a></div><div class="ttdeci">int charges_for_starting(int full_charges)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02398">crafting.cpp:2398</a></div></div>
<div class="ttc" id="anamespacedetail_html_ab2f84fb3de26acdac3fc63a2dce5ea5e"><div class="ttname"><a href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">detail::count</a></div><div class="ttdeci">constexpr size_t count()</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__core_8h_source.html#l01073">fmtlib_core.h:1073</a></div></div>
<div class="ttc" id="anamespacedetail_html_ad46d232fb6116de4dac0c43dbde8e7a9"><div class="ttname"><a href="namespacedetail.html#ad46d232fb6116de4dac0c43dbde8e7a9">detail::type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__core_8h_source.html#l01087">fmtlib_core.h:1087</a></div></div>
<div class="ttc" id="arequirements_8h_html_a29bc522104aee22ea5cf6e7d3c629131a334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131a334c4a4c42fdb79d7ebc3e73b517e6f8">cost_adjustment::none</a></div><div class="ttdeci">@ none</div></div>
<div class="ttc" id="arequirements_8h_html_a29bc522104aee22ea5cf6e7d3c629131abe578bdd9326ee6b1aa8d5672dd4c64f"><div class="ttname"><a href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131abe578bdd9326ee6b1aa8d5672dd4c64f">cost_adjustment::continue_only</a></div><div class="ttdeci">@ continue_only</div></div>
<div class="ttc" id="arequirements_8h_html_a29bc522104aee22ea5cf6e7d3c629131ac09b0863169aa4c63d88adf3644aef93"><div class="ttname"><a href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131ac09b0863169aa4c63d88adf3644aef93">cost_adjustment::start_only</a></div><div class="ttdeci">@ start_only</div></div>
<div class="ttc" id="astructavail__tool__comp_html"><div class="ttname"><a href="structavail__tool__comp.html">avail_tool_comp</a></div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01583">crafting.cpp:1583</a></div></div>
<div class="ttc" id="astructavail__tool__comp_html_a18cc796cf9362c0e525c11428be471b3"><div class="ttname"><a href="structavail__tool__comp.html#a18cc796cf9362c0e525c11428be471b3">avail_tool_comp::comp</a></div><div class="ttdeci">comp_selection&lt; tool_comp &gt; comp</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01590">crafting.cpp:1590</a></div></div>
<div class="ttc" id="astructavail__tool__comp_html_a9b1f865149f2fa289a0c32764639ce86"><div class="ttname"><a href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">avail_tool_comp::ideal</a></div><div class="ttdeci">int ideal</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01592">crafting.cpp:1592</a></div></div>
<div class="ttc" id="astructavail__tool__comp_html_afa9721976928092787823a9e2d199a55"><div class="ttname"><a href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">avail_tool_comp::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01591">crafting.cpp:1591</a></div></div>
<div class="ttc" id="astructcomp__selection_html"><div class="ttname"><a href="structcomp__selection.html">comp_selection</a></div><div class="ttdoc">Struct that represents a selection of a component for crafting.</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00041">craft_command.h:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="crafting_8cpp_source.html#l01591">avail_tool_comp::charges</a>, <a class="el" href="crafting_8cpp_source.html#l02394">charges_for_complete()</a>, <a class="el" href="crafting_8cpp_source.html#l02402">charges_for_continuing()</a>, <a class="el" href="crafting_8cpp_source.html#l02398">charges_for_starting()</a>, <a class="el" href="visitable_8cpp_source.html#l00946">visitable&lt; T &gt;::charges_of()</a>, <a class="el" href="crafting_8cpp_source.html#l01590">avail_tool_comp::comp</a>, <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131abe578bdd9326ee6b1aa8d5672dd4c64f">continue_only</a>, <a class="el" href="fmtlib__core_8h_source.html#l01073">detail::count()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="visitable_8cpp_source.html#l01111">visitable&lt; T &gt;::has_amount()</a>, <a class="el" href="character_8cpp_source.html#l09605">Character::has_charges()</a>, <a class="el" href="inventory_8cpp_source.html#l00893">inventory::has_charges()</a>, <a class="el" href="inventory_8cpp_source.html#l00881">inventory::has_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l01592">avail_tool_comp::ideal</a>, <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131ac09b0863169aa4c63d88adf3644aef93">start_only</a>, <a class="el" href="craft__command_8h_source.html#l00025">use_from_map</a>, <a class="el" href="craft__command_8h_source.html#l00024">use_from_none</a>, and <a class="el" href="craft__command_8h_source.html#l00026">use_from_player</a>.</p>

<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01733">select_tool_component()</a>.</p>

</div>
</div>
<a id="a0d310e1d954941b884e3806116ae6f7b" name="a0d310e1d954941b884e3806116ae6f7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d310e1d954941b884e3806116ae6f7b">&#9670;&nbsp;</a></span>get_books_for_recipe() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt; crafting::get_books_for_recipe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classinventory.html">inventory</a> &amp;&#160;</td>
          <td class="paramname"><em>crafting_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classrecipe.html">recipe</a> *&#160;</td>
          <td class="paramname"><em>r</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the set of book types in crafting_inv that provide the given recipe. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td><a class="el" href="classCharacter.html">Character</a> whose skills are used to limit the available recipes </td></tr>
    <tr><td class="paramname">crafting_inv</td><td>Current available items that may contain readable books </td></tr>
    <tr><td class="paramname">r</td><td>Recipe to search for in the available books </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02369">2369</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>{</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>    std::set&lt;itype_id&gt; book_ids;</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> skill_level = <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_skill_level( r-&gt;<a class="code hl_variable" href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">skill_used</a> );</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;book_lvl : r-&gt;<a class="code hl_variable" href="classrecipe.html#aaed75f5099b2f8522f3548f8ccba3275">booksets</a> ) {</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>        <a class="code hl_class" href="classstring__id.html">itype_id</a> book_id = book_lvl.first;</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>        <span class="keywordtype">int</span> required_skill_level = book_lvl.second;</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>        <span class="keywordflow">if</span>( skill_level &gt;= required_skill_level &amp;&amp; crafting_inv.<a class="code hl_function" href="classvisitable.html#a0f314e4c2cf16dde306d92b73a60ff9f">amount_of</a>( book_id ) &gt; 0 ) {</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>            book_ids.insert( book_id );</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>        }</div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>    }</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>    <span class="keywordflow">return</span> book_ids;</div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>}</div>
<div class="ttc" id="aclassrecipe_html_aaed75f5099b2f8522f3548f8ccba3275"><div class="ttname"><a href="classrecipe.html#aaed75f5099b2f8522f3548f8ccba3275">recipe::booksets</a></div><div class="ttdeci">std::map&lt; itype_id, int &gt; booksets</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00114">recipe.h:114</a></div></div>
<div class="ttc" id="aclassvisitable_html_a0f314e4c2cf16dde306d92b73a60ff9f"><div class="ttname"><a href="classvisitable.html#a0f314e4c2cf16dde306d92b73a60ff9f">visitable::amount_of</a></div><div class="ttdeci">int amount_of(const itype_id &amp;what, bool pseudo=true, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdoc">Count items matching id including both this instance and any contained items.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l01051">visitable.cpp:1051</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01032">magic.cpp:1032</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="visitable_8cpp_source.html#l01051">visitable&lt; T &gt;::amount_of()</a>, <a class="el" href="recipe_8h_source.html#l00114">recipe::booksets</a>, <a class="el" href="magic_8cpp_source.html#l01032">c</a>, and <a class="el" href="recipe_8h_source.html#l00109">recipe::skill_used</a>.</p>

<p class="reference">Referenced by <a class="el" href="crafting__gui_8cpp_source.html#l00163">select_crafting_recipe()</a>.</p>

</div>
</div>
<a id="a22e3c95d08749d4a4a07b9aaf64db9e8" name="a22e3c95d08749d4a4a07b9aaf64db9e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22e3c95d08749d4a4a07b9aaf64db9e8">&#9670;&nbsp;</a></span>get_books_for_recipe() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt; crafting::get_books_for_recipe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classrecipe.html">recipe</a> *&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the set of book types that provide the given recipe. </p>

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02384">2384</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>{</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>    std::set&lt;itype_id&gt; book_ids;</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>    <a class="code hl_function" href="namespaceiexamine.html#ab9103bcb0e9cb4755b445e5395a0a62f">std::transform</a>( r-&gt;<a class="code hl_variable" href="classrecipe.html#aaed75f5099b2f8522f3548f8ccba3275">booksets</a>.begin(), r-&gt;<a class="code hl_variable" href="classrecipe.html#aaed75f5099b2f8522f3548f8ccba3275">booksets</a>.end(), std::inserter( book_ids, book_ids.end() ),</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>    []( <span class="keyword">const</span> std::pair&lt;itype_id, int&gt; &amp;pr ) {</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>        return pr.first;</div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span>    } );</div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>    <span class="keywordflow">return</span> book_ids;</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>}</div>
<div class="ttc" id="anamespaceiexamine_html_ab9103bcb0e9cb4755b445e5395a0a62f"><div class="ttname"><a href="namespaceiexamine.html#ab9103bcb0e9cb4755b445e5395a0a62f">iexamine::transform</a></div><div class="ttdeci">void transform(player &amp;p, const tripoint &amp;pos)</div><div class="ttdoc">Transform the examined object into the object specified by its transforms_into property.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01642">iexamine.cpp:1642</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="recipe_8h_source.html#l00114">recipe::booksets</a>, and <a class="el" href="iexamine_8cpp_source.html#l01642">iexamine::transform()</a>.</p>

</div>
</div>
<a id="af4dc51f886647b644d25e4e7d45de094" name="af4dc51f886647b644d25e4e7d45de094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4dc51f886647b644d25e4e7d45de094">&#9670;&nbsp;</a></span>query_tool_selection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structcomp__selection.html">comp_selection</a>&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; crafting::query_tool_selection </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structavail__tool__comp.html">avail_tool_comp</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>available_tools</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>hotkeys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>can_cancel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_npc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l01672">1672</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>{</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>    <span class="keywordflow">if</span>( available_tools.empty() ) {</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>        <span class="comment">// This SHOULD only happen if cooking with a fire,</span></div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>        <span class="comment">// and the fire goes out.</span></div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>        <span class="keywordflow">return</span> <a class="code hl_struct" href="structcomp__selection.html">comp_selection&lt;tool_comp&gt;</a>( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a87a06975828a650a938662676287691c">use_from_none</a> );</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>    }</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>    <span class="keywordflow">if</span>( available_tools.front().comp.use_from == <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a87a06975828a650a938662676287691c">use_from_none</a> ) {</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>        <span class="comment">// Default to using a tool that doesn&#39;t require charges</span></div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>        <span class="keywordflow">return</span> available_tools.front().comp;</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>    }</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>    <span class="keywordflow">if</span>( available_tools.size() == 1 ) {</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>        <span class="keywordflow">return</span> available_tools.front().comp;</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>    }</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>    <span class="keywordflow">if</span>( is_npc ) {</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>        <span class="keyword">auto</span> iter = std::find_if( available_tools.begin(), available_tools.end(),</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>        []( <span class="keyword">const</span> <a class="code hl_struct" href="structavail__tool__comp.html">avail_tool_comp</a> &amp; tool ) {</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>            return tool.comp.use_from == use_from_player;</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>        } );</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>        <span class="keywordflow">if</span>( iter != available_tools.end() ) {</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>            <span class="keywordflow">return</span> iter-&gt;comp;</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>        }</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>        <span class="keywordflow">return</span> available_tools.front().comp;</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>    }</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span> </div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>    <span class="comment">// Variety of options, list them and pick one</span></div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>    <span class="comment">// Populate the list</span></div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>    <a class="code hl_class" href="classuilist.html">uilist</a> tmenu( hotkeys );</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structavail__tool__comp.html">avail_tool_comp</a> &amp;tool : available_tools ) {</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>        <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp;comp_type = <a class="code hl_enumvalue" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>.comp.comp.type;</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>        <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>.ideal &gt; 1 ) {</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="fmtlib__core_8h.html#a80bdffd1698c1834f081bcf015be1cff">format</a> = <a class="code hl_enumvalue" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>.comp.use_from == <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726ae0cfa7503d9e51c0f908fe4f210a56cb">use_from_map</a></div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>                                 ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%s (%d/%d charges nearby)&quot;</span> )</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>                                 : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%s (%d/%d charges on person)&quot;</span> );</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>            std::string str = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_function" href="fmtlib__core_8h.html#a80bdffd1698c1834f081bcf015be1cff">format</a>,</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>                                             <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( comp_type ), <a class="code hl_enumvalue" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>.ideal,</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>                                             <a class="code hl_enumvalue" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>.charges );</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>            tmenu.addentry( str );</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>            std::string str = <a class="code hl_enumvalue" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>.comp.use_from == <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726ae0cfa7503d9e51c0f908fe4f210a56cb">use_from_map</a></div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>                              ? <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( comp_type ) + <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot; (nearby)&quot;</span> )</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>                              : <a class="code hl_class" href="classitem.html">item</a>::nname( comp_type );</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>            tmenu.addentry( str );</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>        }</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>    }</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span> </div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>    tmenu.allow_cancel = can_cancel;</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span> </div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>    <span class="comment">// Get selection via a popup menu</span></div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>    tmenu.title = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use which tool?&quot;</span> );</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>    tmenu.query();</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span> </div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>    <span class="keywordflow">if</span>( tmenu.ret &lt; 0 || <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( tmenu.ret ) &gt;= available_tools.size() ) {</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>        <span class="keywordflow">return</span> <a class="code hl_struct" href="structcomp__selection.html">comp_selection&lt;tool_comp&gt;</a>( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a> );</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>    }</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span> </div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>    <span class="keywordflow">return</span> available_tools.at( <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( tmenu.ret ) ).comp;</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>}</div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00186">ui.h:187</a></div></div>
<div class="ttc" id="aconsumption_8cpp_html_ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023"><div class="ttname"><a href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">item_consumption_t::tool</a></div><div class="ttdeci">@ tool</div></div>
<div class="ttc" id="acraft__command_8h_html_a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71"><div class="ttname"><a href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a></div><div class="ttdeci">@ cancel</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00028">craft_command.h:28</a></div></div>
<div class="ttc" id="afmtlib__core_8h_html_a80bdffd1698c1834f081bcf015be1cff"><div class="ttname"><a href="fmtlib__core_8h.html#a80bdffd1698c1834f081bcf015be1cff">format</a></div><div class="ttdeci">FMT_INLINE std::basic_string&lt; Char &gt; format(const S &amp;format_str, Args &amp;&amp;... args)</div><div class="ttdoc">\rst Formats arguments and returns the result as a string.</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__core_8h_source.html#l02316">fmtlib_core.h:2316</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00430">string_formatter.h:430</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="ui_8h_source.html#l00362">uilist::allow_cancel</a>, <a class="el" href="craft__command_8h_source.html#l00028">cancel</a>, <a class="el" href="fmtlib__core_8h_source.html#l02316">format()</a>, <a class="el" href="item_8cpp_source.html#l09951">item::nname()</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="string__formatter_8h_source.html#l00430">string_format()</a>, <a class="el" href="ui_8h_source.html#l00319">uilist::title</a>, <a class="el" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>, <a class="el" href="craft__command_8h_source.html#l00025">use_from_map</a>, and <a class="el" href="craft__command_8h_source.html#l00024">use_from_none</a>.</p>

<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01733">select_tool_component()</a>.</p>

</div>
</div>
<a id="a942e117de7c377ddfab0cb29c6584aca" name="a942e117de7c377ddfab0cb29c6584aca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a942e117de7c377ddfab0cb29c6584aca">&#9670;&nbsp;</a></span>select_tool_component() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcomp__selection.html">comp_selection</a>&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; crafting::select_tool_component </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>tools</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classinventory.html">inventory</a> &amp;&#160;</td>
          <td class="paramname"><em>map_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>player_with_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>can_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l01746">1746</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>{</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecrafting.html#a942e117de7c377ddfab0cb29c6584aca">select_tool_component</a>( tools, batch, map_inv, player_with_inv, can_cancel, <a class="code hl_function" href="player_8h.html#a105a2bc78dff70bdbdc683b88b2f5351">DEFAULT_HOTKEYS</a>,</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>                                  <a class="code hl_enumvalue" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131a334c4a4c42fdb79d7ebc3e73b517e6f8">cost_adjustment::none</a> );</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>}</div>
<div class="ttc" id="anamespacecrafting_html_a942e117de7c377ddfab0cb29c6584aca"><div class="ttname"><a href="namespacecrafting.html#a942e117de7c377ddfab0cb29c6584aca">crafting::select_tool_component</a></div><div class="ttdeci">comp_selection&lt; tool_comp &gt; select_tool_component(const std::vector&lt; tool_comp &gt; &amp;tools, int batch, const inventory &amp;map_inv, const Character *player_with_inv, bool can_cancel)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01746">crafting.cpp:1746</a></div></div>
<div class="ttc" id="aplayer_8h_html_a105a2bc78dff70bdbdc683b88b2f5351"><div class="ttname"><a href="player_8h.html#a105a2bc78dff70bdbdc683b88b2f5351">DEFAULT_HOTKEYS</a></div><div class="ttdeci">static const std::string DEFAULT_HOTKEYS(&quot;1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="player_8h.html#a105a2bc78dff70bdbdc683b88b2f5351">DEFAULT_HOTKEYS()</a>, <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, and <a class="el" href="crafting_8cpp_source.html#l01746">select_tool_component()</a>.</p>

<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01746">select_tool_component()</a>.</p>

</div>
</div>
<a id="a07496c9e8d995433ae9debe590894c3e" name="a07496c9e8d995433ae9debe590894c3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07496c9e8d995433ae9debe590894c3e">&#9670;&nbsp;</a></span>select_tool_component() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcomp__selection.html">comp_selection</a>&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; crafting::select_tool_component </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>tools</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classinventory.html">inventory</a> &amp;&#160;</td>
          <td class="paramname"><em>map_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>player_with_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>can_cancel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>hotkeys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131">cost_adjustment</a>&#160;</td>
          <td class="paramname"><em>adjustment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns selected tool component that matches one of the expected ones. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tools</td><td>tools to match </td></tr>
    <tr><td class="paramname">batch</td><td>size of batch to craft, multiplier on expected charges </td></tr>
    <tr><td class="paramname">map_inv</td><td>map inventory to select from </td></tr>
    <tr><td class="paramname">player_with_inv</td><td>if not null, character who provides additional inventory </td></tr>
    <tr><td class="paramname">hotkeys</td><td>hotkeys available to the menu </td></tr>
    <tr><td class="paramname">can_cancel</td><td>can the selection be aborted with no result </td></tr>
    <tr><td class="paramname">adjustment</td><td>affects required charges, see <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131">cost_adjustment</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l01733">1733</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>{</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>    std::vector&lt;avail_tool_comp&gt; <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a> = <a class="code hl_function" href="namespacecrafting.html#a5844edf7e04b20037d08a1215cf62236">find_tool_component</a>( player_with_inv, tools, batch, map_inv,</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>                                           adjustment );</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>    <span class="keywordtype">bool</span> is_npc = player_with_inv ? player_with_inv-&gt;<a class="code hl_function" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() : <span class="keyword">false</span>;</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecrafting.html#af4dc51f886647b644d25e4e7d45de094">query_tool_selection</a>( <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>, hotkeys, can_cancel, is_npc );</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>}</div>
<div class="ttc" id="aclassCreature_html_aed84fe52e1335d48d53f482f8a278c87"><div class="ttname"><a href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">Creature::is_npc</a></div><div class="ttdeci">virtual bool is_npc() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00098">creature.h:98</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_a5a5d41d971342c3e6103b510ccbcb9bb"><div class="ttname"><a href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">PATH_INFO::options</a></div><div class="ttdeci">std::string options()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00230">path_info.cpp:230</a></div></div>
<div class="ttc" id="anamespacecrafting_html_a5844edf7e04b20037d08a1215cf62236"><div class="ttname"><a href="namespacecrafting.html#a5844edf7e04b20037d08a1215cf62236">crafting::find_tool_component</a></div><div class="ttdeci">static std::vector&lt; avail_tool_comp &gt; find_tool_component(const Character *player_with_inv, const std::vector&lt; tool_comp &gt; &amp;tools, int batch, const inventory &amp;map_inv, cost_adjustment charge_mod)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01599">crafting.cpp:1599</a></div></div>
<div class="ttc" id="anamespacecrafting_html_af4dc51f886647b644d25e4e7d45de094"><div class="ttname"><a href="namespacecrafting.html#af4dc51f886647b644d25e4e7d45de094">crafting::query_tool_selection</a></div><div class="ttdeci">static comp_selection&lt; tool_comp &gt; query_tool_selection(const std::vector&lt; avail_tool_comp &gt; &amp;available_tools, const std::string &amp;hotkeys, bool can_cancel, bool is_npc)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01672">crafting.cpp:1672</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="crafting_8cpp_source.html#l01599">find_tool_component()</a>, <a class="el" href="creature_8h_source.html#l00098">Creature::is_npc()</a>, <a class="el" href="path__info_8cpp_source.html#l00230">PATH_INFO::options()</a>, and <a class="el" href="crafting_8cpp_source.html#l01672">query_tool_selection()</a>.</p>

<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01162">player::can_continue_craft()</a>, <a class="el" href="basecamp_8cpp_source.html#l00713">basecamp_action_components::choose_components()</a>, <a class="el" href="crafting_8cpp_source.html#l01872">player::consume_tools()</a>, <a class="el" href="craft__command_8cpp_source.html#l00097">craft_command::execute()</a>, and <a class="el" href="veh__utils_8cpp_source.html#l00109">veh_utils::repair_part()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecrafting.html">crafting</a></li>
    <li class="footer">Generated on Sat Aug 26 2023 10:02:59 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
