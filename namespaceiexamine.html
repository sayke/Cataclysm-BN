<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: iexamine Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespaceiexamine.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">iexamine Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a59e8dc7876a35827a2b062bb9042b49e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a59e8dc7876a35827a2b062bb9042b49e">egg_sack_generic</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp, const <a class="el" href="type__id_8h.html#a039e4134b8c5eb549ca440b962667a2f">mtype_id</a> &amp;montype)</td></tr>
<tr class="memdesc:a59e8dc7876a35827a2b062bb9042b49e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Spawn spiders from a spider egg sack in radius 1 around the egg sack.  <a href="namespaceiexamine.html#a59e8dc7876a35827a2b062bb9042b49e">More...</a><br /></td></tr>
<tr class="separator:a59e8dc7876a35827a2b062bb9042b49e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45c131e909371e96743dfe0a21ba75a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a45c131e909371e96743dfe0a21ba75a6">none</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a45c131e909371e96743dfe0a21ba75a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Nothing player can interact with here.  <a href="namespaceiexamine.html#a45c131e909371e96743dfe0a21ba75a6">More...</a><br /></td></tr>
<tr class="separator:a45c131e909371e96743dfe0a21ba75a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5ce69b72dee988c76accafb9e881709"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ac5ce69b72dee988c76accafb9e881709">gaspump</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:ac5ce69b72dee988c76accafb9e881709"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use "gas pump." Will pump any liquids on tile.  <a href="namespaceiexamine.html#ac5ce69b72dee988c76accafb9e881709">More...</a><br /></td></tr>
<tr class="separator:ac5ce69b72dee988c76accafb9e881709"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d0b06741603f174777560a24c93f193"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5d0b06741603f174777560a24c93f193">atm</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a5d0b06741603f174777560a24c93f193"><td class="mdescLeft">&#160;</td><td class="mdescRight">launches the atm menu class which then handles all the atm interactions.  <a href="namespaceiexamine.html#a5d0b06741603f174777560a24c93f193">More...</a><br /></td></tr>
<tr class="separator:a5d0b06741603f174777560a24c93f193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a360f69227ebd74f2248665b2fe67acd7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a360f69227ebd74f2248665b2fe67acd7">vending</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a360f69227ebd74f2248665b2fe67acd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates vending machine UI and allows players to purchase contained items with a cash card.  <a href="namespaceiexamine.html#a360f69227ebd74f2248665b2fe67acd7">More...</a><br /></td></tr>
<tr class="separator:a360f69227ebd74f2248665b2fe67acd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad884d29edd1296ac800ef9e187ecee5a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ad884d29edd1296ac800ef9e187ecee5a">toilet</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:ad884d29edd1296ac800ef9e187ecee5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">If there's water, allow its usage but add chance of poison.  <a href="namespaceiexamine.html#ad884d29edd1296ac800ef9e187ecee5a">More...</a><br /></td></tr>
<tr class="separator:ad884d29edd1296ac800ef9e187ecee5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4fee7395ae362ec1cdc5cc9c9fa5911"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ab4fee7395ae362ec1cdc5cc9c9fa5911">elevator</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:ab4fee7395ae362ec1cdc5cc9c9fa5911"><td class="mdescLeft">&#160;</td><td class="mdescRight">If underground, move 2 levels up else move 2 levels down.  <a href="namespaceiexamine.html#ab4fee7395ae362ec1cdc5cc9c9fa5911">More...</a><br /></td></tr>
<tr class="separator:ab4fee7395ae362ec1cdc5cc9c9fa5911"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04569e7ba85955feff7bf4488d81d0f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a04569e7ba85955feff7bf4488d81d0f1">nanofab</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a04569e7ba85955feff7bf4488d81d0f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">UI FOR LAB_FINALE NANO FABRICATOR.  <a href="namespaceiexamine.html#a04569e7ba85955feff7bf4488d81d0f1">More...</a><br /></td></tr>
<tr class="separator:a04569e7ba85955feff7bf4488d81d0f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5705f33b9a0cf88d7bb6c4f3c9f648b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5705f33b9a0cf88d7bb6c4f3c9f648b6">controls_gate</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a5705f33b9a0cf88d7bb6c4f3c9f648b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open or close gate.  <a href="namespaceiexamine.html#a5705f33b9a0cf88d7bb6c4f3c9f648b6">More...</a><br /></td></tr>
<tr class="separator:a5705f33b9a0cf88d7bb6c4f3c9f648b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca5e639c2aadfea66eb0a711a60651d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a4ca5e639c2aadfea66eb0a711a60651d">cardreader</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a4ca5e639c2aadfea66eb0a711a60651d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use id/hack reader.  <a href="namespaceiexamine.html#a4ca5e639c2aadfea66eb0a711a60651d">More...</a><br /></td></tr>
<tr class="separator:a4ca5e639c2aadfea66eb0a711a60651d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af85cfc275716670ec072d2b872aedd1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#af85cfc275716670ec072d2b872aedd1c">cardreader_robofac</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:af85cfc275716670ec072d2b872aedd1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0acf94f10f196bbb35fed1c57ca1a9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ab0acf94f10f196bbb35fed1c57ca1a9b">cardreader_foodplace</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ab0acf94f10f196bbb35fed1c57ca1a9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7f9f1abbc5c0c637003e366e85160f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aa7f9f1abbc5c0c637003e366e85160f3">intercom</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:aa7f9f1abbc5c0c637003e366e85160f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62be34f736ae472e1f9735122dd4e4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aa62be34f736ae472e1f9735122dd4e4c">cvdmachine</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:aa62be34f736ae472e1f9735122dd4e4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pick an appropriate item and apply diamond coating if possible.  <a href="namespaceiexamine.html#aa62be34f736ae472e1f9735122dd4e4c">More...</a><br /></td></tr>
<tr class="separator:aa62be34f736ae472e1f9735122dd4e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ea00a0b58ab0716a30e1f15785cdcb8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a7ea00a0b58ab0716a30e1f15785cdcb8">rubble</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a7ea00a0b58ab0716a30e1f15785cdcb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt removal of rubble.  <a href="namespaceiexamine.html#a7ea00a0b58ab0716a30e1f15785cdcb8">More...</a><br /></td></tr>
<tr class="separator:a7ea00a0b58ab0716a30e1f15785cdcb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef1e066e643dd0dc1eb2f2b603c213f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aef1e066e643dd0dc1eb2f2b603c213f9">chainfence</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:aef1e066e643dd0dc1eb2f2b603c213f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt climbing over fence.  <a href="namespaceiexamine.html#aef1e066e643dd0dc1eb2f2b603c213f9">More...</a><br /></td></tr>
<tr class="separator:aef1e066e643dd0dc1eb2f2b603c213f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa36119f7763dbe8190b9103f206fa7b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aa36119f7763dbe8190b9103f206fa7b4">bars</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:aa36119f7763dbe8190b9103f206fa7b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">If player has amorphous trait, slip through the bars.  <a href="namespaceiexamine.html#aa36119f7763dbe8190b9103f206fa7b4">More...</a><br /></td></tr>
<tr class="separator:aa36119f7763dbe8190b9103f206fa7b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5019d45288b6ccbee9d1b57c1ebbb33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ac5019d45288b6ccbee9d1b57c1ebbb33">deployed_furniture</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos)</td></tr>
<tr class="separator:ac5019d45288b6ccbee9d1b57c1ebbb33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a270e1ac53815f40b741ea24b35ae32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a3a270e1ac53815f40b741ea24b35ae32">portable_structure</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a3a270e1ac53815f40b741ea24b35ae32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine structure's type and prompts its removal.  <a href="namespaceiexamine.html#a3a270e1ac53815f40b741ea24b35ae32">More...</a><br /></td></tr>
<tr class="separator:a3a270e1ac53815f40b741ea24b35ae32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9ff11622165ffce0501d4e17e75427f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aa9ff11622165ffce0501d4e17e75427f">pit</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:aa9ff11622165ffce0501d4e17e75427f"><td class="mdescLeft">&#160;</td><td class="mdescRight">If there is a 2x4 around, prompt placing it across pit.  <a href="namespaceiexamine.html#aa9ff11622165ffce0501d4e17e75427f">More...</a><br /></td></tr>
<tr class="separator:aa9ff11622165ffce0501d4e17e75427f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefb50727cba101f7638b0ceda003baa6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aefb50727cba101f7638b0ceda003baa6">pit_covered</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:aefb50727cba101f7638b0ceda003baa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt removing the 2x4 placed across the pit.  <a href="namespaceiexamine.html#aefb50727cba101f7638b0ceda003baa6">More...</a><br /></td></tr>
<tr class="separator:aefb50727cba101f7638b0ceda003baa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5290c180b285413e00fa5a8fd4dca3bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5290c180b285413e00fa5a8fd4dca3bb">slot_machine</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a5290c180b285413e00fa5a8fd4dca3bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loop prompt to bet $10.  <a href="namespaceiexamine.html#a5290c180b285413e00fa5a8fd4dca3bb">More...</a><br /></td></tr>
<tr class="separator:a5290c180b285413e00fa5a8fd4dca3bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7d5f75dd77cb40f322824cb59244bd7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ac7d5f75dd77cb40f322824cb59244bd7">safe</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:ac7d5f75dd77cb40f322824cb59244bd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to crack safe through audio-feedback manual lock manipulation.  <a href="namespaceiexamine.html#ac7d5f75dd77cb40f322824cb59244bd7">More...</a><br /></td></tr>
<tr class="separator:ac7d5f75dd77cb40f322824cb59244bd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a743ddabf5650b28322c4d674020d2099"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a743ddabf5650b28322c4d674020d2099">gunsafe_el</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a743ddabf5650b28322c4d674020d2099"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to "hack" the gunsafe's electronic lock and open it.  <a href="namespaceiexamine.html#a743ddabf5650b28322c4d674020d2099">More...</a><br /></td></tr>
<tr class="separator:a743ddabf5650b28322c4d674020d2099"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada197d8d6086e268c3e3e18b02cb8112"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ada197d8d6086e268c3e3e18b02cb8112">harvest_furn_nectar</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ada197d8d6086e268c3e3e18b02cb8112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a387213cfb1350c7bbdffc067c42e135b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a387213cfb1350c7bbdffc067c42e135b">harvest_furn</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a387213cfb1350c7bbdffc067c42e135b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5628356bba646a766326d701d857338d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5628356bba646a766326d701d857338d">harvest_ter_nectar</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a5628356bba646a766326d701d857338d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a309fb1c49f2bad87724009a149b2150c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a309fb1c49f2bad87724009a149b2150c">harvest_ter</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a309fb1c49f2bad87724009a149b2150c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d6be14c6ca6b453726ef977c97add0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a2d6be14c6ca6b453726ef977c97add0a">harvested_plant</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a2d6be14c6ca6b453726ef977c97add0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Only harvest a plant once per season.  <a href="namespaceiexamine.html#a2d6be14c6ca6b453726ef977c97add0a">More...</a><br /></td></tr>
<tr class="separator:a2d6be14c6ca6b453726ef977c97add0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade298007b9644bd1dd31a165c84c273f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ade298007b9644bd1dd31a165c84c273f">locked_object</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:ade298007b9644bd1dd31a165c84c273f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether PC has a crowbar then calls <a class="el" href="namespaceiuse.html#a9430d817f535840cefa29014ad73a062">iuse.crowbar</a>.  <a href="namespaceiexamine.html#ade298007b9644bd1dd31a165c84c273f">More...</a><br /></td></tr>
<tr class="separator:ade298007b9644bd1dd31a165c84c273f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06c1947e94ea34ddc4aee4f584c5fc8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a06c1947e94ea34ddc4aee4f584c5fc8b">locked_object_pickable</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a06c1947e94ea34ddc4aee4f584c5fc8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether PC has picklocks then calls <a class="el" href="classpick__lock__actor.html" title="This implements lock picking.">pick_lock_actor</a>.  <a href="namespaceiexamine.html#a06c1947e94ea34ddc4aee4f584c5fc8b">More...</a><br /></td></tr>
<tr class="separator:a06c1947e94ea34ddc4aee4f584c5fc8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5994412d9ed8d466f247588bb9a320d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5994412d9ed8d466f247588bb9a320d7">bulletin_board</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a5994412d9ed8d466f247588bb9a320d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b9c90bb21163bd14d5c2e438d2bd89e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a9b9c90bb21163bd14d5c2e438d2bd89e">fault</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a9b9c90bb21163bd14d5c2e438d2bd89e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display popup with reference to "The Enigma of Amigara Fault.".  <a href="namespaceiexamine.html#a9b9c90bb21163bd14d5c2e438d2bd89e">More...</a><br /></td></tr>
<tr class="separator:a9b9c90bb21163bd14d5c2e438d2bd89e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bb33c7fa54e92589524b59657633198"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a1bb33c7fa54e92589524b59657633198">notify</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos)</td></tr>
<tr class="memdesc:a1bb33c7fa54e92589524b59657633198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display popup message pulled from the object's message property.  <a href="namespaceiexamine.html#a1bb33c7fa54e92589524b59657633198">More...</a><br /></td></tr>
<tr class="separator:a1bb33c7fa54e92589524b59657633198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9103bcb0e9cb4755b445e5395a0a62f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ab9103bcb0e9cb4755b445e5395a0a62f">transform</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos)</td></tr>
<tr class="memdesc:ab9103bcb0e9cb4755b445e5395a0a62f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transform the examined object into the object specified by its transforms_into property.  <a href="namespaceiexamine.html#ab9103bcb0e9cb4755b445e5395a0a62f">More...</a><br /></td></tr>
<tr class="separator:ab9103bcb0e9cb4755b445e5395a0a62f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15a58448175eaa2334e7efb3918111f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a15a58448175eaa2334e7efb3918111f4">pedestal_wyrm</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a15a58448175eaa2334e7efb3918111f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Spawn 1d4 wyrms and sink pedestal into ground.  <a href="namespaceiexamine.html#a15a58448175eaa2334e7efb3918111f4">More...</a><br /></td></tr>
<tr class="separator:a15a58448175eaa2334e7efb3918111f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0d1e44a94da47750704bf9737e8ea1f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ae0d1e44a94da47750704bf9737e8ea1f">pedestal_temple</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:ae0d1e44a94da47750704bf9737e8ea1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put petrified eye on pedestal causing it to sink into ground and open temple.  <a href="namespaceiexamine.html#ae0d1e44a94da47750704bf9737e8ea1f">More...</a><br /></td></tr>
<tr class="separator:ae0d1e44a94da47750704bf9737e8ea1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26da5c0d7d3f559de5dc84db22194726"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a26da5c0d7d3f559de5dc84db22194726">door_peephole</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a26da5c0d7d3f559de5dc84db22194726"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock/open door or attempt to peek through peephole.  <a href="namespaceiexamine.html#a26da5c0d7d3f559de5dc84db22194726">More...</a><br /></td></tr>
<tr class="separator:a26da5c0d7d3f559de5dc84db22194726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f77465b3675373940b88779de1a2151"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a6f77465b3675373940b88779de1a2151">fswitch</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a6f77465b3675373940b88779de1a2151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79cb04ffc3e5850531236742eb36b4de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a79cb04ffc3e5850531236742eb36b4de">flower_tulip</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a79cb04ffc3e5850531236742eb36b4de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae80c096877c8704c6e608cdf1cf758de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ae80c096877c8704c6e608cdf1cf758de">flower_spurge</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ae80c096877c8704c6e608cdf1cf758de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c743293fc45820598fd640ad19c0441"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a8c743293fc45820598fd640ad19c0441">flower_poppy</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a8c743293fc45820598fd640ad19c0441"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt pick (or drink nectar if able) poppy bud.  <a href="namespaceiexamine.html#a8c743293fc45820598fd640ad19c0441">More...</a><br /></td></tr>
<tr class="separator:a8c743293fc45820598fd640ad19c0441"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b3efa2907483dbcfcbf885df6911b30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a2b3efa2907483dbcfcbf885df6911b30">flower_cactus</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a2b3efa2907483dbcfcbf885df6911b30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt pick cactus pad.  <a href="namespaceiexamine.html#a2b3efa2907483dbcfcbf885df6911b30">More...</a><br /></td></tr>
<tr class="separator:a2b3efa2907483dbcfcbf885df6911b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa7f20e381003b17ad280374cce3b10d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#afa7f20e381003b17ad280374cce3b10d">flower_bluebell</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:afa7f20e381003b17ad280374cce3b10d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fd96e48e24b5d0916e069ff4d731b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ad09fd96e48e24b5d0916e069ff4d731b">flower_dahlia</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:ad09fd96e48e24b5d0916e069ff4d731b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dig up its roots or drink its nectar if you can.  <a href="namespaceiexamine.html#ad09fd96e48e24b5d0916e069ff4d731b">More...</a><br /></td></tr>
<tr class="separator:ad09fd96e48e24b5d0916e069ff4d731b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac98935de66036feaefbebba3864da5bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ac98935de66036feaefbebba3864da5bf">flower_marloss</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ac98935de66036feaefbebba3864da5bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b58506a068692d3e7bdbba54bcdd0e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a4b58506a068692d3e7bdbba54bcdd0e3">egg_sackbw</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a4b58506a068692d3e7bdbba54bcdd0e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa428237c27923ada5eb94a1615bf5dd9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aa428237c27923ada5eb94a1615bf5dd9">egg_sackcs</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:aa428237c27923ada5eb94a1615bf5dd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac63a5eb772d6de3333d46998804176ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ac63a5eb772d6de3333d46998804176ac">egg_sackws</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ac63a5eb772d6de3333d46998804176ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb0c2d8b376175c6d36c01540095c652"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#abb0c2d8b376175c6d36c01540095c652">fungus</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:abb0c2d8b376175c6d36c01540095c652"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove furniture.  <a href="namespaceiexamine.html#abb0c2d8b376175c6d36c01540095c652">More...</a><br /></td></tr>
<tr class="separator:abb0c2d8b376175c6d36c01540095c652"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa141a09fae9828e002013cbea5aa019"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#afa141a09fae9828e002013cbea5aa019">dirtmound</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:afa141a09fae9828e002013cbea5aa019"><td class="mdescLeft">&#160;</td><td class="mdescRight">If it's warm enough, pick one of the player's seeds and plant it.  <a href="namespaceiexamine.html#afa141a09fae9828e002013cbea5aa019">More...</a><br /></td></tr>
<tr class="separator:afa141a09fae9828e002013cbea5aa019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01429a76cc9d3d1563fb501ae6a1dd3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a01429a76cc9d3d1563fb501ae6a1dd3a">aggie_plant</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a01429a76cc9d3d1563fb501ae6a1dd3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a0207fa80f1ecb61b2ca3cf6a799c88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a2a0207fa80f1ecb61b2ca3cf6a799c88">tree_hickory</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a2a0207fa80f1ecb61b2ca3cf6a799c88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6bb471ed7ab19f1a41a53813159ed2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ae6bb471ed7ab19f1a41a53813159ed2d">tree_maple</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ae6bb471ed7ab19f1a41a53813159ed2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bcb40d08bb0723929edb66b5536d4bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a2bcb40d08bb0723929edb66b5536d4bb">tree_maple_tapped</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a2bcb40d08bb0723929edb66b5536d4bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27a34c33783d2789846b7a0d57e183f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a27a34c33783d2789846b7a0d57e183f7">shrub_marloss</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a27a34c33783d2789846b7a0d57e183f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affda378c4e994d5970fa6f7c6ce086cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#affda378c4e994d5970fa6f7c6ce086cd">tree_marloss</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:affda378c4e994d5970fa6f7c6ce086cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a031b12463f4f2344b5ac98bac72a011f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a031b12463f4f2344b5ac98bac72a011f">shrub_wildveggies</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a031b12463f4f2344b5ac98bac72a011f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0848d08fb97a7b960cac7e8235cfe349"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a0848d08fb97a7b960cac7e8235cfe349">recycle_compactor</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a0848d08fb97a7b960cac7e8235cfe349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a774f651039acdb513863b4ab929bcadb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a774f651039acdb513863b4ab929bcadb">trap</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a774f651039acdb513863b4ab929bcadb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad419b04851e9070c7bb2e15bf97cfb00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ad419b04851e9070c7bb2e15bf97cfb00">water_source</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ad419b04851e9070c7bb2e15bf97cfb00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f334def5e7dde048b2cfa85a741ce9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a8f334def5e7dde048b2cfa85a741ce9b">clean_water_source</a> (<a class="el" href="classplayer.html">player</a> &amp;, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a8f334def5e7dde048b2cfa85a741ce9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82fa11f641d3792302e86cdbec0e4011"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a82fa11f641d3792302e86cdbec0e4011">kiln_empty</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a82fa11f641d3792302e86cdbec0e4011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9adbf32691928d1fb64896cadbabc373"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a9adbf32691928d1fb64896cadbabc373">kiln_full</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a9adbf32691928d1fb64896cadbabc373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abab04f0867f4ee89b0d9b27936a8d475"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#abab04f0867f4ee89b0d9b27936a8d475">arcfurnace_empty</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:abab04f0867f4ee89b0d9b27936a8d475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8855c824c11b948446bdae65b978170a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a8855c824c11b948446bdae65b978170a">arcfurnace_full</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a8855c824c11b948446bdae65b978170a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade9b3a39e81ded33678ac38dec220458"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ade9b3a39e81ded33678ac38dec220458">autoclave_empty</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ade9b3a39e81ded33678ac38dec220458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6411cefc5adcc6510bf0fd041c7d366"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ad6411cefc5adcc6510bf0fd041c7d366">autoclave_full</a> (<a class="el" href="classplayer.html">player</a> &amp;, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ad6411cefc5adcc6510bf0fd041c7d366"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b17f2a7b8cbe0fc611dce45c08b442b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a0b17f2a7b8cbe0fc611dce45c08b442b">fireplace</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a0b17f2a7b8cbe0fc611dce45c08b442b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf0f3ba40d0f370a12e73d6ed01a83f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#abf0f3ba40d0f370a12e73d6ed01a83f1">fvat_empty</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:abf0f3ba40d0f370a12e73d6ed01a83f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab259c0833ed22f2dad9ab91e9bb3306"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aab259c0833ed22f2dad9ab91e9bb3306">fvat_full</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:aab259c0833ed22f2dad9ab91e9bb3306"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a212745f84e7b0f500aecc42cf2d9c707"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a212745f84e7b0f500aecc42cf2d9c707">keg</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a212745f84e7b0f500aecc42cf2d9c707"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa030e7db01d6a9dd3c6e2cb7e42b7d47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aa030e7db01d6a9dd3c6e2cb7e42b7d47">reload_furniture</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:aa030e7db01d6a9dd3c6e2cb7e42b7d47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2172a3ae52a0002ada7cba5f3fe55bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ab2172a3ae52a0002ada7cba5f3fe55bc">use_furn_fake_item</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ab2172a3ae52a0002ada7cba5f3fe55bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21dd96f64237acd62065510e4417c9a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a21dd96f64237acd62065510e4417c9a4">curtains</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a21dd96f64237acd62065510e4417c9a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af36ea19e73945ee13457fe2ae028c149"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#af36ea19e73945ee13457fe2ae028c149">sign</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:af36ea19e73945ee13457fe2ae028c149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef18dcb88645994d8d4fed815b749d7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aef18dcb88645994d8d4fed815b749d7b">pay_gas</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:aef18dcb88645994d8d4fed815b749d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af44785c44ed5b238072e392c7805a6fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#af44785c44ed5b238072e392c7805a6fe">ledge</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:af44785c44ed5b238072e392c7805a6fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48bc61be041645e2894eb6c3d8c5e9b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a48bc61be041645e2894eb6c3d8c5e9b5">autodoc</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a48bc61be041645e2894eb6c3d8c5e9b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12c889cd7f3451693608bd69ab282009"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a12c889cd7f3451693608bd69ab282009">translocator</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a12c889cd7f3451693608bd69ab282009"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a060b59dbae83b1188922a4b701894532"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a060b59dbae83b1188922a4b701894532">on_smoke_out</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp, const <a class="el" href="classtime__point.html">time_point</a> &amp;start_time)</td></tr>
<tr class="separator:a060b59dbae83b1188922a4b701894532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a639d89c065849a9b4c19a27ac234ce2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a639d89c065849a9b4c19a27ac234ce2d">mill_finalize</a> (<a class="el" href="classplayer.html">player</a> &amp;, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp, const <a class="el" href="classtime__point.html">time_point</a> &amp;start_time)</td></tr>
<tr class="separator:a639d89c065849a9b4c19a27ac234ce2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d81e91c77356539faa7c664799aaa8e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a8d81e91c77356539faa7c664799aaa8e">quern_examine</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a8d81e91c77356539faa7c664799aaa8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b720f7a991d1e49c70ca03951445632"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a2b720f7a991d1e49c70ca03951445632">smoker_options</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a2b720f7a991d1e49c70ca03951445632"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceeaf2599a1e103c7a6b2905e104050a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aceeaf2599a1e103c7a6b2905e104050a">open_safe</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:aceeaf2599a1e103c7a6b2905e104050a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1562d040bf1e91a0140086bd6f905802"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a1562d040bf1e91a0140086bd6f905802">workbench</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a1562d040bf1e91a0140086bd6f905802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a222f29521bdeef4881aee8a31983cbb8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a222f29521bdeef4881aee8a31983cbb8">dimensional_portal</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a222f29521bdeef4881aee8a31983cbb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e84b5b22d961bae9e963560651be225"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a3e84b5b22d961bae9e963560651be225">check_power</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a3e84b5b22d961bae9e963560651be225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e019567c1f8ce2c1f580160ea21185c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5e019567c1f8ce2c1f580160ea21185c">migo_nerve_cluster</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a5e019567c1f8ce2c1f580160ea21185c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a700893be2f824844fdc4b4ea4b2ee148"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a700893be2f824844fdc4b4ea4b2ee148">pour_into_keg</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos, <a class="el" href="classitem.html">item</a> &amp;liquid)</td></tr>
<tr class="memdesc:a700893be2f824844fdc4b4ea4b2ee148"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pour liquid into a keg (furniture) on the map.  <a href="namespaceiexamine.html#a700893be2f824844fdc4b4ea4b2ee148">More...</a><br /></td></tr>
<tr class="separator:a700893be2f824844fdc4b4ea4b2ee148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada89967c78ff4632820932976c12ab8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a1159dbaba81931271dbfe5b9c7f041b3">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ada89967c78ff4632820932976c12ab8b">getGasPumpByNumber</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p, int number)</td></tr>
<tr class="separator:ada89967c78ff4632820932976c12ab8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6987b7ccb6bfbaa1be3d45360eb106f6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a6987b7ccb6bfbaa1be3d45360eb106f6">toPumpFuel</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;src, const <a class="el" href="structtripoint.html">tripoint</a> &amp;dst, int units)</td></tr>
<tr class="separator:a6987b7ccb6bfbaa1be3d45360eb106f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdcb6865f2a40fffafcff3115d93b693"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a1159dbaba81931271dbfe5b9c7f041b3">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#acdcb6865f2a40fffafcff3115d93b693">getNearFilledGasTank</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;center, int &amp;gas_units)</td></tr>
<tr class="separator:acdcb6865f2a40fffafcff3115d93b693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f416fad095ebdced5c867b735550fa4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a8f416fad095ebdced5c867b735550fa4">has_keg</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos)</td></tr>
<tr class="memdesc:a8f416fad095ebdced5c867b735550fa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether there is a keg on the map that can be filled via <a class="el" href="namespaceiexamine.html#a700893be2f824844fdc4b4ea4b2ee148">pour_into_keg</a>.  <a href="namespaceiexamine.html#a8f416fad095ebdced5c867b735550fa4">More...</a><br /></td></tr>
<tr class="separator:a8f416fad095ebdced5c867b735550fa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a063625d8728319f6e54a792b609f1719"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="classitem.html">item</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a063625d8728319f6e54a792b609f1719">get_harvest_items</a> (const <a class="el" href="structitype.html">itype</a> &amp;type, int plant_count, int seed_count, bool byproducts)</td></tr>
<tr class="memdesc:a063625d8728319f6e54a792b609f1719"><td class="mdescLeft">&#160;</td><td class="mdescRight">Items that appear when a generic plant is harvested.  <a href="namespaceiexamine.html#a063625d8728319f6e54a792b609f1719">More...</a><br /></td></tr>
<tr class="separator:a063625d8728319f6e54a792b609f1719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52eaa83fb4f8dacccac4a5e736cf3fe1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a52eaa83fb4f8dacccac4a5e736cf3fe1">get_seed_entries</a> (const std::vector&lt; <a class="el" href="classitem.html">item</a> * &gt; &amp;seed_inv)</td></tr>
<tr class="memdesc:a52eaa83fb4f8dacccac4a5e736cf3fe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make lists of unique seed types and names for the menu(no multiple hemp seeds etc)  <a href="namespaceiexamine.html#a52eaa83fb4f8dacccac4a5e736cf3fe1">More...</a><br /></td></tr>
<tr class="separator:a52eaa83fb4f8dacccac4a5e736cf3fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8076e42db14f124567108b5754caa31a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a8076e42db14f124567108b5754caa31a">query_seed</a> (const std::vector&lt; <a class="el" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a> &gt; &amp;seed_entries)</td></tr>
<tr class="memdesc:a8076e42db14f124567108b5754caa31a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Choose seed for planting.  <a href="namespaceiexamine.html#a8076e42db14f124567108b5754caa31a">More...</a><br /></td></tr>
<tr class="separator:a8076e42db14f124567108b5754caa31a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbcb2fec05977cfc1aeb875072177529"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#acbcb2fec05977cfc1aeb875072177529">plant_seed</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp, const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;seed_id)</td></tr>
<tr class="memdesc:acbcb2fec05977cfc1aeb875072177529"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actual planting of selected seed.  <a href="namespaceiexamine.html#acbcb2fec05977cfc1aeb875072177529">More...</a><br /></td></tr>
<tr class="separator:acbcb2fec05977cfc1aeb875072177529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada8613299c6f18c55e1817a633773917"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ada8613299c6f18c55e1817a633773917">harvest_plant</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp, bool from_activity=false)</td></tr>
<tr class="memdesc:ada8613299c6f18c55e1817a633773917"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actual harvesting of selected plant.  <a href="namespaceiexamine.html#ada8613299c6f18c55e1817a633773917">More...</a><br /></td></tr>
<tr class="separator:ada8613299c6f18c55e1817a633773917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c3c28dc38fceedbba0d1d9b907df46f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a3c3c28dc38fceedbba0d1d9b907df46f">fertilize_plant</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;tile, const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;fertilizer)</td></tr>
<tr class="separator:a3c3c28dc38fceedbba0d1d9b907df46f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e699eeec282f7f36864ca548f573d38"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a4e699eeec282f7f36864ca548f573d38">choose_fertilizer</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const std::string &amp;pname, bool ask_player)</td></tr>
<tr class="separator:a4e699eeec282f7f36864ca548f573d38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ff48dd50fbbb6d65965d377aebfeb61"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classret__val.html">ret_val</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a1ff48dd50fbbb6d65965d377aebfeb61">can_fertilize</a> (<a class="el" href="classplayer.html">player</a> &amp;p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;tile, const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;fertilizer)</td></tr>
<tr class="separator:a1ff48dd50fbbb6d65965d377aebfeb61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a292307d5a4cfdf5634d7fe4f7be01cf7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a292307d5a4cfdf5634d7fe4f7be01cf7">practice_survival_while_foraging</a> (<a class="el" href="classplayer.html">player</a> *p)</td></tr>
<tr class="separator:a292307d5a4cfdf5634d7fe4f7be01cf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a01429a76cc9d3d1563fb501ae6a1dd3a" name="a01429a76cc9d3d1563fb501ae6a1dd3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01429a76cc9d3d1563fb501ae6a1dd3a">&#9670;&nbsp;</a></span>aggie_plant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::aggie_plant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02555">2555</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>{</div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span>    <span class="comment">// Can&#39;t use item_stack::only_item() since there might be fertilizer</span></div>
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a> = std::find_if( items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>        return it.is_seed();</div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>    } );</div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span> </div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a> == items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>() ) {</div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Missing seed for plant at (%d, %d, %d)&quot;</span>, examp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, examp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>, examp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>        here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span>    }</div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span> </div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span>    <span class="keyword">const</span> std::string pname = <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a>-&gt;get_plant_name();</div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span> </div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">has_flag_furn</a>( <a class="code hl_function" href="iexamine_8cpp.html#a7961ab14a92a6031a839a61c6c876889">flag_GROWTH_HARVEST</a>, examp ) &amp;&amp;</div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span>        <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Harvest the %s?&quot;</span> ), pname ) ) {</div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span>        <a class="code hl_function" href="namespaceiexamine.html#ada8613299c6f18c55e1817a633773917">harvest_plant</a>( p, examp );</div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !here.<a class="code hl_function" href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">has_flag_furn</a>( <a class="code hl_function" href="iexamine_8cpp.html#a7961ab14a92a6031a839a61c6c876889">flag_GROWTH_HARVEST</a>, examp ) ) {</div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code hl_function" href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">size</a>() &gt; 1 ) {</div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This %s has already been fertilized.&quot;</span> ), pname );</div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span>        }</div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span>        <a class="code hl_class" href="classstring__id.html">itype_id</a> fertilizer = <a class="code hl_function" href="namespaceiexamine.html#a4e699eeec282f7f36864ca548f573d38">choose_fertilizer</a>( p, pname, <span class="keyword">true</span> <span class="comment">/*ask player for confirmation */</span> );</div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span> </div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span>        <span class="keywordflow">if</span>( !fertilizer.<a class="code hl_function" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span>            <a class="code hl_function" href="namespaceiexamine.html#a3c3c28dc38fceedbba0d1d9b907df46f">fertilize_plant</a>( p, examp, fertilizer );</div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span>        }</div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>    }</div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>}</div>
<div class="ttc" id="aclasscata_1_1colony_1_1colony__iterator_html"><div class="ttname"><a href="classcata_1_1colony_1_1colony__iterator.html">cata::colony::colony_iterator&lt; false &gt;</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a09718022e82be5bc5dd6d84463521751"><div class="ttname"><a href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">item_stack::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00010">item_stack.cpp:10</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a588d49cd17fbf3c64227906758940769"><div class="ttname"><a href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">item_stack::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00028">item_stack.cpp:28</a></div></div>
<div class="ttc" id="aclassitem__stack_html_ad04a969155cc139c54a6a3b4a3395454"><div class="ttname"><a href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">item_stack::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00033">item_stack.cpp:33</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00209">item.h:210</a></div></div>
<div class="ttc" id="aclassmap__stack_html"><div class="ttname"><a href="classmap__stack.html">map_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00104">map.h:105</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00383">map.h:384</a></div></div>
<div class="ttc" id="aclassmap_html_a09ef3e8c2e6664e3ed98d1e1e18a4b4f"><div class="ttname"><a href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">map::has_flag_furn</a></div><div class="ttdeci">bool has_flag_furn(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02398">map.cpp:2398</a></div></div>
<div class="ttc" id="aclassmap_html_a5130a127601b67e569eaef37a1a88610"><div class="ttname"><a href="classmap.html#a5130a127601b67e569eaef37a1a88610">map::i_at</a></div><div class="ttdeci">map_stack i_at(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04209">map.cpp:4209</a></div></div>
<div class="ttc" id="aclassmap_html_a9b1c092685c43287d5db23156f3f337e"><div class="ttname"><a href="classmap.html#a9b1c092685c43287d5db23156f3f337e">map::i_clear</a></div><div class="ttdeci">void i_clear(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04247">map.cpp:4247</a></div></div>
<div class="ttc" id="aclassmap_html_abf6455d82007aa379f4de85aea2f923f"><div class="ttname"><a href="classmap.html#abf6455d82007aa379f4de85aea2f923f">map::furn_set</a></div><div class="ttdeci">void furn_set(const tripoint &amp;p, const furn_id &amp;new_furniture, cata::poly_serialized&lt; active_tile_data &gt; new_active=nullptr)</div><div class="ttdoc">Sets the furniture at given position.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01424">map.cpp:1424</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; itype &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_ac180a60056901aaf79f5c4b728a257bd"><div class="ttname"><a href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">string_id::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdoc">Returns whether this id is empty.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00298">string_id.h:298</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00265">enums.h:265</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a7961ab14a92a6031a839a61c6c876889"><div class="ttname"><a href="iexamine_8cpp.html#a7961ab14a92a6031a839a61c6c876889">flag_GROWTH_HARVEST</a></div><div class="ttdeci">static const std::string flag_GROWTH_HARVEST(&quot;GROWTH_HARVEST&quot;)</div></div>
<div class="ttc" id="amap_8cpp_html_acb0b34be6e497bdd2f9f40ae6929d562"><div class="ttname"><a href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00147">map.cpp:147</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a98423a935af4b918d68f206e63f6cf7f"><div class="ttname"><a href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a></div><div class="ttdeci">furn_id f_null</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01097">mapdata.cpp:1097</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00910">messages.cpp:910</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a3c3c28dc38fceedbba0d1d9b907df46f"><div class="ttname"><a href="namespaceiexamine.html#a3c3c28dc38fceedbba0d1d9b907df46f">iexamine::fertilize_plant</a></div><div class="ttdeci">void fertilize_plant(player &amp;p, const tripoint &amp;tile, const itype_id &amp;fertilizer)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02479">iexamine.cpp:2479</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a4e699eeec282f7f36864ca548f573d38"><div class="ttname"><a href="namespaceiexamine.html#a4e699eeec282f7f36864ca548f573d38">iexamine::choose_fertilizer</a></div><div class="ttdeci">itype_id choose_fertilizer(player &amp;p, const std::string &amp;pname, bool ask_player)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02522">iexamine.cpp:2522</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_ada8613299c6f18c55e1817a633773917"><div class="ttname"><a href="namespaceiexamine.html#ada8613299c6f18c55e1817a633773917">iexamine::harvest_plant</a></div><div class="ttdeci">void harvest_plant(player &amp;p, const tripoint &amp;examp, bool from_activity=false)</div><div class="ttdoc">Actual harvesting of selected plant.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02394">iexamine.cpp:2394</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a07b07d9e1b2e068106e3a2c779d3362c"><div class="ttname"><a href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">iuse::seed</a></div><div class="ttdeci">int seed(player *, item *, bool, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05958">iuse.cpp:5958</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00698">output.cpp:698</a></div></div>
<div class="ttc" id="astructtripoint_html_a89f6c0a16e2bfd7ce4f1f1d20404c4d7"><div class="ttname"><a href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">tripoint::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00137">point.h:137</a></div></div>
<div class="ttc" id="astructtripoint_html_ac944c0e329b5eba2602f7a52f66bbbb9"><div class="ttname"><a href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">tripoint::z</a></div><div class="ttdeci">int z</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00138">point.h:138</a></div></div>
<div class="ttc" id="astructtripoint_html_affdc0d5b75024cbfacd208a495def3dc"><div class="ttname"><a href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">tripoint::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00136">point.h:136</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="iexamine_8cpp_source.html#l02522">choose_fertilizer()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="iexamine_8cpp_source.html#l02479">fertilize_plant()</a>, <a class="el" href="iexamine_8cpp.html#a7961ab14a92a6031a839a61c6c876889">flag_GROWTH_HARVEST()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l02394">harvest_plant()</a>, <a class="el" href="map_8cpp_source.html#l02398">map::has_flag_furn()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l04247">map::i_clear()</a>, <a class="el" href="string__id_8h_source.html#l00298">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="iuse_8cpp_source.html#l05958">iuse::seed()</a>, <a class="el" href="item__stack_8cpp_source.html#l00010">item_stack::size()</a>, <a class="el" href="point_8h_source.html#l00136">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00137">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00138">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="abab04f0867f4ee89b0d9b27936a8d475" name="abab04f0867f4ee89b0d9b27936a8d475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abab04f0867f4ee89b0d9b27936a8d475">&#9670;&nbsp;</a></span>arcfurnace_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::arcfurnace_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Fabrication decreases loss when firing a furnace 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02722">2722</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span>{</div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>    <a class="code hl_class" href="classint__id.html">furn_id</a> cur_arcfurnace_type = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>    <a class="code hl_class" href="classint__id.html">furn_id</a> next_arcfurnace_type = <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a>;</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span>    <span class="keywordflow">if</span>( cur_arcfurnace_type == <a class="code hl_variable" href="mapdata_8cpp.html#aea43b649f6cdf253ffddcce074f1147d">f_arcfurnace_empty</a> ) {</div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>        next_arcfurnace_type = <a class="code hl_variable" href="mapdata_8cpp.html#a83878107b20ea8b06016305eb600cdfe">f_arcfurnace_full</a>;</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action arcfurnace_empty, but is of type %s&quot;</span>,</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span>                  here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code hl_function" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code hl_function" href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">c_str</a>() );</div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>    }</div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span> </div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::set&lt;material_id&gt; arcfurnaceable{ <a class="code hl_typedef" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( <span class="stringliteral">&quot;cac2powder&quot;</span> ) };</div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>    <span class="keywordtype">bool</span> fuel_present = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>    <span class="keyword">auto</span> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;i : items ) {</div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span>        <span class="keywordflow">if</span>( i.typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a> ) {</div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This furnace already contains calcium carbide.&quot;</span> ) );</div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove it before activating the arc furnace again.&quot;</span> ) );</div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( i.made_of_any( arcfurnaceable ) ) {</div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>            fuel_present = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This furnace contains %s, which can&#39;t be made into calcium carbide!&quot;</span> ),</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span>                     i.tname( 1, <span class="keyword">false</span> ) );</div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>        }</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>    }</div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span> </div>
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"> 2752</span>    <span class="keywordflow">if</span>( !fuel_present ) {</div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This furance is empty.  Fill it with powdered coke and lime mix, and try again.&quot;</span> ) );</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"> 2755</span>    }</div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span><span class="comment"></span> </div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span><span class="comment">    ///\EFFECT_FABRICATION decreases loss when firing a furnace</span></div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span><span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">int</span> skill = p.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a> );</div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span>    <span class="keywordtype">int</span> loss = 60 - 2 *</div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span>               skill; <span class="comment">// Inefficency is still fine, coal and limestone is abundant</span></div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span> </div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>    <span class="comment">// Burn stuff that should get charred, leave out the rest</span></div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> total_volume = 0_ml;</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;i : items ) {</div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>        total_volume += i.volume();</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>    }</div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span> </div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> char_volume = ( 100 - loss ) * total_volume / 100;</div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span>    <span class="keywordtype">int</span> char_charges = <a class="code hl_variable" href="iexamine_8cpp.html#a91db7131b5f34ebfd87e414471d3252c">itype_unfinished_cac2</a>-&gt;<a class="code hl_function" href="structitype.html#a437edaf34e4c8b5bd688005360507b7d">charges_per_volume</a>( char_volume );</div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span>    <span class="keywordflow">if</span>( char_charges &lt; 1 ) {</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The batch in this furance is too small to yield usable calcium carbide.&quot;</span> ) );</div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>    }</div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span>    <span class="comment">//arc furnaces require a huge amount of current, so 1 full storage battery would work as a stand in</span></div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span>    <span class="keywordflow">if</span>( !p.<a class="code hl_function" href="classCharacter.html#a9bff3208a5e121c4e3a71b81b378e4e7">has_charges</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a55a80a9bbab1925d5462d46d355c2b6e">itype_UPS</a>, 1250 ) ) {</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This furnace is ready to be turned on, but you lack a UPS with sufficient power.&quot;</span> ) );</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This furnace contains %s %s of material, and is ready to be turned on.&quot;</span> ),</div>
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"> 2780</span>                 <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( total_volume ), <a class="code hl_function" href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a>() );</div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Turn on the furnace?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span>        }</div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span>    }</div>
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"> 2785</span> </div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span>    p.<a class="code hl_function" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a55a80a9bbab1925d5462d46d355c2b6e">itype_UPS</a>, 1250 );</div>
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span>    here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, next_arcfurnace_type );</div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span>    <a class="code hl_class" href="classitem.html">item</a> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a91db7131b5f34ebfd87e414471d3252c">itype_unfinished_cac2</a>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span>    <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.charges = char_charges;</div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>    here.<a class="code hl_function" href="classmap.html#a64d3ea19afd7a9c65f072dd65fb15405">add_item</a>( examp, <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> );</div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You turn on the furnace.&quot;</span> ) );</div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>}</div>
<div class="ttc" id="aclassCharacter_html_a3d0ec2b4e80527bd2daad576c2bbb187"><div class="ttname"><a href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">Character::use_charges</a></div><div class="ttdeci">std::list&lt; item &gt; use_charges(const itype_id &amp;what, int qty, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09665">character.cpp:9665</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9bff3208a5e121c4e3a71b81b378e4e7"><div class="ttname"><a href="classCharacter.html#a9bff3208a5e121c4e3a71b81b378e4e7">Character::has_charges</a></div><div class="ttdeci">bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09605">character.cpp:9605</a></div></div>
<div class="ttc" id="aclassCharacter_html_afa95fe499ca6b55ab97f1b442a4c95c5"><div class="ttname"><a href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">Character::get_skill_level</a></div><div class="ttdeci">int get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03351">character.cpp:3351</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; furn_t &gt;</a></div></div>
<div class="ttc" id="aclassint__id_html_a88b1e0c550f4d6f36cac7a73feca7f01"><div class="ttname"><a href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">int_id::id</a></div><div class="ttdeci">const string_id&lt; T &gt; &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00033">ammo_effect.cpp:33</a></div></div>
<div class="ttc" id="aclassmap_html_a64d3ea19afd7a9c65f072dd65fb15405"><div class="ttname"><a href="classmap.html#a64d3ea19afd7a9c65f072dd65fb15405">map::add_item</a></div><div class="ttdeci">item &amp; add_item(const tripoint &amp;p, item new_item)</div><div class="ttdoc">Place an item on the map, despite the parameter name, this is not necessarily a new item.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04454">map.cpp:4454</a></div></div>
<div class="ttc" id="aclassmap_html_af55e014aab791bbe4c8630361c1311dd"><div class="ttname"><a href="classmap.html#af55e014aab791bbe4c8630361c1311dd">map::furn</a></div><div class="ttdeci">furn_id furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01412">map.cpp:1412</a></div></div>
<div class="ttc" id="aclassstring__id_html_a19aea01aa4a1f53aac09acc978f67cf8"><div class="ttname"><a href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">string_id::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">Interface to the plain C-string of the id.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00247">string_id.h:247</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units__def_8h_source.html#l00014">units_def.h:15</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00261">enums.h:261</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a55a80a9bbab1925d5462d46d355c2b6e"><div class="ttname"><a href="iexamine_8cpp.html#a55a80a9bbab1925d5462d46d355c2b6e">itype_UPS</a></div><div class="ttdeci">static const itype_id itype_UPS(&quot;UPS&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a91db7131b5f34ebfd87e414471d3252c"><div class="ttname"><a href="iexamine_8cpp.html#a91db7131b5f34ebfd87e414471d3252c">itype_unfinished_cac2</a></div><div class="ttdeci">static const itype_id itype_unfinished_cac2(&quot;unfinished_cac2&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a92adaaef73b238fc4ae42c4f0ee72a86"><div class="ttname"><a href="iexamine_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a></div><div class="ttdeci">static const skill_id skill_fabrication(&quot;fabrication&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab1af02b599a6211215be7003eb1b91b3"><div class="ttname"><a href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a></div><div class="ttdeci">static const itype_id itype_chem_carbide(&quot;chem_carbide&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_a83878107b20ea8b06016305eb600cdfe"><div class="ttname"><a href="mapdata_8cpp.html#a83878107b20ea8b06016305eb600cdfe">f_arcfurnace_full</a></div><div class="ttdeci">furn_id f_arcfurnace_full</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01130">mapdata.cpp:1130</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aea43b649f6cdf253ffddcce074f1147d"><div class="ttname"><a href="mapdata_8cpp.html#aea43b649f6cdf253ffddcce074f1147d">f_arcfurnace_empty</a></div><div class="ttdeci">furn_id f_arcfurnace_empty</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01130">mapdata.cpp:1130</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00036">calendar.cpp:36</a></div></div>
<div class="ttc" id="anamespacedetail_1_1digits_html_aad69d2373aa047bdd9e81494bf3da5ae"><div class="ttname"><a href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">detail::digits::result</a></div><div class="ttdeci">result</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format-inl_8h_source.html#l01626">fmtlib_format-inl.h:1626</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a297635a05a44e1f896fb829a0474f586"><div class="ttname"><a href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a></div><div class="ttdeci">std::string format_volume(const units::volume &amp;volume)</div><div class="ttdoc">Convert, round up and format a volume.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02020">output.cpp:2020</a></div></div>
<div class="ttc" id="astructitype_html_a437edaf34e4c8b5bd688005360507b7d"><div class="ttname"><a href="structitype.html#a437edaf34e4c8b5bd688005360507b7d">itype::charges_per_volume</a></div><div class="ttdeci">int charges_per_volume(const units::volume &amp;vol) const</div><div class="ttdoc">Number of (charges of) this type of item that fit into the given volume.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00131">itype.cpp:131</a></div></div>
<div class="ttc" id="atype__id_8h_html_a569ce0271cf4ab170e63bb05658be142"><div class="ttname"><a href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a></div><div class="ttdeci">string_id&lt; material_type &gt; material_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00095">type_id.h:95</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a5c2697027e2386941cdc4f6adbe8faac"><div class="ttname"><a href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a></div><div class="ttdeci">const char * volume_units_abbr()</div><div class="ttdoc">Create an abbreviated units label for a volume value.</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00037">units_utility.cpp:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04454">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="string__id_8h_source.html#l00247">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="itype_8cpp_source.html#l00131">itype::charges_per_volume()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="mapdata_8cpp_source.html#l01130">f_arcfurnace_empty</a>, <a class="el" href="mapdata_8cpp_source.html#l01130">f_arcfurnace_full</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="output_8cpp_source.html#l02020">format_volume()</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="character_8cpp_source.html#l03351">Character::get_skill_level()</a>, <a class="el" href="character_8cpp_source.html#l09605">Character::has_charges()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l04247">map::i_clear()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a>, <a class="el" href="iexamine_8cpp.html#a91db7131b5f34ebfd87e414471d3252c">itype_unfinished_cac2</a>, <a class="el" href="iexamine_8cpp.html#a55a80a9bbab1925d5462d46d355c2b6e">itype_UPS</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="iexamine_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="character_8cpp_source.html#l09665">Character::use_charges()</a>, and <a class="el" href="units__utility_8cpp_source.html#l00037">volume_units_abbr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a8855c824c11b948446bdae65b978170a" name="a8855c824c11b948446bdae65b978170a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8855c824c11b948446bdae65b978170a">&#9670;&nbsp;</a></span>arcfurnace_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::arcfurnace_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02795">2795</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span>{</div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>    <a class="code hl_class" href="classint__id.html">furn_id</a> cur_arcfurnace_type = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>    <a class="code hl_class" href="classint__id.html">furn_id</a> next_arcfurnace_type = <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a>;</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span>    <span class="keywordflow">if</span>( cur_arcfurnace_type == <a class="code hl_variable" href="mapdata_8cpp.html#a83878107b20ea8b06016305eb600cdfe">f_arcfurnace_full</a> ) {</div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>        next_arcfurnace_type = <a class="code hl_variable" href="mapdata_8cpp.html#aea43b649f6cdf253ffddcce074f1147d">f_arcfurnace_empty</a>;</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action arcfurnace_full, but is of type %s&quot;</span>,</div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span>                  here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code hl_function" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code hl_function" href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">c_str</a>() );</div>
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"> 2805</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>    }</div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span> </div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span>    <span class="keywordflow">if</span>( items.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This furnace is empty…&quot;</span> ) );</div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, next_arcfurnace_type );</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span>    }</div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There&#39;s an arc furnace there.&quot;</span> ) );</div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> firing_time = 2_hours; <span class="comment">// Arc furnaces work really fast in reality</span></div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> time_left = firing_time - items.<a class="code hl_function" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code hl_function" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>();</div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>    <span class="keywordflow">if</span>( time_left &gt; 0_turns ) {</div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span>        <span class="keywordtype">int</span> hours = to_hours&lt;int&gt;( time_left );</div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>        <span class="keywordtype">int</span> minutes = to_minutes&lt;int&gt;( time_left ) + 1;</div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>        <span class="keywordflow">if</span>( minutes &gt; 60 ) {</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;It will finish burning in about %d hour.&quot;</span>,</div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>                               <span class="stringliteral">&quot;It will finish burning in about %d hours.&quot;</span>,</div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span>                               hours ), hours );</div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( minutes &gt; 30 ) {</div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It will finish burning in less than an hour.&quot;</span> ) );</div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It should take about %d minutes to finish burning.&quot;</span> ), minutes );</div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span>        }</div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span>    }</div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span> </div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> total_volume = 0_ml;</div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span>    <span class="comment">// Burn stuff that should get charred, leave out the rest</span></div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> item_it = items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); item_it != items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span>        <span class="keywordflow">if</span>( item_it-&gt;typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a91db7131b5f34ebfd87e414471d3252c">itype_unfinished_cac2</a> || item_it-&gt;typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a> ) {</div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span>            total_volume += item_it-&gt;volume();</div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>            item_it = items.<a class="code hl_function" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( item_it );</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span>            item_it++;</div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span>        }</div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span>    }</div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span> </div>
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"> 2843</span>    <a class="code hl_class" href="classitem.html">item</a> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>    <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.charges = <a class="code hl_variable" href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a>-&gt;<a class="code hl_function" href="structitype.html#a437edaf34e4c8b5bd688005360507b7d">charges_per_volume</a>( total_volume );</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>    here.<a class="code hl_function" href="classmap.html#a64d3ea19afd7a9c65f072dd65fb15405">add_item</a>( examp, <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> );</div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, next_arcfurnace_type );</div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It has finished burning, yielding %d calcium carbide.&quot;</span> ), <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.charges );</div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>}</div>
<div class="ttc" id="aclassitem__stack_html_a83fd3bd296c75326b3709280804acef4"><div class="ttname"><a href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">item_stack::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00015">item_stack.cpp:15</a></div></div>
<div class="ttc" id="aclassitem__stack_html_ae07c2d2c71ea7c7ba2607f2edc5a41df"><div class="ttname"><a href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">item_stack::only_item</a></div><div class="ttdeci">item &amp; only_item()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00083">item_stack.cpp:83</a></div></div>
<div class="ttc" id="aclassitem_html_a66fcc8b7976e6c73904bdfbe5296c150"><div class="ttname"><a href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">item::age</a></div><div class="ttdeci">time_duration age() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10034">item.cpp:10034</a></div></div>
<div class="ttc" id="aclassmap__stack_html_ab58ec66a7ca2e476c6d90967dccc8062"><div class="ttname"><a href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">map_stack::erase</a></div><div class="ttdeci">iterator erase(const_iterator it) override</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00153">map.cpp:153</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00179">calendar.h:180</a></div></div>
<div class="ttc" id="atranslations_8cpp_html_a82b835742108b8d7f5f6a291b41e208e"><div class="ttname"><a href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a></div><div class="ttdeci">const char * vgettext(const char *msgid, const char *msgid_plural, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8cpp_source.html#l00036">translations.cpp:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04454">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l10034">item::age()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="string__id_8h_source.html#l00247">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="itype_8cpp_source.html#l00131">itype::charges_per_volume()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00153">map_stack::erase()</a>, <a class="el" href="mapdata_8cpp_source.html#l01130">f_arcfurnace_empty</a>, <a class="el" href="mapdata_8cpp_source.html#l01130">f_arcfurnace_full</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a>, <a class="el" href="iexamine_8cpp.html#a91db7131b5f34ebfd87e414471d3252c">itype_unfinished_cac2</a>, <a class="el" href="item__stack_8cpp_source.html#l00083">item_stack::only_item()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, and <a class="el" href="translations_8cpp_source.html#l00036">vgettext()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a5d0b06741603f174777560a24c93f193" name="a5d0b06741603f174777560a24c93f193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d0b06741603f174777560a24c93f193">&#9670;&nbsp;</a></span>atm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::atm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>launches the atm menu class which then handles all the atm interactions. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00667">667</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>{</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    atm_menu {p} .start();</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l03249">activity_handlers::atm_do_turn()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ade9b3a39e81ded33678ac38dec220458" name="ade9b3a39e81ded33678ac38dec220458"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade9b3a39e81ded33678ac38dec220458">&#9670;&nbsp;</a></span>autoclave_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::autoclave_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02851">2851</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>{</div>
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"> 2853</span>    <a class="code hl_class" href="classitem__location.html">item_location</a> <a class="code hl_struct" href="structbionic.html">bionic</a> = <a class="code hl_function" href="namespacegame__menus_1_1inv.html#a6dabf421ed20a9ded65c0e3b7e9088b4">game_menus::inv::sterilize_cbm</a>( p );</div>
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"> 2854</span>    <span class="keywordflow">if</span>( <a class="code hl_struct" href="structbionic.html">bionic</a> ) {</div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>        <a class="code hl_function" href="namespaceavatar__funcs.html#a97e418d541f419827d11e0460916ad33">avatar_funcs::mend_item</a>( *p.<a class="code hl_function" href="classCreature.html#aff1d211fe3b960fc3046db5f3dfcf793">as_avatar</a>(), <a class="code hl_class" href="classitem__location.html">item_location</a>( <a class="code hl_struct" href="structbionic.html">bionic</a> ) );</div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>    }</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span>}</div>
<div class="ttc" id="aclassCreature_html_aff1d211fe3b960fc3046db5f3dfcf793"><div class="ttname"><a href="classCreature.html#aff1d211fe3b960fc3046db5f3dfcf793">Creature::as_avatar</a></div><div class="ttdeci">virtual avatar * as_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00128">creature.h:128</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00022">item_location.h:23</a></div></div>
<div class="ttc" id="anamespaceavatar__funcs_html_a97e418d541f419827d11e0460916ad33"><div class="ttname"><a href="namespaceavatar__funcs.html#a97e418d541f419827d11e0460916ad33">avatar_funcs::mend_item</a></div><div class="ttdeci">void mend_item(avatar &amp;you, item_location &amp;&amp;obj, bool interactive)</div><div class="ttdoc">Attempt to start an activity to mend an item (fix any current faults)</div><div class="ttdef"><b>Definition:</b> <a href="avatar__functions_8cpp_source.html#l00174">avatar_functions.cpp:174</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a6dabf421ed20a9ded65c0e3b7e9088b4"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a6dabf421ed20a9ded65c0e3b7e9088b4">game_menus::inv::sterilize_cbm</a></div><div class="ttdeci">item_location sterilize_cbm(player &amp;p)</div><div class="ttdoc">Autoclave sterilize menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l02193">game_inventory.cpp:2193</a></div></div>
<div class="ttc" id="astructbionic_html"><div class="ttname"><a href="structbionic.html">bionic</a></div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00155">bionics.h:155</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00128">Creature::as_avatar()</a>, <a class="el" href="avatar__functions_8cpp_source.html#l00174">avatar_funcs::mend_item()</a>, and <a class="el" href="game__inventory_8cpp_source.html#l02193">game_menus::inv::sterilize_cbm()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l08342">iuse::autoclave()</a>, <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01942">vehicle::interact_with()</a>.</p>

</div>
</div>
<a id="ad6411cefc5adcc6510bf0fd041c7d366" name="ad6411cefc5adcc6510bf0fd041c7d366"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6411cefc5adcc6510bf0fd041c7d366">&#9670;&nbsp;</a></span>autoclave_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::autoclave_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02861">2861</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>{</div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span>    <a class="code hl_class" href="classint__id.html">furn_id</a> cur_autoclave_type = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span>    <a class="code hl_class" href="classint__id.html">furn_id</a> next_autoclave_type = <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a>;</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>    <span class="keywordflow">if</span>( cur_autoclave_type == <a class="code hl_typedef" href="type__id_8h.html#a6bc1468ac54b6176b517879f5f77564e">furn_id</a>( <span class="stringliteral">&quot;f_autoclave_full&quot;</span> ) ) {</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>        next_autoclave_type = <a class="code hl_typedef" href="type__id_8h.html#a6bc1468ac54b6176b517879f5f77564e">furn_id</a>( <span class="stringliteral">&quot;f_autoclave&quot;</span> );</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action autoclave_full, but is of type %s&quot;</span>,</div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>                  here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code hl_function" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code hl_function" href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">c_str</a>() );</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span>    }</div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span> </div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"> 2875</span>    <span class="keywordtype">bool</span> cbms = std::all_of( items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>        return i.is_bionic();</div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span>    } );</div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span> </div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>    <span class="keywordtype">bool</span> cbms_not_packed = std::all_of( items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>        return i.is_bionic() &amp;&amp; i.has_flag( flag_NO_PACKED );</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span>    } );</div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span> </div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span>    <span class="keywordflow">if</span>( items.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This autoclave is empty…&quot;</span> ) );</div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, next_autoclave_type );</div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>    }</div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>    <span class="keywordflow">if</span>( !cbms ) {</div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;ERROR Autoclave can&#39;t process non CBM items.&quot;</span> ) );</div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>    }</div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autoclave is running.&quot;</span> ) );</div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span> </div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span>    <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;clock = *items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>();</div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> Cycle_time = 90_minutes;</div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> time_left = Cycle_time - clock.<a class="code hl_function" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>();</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span> </div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span>    <span class="keywordflow">if</span>( time_left &gt; 0_turns ) {</div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"> 2900</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The cycle will be complete in %s.&quot;</span> ), <a class="code hl_function" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">to_string</a>( time_left ) );</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span>    }</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span> </div>
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"> 2904</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, next_autoclave_type );</div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> &amp;it : items ) {</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span>        <span class="keywordflow">if</span>( !it.has_flag( <a class="code hl_function" href="iexamine_8cpp.html#a662fd906916210c2d1e83f14c1d8bfda">flag_NO_PACKED</a> ) ) {</div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"> 2907</span>            it.unset_flag( <a class="code hl_function" href="iexamine_8cpp.html#a186e23235b49b90b0e027ab61cdf2eef">flag_NO_STERILE</a> );</div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span>        }</div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"> 2909</span>    }</div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The cycle is complete, the CBMs are now sterile.&quot;</span> ) );</div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span> </div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span>    <span class="keywordflow">if</span>( cbms_not_packed ) {</div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;CBMs in direct contact with the environment will almost immediately become contaminated.&quot;</span> ) );</div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>    }</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, next_autoclave_type );</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_aeb989652ea2bf7fd03b07a74fd30bd7a"><div class="ttname"><a href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">to_string</a></div><div class="ttdeci">std::string to_string(const time_duration &amp;d)</div><div class="ttdoc">Returns a string showing a duration.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00327">calendar.cpp:327</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00260">enums.h:260</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a186e23235b49b90b0e027ab61cdf2eef"><div class="ttname"><a href="iexamine_8cpp.html#a186e23235b49b90b0e027ab61cdf2eef">flag_NO_STERILE</a></div><div class="ttdeci">static const std::string flag_NO_STERILE(&quot;NO_STERILE&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a662fd906916210c2d1e83f14c1d8bfda"><div class="ttname"><a href="iexamine_8cpp.html#a662fd906916210c2d1e83f14c1d8bfda">flag_NO_PACKED</a></div><div class="ttdeci">static const std::string flag_NO_PACKED(&quot;NO_PACKED&quot;)</div></div>
<div class="ttc" id="atype__id_8h_html_a6bc1468ac54b6176b517879f5f77564e"><div class="ttname"><a href="type__id_8h.html#a6bc1468ac54b6176b517879f5f77564e">furn_id</a></div><div class="ttdeci">int_id&lt; furn_t &gt; furn_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00064">type_id.h:64</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l10034">item::age()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="string__id_8h_source.html#l00247">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="iexamine_8cpp.html#a662fd906916210c2d1e83f14c1d8bfda">flag_NO_PACKED()</a>, <a class="el" href="iexamine_8cpp.html#a186e23235b49b90b0e027ab61cdf2eef">flag_NO_STERILE()</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="enums_8h_source.html#l00260">m_good</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, and <a class="el" href="calendar_8cpp_source.html#l00327">to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a48bc61be041645e2894eb6c3d8c5e9b5" name="a48bc61be041645e2894eb6c3d8c5e9b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48bc61be041645e2894eb6c3d8c5e9b5">&#9670;&nbsp;</a></span>autodoc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::autodoc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04900">4900</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04901" name="l04901"></a><span class="lineno"> 4901</span>{</div>
<div class="line"><a id="l04902" name="l04902"></a><span class="lineno"> 4902</span>    <span class="keyword">enum</span> <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a> {</div>
<div class="line"><a id="l04903" name="l04903"></a><span class="lineno"> 4903</span>        INSTALL_CBM,</div>
<div class="line"><a id="l04904" name="l04904"></a><span class="lineno"> 4904</span>        UNINSTALL_CBM,</div>
<div class="line"><a id="l04905" name="l04905"></a><span class="lineno"> 4905</span>        BONESETTING,</div>
<div class="line"><a id="l04906" name="l04906"></a><span class="lineno"> 4906</span>        TREAT_WOUNDS,</div>
<div class="line"><a id="l04907" name="l04907"></a><span class="lineno"> 4907</span>        RAD_AWAY,</div>
<div class="line"><a id="l04908" name="l04908"></a><span class="lineno"> 4908</span>        BLOOD_ANALYSIS,</div>
<div class="line"><a id="l04909" name="l04909"></a><span class="lineno"> 4909</span>    };</div>
<div class="line"><a id="l04910" name="l04910"></a><span class="lineno"> 4910</span> </div>
<div class="line"><a id="l04911" name="l04911"></a><span class="lineno"> 4911</span>    <span class="keywordtype">bool</span> adjacent_couch = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04912" name="l04912"></a><span class="lineno"> 4912</span>    <span class="keyword">static</span> <a class="code hl_class" href="classavatar.html">avatar</a> null_player;</div>
<div class="line"><a id="l04913" name="l04913"></a><span class="lineno"> 4913</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> couch_pos;</div>
<div class="line"><a id="l04914" name="l04914"></a><span class="lineno"> 4914</span>    <a class="code hl_class" href="classplayer.html">player</a> &amp;patient = <a class="code hl_function" href="iexamine_8cpp.html#aaccf8837e47be52d193c79fadc8dcfab">player_on_couch</a>( p, examp, null_player, adjacent_couch, couch_pos );</div>
<div class="line"><a id="l04915" name="l04915"></a><span class="lineno"> 4915</span>    <a class="code hl_class" href="classCharacter.html">Character</a> &amp;Operator = <a class="code hl_function" href="iexamine_8cpp.html#aa8809a264120358059f42e401035498f">operator_present</a>( p, examp, null_player );</div>
<div class="line"><a id="l04916" name="l04916"></a><span class="lineno"> 4916</span> </div>
<div class="line"><a id="l04917" name="l04917"></a><span class="lineno"> 4917</span>    <span class="keyword">static</span> <a class="code hl_class" href="classitem.html">item</a> null_cyborg;</div>
<div class="line"><a id="l04918" name="l04918"></a><span class="lineno"> 4918</span>    <a class="code hl_class" href="classitem.html">item</a> &amp;cyborg = <a class="code hl_function" href="iexamine_8cpp.html#afb399c92728339026d6adbd0c2a7aeb5">cyborg_on_couch</a>( couch_pos, null_cyborg );</div>
<div class="line"><a id="l04919" name="l04919"></a><span class="lineno"> 4919</span> </div>
<div class="line"><a id="l04920" name="l04920"></a><span class="lineno"> 4920</span>    <span class="keywordflow">if</span>( !adjacent_couch ) {</div>
<div class="line"><a id="l04921" name="l04921"></a><span class="lineno"> 4921</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;No connected couches found.  Operation impossible.  Exiting.&quot;</span> ) );</div>
<div class="line"><a id="l04922" name="l04922"></a><span class="lineno"> 4922</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04923" name="l04923"></a><span class="lineno"> 4923</span>    }</div>
<div class="line"><a id="l04924" name="l04924"></a><span class="lineno"> 4924</span>    <span class="keywordflow">if</span>( &amp;patient == &amp;null_player ) {</div>
<div class="line"><a id="l04925" name="l04925"></a><span class="lineno"> 4925</span>        <span class="keywordflow">if</span>( &amp;cyborg != &amp;null_cyborg ) {</div>
<div class="line"><a id="l04926" name="l04926"></a><span class="lineno"> 4926</span>            <span class="keywordflow">if</span>( cyborg.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="iexamine_8cpp.html#a4ea2c47870b82e831292a9239b2e6ff2">itype_corpse</a> &amp;&amp; !cyborg.<a class="code hl_variable" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a id="l04927" name="l04927"></a><span class="lineno"> 4927</span>                <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Patient is dead.  Please remove corpse to proceed.  Exiting.&quot;</span> ) );</div>
<div class="line"><a id="l04928" name="l04928"></a><span class="lineno"> 4928</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04929" name="l04929"></a><span class="lineno"> 4929</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cyborg.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="iexamine_8cpp.html#a9e957908de7da4eb428f8ba2c18e372e">itype_bot_broken_cyborg</a> || cyborg.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="iexamine_8cpp.html#a4ea2c47870b82e831292a9239b2e6ff2">itype_corpse</a> ) {</div>
<div class="line"><a id="l04930" name="l04930"></a><span class="lineno"> 4930</span>                <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;ERROR Bionic Level Assessement: FULL CYBORG.  Autodoc Mk. XI can&#39;t opperate.  Please move patient to appropriate facility.  Exiting.&quot;</span> ) );</div>
<div class="line"><a id="l04931" name="l04931"></a><span class="lineno"> 4931</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04932" name="l04932"></a><span class="lineno"> 4932</span>            }</div>
<div class="line"><a id="l04933" name="l04933"></a><span class="lineno"> 4933</span> </div>
<div class="line"><a id="l04934" name="l04934"></a><span class="lineno"> 4934</span>            <a class="code hl_class" href="classuilist.html">uilist</a> cmenu;</div>
<div class="line"><a id="l04935" name="l04935"></a><span class="lineno"> 4935</span>            cmenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Autodoc Mk. XI.  Status: Online.  Please choose operation.&quot;</span> );</div>
<div class="line"><a id="l04936" name="l04936"></a><span class="lineno"> 4936</span>            cmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 1, <span class="keyword">true</span>, <span class="charliteral">&#39;i&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Choose Compact Bionic Module to install.&quot;</span> ) );</div>
<div class="line"><a id="l04937" name="l04937"></a><span class="lineno"> 4937</span>            cmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 2, <span class="keyword">true</span>, <span class="charliteral">&#39;u&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Choose installed bionic to uninstall.&quot;</span> ) );</div>
<div class="line"><a id="l04938" name="l04938"></a><span class="lineno"> 4938</span>            cmenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l04939" name="l04939"></a><span class="lineno"> 4939</span> </div>
<div class="line"><a id="l04940" name="l04940"></a><span class="lineno"> 4940</span>            <span class="keywordflow">switch</span>( cmenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a id="l04941" name="l04941"></a><span class="lineno"> 4941</span>                <span class="keywordflow">case</span> 1: {</div>
<div class="line"><a id="l04942" name="l04942"></a><span class="lineno"> 4942</span>                    <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;ERROR NO SPACE AVAILABLE.  Operation impossible.  Exiting.&quot;</span> ) );</div>
<div class="line"><a id="l04943" name="l04943"></a><span class="lineno"> 4943</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04944" name="l04944"></a><span class="lineno"> 4944</span>                }</div>
<div class="line"><a id="l04945" name="l04945"></a><span class="lineno"> 4945</span>                <span class="keywordflow">case</span> 2: {</div>
<div class="line"><a id="l04946" name="l04946"></a><span class="lineno"> 4946</span>                    std::vector&lt;std::string&gt; choice_names;</div>
<div class="line"><a id="l04947" name="l04947"></a><span class="lineno"> 4947</span>                    choice_names.push_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Personality_Override&quot;</span> ) );</div>
<div class="line"><a id="l04948" name="l04948"></a><span class="lineno"> 4948</span>                    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; 6; i++ ) {</div>
<div class="line"><a id="l04949" name="l04949"></a><span class="lineno"> 4949</span>                        choice_names.push_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;C0RR#PTED?D#TA&quot;</span> ) );</div>
<div class="line"><a id="l04950" name="l04950"></a><span class="lineno"> 4950</span>                    }</div>
<div class="line"><a id="l04951" name="l04951"></a><span class="lineno"> 4951</span>                    <span class="keywordtype">int</span> choice_index = <a class="code hl_class" href="classuilist.html">uilist</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Choose bionic to uninstall&quot;</span> ), choice_names );</div>
<div class="line"><a id="l04952" name="l04952"></a><span class="lineno"> 4952</span>                    <span class="keywordflow">if</span>( choice_index == 0 ) {</div>
<div class="line"><a id="l04953" name="l04953"></a><span class="lineno"> 4953</span>                        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;save_cyborg( &amp;cyborg, couch_pos, p );</div>
<div class="line"><a id="l04954" name="l04954"></a><span class="lineno"> 4954</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04955" name="l04955"></a><span class="lineno"> 4955</span>                        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;UNKNOWN COMMAND.  Autodoc Mk. XI. Crashed.&quot;</span> ) );</div>
<div class="line"><a id="l04956" name="l04956"></a><span class="lineno"> 4956</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04957" name="l04957"></a><span class="lineno"> 4957</span>                    }</div>
<div class="line"><a id="l04958" name="l04958"></a><span class="lineno"> 4958</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04959" name="l04959"></a><span class="lineno"> 4959</span>                }</div>
<div class="line"><a id="l04960" name="l04960"></a><span class="lineno"> 4960</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l04961" name="l04961"></a><span class="lineno"> 4961</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04962" name="l04962"></a><span class="lineno"> 4962</span>            }</div>
<div class="line"><a id="l04963" name="l04963"></a><span class="lineno"> 4963</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04964" name="l04964"></a><span class="lineno"> 4964</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04965" name="l04965"></a><span class="lineno"> 4965</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;No patient found located on the connected couches.  Operation impossible.  Exiting.&quot;</span> ) );</div>
<div class="line"><a id="l04966" name="l04966"></a><span class="lineno"> 4966</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04967" name="l04967"></a><span class="lineno"> 4967</span>        }</div>
<div class="line"><a id="l04968" name="l04968"></a><span class="lineno"> 4968</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( patient.<a class="code hl_variable" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code hl_function" href="classplayer__activity.html#a316b1ded84b8c60b250ab06661f5bce5">id</a>() == <a class="code hl_class" href="classstring__id.html">activity_id</a>( <span class="stringliteral">&quot;ACT_OPERATION&quot;</span> ) ) {</div>
<div class="line"><a id="l04969" name="l04969"></a><span class="lineno"> 4969</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Operation underway.  Please wait until the end of the current procedure.  Estimated time remaining: %s.&quot;</span> ),</div>
<div class="line"><a id="l04970" name="l04970"></a><span class="lineno"> 4970</span>               <a class="code hl_function" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">to_string</a>( <a class="code hl_function" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( patient.<a class="code hl_variable" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code hl_variable" href="classplayer__activity.html#a3a477cad2588badd9c96627a91f5eb61">moves_left</a> / 100 ) ) );</div>
<div class="line"><a id="l04971" name="l04971"></a><span class="lineno"> 4971</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc is working on %s.&quot;</span> ), patient.<a class="code hl_function" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>() );</div>
<div class="line"><a id="l04972" name="l04972"></a><span class="lineno"> 4972</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04973" name="l04973"></a><span class="lineno"> 4973</span>    }</div>
<div class="line"><a id="l04974" name="l04974"></a><span class="lineno"> 4974</span> </div>
<div class="line"><a id="l04975" name="l04975"></a><span class="lineno"> 4975</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> unsafe_usage = &amp;Operator == &amp;null_player || ( &amp;Operator == &amp;p &amp;&amp; &amp;patient == &amp;p );</div>
<div class="line"><a id="l04976" name="l04976"></a><span class="lineno"> 4976</span>    std::string autodoc_header = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Autodoc Mk. XI.  Status: Online.  Please choose operation&quot;</span> );</div>
<div class="line"><a id="l04977" name="l04977"></a><span class="lineno"> 4977</span>    <span class="keywordflow">if</span>( unsafe_usage ) {</div>
<div class="line"><a id="l04978" name="l04978"></a><span class="lineno"> 4978</span>        <span class="keyword">const</span> std::string &amp;warning_sign = <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot; /&quot;</span>, <a class="code hl_define" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a> ) + <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;!&quot;</span>,</div>
<div class="line"><a id="l04979" name="l04979"></a><span class="lineno"> 4979</span>                                          <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) + <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;\\&quot;</span>, <a class="code hl_define" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a> );</div>
<div class="line"><a id="l04980" name="l04980"></a><span class="lineno"> 4980</span>        <span class="keyword">const</span> std::string &amp;warning = warning_sign + <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot; WARNING: Operator missing&quot;</span> ),</div>
<div class="line"><a id="l04981" name="l04981"></a><span class="lineno"> 4981</span>                                     <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) + warning_sign;</div>
<div class="line"><a id="l04982" name="l04982"></a><span class="lineno"> 4982</span>        autodoc_header = warning +</div>
<div class="line"><a id="l04983" name="l04983"></a><span class="lineno"> 4983</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\n Using the Autodoc without an operator can lead to &lt;color_light_cyan&gt;serious injuries&lt;/color&gt; and &lt;color_light_cyan&gt;various internal bionic malfunctions&lt;/color&gt;.\n Manufacturer &lt;color_light_green&gt;guarantees automated bionic installation in functional condition&lt;/color&gt;.\n Manufacturer &lt;color_light_cyan&gt;does not guarantee automated bionic uninstallation&lt;/color&gt;.\n By continuing with the operation you accept the risks and acknowledge that you will not take any legal actions against this facility in case of an accident.\n\nThe following skills affect autodoc installation: Computers, First Aid, and Electronics.&quot;</span> );</div>
<div class="line"><a id="l04984" name="l04984"></a><span class="lineno"> 4984</span>    }</div>
<div class="line"><a id="l04985" name="l04985"></a><span class="lineno"> 4985</span> </div>
<div class="line"><a id="l04986" name="l04986"></a><span class="lineno"> 4986</span>    std::vector&lt;item&gt; arm_splints;</div>
<div class="line"><a id="l04987" name="l04987"></a><span class="lineno"> 4987</span>    std::vector&lt;item&gt; leg_splints;</div>
<div class="line"><a id="l04988" name="l04988"></a><span class="lineno"> 4988</span> </div>
<div class="line"><a id="l04989" name="l04989"></a><span class="lineno"> 4989</span>    <span class="comment">// find splints on the ground</span></div>
<div class="line"><a id="l04990" name="l04990"></a><span class="lineno"> 4990</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;supplies : <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().i_at( examp ) ) {</div>
<div class="line"><a id="l04991" name="l04991"></a><span class="lineno"> 4991</span>        <span class="keywordflow">if</span>( supplies.typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a7f4916fdb349021f0c436cb1f91b80fa">itype_arm_splint</a> ) {</div>
<div class="line"><a id="l04992" name="l04992"></a><span class="lineno"> 4992</span>            arm_splints.push_back( supplies );</div>
<div class="line"><a id="l04993" name="l04993"></a><span class="lineno"> 4993</span>        }</div>
<div class="line"><a id="l04994" name="l04994"></a><span class="lineno"> 4994</span>        <span class="keywordflow">if</span>( supplies.typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a63cd91492b3d8da8ba47a1253cde9886">itype_leg_splint</a> ) {</div>
<div class="line"><a id="l04995" name="l04995"></a><span class="lineno"> 4995</span>            leg_splints.push_back( supplies );</div>
<div class="line"><a id="l04996" name="l04996"></a><span class="lineno"> 4996</span>        }</div>
<div class="line"><a id="l04997" name="l04997"></a><span class="lineno"> 4997</span>    }</div>
<div class="line"><a id="l04998" name="l04998"></a><span class="lineno"> 4998</span>    <span class="comment">// find splints in vehicle</span></div>
<div class="line"><a id="l04999" name="l04999"></a><span class="lineno"> 4999</span>    <span class="keywordflow">if</span>( <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; vp = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().veh_at( examp ).part_with_feature(</div>
<div class="line"><a id="l05000" name="l05000"></a><span class="lineno"> 5000</span>                <a class="code hl_function" href="iexamine_8cpp.html#ab849b88436e7694e040bcbf2b50b7a0b">flag_AUTODOC</a>, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l05001" name="l05001"></a><span class="lineno"> 5001</span>        <span class="keyword">auto</span> dest_veh = &amp;vp-&gt;vehicle();</div>
<div class="line"><a id="l05002" name="l05002"></a><span class="lineno"> 5002</span>        <span class="keywordtype">int</span> dest_part = vp-&gt;part_index();</div>
<div class="line"><a id="l05003" name="l05003"></a><span class="lineno"> 5003</span>        <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> &amp;it : dest_veh-&gt;get_items( dest_part ) ) {</div>
<div class="line"><a id="l05004" name="l05004"></a><span class="lineno"> 5004</span>            <span class="keywordflow">if</span>( it.typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a7f4916fdb349021f0c436cb1f91b80fa">itype_arm_splint</a> ) {</div>
<div class="line"><a id="l05005" name="l05005"></a><span class="lineno"> 5005</span>                arm_splints.push_back( it );</div>
<div class="line"><a id="l05006" name="l05006"></a><span class="lineno"> 5006</span>            }</div>
<div class="line"><a id="l05007" name="l05007"></a><span class="lineno"> 5007</span>            <span class="keywordflow">if</span>( it.typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a63cd91492b3d8da8ba47a1253cde9886">itype_leg_splint</a> ) {</div>
<div class="line"><a id="l05008" name="l05008"></a><span class="lineno"> 5008</span>                leg_splints.push_back( it );</div>
<div class="line"><a id="l05009" name="l05009"></a><span class="lineno"> 5009</span>            }</div>
<div class="line"><a id="l05010" name="l05010"></a><span class="lineno"> 5010</span>        }</div>
<div class="line"><a id="l05011" name="l05011"></a><span class="lineno"> 5011</span>    }</div>
<div class="line"><a id="l05012" name="l05012"></a><span class="lineno"> 5012</span> </div>
<div class="line"><a id="l05013" name="l05013"></a><span class="lineno"> 5013</span>    autodoc_header +=</div>
<div class="line"><a id="l05014" name="l05014"></a><span class="lineno"> 5014</span>        <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a id="l05015" name="l05015"></a><span class="lineno"> 5015</span>            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\n\n&lt;color_white&gt;Internal supplies:&lt;/color&gt;\n Arm splints: %d\n Leg splints: %d&quot;</span> ),</div>
<div class="line"><a id="l05016" name="l05016"></a><span class="lineno"> 5016</span>            arm_splints.size(), leg_splints.size() );</div>
<div class="line"><a id="l05017" name="l05017"></a><span class="lineno"> 5017</span> </div>
<div class="line"><a id="l05018" name="l05018"></a><span class="lineno"> 5018</span>    <a class="code hl_class" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a id="l05019" name="l05019"></a><span class="lineno"> 5019</span>    amenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = autodoc_header;</div>
<div class="line"><a id="l05020" name="l05020"></a><span class="lineno"> 5020</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( INSTALL_CBM, <span class="keyword">true</span>, <span class="charliteral">&#39;i&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Choose Compact Bionic Module to install&quot;</span> ) );</div>
<div class="line"><a id="l05021" name="l05021"></a><span class="lineno"> 5021</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( UNINSTALL_CBM, <span class="keyword">true</span>, <span class="charliteral">&#39;u&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Choose installed bionic to uninstall&quot;</span> ) );</div>
<div class="line"><a id="l05022" name="l05022"></a><span class="lineno"> 5022</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( BONESETTING, <span class="keyword">true</span>, <span class="charliteral">&#39;s&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Splint broken limbs&quot;</span> ) );</div>
<div class="line"><a id="l05023" name="l05023"></a><span class="lineno"> 5023</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( TREAT_WOUNDS, <span class="keyword">true</span>, <span class="charliteral">&#39;w&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Treat wounds&quot;</span> ) );</div>
<div class="line"><a id="l05024" name="l05024"></a><span class="lineno"> 5024</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( RAD_AWAY, <span class="keyword">true</span>, <span class="charliteral">&#39;r&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Check radiation level&quot;</span> ) );</div>
<div class="line"><a id="l05025" name="l05025"></a><span class="lineno"> 5025</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( BLOOD_ANALYSIS, <span class="keyword">true</span>, <span class="charliteral">&#39;b&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Conduct blood analysis&quot;</span> ) );</div>
<div class="line"><a id="l05026" name="l05026"></a><span class="lineno"> 5026</span> </div>
<div class="line"><a id="l05027" name="l05027"></a><span class="lineno"> 5027</span>    amenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l05028" name="l05028"></a><span class="lineno"> 5028</span> </div>
<div class="line"><a id="l05029" name="l05029"></a><span class="lineno"> 5029</span>    <span class="keywordtype">bool</span> needs_anesthesia = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05030" name="l05030"></a><span class="lineno"> 5030</span>    std::vector&lt;tool_comp&gt; anesth_kit;</div>
<div class="line"><a id="l05031" name="l05031"></a><span class="lineno"> 5031</span> </div>
<div class="line"><a id="l05032" name="l05032"></a><span class="lineno"> 5032</span>    <span class="keywordflow">if</span>( patient.has_trait( <a class="code hl_variable" href="iexamine_8cpp.html#af20cb84a6e8ccc0ed66c352edf29143b">trait_NOPAIN</a> ) || patient.has_bionic( <a class="code hl_variable" href="iexamine_8cpp.html#a15450ecf5b34a615affe959125bf1626">bio_painkiller</a> ) ||</div>
<div class="line"><a id="l05033" name="l05033"></a><span class="lineno"> 5033</span>        amenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt; 1 ) {</div>
<div class="line"><a id="l05034" name="l05034"></a><span class="lineno"> 5034</span>        needs_anesthesia = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05035" name="l05035"></a><span class="lineno"> 5035</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05036" name="l05036"></a><span class="lineno"> 5036</span>        <span class="keyword">const</span> <a class="code hl_class" href="classinventory.html">inventory</a> &amp;crafting_inv = p.<a class="code hl_function" href="classCharacter.html#abd358c7a7757575b70b1613dbcce40a7">crafting_inventory</a>();</div>
<div class="line"><a id="l05037" name="l05037"></a><span class="lineno"> 5037</span>        std::vector&lt;const item *&gt; a_filter = crafting_inv.<a class="code hl_function" href="classvisitable.html#a5b3c37fbe8209cab68aa26d3cc7f4300">items_with</a>( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l05038" name="l05038"></a><span class="lineno"> 5038</span>            <span class="keywordflow">return</span> it.<a class="code hl_function" href="classvisitable.html#a62ad0b8f7866ec171a709c56e4a25ff2">has_quality</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a42ac34659f1b9fc5662b2f849fd96dab">qual_ANESTHESIA</a> );</div>
<div class="line"><a id="l05039" name="l05039"></a><span class="lineno"> 5039</span>        } );</div>
<div class="line"><a id="l05040" name="l05040"></a><span class="lineno"> 5040</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> *anesthesia_item : a_filter ) {</div>
<div class="line"><a id="l05041" name="l05041"></a><span class="lineno"> 5041</span>            <span class="keywordflow">if</span>( anesthesia_item-&gt;ammo_remaining() &gt;= 1 ) {</div>
<div class="line"><a id="l05042" name="l05042"></a><span class="lineno"> 5042</span>                anesth_kit.push_back( <a class="code hl_struct" href="structtool__comp.html">tool_comp</a>( anesthesia_item-&gt;typeId(), 1 ) );</div>
<div class="line"><a id="l05043" name="l05043"></a><span class="lineno"> 5043</span>            }</div>
<div class="line"><a id="l05044" name="l05044"></a><span class="lineno"> 5044</span>        }</div>
<div class="line"><a id="l05045" name="l05045"></a><span class="lineno"> 5045</span>    }</div>
<div class="line"><a id="l05046" name="l05046"></a><span class="lineno"> 5046</span> </div>
<div class="line"><a id="l05047" name="l05047"></a><span class="lineno"> 5047</span>    <span class="keywordflow">switch</span>( amenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a id="l05048" name="l05048"></a><span class="lineno"> 5048</span>        <span class="keywordflow">case</span> INSTALL_CBM: {</div>
<div class="line"><a id="l05049" name="l05049"></a><span class="lineno"> 5049</span>            <a class="code hl_class" href="classitem__location.html">item_location</a> <a class="code hl_struct" href="structbionic.html">bionic</a> = <a class="code hl_function" href="namespacegame__menus_1_1inv.html#abfe0107db269ec17344fc0735092fd53">game_menus::inv::install_bionic</a>( p, patient );</div>
<div class="line"><a id="l05050" name="l05050"></a><span class="lineno"> 5050</span> </div>
<div class="line"><a id="l05051" name="l05051"></a><span class="lineno"> 5051</span>            <span class="keywordflow">if</span>( !<a class="code hl_struct" href="structbionic.html">bionic</a> ) {</div>
<div class="line"><a id="l05052" name="l05052"></a><span class="lineno"> 5052</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05053" name="l05053"></a><span class="lineno"> 5053</span>            }</div>
<div class="line"><a id="l05054" name="l05054"></a><span class="lineno"> 5054</span> </div>
<div class="line"><a id="l05055" name="l05055"></a><span class="lineno"> 5055</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structitype.html">itype</a> *itemtype = <a class="code hl_struct" href="structbionic.html">bionic</a>.get_item()-&gt;type;</div>
<div class="line"><a id="l05056" name="l05056"></a><span class="lineno"> 5056</span> </div>
<div class="line"><a id="l05057" name="l05057"></a><span class="lineno"> 5057</span>            <a class="code hl_class" href="classplayer.html">player</a> &amp;installer = <a class="code hl_function" href="iexamine_8cpp.html#ab22e90f992c0815576e11c8216f28945">best_installer</a>( p, null_player, itemtype-&gt;<a class="code hl_variable" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;difficulty );</div>
<div class="line"><a id="l05058" name="l05058"></a><span class="lineno"> 5058</span>            <span class="keywordflow">if</span>( &amp;installer == &amp;null_player ) {</div>
<div class="line"><a id="l05059" name="l05059"></a><span class="lineno"> 5059</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05060" name="l05060"></a><span class="lineno"> 5060</span>            }</div>
<div class="line"><a id="l05061" name="l05061"></a><span class="lineno"> 5061</span> </div>
<div class="line"><a id="l05062" name="l05062"></a><span class="lineno"> 5062</span>            std::vector&lt;item_comp&gt; progs;</div>
<div class="line"><a id="l05063" name="l05063"></a><span class="lineno"> 5063</span>            <span class="keywordtype">bool</span> has_install_program = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05064" name="l05064"></a><span class="lineno"> 5064</span> </div>
<div class="line"><a id="l05065" name="l05065"></a><span class="lineno"> 5065</span>            std::vector&lt;const item *&gt; install_programs = p.<a class="code hl_function" href="classCharacter.html#abd358c7a7757575b70b1613dbcce40a7">crafting_inventory</a>().<a class="code hl_function" href="classvisitable.html#a5b3c37fbe8209cab68aa26d3cc7f4300">items_with</a>( [itemtype](</div>
<div class="line"><a id="l05066" name="l05066"></a><span class="lineno"> 5066</span>                        <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) -&gt; <span class="keywordtype">bool</span> { <span class="keywordflow">return</span> it.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == itemtype-&gt;<a class="code hl_variable" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;installation_data; } );</div>
<div class="line"><a id="l05067" name="l05067"></a><span class="lineno"> 5067</span> </div>
<div class="line"><a id="l05068" name="l05068"></a><span class="lineno"> 5068</span>            <span class="keywordflow">if</span>( !install_programs.empty() ) {</div>
<div class="line"><a id="l05069" name="l05069"></a><span class="lineno"> 5069</span>                has_install_program = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05070" name="l05070"></a><span class="lineno"> 5070</span>                progs.emplace_back( install_programs[0]-&gt;typeId(), 1 );</div>
<div class="line"><a id="l05071" name="l05071"></a><span class="lineno"> 5071</span>            }</div>
<div class="line"><a id="l05072" name="l05072"></a><span class="lineno"> 5072</span> </div>
<div class="line"><a id="l05073" name="l05073"></a><span class="lineno"> 5073</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> weight = 7;</div>
<div class="line"><a id="l05074" name="l05074"></a><span class="lineno"> 5074</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> surgery_duration = itemtype-&gt;<a class="code hl_variable" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;difficulty * 2;</div>
<div class="line"><a id="l05075" name="l05075"></a><span class="lineno"> 5075</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structrequirement__data.html">requirement_data</a> req_anesth = *<a class="code hl_typedef" href="type__id_8h.html#afb36dc6d5925e5112e70d60a171ebeb1">requirement_id</a>( <span class="stringliteral">&quot;anesthetic&quot;</span> ) *</div>
<div class="line"><a id="l05076" name="l05076"></a><span class="lineno"> 5076</span>                                                surgery_duration * weight;</div>
<div class="line"><a id="l05077" name="l05077"></a><span class="lineno"> 5077</span> </div>
<div class="line"><a id="l05078" name="l05078"></a><span class="lineno"> 5078</span>            <span class="keywordflow">if</span>( patient.can_install_bionics( ( *itemtype ), installer, <span class="keyword">true</span>, has_install_program ? 10 : -1 ) ) {</div>
<div class="line"><a id="l05079" name="l05079"></a><span class="lineno"> 5079</span>                <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> <a class="code hl_enumvalue" href="namespacefields.html#af8bc739ca8fbe535a44afc02da973280ab85ec314bf443b797ef8a66b3b03f8a4">duration</a> = itemtype-&gt;<a class="code hl_variable" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;difficulty * 20_minutes;</div>
<div class="line"><a id="l05080" name="l05080"></a><span class="lineno"> 5080</span>                patient.introduce_into_anesthesia( duration, installer, needs_anesthesia );</div>
<div class="line"><a id="l05081" name="l05081"></a><span class="lineno"> 5081</span>                <a class="code hl_struct" href="structbionic.html">bionic</a>.remove_item();</div>
<div class="line"><a id="l05082" name="l05082"></a><span class="lineno"> 5082</span>                <span class="keywordflow">if</span>( needs_anesthesia ) {</div>
<div class="line"><a id="l05083" name="l05083"></a><span class="lineno"> 5083</span>                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : req_anesth.<a class="code hl_function" href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">get_components</a>() ) {</div>
<div class="line"><a id="l05084" name="l05084"></a><span class="lineno"> 5084</span>                        p.<a class="code hl_function" href="classplayer.html#ad1f5e6d21b83313ab148302140083b99">consume_items</a>( e, 1, <a class="code hl_function" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a id="l05085" name="l05085"></a><span class="lineno"> 5085</span>                    }</div>
<div class="line"><a id="l05086" name="l05086"></a><span class="lineno"> 5086</span>                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : req_anesth.<a class="code hl_function" href="structrequirement__data.html#a175d46943600149603b7a915cb48092b">get_tools</a>() ) {</div>
<div class="line"><a id="l05087" name="l05087"></a><span class="lineno"> 5087</span>                        p.<a class="code hl_function" href="classplayer.html#aafa6cc2db2568af687ab21f09f8e4c2e">consume_tools</a>( e );</div>
<div class="line"><a id="l05088" name="l05088"></a><span class="lineno"> 5088</span>                    }</div>
<div class="line"><a id="l05089" name="l05089"></a><span class="lineno"> 5089</span>                    p.<a class="code hl_function" href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">invalidate_crafting_inventory</a>();</div>
<div class="line"><a id="l05090" name="l05090"></a><span class="lineno"> 5090</span>                }</div>
<div class="line"><a id="l05091" name="l05091"></a><span class="lineno"> 5091</span>                installer.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_minutes ) );</div>
<div class="line"><a id="l05092" name="l05092"></a><span class="lineno"> 5092</span>                patient.install_bionics( ( *itemtype ), installer, <span class="keyword">true</span>, has_install_program ? 10 : -1 );</div>
<div class="line"><a id="l05093" name="l05093"></a><span class="lineno"> 5093</span> </div>
<div class="line"><a id="l05094" name="l05094"></a><span class="lineno"> 5094</span>                <span class="keywordflow">if</span>( has_install_program ) {</div>
<div class="line"><a id="l05095" name="l05095"></a><span class="lineno"> 5095</span>                    patient.consume_items( progs );</div>
<div class="line"><a id="l05096" name="l05096"></a><span class="lineno"> 5096</span>                }</div>
<div class="line"><a id="l05097" name="l05097"></a><span class="lineno"> 5097</span>            }</div>
<div class="line"><a id="l05098" name="l05098"></a><span class="lineno"> 5098</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05099" name="l05099"></a><span class="lineno"> 5099</span>        }</div>
<div class="line"><a id="l05100" name="l05100"></a><span class="lineno"> 5100</span> </div>
<div class="line"><a id="l05101" name="l05101"></a><span class="lineno"> 5101</span>        <span class="keywordflow">case</span> UNINSTALL_CBM: {</div>
<div class="line"><a id="l05102" name="l05102"></a><span class="lineno"> 5102</span>            <span class="keyword">const</span> <a class="code hl_class" href="classbionic__collection.html">bionic_collection</a> &amp;installed_bionics = *patient.my_bionics;</div>
<div class="line"><a id="l05103" name="l05103"></a><span class="lineno"> 5103</span>            <span class="keywordflow">if</span>( installed_bionics.empty() ) {</div>
<div class="line"><a id="l05104" name="l05104"></a><span class="lineno"> 5104</span>                <a class="code hl_function" href="iexamine_8cpp.html#a59fc494b26696edaf3a5e466ff3adc4e">popup_player_or_npc</a>( patient, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You don&#39;t have any bionics installed.&quot;</span> ),</div>
<div class="line"><a id="l05105" name="l05105"></a><span class="lineno"> 5105</span>                                     <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; doesn&#39;t have any bionics installed.&quot;</span> ) );</div>
<div class="line"><a id="l05106" name="l05106"></a><span class="lineno"> 5106</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05107" name="l05107"></a><span class="lineno"> 5107</span>            }</div>
<div class="line"><a id="l05108" name="l05108"></a><span class="lineno"> 5108</span> </div>
<div class="line"><a id="l05109" name="l05109"></a><span class="lineno"> 5109</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structbionic.html">bionic</a> &amp;bio : installed_bionics ) {</div>
<div class="line"><a id="l05110" name="l05110"></a><span class="lineno"> 5110</span>                <span class="keywordflow">if</span>( bio.id != <a class="code hl_variable" href="iexamine_8cpp.html#a5998fd340ee876cbfcff37251cf027cd">bio_power_storage</a> ||</div>
<div class="line"><a id="l05111" name="l05111"></a><span class="lineno"> 5111</span>                    bio.<a class="code hl_function" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a> != <a class="code hl_variable" href="iexamine_8cpp.html#ac095a9d5df7beadb44d07075e22740dd">bio_power_storage_mkII</a> ) {</div>
<div class="line"><a id="l05112" name="l05112"></a><span class="lineno"> 5112</span>                    <span class="keywordflow">if</span>( bio.info().itype().is_valid() ) {</div>
<div class="line"><a id="l05113" name="l05113"></a><span class="lineno"> 5113</span>                        <span class="comment">// put cbm items in your inventory</span></div>
<div class="line"><a id="l05114" name="l05114"></a><span class="lineno"> 5114</span>                        <a class="code hl_class" href="classitem.html">item</a> bionic_to_uninstall( bio.id.str(), <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l05115" name="l05115"></a><span class="lineno"> 5115</span>                        bionic_to_uninstall.set_flag( <a class="code hl_function" href="iexamine_8cpp.html#a4d722ed69c7a86c615a040088ae84d12">flag_IN_CBM</a> );</div>
<div class="line"><a id="l05116" name="l05116"></a><span class="lineno"> 5116</span>                        bionic_to_uninstall.set_flag( <a class="code hl_function" href="iexamine_8cpp.html#a186e23235b49b90b0e027ab61cdf2eef">flag_NO_STERILE</a> );</div>
<div class="line"><a id="l05117" name="l05117"></a><span class="lineno"> 5117</span>                        bionic_to_uninstall.set_flag( <a class="code hl_function" href="iexamine_8cpp.html#a662fd906916210c2d1e83f14c1d8bfda">flag_NO_PACKED</a> );</div>
<div class="line"><a id="l05118" name="l05118"></a><span class="lineno"> 5118</span>                        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.i_add( bionic_to_uninstall );</div>
<div class="line"><a id="l05119" name="l05119"></a><span class="lineno"> 5119</span>                    }</div>
<div class="line"><a id="l05120" name="l05120"></a><span class="lineno"> 5120</span>                }</div>
<div class="line"><a id="l05121" name="l05121"></a><span class="lineno"> 5121</span>            }</div>
<div class="line"><a id="l05122" name="l05122"></a><span class="lineno"> 5122</span> </div>
<div class="line"><a id="l05123" name="l05123"></a><span class="lineno"> 5123</span>            <span class="keyword">const</span> <a class="code hl_class" href="classitem__location.html">item_location</a> <a class="code hl_struct" href="structbionic.html">bionic</a> = <a class="code hl_function" href="namespacegame__menus_1_1inv.html#afa10471cb9da38879b1ff7b59ca3b2e8">game_menus::inv::uninstall_bionic</a>( p, patient );</div>
<div class="line"><a id="l05124" name="l05124"></a><span class="lineno"> 5124</span>            <span class="keywordflow">if</span>( !<a class="code hl_struct" href="structbionic.html">bionic</a> ) {</div>
<div class="line"><a id="l05125" name="l05125"></a><span class="lineno"> 5125</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.remove_items_with( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {<span class="comment">// remove cbm items from inventory</span></div>
<div class="line"><a id="l05126" name="l05126"></a><span class="lineno"> 5126</span>                    <span class="keywordflow">return</span> it.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a4d722ed69c7a86c615a040088ae84d12">flag_IN_CBM</a> );</div>
<div class="line"><a id="l05127" name="l05127"></a><span class="lineno"> 5127</span>                } );</div>
<div class="line"><a id="l05128" name="l05128"></a><span class="lineno"> 5128</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05129" name="l05129"></a><span class="lineno"> 5129</span>            }</div>
<div class="line"><a id="l05130" name="l05130"></a><span class="lineno"> 5130</span>            <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> *it = <a class="code hl_struct" href="structbionic.html">bionic</a>.get_item();</div>
<div class="line"><a id="l05131" name="l05131"></a><span class="lineno"> 5131</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structitype.html">itype</a> *itemtype = it-&gt;<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>;</div>
<div class="line"><a id="l05132" name="l05132"></a><span class="lineno"> 5132</span>            <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">bionic_id</a> &amp;bid = itemtype-&gt;<a class="code hl_variable" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;id;</div>
<div class="line"><a id="l05133" name="l05133"></a><span class="lineno"> 5133</span> </div>
<div class="line"><a id="l05134" name="l05134"></a><span class="lineno"> 5134</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.remove_items_with( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {<span class="comment">// remove cbm items from inventory</span></div>
<div class="line"><a id="l05135" name="l05135"></a><span class="lineno"> 5135</span>                <span class="keywordflow">return</span> it.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a4d722ed69c7a86c615a040088ae84d12">flag_IN_CBM</a> );</div>
<div class="line"><a id="l05136" name="l05136"></a><span class="lineno"> 5136</span>            } );</div>
<div class="line"><a id="l05137" name="l05137"></a><span class="lineno"> 5137</span> </div>
<div class="line"><a id="l05138" name="l05138"></a><span class="lineno"> 5138</span>            <span class="comment">// Malfunctioning bionics that don&#39;t have associated items and get a difficulty of 12</span></div>
<div class="line"><a id="l05139" name="l05139"></a><span class="lineno"> 5139</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> difficulty = itemtype-&gt;<a class="code hl_variable" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a> ? itemtype-&gt;<a class="code hl_variable" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;difficulty : 12;</div>
<div class="line"><a id="l05140" name="l05140"></a><span class="lineno"> 5140</span>            <span class="keyword">const</span> <span class="keywordtype">float</span> volume_anesth = difficulty * 20 * 2; <span class="comment">// 2ml/min</span></div>
<div class="line"><a id="l05141" name="l05141"></a><span class="lineno"> 5141</span> </div>
<div class="line"><a id="l05142" name="l05142"></a><span class="lineno"> 5142</span>            <a class="code hl_class" href="classplayer.html">player</a> &amp;installer = <a class="code hl_function" href="iexamine_8cpp.html#ab22e90f992c0815576e11c8216f28945">best_installer</a>( p, null_player, difficulty );</div>
<div class="line"><a id="l05143" name="l05143"></a><span class="lineno"> 5143</span>            <span class="keywordflow">if</span>( &amp;installer == &amp;null_player ) {</div>
<div class="line"><a id="l05144" name="l05144"></a><span class="lineno"> 5144</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05145" name="l05145"></a><span class="lineno"> 5145</span>            }</div>
<div class="line"><a id="l05146" name="l05146"></a><span class="lineno"> 5146</span> </div>
<div class="line"><a id="l05147" name="l05147"></a><span class="lineno"> 5147</span>            <span class="keywordflow">if</span>( patient.can_uninstall_bionic( bid, installer, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l05148" name="l05148"></a><span class="lineno"> 5148</span>                <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> <a class="code hl_enumvalue" href="namespacefields.html#af8bc739ca8fbe535a44afc02da973280ab85ec314bf443b797ef8a66b3b03f8a4">duration</a> = difficulty * 20_minutes;</div>
<div class="line"><a id="l05149" name="l05149"></a><span class="lineno"> 5149</span>                patient.introduce_into_anesthesia( duration, installer, needs_anesthesia );</div>
<div class="line"><a id="l05150" name="l05150"></a><span class="lineno"> 5150</span>                <span class="keywordflow">if</span>( needs_anesthesia ) {</div>
<div class="line"><a id="l05151" name="l05151"></a><span class="lineno"> 5151</span>                    p.<a class="code hl_function" href="classplayer.html#aafa6cc2db2568af687ab21f09f8e4c2e">consume_tools</a>( anesth_kit, volume_anesth );</div>
<div class="line"><a id="l05152" name="l05152"></a><span class="lineno"> 5152</span>                }</div>
<div class="line"><a id="l05153" name="l05153"></a><span class="lineno"> 5153</span>                installer.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_minutes ) );</div>
<div class="line"><a id="l05154" name="l05154"></a><span class="lineno"> 5154</span>                patient.uninstall_bionic( bid, installer, <span class="keyword">true</span> );</div>
<div class="line"><a id="l05155" name="l05155"></a><span class="lineno"> 5155</span>            }</div>
<div class="line"><a id="l05156" name="l05156"></a><span class="lineno"> 5156</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05157" name="l05157"></a><span class="lineno"> 5157</span>        }</div>
<div class="line"><a id="l05158" name="l05158"></a><span class="lineno"> 5158</span> </div>
<div class="line"><a id="l05159" name="l05159"></a><span class="lineno"> 5159</span>        <span class="keywordflow">case</span> BONESETTING: {</div>
<div class="line"><a id="l05160" name="l05160"></a><span class="lineno"> 5160</span>            <span class="keywordflow">if</span>( arm_splints.empty() &amp;&amp; leg_splints.empty() ) {</div>
<div class="line"><a id="l05161" name="l05161"></a><span class="lineno"> 5161</span>                <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Internal supply of splints exhausted.  Operation impossible.  Exiting.&quot;</span> ) );</div>
<div class="line"><a id="l05162" name="l05162"></a><span class="lineno"> 5162</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05163" name="l05163"></a><span class="lineno"> 5163</span>            }</div>
<div class="line"><a id="l05164" name="l05164"></a><span class="lineno"> 5164</span> </div>
<div class="line"><a id="l05165" name="l05165"></a><span class="lineno"> 5165</span>            <span class="keywordtype">int</span> broken_limbs_count = 0;</div>
<div class="line"><a id="l05166" name="l05166"></a><span class="lineno"> 5166</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_enumvalue" href="pldata_8h.html#a51c99b582921c7fe956e6cb62a7b8fe0ad276871b7d0cc8a7678aae85a07a5cc6">num_hp_parts</a>; i++ ) {</div>
<div class="line"><a id="l05167" name="l05167"></a><span class="lineno"> 5167</span>                <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> &amp;part = <a class="code hl_function" href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a>( <a class="code hl_function" href="classCharacter.html#af781804624ab031f0016b970b4fa8007">player::hp_to_bp</a>( <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="pldata_8h.html#a51c99b582921c7fe956e6cb62a7b8fe0">hp_part</a><span class="keyword">&gt;</span>( i ) ) ).<a class="code hl_function" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>();</div>
<div class="line"><a id="l05168" name="l05168"></a><span class="lineno"> 5168</span>                <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a> = patient.is_limb_broken( part );</div>
<div class="line"><a id="l05169" name="l05169"></a><span class="lineno"> 5169</span>                <a class="code hl_class" href="classeffect.html">effect</a> &amp;existing_effect = patient.get_effect( <a class="code hl_variable" href="iexamine_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a>, part-&gt;token );</div>
<div class="line"><a id="l05170" name="l05170"></a><span class="lineno"> 5170</span>                <span class="comment">// Skip part if not broken or already healed 50%</span></div>
<div class="line"><a id="l05171" name="l05171"></a><span class="lineno"> 5171</span>                <span class="keywordflow">if</span>( !<a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a> || ( !existing_effect.<a class="code hl_function" href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">is_null</a>() &amp;&amp;</div>
<div class="line"><a id="l05172" name="l05172"></a><span class="lineno"> 5172</span>                                 existing_effect.<a class="code hl_function" href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">get_duration</a>() &gt;</div>
<div class="line"><a id="l05173" name="l05173"></a><span class="lineno"> 5173</span>                                 existing_effect.<a class="code hl_function" href="classeffect.html#a5201a58434d343a00ce457ce6602905c">get_max_duration</a>() - 5_days - 1_turns ) ) {</div>
<div class="line"><a id="l05174" name="l05174"></a><span class="lineno"> 5174</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05175" name="l05175"></a><span class="lineno"> 5175</span>                }</div>
<div class="line"><a id="l05176" name="l05176"></a><span class="lineno"> 5176</span>                broken_limbs_count++;</div>
<div class="line"><a id="l05177" name="l05177"></a><span class="lineno"> 5177</span>                patient.moves -= 500;</div>
<div class="line"><a id="l05178" name="l05178"></a><span class="lineno"> 5178</span>                <span class="comment">// TODO: fail here if unable to perform the action, i.e. can&#39;t wear more, trait mismatch.</span></div>
<div class="line"><a id="l05179" name="l05179"></a><span class="lineno"> 5179</span>                <span class="keywordtype">int</span> quantity = 1;</div>
<div class="line"><a id="l05180" name="l05180"></a><span class="lineno"> 5180</span>                <span class="keywordflow">if</span>( part == <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_l&quot;</span> ) || part == <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_r&quot;</span> ) ) {</div>
<div class="line"><a id="l05181" name="l05181"></a><span class="lineno"> 5181</span>                    <span class="keywordflow">if</span>( !arm_splints.empty() ) {</div>
<div class="line"><a id="l05182" name="l05182"></a><span class="lineno"> 5182</span>                        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;it : <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().use_amount( examp, 1, <a class="code hl_variable" href="iexamine_8cpp.html#a7f4916fdb349021f0c436cb1f91b80fa">itype_arm_splint</a>, quantity ) ) {</div>
<div class="line"><a id="l05183" name="l05183"></a><span class="lineno"> 5183</span>                            patient.wear_item( it, <span class="keyword">false</span> );</div>
<div class="line"><a id="l05184" name="l05184"></a><span class="lineno"> 5184</span>                        }</div>
<div class="line"><a id="l05185" name="l05185"></a><span class="lineno"> 5185</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05186" name="l05186"></a><span class="lineno"> 5186</span>                        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Internal supply of arm splints exhausted.  Splinting broken arms impossible.  Exiting.&quot;</span> ) );</div>
<div class="line"><a id="l05187" name="l05187"></a><span class="lineno"> 5187</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05188" name="l05188"></a><span class="lineno"> 5188</span>                    }</div>
<div class="line"><a id="l05189" name="l05189"></a><span class="lineno"> 5189</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( part == <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_l&quot;</span> ) || part == <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_r&quot;</span> ) ) {</div>
<div class="line"><a id="l05190" name="l05190"></a><span class="lineno"> 5190</span>                    <span class="keywordflow">if</span>( !leg_splints.empty() ) {</div>
<div class="line"><a id="l05191" name="l05191"></a><span class="lineno"> 5191</span>                        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;it : <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().use_amount( examp, 1, <a class="code hl_variable" href="iexamine_8cpp.html#a63cd91492b3d8da8ba47a1253cde9886">itype_leg_splint</a>, quantity ) ) {</div>
<div class="line"><a id="l05192" name="l05192"></a><span class="lineno"> 5192</span>                            patient.wear_item( it, <span class="keyword">false</span> );</div>
<div class="line"><a id="l05193" name="l05193"></a><span class="lineno"> 5193</span>                        }</div>
<div class="line"><a id="l05194" name="l05194"></a><span class="lineno"> 5194</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05195" name="l05195"></a><span class="lineno"> 5195</span>                        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Internal supply of leg splints exhausted.  Splinting broken legs impossible.  Exiting.&quot;</span> ) );</div>
<div class="line"><a id="l05196" name="l05196"></a><span class="lineno"> 5196</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05197" name="l05197"></a><span class="lineno"> 5197</span>                    }</div>
<div class="line"><a id="l05198" name="l05198"></a><span class="lineno"> 5198</span>                }</div>
<div class="line"><a id="l05199" name="l05199"></a><span class="lineno"> 5199</span> </div>
<div class="line"><a id="l05200" name="l05200"></a><span class="lineno"> 5200</span>                <span class="keywordflow">if</span>( patient.worn_with_flag( <a class="code hl_function" href="iexamine_8cpp.html#ac515c71f173b6c81dbc78f60ce2b89d2">flag_SPLINT</a>, part ) ) {</div>
<div class="line"><a id="l05201" name="l05201"></a><span class="lineno"> 5201</span>                    patient.add_msg_player_or_npc( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The machine rapidly sets and splints your broken %s.&quot;</span> ),</div>
<div class="line"><a id="l05202" name="l05202"></a><span class="lineno"> 5202</span>                                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The machine rapidly sets and splints &lt;npcname&gt;&#39;s broken %s.&quot;</span> ),</div>
<div class="line"><a id="l05203" name="l05203"></a><span class="lineno"> 5203</span>                                                   <a class="code hl_function" href="bodypart_8cpp.html#a6c9ef5f15f73c82d39d205d56a560672">body_part_name</a>( part ) );</div>
<div class="line"><a id="l05204" name="l05204"></a><span class="lineno"> 5204</span>                    patient.add_effect( <a class="code hl_variable" href="iexamine_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a>, 0_turns, part-&gt;token );</div>
<div class="line"><a id="l05205" name="l05205"></a><span class="lineno"> 5205</span>                    <a class="code hl_class" href="classeffect.html">effect</a> &amp;mending_effect = patient.get_effect( <a class="code hl_variable" href="iexamine_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a>, part-&gt;token );</div>
<div class="line"><a id="l05206" name="l05206"></a><span class="lineno"> 5206</span>                    mending_effect.<a class="code hl_function" href="classeffect.html#a40265c904a684396b45a347239e38782">set_duration</a>( mending_effect.<a class="code hl_function" href="classeffect.html#a5201a58434d343a00ce457ce6602905c">get_max_duration</a>() - 5_days );</div>
<div class="line"><a id="l05207" name="l05207"></a><span class="lineno"> 5207</span>                }</div>
<div class="line"><a id="l05208" name="l05208"></a><span class="lineno"> 5208</span>            }</div>
<div class="line"><a id="l05209" name="l05209"></a><span class="lineno"> 5209</span>            <span class="keywordflow">if</span>( broken_limbs_count == 0 ) {</div>
<div class="line"><a id="l05210" name="l05210"></a><span class="lineno"> 5210</span>                <a class="code hl_function" href="iexamine_8cpp.html#a59fc494b26696edaf3a5e466ff3adc4e">popup_player_or_npc</a>( patient, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You have no limbs that require splinting.&quot;</span> ),</div>
<div class="line"><a id="l05211" name="l05211"></a><span class="lineno"> 5211</span>                                     <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; doesn&#39;t have limbs that require splinting.&quot;</span> ) );</div>
<div class="line"><a id="l05212" name="l05212"></a><span class="lineno"> 5212</span>            }</div>
<div class="line"><a id="l05213" name="l05213"></a><span class="lineno"> 5213</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05214" name="l05214"></a><span class="lineno"> 5214</span>        }</div>
<div class="line"><a id="l05215" name="l05215"></a><span class="lineno"> 5215</span> </div>
<div class="line"><a id="l05216" name="l05216"></a><span class="lineno"> 5216</span>        <span class="keywordflow">case</span> TREAT_WOUNDS: {</div>
<div class="line"><a id="l05217" name="l05217"></a><span class="lineno"> 5217</span>            <span class="keywordflow">if</span>( !patient.has_effect( <a class="code hl_variable" href="iexamine_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a> ) &amp;&amp; !patient.has_effect( <a class="code hl_variable" href="iexamine_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a> ) &amp;&amp;</div>
<div class="line"><a id="l05218" name="l05218"></a><span class="lineno"> 5218</span>                !patient.has_effect( <a class="code hl_variable" href="iexamine_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a> ) ) {</div>
<div class="line"><a id="l05219" name="l05219"></a><span class="lineno"> 5219</span>                p.<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You don&#39;t have any wounds that need treatment.&quot;</span> ),</div>
<div class="line"><a id="l05220" name="l05220"></a><span class="lineno"> 5220</span>                                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; doesn&#39;t have any wounds that need treatment.&quot;</span> ) );</div>
<div class="line"><a id="l05221" name="l05221"></a><span class="lineno"> 5221</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05222" name="l05222"></a><span class="lineno"> 5222</span>            }</div>
<div class="line"><a id="l05223" name="l05223"></a><span class="lineno"> 5223</span> </div>
<div class="line"><a id="l05224" name="l05224"></a><span class="lineno"> 5224</span>            <span class="keywordflow">if</span>( patient.has_effect( <a class="code hl_variable" href="iexamine_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a> ) ) {</div>
<div class="line"><a id="l05225" name="l05225"></a><span class="lineno"> 5225</span>                <span class="keywordflow">if</span>( patient.has_effect( <a class="code hl_variable" href="iexamine_8cpp.html#ab5d38652b4b5ac4a2a4810d0d8c3ded1">effect_strong_antibiotic</a> ) ||</div>
<div class="line"><a id="l05226" name="l05226"></a><span class="lineno"> 5226</span>                    patient.has_effect( <a class="code hl_variable" href="iexamine_8cpp.html#a2ebc0d3c09d8f2896a466db2794c2845">effect_antibiotic</a> ) ||</div>
<div class="line"><a id="l05227" name="l05227"></a><span class="lineno"> 5227</span>                    patient.has_effect( <a class="code hl_variable" href="iexamine_8cpp.html#a66fbdfe284eb410fdbece4a3be98bf55">effect_weak_antibiotic</a> ) ) {</div>
<div class="line"><a id="l05228" name="l05228"></a><span class="lineno"> 5228</span>                    patient.add_msg_player_or_npc( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l05229" name="l05229"></a><span class="lineno"> 5229</span>                                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc detected a bacterial infection in your body, but as it also detected you&#39;ve already taken antibiotics, it decided not to apply another dose right now.&quot;</span> ),</div>
<div class="line"><a id="l05230" name="l05230"></a><span class="lineno"> 5230</span>                                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc detected a bacterial infection in &lt;npcname&gt;&#39;s body, but as it also detected they&#39;ve already taken antibiotics, it decided not to apply another dose right now.&quot;</span> ) );</div>
<div class="line"><a id="l05231" name="l05231"></a><span class="lineno"> 5231</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05232" name="l05232"></a><span class="lineno"> 5232</span>                    patient.add_effect( <a class="code hl_variable" href="iexamine_8cpp.html#ab5d38652b4b5ac4a2a4810d0d8c3ded1">effect_strong_antibiotic</a>, 12_hours );</div>
<div class="line"><a id="l05233" name="l05233"></a><span class="lineno"> 5233</span>                    patient.mod_pain( 3 );</div>
<div class="line"><a id="l05234" name="l05234"></a><span class="lineno"> 5234</span>                    patient.add_msg_player_or_npc( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a id="l05235" name="l05235"></a><span class="lineno"> 5235</span>                                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc detected a bacterial infection in your body and injected antibiotics to treat it.&quot;</span> ),</div>
<div class="line"><a id="l05236" name="l05236"></a><span class="lineno"> 5236</span>                                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc detected a bacterial infection in &lt;npcname&gt;&#39;s body and injected antibiotics to treat it.&quot;</span> ) );</div>
<div class="line"><a id="l05237" name="l05237"></a><span class="lineno"> 5237</span> </div>
<div class="line"><a id="l05238" name="l05238"></a><span class="lineno"> 5238</span>                }</div>
<div class="line"><a id="l05239" name="l05239"></a><span class="lineno"> 5239</span>            }</div>
<div class="line"><a id="l05240" name="l05240"></a><span class="lineno"> 5240</span> </div>
<div class="line"><a id="l05241" name="l05241"></a><span class="lineno"> 5241</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_enumvalue" href="pldata_8h.html#a51c99b582921c7fe956e6cb62a7b8fe0ad276871b7d0cc8a7678aae85a07a5cc6">num_hp_parts</a>; i++ ) {</div>
<div class="line"><a id="l05242" name="l05242"></a><span class="lineno"> 5242</span>                <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> &amp;bp_healed = <a class="code hl_function" href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a>( <a class="code hl_function" href="classCharacter.html#af781804624ab031f0016b970b4fa8007">player::hp_to_bp</a>( <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="pldata_8h.html#a51c99b582921c7fe956e6cb62a7b8fe0">hp_part</a><span class="keyword">&gt;</span>( i ) ) ).<a class="code hl_function" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>();</div>
<div class="line"><a id="l05243" name="l05243"></a><span class="lineno"> 5243</span>                <span class="keywordflow">if</span>( patient.has_effect( <a class="code hl_variable" href="iexamine_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, bp_healed.<a class="code hl_function" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() ) ) {</div>
<div class="line"><a id="l05244" name="l05244"></a><span class="lineno"> 5244</span>                    patient.remove_effect( <a class="code hl_variable" href="iexamine_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, bp_healed-&gt;token );</div>
<div class="line"><a id="l05245" name="l05245"></a><span class="lineno"> 5245</span>                    patient.add_msg_player_or_npc( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a id="l05246" name="l05246"></a><span class="lineno"> 5246</span>                                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc detected a bleeding on your %s and applied a hemostatic drug to stop it.&quot;</span> ),</div>
<div class="line"><a id="l05247" name="l05247"></a><span class="lineno"> 5247</span>                                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc detected a bleeding on &lt;npcname&gt;&#39;s %s and applied a hemostatic drug to stop it.&quot;</span> ),</div>
<div class="line"><a id="l05248" name="l05248"></a><span class="lineno"> 5248</span>                                                   <a class="code hl_function" href="bodypart_8cpp.html#a6c9ef5f15f73c82d39d205d56a560672">body_part_name</a>( bp_healed ) );</div>
<div class="line"><a id="l05249" name="l05249"></a><span class="lineno"> 5249</span>                }</div>
<div class="line"><a id="l05250" name="l05250"></a><span class="lineno"> 5250</span> </div>
<div class="line"><a id="l05251" name="l05251"></a><span class="lineno"> 5251</span>                <span class="keywordflow">if</span>( patient.has_effect( <a class="code hl_variable" href="iexamine_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, bp_healed.<a class="code hl_function" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() ) ) {</div>
<div class="line"><a id="l05252" name="l05252"></a><span class="lineno"> 5252</span>                    patient.remove_effect( <a class="code hl_variable" href="iexamine_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, bp_healed-&gt;token );</div>
<div class="line"><a id="l05253" name="l05253"></a><span class="lineno"> 5253</span>                    patient.add_msg_player_or_npc( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a id="l05254" name="l05254"></a><span class="lineno"> 5254</span>                                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc detected an open wound on your %s and applied a disinfectant to clean it.&quot;</span> ),</div>
<div class="line"><a id="l05255" name="l05255"></a><span class="lineno"> 5255</span>                                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc detected an open wound on &lt;npcname&gt;&#39;s %s and applied a disinfectant to clean it.&quot;</span> ),</div>
<div class="line"><a id="l05256" name="l05256"></a><span class="lineno"> 5256</span>                                                   <a class="code hl_function" href="bodypart_8cpp.html#a6c9ef5f15f73c82d39d205d56a560672">body_part_name</a>( bp_healed ) );</div>
<div class="line"><a id="l05257" name="l05257"></a><span class="lineno"> 5257</span> </div>
<div class="line"><a id="l05258" name="l05258"></a><span class="lineno"> 5258</span>                    <span class="comment">// Fixed disinfectant intensity of 4 disinfectant_power + 10 first aid skill level of autodoc.</span></div>
<div class="line"><a id="l05259" name="l05259"></a><span class="lineno"> 5259</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> disinfectant_intensity = 14;</div>
<div class="line"><a id="l05260" name="l05260"></a><span class="lineno"> 5260</span>                    patient.add_effect( <a class="code hl_variable" href="iexamine_8cpp.html#adcc47d614ba63ddb056307153d5ac06c">effect_disinfected</a>, 1_turns, bp_healed-&gt;token );</div>
<div class="line"><a id="l05261" name="l05261"></a><span class="lineno"> 5261</span>                    <a class="code hl_class" href="classeffect.html">effect</a> &amp;e = patient.get_effect( <a class="code hl_variable" href="iexamine_8cpp.html#adcc47d614ba63ddb056307153d5ac06c">effect_disinfected</a>, bp_healed-&gt;token );</div>
<div class="line"><a id="l05262" name="l05262"></a><span class="lineno"> 5262</span>                    e.<a class="code hl_function" href="classeffect.html#a40265c904a684396b45a347239e38782">set_duration</a>( e.<a class="code hl_function" href="classeffect.html#aae46cb63cdb1a4ca3e612d464f20446a">get_int_dur_factor</a>() * disinfectant_intensity );</div>
<div class="line"><a id="l05263" name="l05263"></a><span class="lineno"> 5263</span>                    <a class="code hl_enumeration" href="pldata_8h.html#a51c99b582921c7fe956e6cb62a7b8fe0">hp_part</a> target_part = <a class="code hl_function" href="classCharacter.html#ac7fec168bf9799a6e175ac36a87bcd06">player::bp_to_hp</a>( bp_healed-&gt;token );</div>
<div class="line"><a id="l05264" name="l05264"></a><span class="lineno"> 5264</span>                    patient.damage_disinfected[target_part] =</div>
<div class="line"><a id="l05265" name="l05265"></a><span class="lineno"> 5265</span>                        patient.get_part_hp_max( bp_healed ) - patient.get_part_hp_cur( bp_healed );</div>
<div class="line"><a id="l05266" name="l05266"></a><span class="lineno"> 5266</span> </div>
<div class="line"><a id="l05267" name="l05267"></a><span class="lineno"> 5267</span>                }</div>
<div class="line"><a id="l05268" name="l05268"></a><span class="lineno"> 5268</span>            }</div>
<div class="line"><a id="l05269" name="l05269"></a><span class="lineno"> 5269</span>            patient.moves -= 500;</div>
<div class="line"><a id="l05270" name="l05270"></a><span class="lineno"> 5270</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05271" name="l05271"></a><span class="lineno"> 5271</span>        }</div>
<div class="line"><a id="l05272" name="l05272"></a><span class="lineno"> 5272</span> </div>
<div class="line"><a id="l05273" name="l05273"></a><span class="lineno"> 5273</span>        <span class="keywordflow">case</span> RAD_AWAY: {</div>
<div class="line"><a id="l05274" name="l05274"></a><span class="lineno"> 5274</span>            patient.moves -= 500;</div>
<div class="line"><a id="l05275" name="l05275"></a><span class="lineno"> 5275</span>            patient.add_msg_player_or_npc( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l05276" name="l05276"></a><span class="lineno"> 5276</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc scanned you and detected a radiation level of %d mSv.&quot;</span> ),</div>
<div class="line"><a id="l05277" name="l05277"></a><span class="lineno"> 5277</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc scanned &lt;npcname&gt; and detected a radiation level of %d mSv.&quot;</span> ),</div>
<div class="line"><a id="l05278" name="l05278"></a><span class="lineno"> 5278</span>                                           patient.get_rad() );</div>
<div class="line"><a id="l05279" name="l05279"></a><span class="lineno"> 5279</span>            <span class="keywordflow">if</span>( patient.get_rad() ) {</div>
<div class="line"><a id="l05280" name="l05280"></a><span class="lineno"> 5280</span>                <span class="keywordflow">if</span>( patient.has_effect( <a class="code hl_variable" href="iexamine_8cpp.html#a34d6c775f0ffa1e39d670ea01615992c">effect_pblue</a> ) ) {</div>
<div class="line"><a id="l05281" name="l05281"></a><span class="lineno"> 5281</span>                    patient.add_msg_player_or_npc( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l05282" name="l05282"></a><span class="lineno"> 5282</span>                                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc detected an anti-radiation drug in your bloodstream, so it decided not to administer another dose right now.&quot;</span> ),</div>
<div class="line"><a id="l05283" name="l05283"></a><span class="lineno"> 5283</span>                                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc detected an anti-radiation drug in &lt;npcname&gt;&#39;s bloodstream, so it decided not to administer another dose right now.&quot;</span> ) );</div>
<div class="line"><a id="l05284" name="l05284"></a><span class="lineno"> 5284</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05285" name="l05285"></a><span class="lineno"> 5285</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a id="l05286" name="l05286"></a><span class="lineno"> 5286</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc administered an anti-radiation drug to treat radiation poisoning.&quot;</span> ) );</div>
<div class="line"><a id="l05287" name="l05287"></a><span class="lineno"> 5287</span>                    patient.mod_pain( 3 );</div>
<div class="line"><a id="l05288" name="l05288"></a><span class="lineno"> 5288</span>                    patient.add_effect( <a class="code hl_variable" href="iexamine_8cpp.html#a34d6c775f0ffa1e39d670ea01615992c">effect_pblue</a>, 1_hours );</div>
<div class="line"><a id="l05289" name="l05289"></a><span class="lineno"> 5289</span>                }</div>
<div class="line"><a id="l05290" name="l05290"></a><span class="lineno"> 5290</span>            }</div>
<div class="line"><a id="l05291" name="l05291"></a><span class="lineno"> 5291</span>            <span class="keywordflow">if</span>( patient.leak_level( <span class="stringliteral">&quot;RADIOACTIVE&quot;</span> ) ) {</div>
<div class="line"><a id="l05292" name="l05292"></a><span class="lineno"> 5292</span>                <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Warning!  Autodoc detected a radiation leak of %d mSv from items in patient&#39;s possession.  Urgent decontamination procedures highly recommended.&quot;</span> ),</div>
<div class="line"><a id="l05293" name="l05293"></a><span class="lineno"> 5293</span>                       patient.leak_level( <span class="stringliteral">&quot;RADIOACTIVE&quot;</span> ) );</div>
<div class="line"><a id="l05294" name="l05294"></a><span class="lineno"> 5294</span>            }</div>
<div class="line"><a id="l05295" name="l05295"></a><span class="lineno"> 5295</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05296" name="l05296"></a><span class="lineno"> 5296</span>        }</div>
<div class="line"><a id="l05297" name="l05297"></a><span class="lineno"> 5297</span> </div>
<div class="line"><a id="l05298" name="l05298"></a><span class="lineno"> 5298</span>        <span class="keywordflow">case</span> BLOOD_ANALYSIS: {</div>
<div class="line"><a id="l05299" name="l05299"></a><span class="lineno"> 5299</span>            patient.moves -= 500;</div>
<div class="line"><a id="l05300" name="l05300"></a><span class="lineno"> 5300</span>            patient.conduct_blood_analysis();</div>
<div class="line"><a id="l05301" name="l05301"></a><span class="lineno"> 5301</span>            patient.add_msg_player_or_npc( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l05302" name="l05302"></a><span class="lineno"> 5302</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc analyzed your blood.&quot;</span> ),</div>
<div class="line"><a id="l05303" name="l05303"></a><span class="lineno"> 5303</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autodoc analyzed &lt;npcname&gt;&#39;s blood.&quot;</span> ) );</div>
<div class="line"><a id="l05304" name="l05304"></a><span class="lineno"> 5304</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05305" name="l05305"></a><span class="lineno"> 5305</span>        }</div>
<div class="line"><a id="l05306" name="l05306"></a><span class="lineno"> 5306</span> </div>
<div class="line"><a id="l05307" name="l05307"></a><span class="lineno"> 5307</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l05308" name="l05308"></a><span class="lineno"> 5308</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05309" name="l05309"></a><span class="lineno"> 5309</span>    }</div>
<div class="line"><a id="l05310" name="l05310"></a><span class="lineno"> 5310</span>}</div>
<div class="ttc" id="abodypart_8cpp_html_a6c9ef5f15f73c82d39d205d56a560672"><div class="ttname"><a href="bodypart_8cpp.html#a6c9ef5f15f73c82d39d205d56a560672">body_part_name</a></div><div class="ttdeci">std::string body_part_name(body_part bp, int number)</div><div class="ttdoc">Returns the matching name of the body_part token.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00319">bodypart.cpp:319</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_ae34a481a7c686b233f2d8c48e43b723a"><div class="ttname"><a href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a></div><div class="ttdeci">const bodypart_str_id &amp; convert_bp(body_part bp)</div><div class="ttdoc">Returns the new id for old token.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00185">bodypart.cpp:185</a></div></div>
<div class="ttc" id="abodypart_8h_html_a426444e2d486ce1ee315d8b8acc86b40"><div class="ttname"><a href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a></div><div class="ttdeci">int_id&lt; body_part_type &gt; bodypart_id</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00024">bodypart.h:24</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00225">character.h:226</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1e1996b6d6fc0a86d917cd155e1656d8"><div class="ttname"><a href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">Character::disp_name</a></div><div class="ttdeci">std::string disp_name(bool possessive=false, bool capitalize_first=false) const override</div><div class="ttdoc">Returns either &quot;you&quot; or the player's name.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00580">character.cpp:580</a></div></div>
<div class="ttc" id="aclassCharacter_html_a20839520f569c4f05876a55e89f67361"><div class="ttname"><a href="classCharacter.html#a20839520f569c4f05876a55e89f67361">Character::activity</a></div><div class="ttdeci">player_activity activity</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01578">character.h:1578</a></div></div>
<div class="ttc" id="aclassCharacter_html_abd358c7a7757575b70b1613dbcce40a7"><div class="ttname"><a href="classCharacter.html#abd358c7a7757575b70b1613dbcce40a7">Character::crafting_inventory</a></div><div class="ttdeci">const inventory &amp; crafting_inventory(bool clear_path)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00556">crafting.cpp:556</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac7fec168bf9799a6e175ac36a87bcd06"><div class="ttname"><a href="classCharacter.html#ac7fec168bf9799a6e175ac36a87bcd06">Character::bp_to_hp</a></div><div class="ttdeci">static hp_part bp_to_hp(body_part bp)</div><div class="ttdoc">Converts a body_part to an hp_part.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06456">character.cpp:6456</a></div></div>
<div class="ttc" id="aclassCharacter_html_af781804624ab031f0016b970b4fa8007"><div class="ttname"><a href="classCharacter.html#af781804624ab031f0016b970b4fa8007">Character::hp_to_bp</a></div><div class="ttdeci">static body_part hp_to_bp(hp_part hpart)</div><div class="ttdoc">Converts an hp_part to a body_part.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06482">character.cpp:6482</a></div></div>
<div class="ttc" id="aclassCharacter_html_afe4c095c2e6510f07f351d7e091f5787"><div class="ttname"><a href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">Character::invalidate_crafting_inventory</a></div><div class="ttdeci">void invalidate_crafting_inventory()</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00598">crafting.cpp:598</a></div></div>
<div class="ttc" id="aclassCreature_html_a891bc2d0c564449cb462178317819254"><div class="ttname"><a href="classCreature.html#a891bc2d0c564449cb462178317819254">Creature::mod_moves</a></div><div class="ttdeci">void mod_moves(int nmoves)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01448">creature.cpp:1448</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00054">avatar.h:55</a></div></div>
<div class="ttc" id="aclassbionic__collection_html"><div class="ttname"><a href="classbionic__collection.html">bionic_collection</a></div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00203">bionics.h:204</a></div></div>
<div class="ttc" id="aclasseffect_html"><div class="ttname"><a href="classeffect.html">effect</a></div><div class="ttdef"><b>Definition:</b> <a href="effect_8h_source.html#l00160">effect.h:161</a></div></div>
<div class="ttc" id="aclasseffect_html_a34c766f51dc0f89ebdab09c344bb506b"><div class="ttname"><a href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">effect::get_duration</a></div><div class="ttdeci">time_duration get_duration() const</div><div class="ttdoc">Returns the remaining duration of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00797">effect.cpp:797</a></div></div>
<div class="ttc" id="aclasseffect_html_a39ebd2ec5b2faacde7483e0c07240baa"><div class="ttname"><a href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">effect::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns true if the effect is the result of effect(), ie.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00553">effect.cpp:553</a></div></div>
<div class="ttc" id="aclasseffect_html_a40265c904a684396b45a347239e38782"><div class="ttname"><a href="classeffect.html#a40265c904a684396b45a347239e38782">effect::set_duration</a></div><div class="ttdeci">void set_duration(const time_duration &amp;dur, bool alert=false)</div><div class="ttdoc">Sets the duration, capping at max_duration if it exists.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00805">effect.cpp:805</a></div></div>
<div class="ttc" id="aclasseffect_html_a5201a58434d343a00ce457ce6602905c"><div class="ttname"><a href="classeffect.html#a5201a58434d343a00ce457ce6602905c">effect::get_max_duration</a></div><div class="ttdeci">time_duration get_max_duration() const</div><div class="ttdoc">Returns the maximum duration of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00801">effect.cpp:801</a></div></div>
<div class="ttc" id="aclasseffect_html_aae46cb63cdb1a4ca3e612d464f20446a"><div class="ttname"><a href="classeffect.html#aae46cb63cdb1a4ca3e612d464f20446a">effect::get_int_dur_factor</a></div><div class="ttdeci">time_duration get_int_dur_factor() const</div><div class="ttdoc">Returns the number of turns it takes for the intensity to fall by 1 or 0 if intensity isn't based on ...</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01207">effect.cpp:1207</a></div></div>
<div class="ttc" id="aclassinventory_html"><div class="ttname"><a href="classinventory.html">inventory</a></div><div class="ttdef"><b>Definition:</b> <a href="inventory_8h_source.html#l00089">inventory.h:90</a></div></div>
<div class="ttc" id="aclassitem_html_a2993eb10a5ae589e6bb1be0a74cb65c1"><div class="ttname"><a href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">item::active</a></div><div class="ttdeci">bool active</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02237">item.h:2237</a></div></div>
<div class="ttc" id="aclassitem_html_aa79dad64e1ef6347219be2f8666e2752"><div class="ttname"><a href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">item::typeId</a></div><div class="ttdeci">const itype_id &amp; typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08374">item.cpp:8374</a></div></div>
<div class="ttc" id="aclassitem_html_aaa5aeb6f838927babb10ede535cf2a73"><div class="ttname"><a href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">item::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05328">item.cpp:5328</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02160">item.h:2160</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a316b1ded84b8c60b250ab06661f5bce5"><div class="ttname"><a href="classplayer__activity.html#a316b1ded84b8c60b250ab06661f5bce5">player_activity::id</a></div><div class="ttdeci">const activity_id &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00097">player_activity.h:97</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a3a477cad2588badd9c96627a91f5eb61"><div class="ttname"><a href="classplayer__activity.html#a3a477cad2588badd9c96627a91f5eb61">player_activity::moves_left</a></div><div class="ttdeci">int moves_left</div><div class="ttdoc">The number of moves remaining in this activity before it is complete.</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00043">player_activity.h:43</a></div></div>
<div class="ttc" id="aclassplayer_html"><div class="ttname"><a href="classplayer.html">player</a></div><div class="ttdef"><b>Definition:</b> <a href="player_8h_source.html#l00083">player.h:84</a></div></div>
<div class="ttc" id="aclassplayer_html_a07108565639fa6fe5b6776b4e8674fb6"><div class="ttname"><a href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">player::add_msg_player_or_npc</a></div><div class="ttdeci">void add_msg_player_or_npc(const std::string &amp;player_msg, const std::string &amp;npc_str) const override</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l00371">player.cpp:371</a></div></div>
<div class="ttc" id="aclassplayer_html_aafa6cc2db2568af687ab21f09f8e4c2e"><div class="ttname"><a href="classplayer.html#aafa6cc2db2568af687ab21f09f8e4c2e">player::consume_tools</a></div><div class="ttdeci">void consume_tools(const comp_selection&lt; tool_comp &gt; &amp;tool, int batch)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01845">crafting.cpp:1845</a></div></div>
<div class="ttc" id="aclassplayer_html_ad1f5e6d21b83313ab148302140083b99"><div class="ttname"><a href="classplayer.html#ad1f5e6d21b83313ab148302140083b99">player::consume_items</a></div><div class="ttdeci">std::list&lt; item &gt; consume_items(const comp_selection&lt; item_comp &gt; &amp;is, int batch, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01513">crafting.cpp:1513</a></div></div>
<div class="ttc" id="aclassplayer_html_ae7009d849f19a4f5ebe877cbe463c459"><div class="ttname"><a href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">player::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l00366">player.cpp:366</a></div></div>
<div class="ttc" id="aclassstring__id_html_aa3cde2bfb58efa9621289c0a70d24c5a"><div class="ttname"><a href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">string_id::id</a></div><div class="ttdeci">int_id&lt; T &gt; id() const</div><div class="ttdoc">Translate the string based it to the matching integer based id.</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00054">ammo_effect.cpp:54</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a0f7145f4fc4c09defbaf25f468e4e54a"><div class="ttname"><a href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a></div><div class="ttdeci">static constexpr time_duration from_turns(const T t)</div><div class="ttdoc">Named constructors to get a duration representing a multiple of the named time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00204">calendar.h:204</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00186">ui.h:187</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00412">ui.h:412</a></div></div>
<div class="ttc" id="aclassuilist_html_af59dd3fdde04746dbc5cb52b355577ce"><div class="ttname"><a href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">uilist::text</a></div><div class="ttdeci">std::string text</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00320">ui.h:320</a></div></div>
<div class="ttc" id="aclassuilist_html_af99f28334902af64487e2d0758df2ab9"><div class="ttname"><a href="classuilist.html#af99f28334902af64487e2d0758df2ab9">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00942">ui.cpp:942</a></div></div>
<div class="ttc" id="aclassvisitable_html_a5b3c37fbe8209cab68aa26d3cc7f4300"><div class="ttname"><a href="classvisitable.html#a5b3c37fbe8209cab68aa26d3cc7f4300">visitable::items_with</a></div><div class="ttdeci">std::vector&lt; item * &gt; items_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter)</div><div class="ttdoc">Returns all items (including those within a container) matching the filter.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00324">visitable.cpp:324</a></div></div>
<div class="ttc" id="aclassvisitable_html_a62ad0b8f7866ec171a709c56e4a25ff2"><div class="ttname"><a href="classvisitable.html#a62ad0b8f7866ec171a709c56e4a25ff2">visitable::has_quality</a></div><div class="ttdeci">bool has_quality(const quality_id &amp;qual, int level=1, int qty=1) const</div><div class="ttdoc">Returns true if instance has amount (or more) items of at least quality level.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00169">visitable.cpp:169</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00669">color.cpp:669</a></div></div>
<div class="ttc" id="acolor_8h_html_a81e80ab9142609903b4788a6bb31ae45"><div class="ttname"><a href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a></div><div class="ttdeci">#define c_yellow</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00032">color.h:32</a></div></div>
<div class="ttc" id="acolor_8h_html_af0a87eaef36305269f4506dfa34d94c0"><div class="ttname"><a href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a></div><div class="ttdeci">#define c_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00021">color.h:21</a></div></div>
<div class="ttc" id="aenums_8h_html_a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4"><div class="ttname"><a href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a></div><div class="ttdeci">@ broken</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00330">enums.h:330</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00283">game.cpp:283</a></div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00838">ui.cpp:838</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a151e6b162a8a2cdbdb11c407013076eb"><div class="ttname"><a href="iexamine_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a></div><div class="ttdeci">static const efftype_id effect_bleed(&quot;bleed&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a15450ecf5b34a615affe959125bf1626"><div class="ttname"><a href="iexamine_8cpp.html#a15450ecf5b34a615affe959125bf1626">bio_painkiller</a></div><div class="ttdeci">static const bionic_id bio_painkiller(&quot;bio_painkiller&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a1de43fa1f6d16ce87ab7a3a49e47c463"><div class="ttname"><a href="iexamine_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a></div><div class="ttdeci">static const efftype_id effect_infected(&quot;infected&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a2ebc0d3c09d8f2896a466db2794c2845"><div class="ttname"><a href="iexamine_8cpp.html#a2ebc0d3c09d8f2896a466db2794c2845">effect_antibiotic</a></div><div class="ttdeci">static const efftype_id effect_antibiotic(&quot;antibiotic&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a34d6c775f0ffa1e39d670ea01615992c"><div class="ttname"><a href="iexamine_8cpp.html#a34d6c775f0ffa1e39d670ea01615992c">effect_pblue</a></div><div class="ttdeci">static const efftype_id effect_pblue(&quot;pblue&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a39b21fc30fecd7d4fb15047600d03522"><div class="ttname"><a href="iexamine_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a></div><div class="ttdeci">static const efftype_id effect_bite(&quot;bite&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a42ac34659f1b9fc5662b2f849fd96dab"><div class="ttname"><a href="iexamine_8cpp.html#a42ac34659f1b9fc5662b2f849fd96dab">qual_ANESTHESIA</a></div><div class="ttdeci">static const quality_id qual_ANESTHESIA(&quot;ANESTHESIA&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a4d722ed69c7a86c615a040088ae84d12"><div class="ttname"><a href="iexamine_8cpp.html#a4d722ed69c7a86c615a040088ae84d12">flag_IN_CBM</a></div><div class="ttdeci">static const std::string flag_IN_CBM(&quot;IN_CBM&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a4ea2c47870b82e831292a9239b2e6ff2"><div class="ttname"><a href="iexamine_8cpp.html#a4ea2c47870b82e831292a9239b2e6ff2">itype_corpse</a></div><div class="ttdeci">static const itype_id itype_corpse(&quot;corpse&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a5998fd340ee876cbfcff37251cf027cd"><div class="ttname"><a href="iexamine_8cpp.html#a5998fd340ee876cbfcff37251cf027cd">bio_power_storage</a></div><div class="ttdeci">static const bionic_id bio_power_storage(&quot;bio_power_storage&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a59fc494b26696edaf3a5e466ff3adc4e"><div class="ttname"><a href="iexamine_8cpp.html#a59fc494b26696edaf3a5e466ff3adc4e">popup_player_or_npc</a></div><div class="ttdeci">void popup_player_or_npc(player &amp;p, const char *player_mes, const char *npc_mes, Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04890">iexamine.cpp:4890</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a63cd91492b3d8da8ba47a1253cde9886"><div class="ttname"><a href="iexamine_8cpp.html#a63cd91492b3d8da8ba47a1253cde9886">itype_leg_splint</a></div><div class="ttdeci">static const itype_id itype_leg_splint(&quot;leg_splint&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a66fbdfe284eb410fdbece4a3be98bf55"><div class="ttname"><a href="iexamine_8cpp.html#a66fbdfe284eb410fdbece4a3be98bf55">effect_weak_antibiotic</a></div><div class="ttdeci">static const efftype_id effect_weak_antibiotic(&quot;weak_antibiotic&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a7f4916fdb349021f0c436cb1f91b80fa"><div class="ttname"><a href="iexamine_8cpp.html#a7f4916fdb349021f0c436cb1f91b80fa">itype_arm_splint</a></div><div class="ttdeci">static const itype_id itype_arm_splint(&quot;arm_splint&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a9e957908de7da4eb428f8ba2c18e372e"><div class="ttname"><a href="iexamine_8cpp.html#a9e957908de7da4eb428f8ba2c18e372e">itype_bot_broken_cyborg</a></div><div class="ttdeci">static const itype_id itype_bot_broken_cyborg(&quot;bot_broken_cyborg&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aa8809a264120358059f42e401035498f"><div class="ttname"><a href="iexamine_8cpp.html#aa8809a264120358059f42e401035498f">operator_present</a></div><div class="ttdeci">static Character &amp; operator_present(Character &amp;p, const tripoint &amp;autodoc_loc, Character &amp;null_patient)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04788">iexamine.cpp:4788</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_aaccf8837e47be52d193c79fadc8dcfab"><div class="ttname"><a href="iexamine_8cpp.html#aaccf8837e47be52d193c79fadc8dcfab">player_on_couch</a></div><div class="ttdeci">static player &amp; player_on_couch(player &amp;p, const tripoint &amp;autodoc_loc, player &amp;null_patient, bool &amp;adjacent_couch, tripoint &amp;couch_pos)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04768">iexamine.cpp:4768</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab22e90f992c0815576e11c8216f28945"><div class="ttname"><a href="iexamine_8cpp.html#ab22e90f992c0815576e11c8216f28945">best_installer</a></div><div class="ttdeci">static player &amp; best_installer(player &amp;p, player &amp;null_player, int difficulty)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04838">iexamine.cpp:4838</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab5d38652b4b5ac4a2a4810d0d8c3ded1"><div class="ttname"><a href="iexamine_8cpp.html#ab5d38652b4b5ac4a2a4810d0d8c3ded1">effect_strong_antibiotic</a></div><div class="ttdeci">static const efftype_id effect_strong_antibiotic(&quot;strong_antibiotic&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab849b88436e7694e040bcbf2b50b7a0b"><div class="ttname"><a href="iexamine_8cpp.html#ab849b88436e7694e040bcbf2b50b7a0b">flag_AUTODOC</a></div><div class="ttdeci">static const std::string flag_AUTODOC(&quot;AUTODOC&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac095a9d5df7beadb44d07075e22740dd"><div class="ttname"><a href="iexamine_8cpp.html#ac095a9d5df7beadb44d07075e22740dd">bio_power_storage_mkII</a></div><div class="ttdeci">static const bionic_id bio_power_storage_mkII(&quot;bio_power_storage_mkII&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac515c71f173b6c81dbc78f60ce2b89d2"><div class="ttname"><a href="iexamine_8cpp.html#ac515c71f173b6c81dbc78f60ce2b89d2">flag_SPLINT</a></div><div class="ttdeci">static const std::string flag_SPLINT(&quot;SPLINT&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_adcc47d614ba63ddb056307153d5ac06c"><div class="ttname"><a href="iexamine_8cpp.html#adcc47d614ba63ddb056307153d5ac06c">effect_disinfected</a></div><div class="ttdeci">static const efftype_id effect_disinfected(&quot;disinfected&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ae239a31e1ebbbbacd06a8fcdd8be2861"><div class="ttname"><a href="iexamine_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a></div><div class="ttdeci">static const efftype_id effect_mending(&quot;mending&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_af20cb84a6e8ccc0ed66c352edf29143b"><div class="ttname"><a href="iexamine_8cpp.html#af20cb84a6e8ccc0ed66c352edf29143b">trait_NOPAIN</a></div><div class="ttdeci">static const trait_id trait_NOPAIN(&quot;NOPAIN&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_afb399c92728339026d6adbd0c2a7aeb5"><div class="ttname"><a href="iexamine_8cpp.html#afb399c92728339026d6adbd0c2a7aeb5">cyborg_on_couch</a></div><div class="ttdeci">static item &amp; cyborg_on_couch(const tripoint &amp;couch_pos, item &amp;null_cyborg)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04807">iexamine.cpp:4807</a></div></div>
<div class="ttc" id="aitem_8h_html_a64c6001518eb0b959300f427a0086eb0"><div class="ttname"><a href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a></div><div class="ttdeci">bool is_crafting_component(const item &amp;component)</div><div class="ttdoc">Default filter for crafting component searches.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02265">item.h:2265</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_a5a5d41d971342c3e6103b510ccbcb9bb"><div class="ttname"><a href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">PATH_INFO::options</a></div><div class="ttdeci">std::string options()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00230">path_info.cpp:230</a></div></div>
<div class="ttc" id="anamespacefields_html_af8bc739ca8fbe535a44afc02da973280ab85ec314bf443b797ef8a66b3b03f8a4"><div class="ttname"><a href="namespacefields.html#af8bc739ca8fbe535a44afc02da973280ab85ec314bf443b797ef8a66b3b03f8a4">fields::stacking_type::duration</a></div><div class="ttdeci">@ duration</div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_abfe0107db269ec17344fc0735092fd53"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#abfe0107db269ec17344fc0735092fd53">game_menus::inv::install_bionic</a></div><div class="ttdeci">item_location install_bionic(player &amp;p, player &amp;patient, bool surgeon=false)</div><div class="ttdoc">Bionic install menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l02045">game_inventory.cpp:2045</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_afa10471cb9da38879b1ff7b59ca3b2e8"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#afa10471cb9da38879b1ff7b59ca3b2e8">game_menus::inv::uninstall_bionic</a></div><div class="ttdeci">item_location uninstall_bionic(player &amp;p, player &amp;patient)</div><div class="ttdoc">Bionic uninstall menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l02131">game_inventory.cpp:2131</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a1e645471d321d71b235fb285da5c08ff"><div class="ttname"><a href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a></div><div class="ttdeci">int popup(const std::string &amp;text, PopupFlags flags)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00764">output.cpp:764</a></div></div>
<div class="ttc" id="apldata_8h_html_a51c99b582921c7fe956e6cb62a7b8fe0"><div class="ttname"><a href="pldata_8h.html#a51c99b582921c7fe956e6cb62a7b8fe0">hp_part</a></div><div class="ttdeci">hp_part</div><div class="ttdef"><b>Definition:</b> <a href="pldata_8h_source.html#l00032">pldata.h:32</a></div></div>
<div class="ttc" id="apldata_8h_html_a51c99b582921c7fe956e6cb62a7b8fe0ad276871b7d0cc8a7678aae85a07a5cc6"><div class="ttname"><a href="pldata_8h.html#a51c99b582921c7fe956e6cb62a7b8fe0ad276871b7d0cc8a7678aae85a07a5cc6">num_hp_parts</a></div><div class="ttdeci">@ num_hp_parts</div><div class="ttdef"><b>Definition:</b> <a href="pldata_8h_source.html#l00040">pldata.h:39</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00430">string_formatter.h:430</a></div></div>
<div class="ttc" id="astructitype_html"><div class="ttname"><a href="structitype.html">itype</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00804">itype.h:804</a></div></div>
<div class="ttc" id="astructitype_html_a33aeb53774679283298d0202ae3e78ce"><div class="ttname"><a href="structitype.html#a33aeb53774679283298d0202ae3e78ce">itype::bionic</a></div><div class="ttdeci">cata::value_ptr&lt; islot_bionic &gt; bionic</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00831">itype.h:831</a></div></div>
<div class="ttc" id="astructrequirement__data_html"><div class="ttname"><a href="structrequirement__data.html">requirement_data</a></div><div class="ttdoc">The *_vector members represent list of alternatives requirements: alter_tool_comp_vector = { * { { a,...</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00215">requirements.h:215</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a175d46943600149603b7a915cb48092b"><div class="ttname"><a href="structrequirement__data.html#a175d46943600149603b7a915cb48092b">requirement_data::get_tools</a></div><div class="ttdeci">const alter_tool_comp_vector &amp; get_tools() const</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l00982">requirements.cpp:982</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a56dbf23ade6bced0dc6148b8e1a12d4c"><div class="ttname"><a href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">requirement_data::get_components</a></div><div class="ttdeci">const alter_item_comp_vector &amp; get_components() const</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l00992">requirements.cpp:992</a></div></div>
<div class="ttc" id="astructtool__comp_html"><div class="ttname"><a href="structtool__comp.html">tool_comp</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00090">requirements.h:90</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00133">point.h:133</a></div></div>
<div class="ttc" id="atype__id_8h_html_afb36dc6d5925e5112e70d60a171ebeb1"><div class="ttname"><a href="type__id_8h.html#afb36dc6d5925e5112e70d60a171ebeb1">requirement_id</a></div><div class="ttdeci">string_id&lt; requirement_data &gt; requirement_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00146">type_id.h:146</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="item_8h_source.html#l02237">item::active</a>, <a class="el" href="character_8h_source.html#l01578">Character::activity</a>, <a class="el" href="creature_8cpp_source.html#l01007">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="player_8cpp_source.html#l00371">player::add_msg_player_or_npc()</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="iexamine_8cpp_source.html#l04838">best_installer()</a>, <a class="el" href="iexamine_8cpp.html#a15450ecf5b34a615affe959125bf1626">bio_painkiller</a>, <a class="el" href="iexamine_8cpp.html#a5998fd340ee876cbfcff37251cf027cd">bio_power_storage</a>, <a class="el" href="iexamine_8cpp.html#ac095a9d5df7beadb44d07075e22740dd">bio_power_storage_mkII</a>, <a class="el" href="itype_8h_source.html#l00831">itype::bionic</a>, <a class="el" href="bodypart_8cpp_source.html#l00319">body_part_name()</a>, <a class="el" href="character_8cpp_source.html#l06456">Character::bp_to_hp()</a>, <a class="el" href="enums_8h_source.html#l00330">broken</a>, <a class="el" href="color_8h_source.html#l00021">c_red</a>, <a class="el" href="color_8h_source.html#l00032">c_yellow</a>, <a class="el" href="bionics_8cpp_source.html#l02229">Character::can_install_bionics()</a>, <a class="el" href="bionics_8cpp_source.html#l01985">Character::can_uninstall_bionic()</a>, <a class="el" href="color_8cpp_source.html#l00669">colorize()</a>, <a class="el" href="character_8cpp_source.html#l01961">Character::conduct_blood_analysis()</a>, <a class="el" href="crafting_8cpp_source.html#l01513">player::consume_items()</a>, <a class="el" href="crafting_8cpp_source.html#l01845">player::consume_tools()</a>, <a class="el" href="bodypart_8cpp_source.html#l00185">convert_bp()</a>, <a class="el" href="crafting_8cpp_source.html#l00556">Character::crafting_inventory()</a>, <a class="el" href="iexamine_8cpp_source.html#l04807">cyborg_on_couch()</a>, <a class="el" href="character_8h_source.html#l01570">Character::damage_disinfected</a>, <a class="el" href="character_8cpp_source.html#l00580">Character::disp_name()</a>, <a class="el" href="iexamine_8cpp.html#a2ebc0d3c09d8f2896a466db2794c2845">effect_antibiotic</a>, <a class="el" href="iexamine_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, <a class="el" href="iexamine_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="el" href="iexamine_8cpp.html#adcc47d614ba63ddb056307153d5ac06c">effect_disinfected</a>, <a class="el" href="iexamine_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a>, <a class="el" href="iexamine_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a>, <a class="el" href="iexamine_8cpp.html#a34d6c775f0ffa1e39d670ea01615992c">effect_pblue</a>, <a class="el" href="iexamine_8cpp.html#ab5d38652b4b5ac4a2a4810d0d8c3ded1">effect_strong_antibiotic</a>, <a class="el" href="iexamine_8cpp.html#a66fbdfe284eb410fdbece4a3be98bf55">effect_weak_antibiotic</a>, <a class="el" href="iexamine_8cpp.html#ab849b88436e7694e040bcbf2b50b7a0b">flag_AUTODOC()</a>, <a class="el" href="iexamine_8cpp.html#a4d722ed69c7a86c615a040088ae84d12">flag_IN_CBM()</a>, <a class="el" href="iexamine_8cpp.html#a662fd906916210c2d1e83f14c1d8bfda">flag_NO_PACKED()</a>, <a class="el" href="iexamine_8cpp.html#a186e23235b49b90b0e027ab61cdf2eef">flag_NO_STERILE()</a>, <a class="el" href="iexamine_8cpp.html#ac515c71f173b6c81dbc78f60ce2b89d2">flag_SPLINT()</a>, <a class="el" href="calendar_8h_source.html#l00204">time_duration::from_turns()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="requirements_8cpp_source.html#l00992">requirement_data::get_components()</a>, <a class="el" href="effect_8cpp_source.html#l00797">effect::get_duration()</a>, <a class="el" href="creature_8cpp_source.html#l01246">Creature::get_effect()</a>, <a class="el" href="effect_8cpp_source.html#l01207">effect::get_int_dur_factor()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="effect_8cpp_source.html#l00801">effect::get_max_duration()</a>, <a class="el" href="creature_8cpp_source.html#l01606">Creature::get_part_hp_cur()</a>, <a class="el" href="creature_8cpp_source.html#l01611">Creature::get_part_hp_max()</a>, <a class="el" href="character_8cpp_source.html#l07070">Character::get_rad()</a>, <a class="el" href="requirements_8cpp_source.html#l00982">requirement_data::get_tools()</a>, <a class="el" href="character_8cpp_source.html#l01814">Character::has_bionic()</a>, <a class="el" href="creature_8cpp_source.html#l01206">Creature::has_effect()</a>, <a class="el" href="item_8cpp_source.html#l05328">item::has_flag()</a>, <a class="el" href="visitable_8cpp_source.html#l00169">visitable&lt; T &gt;::has_quality()</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="character_8cpp_source.html#l06482">Character::hp_to_bp()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="player__activity_8h_source.html#l00097">player_activity::id()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00054">string_id&lt; T &gt;::id()</a>, <a class="el" href="game__inventory_8cpp_source.html#l02045">game_menus::inv::install_bionic()</a>, <a class="el" href="bionics_8cpp_source.html#l02322">Character::install_bionics()</a>, <a class="el" href="bionics_8cpp_source.html#l02908">Character::introduce_into_anesthesia()</a>, <a class="el" href="crafting_8cpp_source.html#l00598">Character::invalidate_crafting_inventory()</a>, <a class="el" href="item_8h_source.html#l02265">is_crafting_component()</a>, <a class="el" href="character_8cpp_source.html#l01264">Character::is_limb_broken()</a>, <a class="el" href="effect_8cpp_source.html#l00553">effect::is_null()</a>, <a class="el" href="visitable_8cpp_source.html#l00324">visitable&lt; T &gt;::items_with()</a>, <a class="el" href="iexamine_8cpp.html#a7f4916fdb349021f0c436cb1f91b80fa">itype_arm_splint</a>, <a class="el" href="iexamine_8cpp.html#a9e957908de7da4eb428f8ba2c18e372e">itype_bot_broken_cyborg</a>, <a class="el" href="iexamine_8cpp.html#a4ea2c47870b82e831292a9239b2e6ff2">itype_corpse</a>, <a class="el" href="iexamine_8cpp.html#a63cd91492b3d8da8ba47a1253cde9886">itype_leg_splint</a>, <a class="el" href="suffer_8cpp_source.html#l02037">Character::leak_level()</a>, <a class="el" href="enums_8h_source.html#l00260">m_good</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="character_8cpp_source.html#l00764">Character::mod_pain()</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="player__activity_8h_source.html#l00043">player_activity::moves_left</a>, <a class="el" href="character_8h_source.html#l01587">Character::my_bionics</a>, <a class="el" href="pldata_8h_source.html#l00039">num_hp_parts</a>, <a class="el" href="iexamine_8cpp_source.html#l04788">operator_present()</a>, <a class="el" href="path__info_8cpp_source.html#l00230">PATH_INFO::options()</a>, <a class="el" href="iexamine_8cpp_source.html#l04768">player_on_couch()</a>, <a class="el" href="output_8cpp_source.html#l00764">popup()</a>, <a class="el" href="iexamine_8cpp_source.html#l04890">popup_player_or_npc()</a>, <a class="el" href="iexamine_8cpp.html#a42ac34659f1b9fc5662b2f849fd96dab">qual_ANESTHESIA</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="creature_8cpp_source.html#l01163">Creature::remove_effect()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="effect_8cpp_source.html#l00805">effect::set_duration()</a>, <a class="el" href="item_8cpp_source.html#l05357">item::set_flag()</a>, <a class="el" href="string__formatter_8h_source.html#l00430">string_format()</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="calendar_8cpp_source.html#l00327">to_string()</a>, <a class="el" href="iexamine_8cpp.html#af20cb84a6e8ccc0ed66c352edf29143b">trait_NOPAIN</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="item_8h_source.html#l02160">item::type</a>, <a class="el" href="item_8cpp_source.html#l08374">item::typeId()</a>, <a class="el" href="bionics_8cpp_source.html#l02055">Character::uninstall_bionic()</a>, <a class="el" href="game__inventory_8cpp_source.html#l02131">game_menus::inv::uninstall_bionic()</a>, <a class="el" href="character_8cpp_source.html#l02128">Character::wear_item()</a>, and <a class="el" href="character_8cpp_source.html#l03264">Character::worn_with_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l02229">Character::can_install_bionics()</a>, <a class="el" href="bionics_8cpp_source.html#l01985">Character::can_uninstall_bionic()</a>, <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, <a class="el" href="bionics_8cpp_source.html#l02322">Character::install_bionics()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01942">vehicle::interact_with()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03547">activity_handlers::operation_do_turn()</a>, and <a class="el" href="bionics_8cpp_source.html#l02055">Character::uninstall_bionic()</a>.</p>

</div>
</div>
<a id="aa36119f7763dbe8190b9103f206fa7b4" name="aa36119f7763dbe8190b9103f206fa7b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa36119f7763dbe8190b9103f206fa7b4">&#9670;&nbsp;</a></span>bars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::bars </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If player has amorphous trait, slip through the bars. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01216">1216</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>{</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>    <span class="keywordflow">if</span>( !( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ab3388325c8d9a46ddb7af329e1b247fd">trait_AMORPHOUS</a> ) ) ) {</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>    }</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>    <span class="keywordflow">if</span>( ( ( p.<a class="code hl_function" href="classCharacter.html#adc1fd84a88722a905e57fea8bfd5b6b0">encumb</a>( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a> ) ) &gt;= 10 ) &amp;&amp; ( ( p.<a class="code hl_function" href="classCharacter.html#adc1fd84a88722a905e57fea8bfd5b6b0">encumb</a>( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a> ) ) &gt;= 10 ) &amp;&amp;</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>        ( p.<a class="code hl_function" href="classCharacter.html#adc1fd84a88722a905e57fea8bfd5b6b0">encumb</a>( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb">bp_foot_l</a> ) &gt;= 10 ||</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>          p.<a class="code hl_function" href="classCharacter.html#adc1fd84a88722a905e57fea8bfd5b6b0">encumb</a>( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7">bp_foot_r</a> ) &gt;= 10 ) ) { <span class="comment">// Most likely places for rigid gear that would catch on the bars.</span></div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your amorphous body could slip though the %s, but your cumbersome gear can&#39;t.&quot;</span> ),</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>                 here.<a class="code hl_function" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) );</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>    }</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Slip through the %s?&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) ) ) {</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>    }</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_turns&lt;int&gt;( 2_seconds );</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You slide right between the bars.&quot;</span> ) );</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>    p.<a class="code hl_function" href="classCharacter.html#a81bb9016c05d558713f6bce2512cd9e5">setpos</a>( examp );</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>}</div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb">bp_foot_l</a></div><div class="ttdeci">@ bp_foot_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00051">bodypart.h:51</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a></div><div class="ttdeci">@ bp_head</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00042">bodypart.h:42</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a></div><div class="ttdeci">@ bp_torso</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00041">bodypart.h:41</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7">bp_foot_r</a></div><div class="ttdeci">@ bp_foot_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00052">bodypart.h:52</a></div></div>
<div class="ttc" id="aclassCharacter_html_a81bb9016c05d558713f6bce2512cd9e5"><div class="ttname"><a href="classCharacter.html#a81bb9016c05d558713f6bce2512cd9e5">Character::setpos</a></div><div class="ttdeci">void setpos(const tripoint &amp;p) override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00815">character.h:815</a></div></div>
<div class="ttc" id="aclassCharacter_html_adc1fd84a88722a905e57fea8bfd5b6b0"><div class="ttname"><a href="classCharacter.html#adc1fd84a88722a905e57fea8bfd5b6b0">Character::encumb</a></div><div class="ttdeci">int encumb(body_part bp) const</div><div class="ttdoc">Returns ENC provided by armor, etc.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04027">character.cpp:4027</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00101">mutation.cpp:101</a></div></div>
<div class="ttc" id="aclassCreature_html_a8c5a392caa213bee9581b47e9f0e2052"><div class="ttname"><a href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">Creature::moves</a></div><div class="ttdeci">int moves</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00582">creature.h:582</a></div></div>
<div class="ttc" id="aclassmap_html_a51e32639c8df0c90e0743f929bcf2111"><div class="ttname"><a href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">map::tername</a></div><div class="ttdeci">std::string tername(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01773">map.cpp:1773</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a></div><div class="ttdeci">@ none</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00033">dialogue.h:33</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab3388325c8d9a46ddb7af329e1b247fd"><div class="ttname"><a href="iexamine_8cpp.html#ab3388325c8d9a46ddb7af329e1b247fd">trait_AMORPHOUS</a></div><div class="ttdeci">static const trait_id trait_AMORPHOUS(&quot;AMORPHOUS&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="bodypart_8h_source.html#l00051">bp_foot_l</a>, <a class="el" href="bodypart_8h_source.html#l00052">bp_foot_r</a>, <a class="el" href="bodypart_8h_source.html#l00042">bp_head</a>, <a class="el" href="bodypart_8h_source.html#l00041">bp_torso</a>, <a class="el" href="character_8cpp_source.html#l04027">Character::encumb()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="character_8h_source.html#l00815">Character::setpos()</a>, <a class="el" href="map_8cpp_source.html#l01773">map::tername()</a>, and <a class="el" href="iexamine_8cpp.html#ab3388325c8d9a46ddb7af329e1b247fd">trait_AMORPHOUS</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a5994412d9ed8d466f247588bb9a320d7" name="a5994412d9ed8d466f247588bb9a320d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5994412d9ed8d466f247588bb9a320d7">&#9670;&nbsp;</a></span>bulletin_board()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::bulletin_board </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01589">1589</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>{</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;validate_camps();</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>    <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>    <a class="code hl_class" href="classcoords_1_1coord__point.html">point_abs_omt</a> <a class="code hl_variable" href="namespacecoords.html#ae222bbb7f74b56f73f807483083914fb">omt</a>( <a class="code hl_function" href="coordinate__conversions_8cpp.html#ad1ca17bea3d4e8bbd38de078f5d504bf">ms_to_omt_copy</a>( here.<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( examp.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() ) ) );</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>    std::optional&lt;basecamp *&gt; bcp = <a class="code hl_variable" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code hl_function" href="classovermapbuffer.html#afb50d2d30ce283fbd3ee8773fde98676">find_camp</a>( <a class="code hl_variable" href="namespacecoords.html#ae222bbb7f74b56f73f807483083914fb">omt</a> );</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>    <span class="keywordflow">if</span>( bcp ) {</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>        <a class="code hl_class" href="classbasecamp.html">basecamp</a> *temp_camp = *bcp;</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>        temp_camp-&gt;<a class="code hl_function" href="classbasecamp.html#a9aeca574216eb4715b478f9349185bab">validate_bb_pos</a>( here.<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( examp ) );</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>        temp_camp-&gt;<a class="code hl_function" href="classbasecamp.html#aaabb991fdf80cf5ad1c2eb38b2b6ab84">validate_assignees</a>();</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>        temp_camp-&gt;<a class="code hl_function" href="classbasecamp.html#af444c9325e40cf302418a1566abdb4e2">validate_sort_points</a>();</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span> </div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>        <span class="keyword">const</span> std::string <a class="code hl_function" href="namespacePATH__INFO.html#af9a3ed879d4c10c8494ba4934c8ec678">title</a> = ( <span class="stringliteral">&quot;Base Missions&quot;</span> );</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>        <a class="code hl_class" href="classmission__data.html">mission_data</a> mission_key;</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>        temp_camp-&gt;<a class="code hl_function" href="classbasecamp.html#ae589ad011146be27d180bd6638f6086f">set_by_radio</a>( <span class="keyword">false</span> );</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>        temp_camp-&gt;<a class="code hl_function" href="classbasecamp.html#a7189b4375d61ee21fb6f7fbadff03f9a">get_available_missions</a>( mission_key );</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacetalk__function.html#a62b127ab85afb4cb9f6fb6d4593a0e21">talk_function::display_and_choose_opts</a>( mission_key, temp_camp-&gt;<a class="code hl_function" href="classbasecamp.html#ade51aefc6c8e4db92ffe5457e239aea2">camp_omt_pos</a>(),</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>                <span class="stringliteral">&quot;FACTION_CAMP&quot;</span>, <a class="code hl_function" href="namespacePATH__INFO.html#af9a3ed879d4c10c8494ba4934c8ec678">title</a> ) ) {</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>            temp_camp-&gt;<a class="code hl_function" href="classbasecamp.html#a8afa1202055abd7999811de4fe26a694">handle_mission</a>( mission_key.<a class="code hl_variable" href="classmission__data.html#ab18a1ebd8872d7f4ee17d679833bf909">cur_key</a>.<a class="code hl_variable" href="structmission__entry.html#abfc345c0516e8da0d1a743938191c8ad">id</a>, mission_key.<a class="code hl_variable" href="classmission__data.html#ab18a1ebd8872d7f4ee17d679833bf909">cur_key</a>.<a class="code hl_variable" href="structmission__entry.html#aaecf4eaad3a02d09ce9283c2daed887b">dir</a> );</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>        }</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This bulletin board is not inside a camp&quot;</span> ) );</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>    }</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>}</div>
<div class="ttc" id="aclassbasecamp_html"><div class="ttname"><a href="classbasecamp.html">basecamp</a></div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00116">basecamp.h:117</a></div></div>
<div class="ttc" id="aclassbasecamp_html_a7189b4375d61ee21fb6f7fbadff03f9a"><div class="ttname"><a href="classbasecamp.html#a7189b4375d61ee21fb6f7fbadff03f9a">basecamp::get_available_missions</a></div><div class="ttdeci">void get_available_missions(mission_data &amp;mission_key)</div><div class="ttdef"><b>Definition:</b> <a href="faction__camp_8cpp_source.html#l01210">faction_camp.cpp:1210</a></div></div>
<div class="ttc" id="aclassbasecamp_html_a8afa1202055abd7999811de4fe26a694"><div class="ttname"><a href="classbasecamp.html#a8afa1202055abd7999811de4fe26a694">basecamp::handle_mission</a></div><div class="ttdeci">bool handle_mission(const std::string &amp;miss_id, const std::optional&lt; point &gt; &amp;opt_miss_dir)</div><div class="ttdef"><b>Definition:</b> <a href="faction__camp_8cpp_source.html#l01351">faction_camp.cpp:1351</a></div></div>
<div class="ttc" id="aclassbasecamp_html_a9aeca574216eb4715b478f9349185bab"><div class="ttname"><a href="classbasecamp.html#a9aeca574216eb4715b478f9349185bab">basecamp::validate_bb_pos</a></div><div class="ttdeci">void validate_bb_pos(const tripoint &amp;new_abs_pos)</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00143">basecamp.h:143</a></div></div>
<div class="ttc" id="aclassbasecamp_html_aaabb991fdf80cf5ad1c2eb38b2b6ab84"><div class="ttname"><a href="classbasecamp.html#aaabb991fdf80cf5ad1c2eb38b2b6ab84">basecamp::validate_assignees</a></div><div class="ttdeci">void validate_assignees()</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8cpp_source.html#l00509">basecamp.cpp:509</a></div></div>
<div class="ttc" id="aclassbasecamp_html_ade51aefc6c8e4db92ffe5457e239aea2"><div class="ttname"><a href="classbasecamp.html#ade51aefc6c8e4db92ffe5457e239aea2">basecamp::camp_omt_pos</a></div><div class="ttdeci">tripoint_abs_omt camp_omt_pos() const</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00134">basecamp.h:134</a></div></div>
<div class="ttc" id="aclassbasecamp_html_ae589ad011146be27d180bd6638f6086f"><div class="ttname"><a href="classbasecamp.html#ae589ad011146be27d180bd6638f6086f">basecamp::set_by_radio</a></div><div class="ttdeci">void set_by_radio(bool access_by_radio)</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8cpp_source.html#l00132">basecamp.cpp:132</a></div></div>
<div class="ttc" id="aclassbasecamp_html_af444c9325e40cf302418a1566abdb4e2"><div class="ttname"><a href="classbasecamp.html#af444c9325e40cf302418a1566abdb4e2">basecamp::validate_sort_points</a></div><div class="ttdeci">bool validate_sort_points()</div><div class="ttdef"><b>Definition:</b> <a href="faction__camp_8cpp_source.html#l03585">faction_camp.cpp:3585</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; point, coords::origin::abs, coords::omt &gt;</a></div></div>
<div class="ttc" id="aclassmap_html_a501f3a1d449ac022f1b36b99da653e94"><div class="ttname"><a href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">map::getabs</a></div><div class="ttdeci">tripoint getabs(const tripoint &amp;p) const</div><div class="ttdoc">Translates local (to this map) coordinates of a square to global absolute coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08399">map.cpp:8399</a></div></div>
<div class="ttc" id="aclassmission__data_html"><div class="ttname"><a href="classmission__data.html">mission_data</a></div><div class="ttdef"><b>Definition:</b> <a href="mission__companion_8h_source.html#l00037">mission_companion.h:38</a></div></div>
<div class="ttc" id="aclassmission__data_html_ab18a1ebd8872d7f4ee17d679833bf909"><div class="ttname"><a href="classmission__data.html#ab18a1ebd8872d7f4ee17d679833bf909">mission_data::cur_key</a></div><div class="ttdeci">mission_entry cur_key</div><div class="ttdef"><b>Definition:</b> <a href="mission__companion_8h_source.html#l00041">mission_companion.h:41</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_afb50d2d30ce283fbd3ee8773fde98676"><div class="ttname"><a href="classovermapbuffer.html#afb50d2d30ce283fbd3ee8773fde98676">overmapbuffer::find_camp</a></div><div class="ttdeci">std::optional&lt; basecamp * &gt; find_camp(const point_abs_omt &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l01138">overmapbuffer.cpp:1138</a></div></div>
<div class="ttc" id="acoordinate__conversions_8cpp_html_ad1ca17bea3d4e8bbd38de078f5d504bf"><div class="ttname"><a href="coordinate__conversions_8cpp.html#ad1ca17bea3d4e8bbd38de078f5d504bf">ms_to_omt_copy</a></div><div class="ttdeci">point ms_to_omt_copy(point p)</div><div class="ttdef"><b>Definition:</b> <a href="coordinate__conversions_8cpp_source.html#l00162">coordinate_conversions.cpp:162</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_af9a3ed879d4c10c8494ba4934c8ec678"><div class="ttname"><a href="namespacePATH__INFO.html#af9a3ed879d4c10c8494ba4934c8ec678">PATH_INFO::title</a></div><div class="ttdeci">std::string title(holiday current_holiday)</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00326">path_info.cpp:326</a></div></div>
<div class="ttc" id="anamespacecoords_html_ae222bbb7f74b56f73f807483083914fb"><div class="ttname"><a href="namespacecoords.html#ae222bbb7f74b56f73f807483083914fb">coords::omt</a></div><div class="ttdeci">constexpr scale omt</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00032">coordinates.h:32</a></div></div>
<div class="ttc" id="anamespacetalk__function_html_a62b127ab85afb4cb9f6fb6d4593a0e21"><div class="ttname"><a href="namespacetalk__function.html#a62b127ab85afb4cb9f6fb6d4593a0e21">talk_function::display_and_choose_opts</a></div><div class="ttdeci">bool display_and_choose_opts(mission_data &amp;mission_key, const tripoint_abs_omt &amp;omt_pos, const std::string &amp;role_id, const std::string &amp;title)</div><div class="ttdef"><b>Definition:</b> <a href="mission__companion_8cpp_source.html#l00367">mission_companion.cpp:367</a></div></div>
<div class="ttc" id="aovermapbuffer_8cpp_html_ab3cf8344ec3e473f9ce96a33dc3425af"><div class="ttname"><a href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a></div><div class="ttdeci">overmapbuffer overmap_buffer</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00048">overmapbuffer.cpp:46</a></div></div>
<div class="ttc" id="astructmission__entry_html_aaecf4eaad3a02d09ce9283c2daed887b"><div class="ttname"><a href="structmission__entry.html#aaecf4eaad3a02d09ce9283c2daed887b">mission_entry::dir</a></div><div class="ttdeci">std::optional&lt; point &gt; dir</div><div class="ttdef"><b>Definition:</b> <a href="mission__companion_8h_source.html#l00031">mission_companion.h:31</a></div></div>
<div class="ttc" id="astructmission__entry_html_abfc345c0516e8da0d1a743938191c8ad"><div class="ttname"><a href="structmission__entry.html#abfc345c0516e8da0d1a743938191c8ad">mission_entry::id</a></div><div class="ttdeci">std::string id</div><div class="ttdef"><b>Definition:</b> <a href="mission__companion_8h_source.html#l00029">mission_companion.h:29</a></div></div>
<div class="ttc" id="astructtripoint_html_accc0725c936dbebb2486f969f39e2e5f"><div class="ttname"><a href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">tripoint::xy</a></div><div class="ttdeci">constexpr point xy() const</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00206">point.h:206</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="basecamp_8h_source.html#l00134">basecamp::camp_omt_pos()</a>, <a class="el" href="mission__companion_8h_source.html#l00041">mission_data::cur_key</a>, <a class="el" href="mission__companion_8h_source.html#l00031">mission_entry::dir</a>, <a class="el" href="mission__companion_8cpp_source.html#l00367">talk_function::display_and_choose_opts()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l01138">overmapbuffer::find_camp()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="faction__camp_8cpp_source.html#l01210">basecamp::get_available_missions()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l08399">map::getabs()</a>, <a class="el" href="faction__camp_8cpp_source.html#l01351">basecamp::handle_mission()</a>, <a class="el" href="mission__companion_8h_source.html#l00029">mission_entry::id</a>, <a class="el" href="coordinate__conversions_8cpp_source.html#l00162">ms_to_omt_copy()</a>, <a class="el" href="coordinates_8h_source.html#l00032">coords::omt</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00046">overmap_buffer</a>, <a class="el" href="basecamp_8cpp_source.html#l00132">basecamp::set_by_radio()</a>, <a class="el" href="path__info_8cpp_source.html#l00326">PATH_INFO::title()</a>, <a class="el" href="basecamp_8cpp_source.html#l00509">basecamp::validate_assignees()</a>, <a class="el" href="basecamp_8h_source.html#l00143">basecamp::validate_bb_pos()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03585">basecamp::validate_sort_points()</a>, and <a class="el" href="point_8h_source.html#l00206">tripoint::xy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a1ff48dd50fbbb6d65965d377aebfeb61" name="a1ff48dd50fbbb6d65965d377aebfeb61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ff48dd50fbbb6d65965d377aebfeb61">&#9670;&nbsp;</a></span>can_fertilize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classret__val.html">ret_val</a>&lt; bool &gt; iexamine::can_fertilize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>fertilizer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02460">2460</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>{</div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span>    <span class="keywordflow">if</span>( !here.<a class="code hl_function" href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">has_flag_furn</a>( <span class="stringliteral">&quot;PLANT&quot;</span>, tile ) ) {</div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;bool&gt;::make_failure</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Tile isn&#39;t a plant&quot;</span> ) );</div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span>    }</div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span>    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( tile ).<a class="code hl_function" href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">size</a>() &gt; 1 ) {</div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;bool&gt;::make_failure</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Tile is already fertilized&quot;</span> ) );</div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>    }</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>    <span class="keywordflow">if</span>( !p.<a class="code hl_function" href="classCharacter.html#a9bff3208a5e121c4e3a71b81b378e4e7">has_charges</a>( fertilizer, 1 ) ) {</div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;bool&gt;::make_failure</a>(</div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Tried to fertilize with %s, but player doesn&#39;t have any.&quot;</span> ),</div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span>                   fertilizer.<a class="code hl_function" href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">c_str</a>() );</div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span>    }</div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span> </div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val&lt;bool&gt;::make_success</a>();</div>
<div class="line"><a id="l02477" name="l02477"></a><span class="lineno"> 2477</span>}</div>
<div class="ttc" id="aclassret__val_html_a0bbde13713bc279563fa85782599f957"><div class="ttname"><a href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val::make_success</a></div><div class="ttdeci">static ret_val make_success(T val=default_success::value)</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00042">ret_val.h:42</a></div></div>
<div class="ttc" id="aclassret__val_html_a415798e6fd736bd724329890cae0df4a"><div class="ttname"><a href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val::make_failure</a></div><div class="ttdeci">static ret_val make_failure(T val=default_failure::value)</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00046">ret_val.h:46</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="string__id_8h_source.html#l00247">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="character_8cpp_source.html#l09605">Character::has_charges()</a>, <a class="el" href="map_8cpp_source.html#l02398">map::has_flag_furn()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="ret__val_8h_source.html#l00046">ret_val&lt; T &gt;::make_failure()</a>, <a class="el" href="ret__val_8h_source.html#l00042">ret_val&lt; T &gt;::make_success()</a>, and <a class="el" href="item__stack_8cpp_source.html#l00010">item_stack::size()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02479">fertilize_plant()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l04527">activity_handlers::fertilize_plot_do_turn()</a>.</p>

</div>
</div>
<a id="a4ca5e639c2aadfea66eb0a711a60651d" name="a4ca5e639c2aadfea66eb0a711a60651d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ca5e639c2aadfea66eb0a711a60651d">&#9670;&nbsp;</a></span>cardreader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::cardreader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use id/hack reader. </p>
<p >Using an id despawns turrets. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01024">1024</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>{</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>    <a class="code hl_class" href="classstring__id.html">itype_id</a> card_type = ( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp ) == <a class="code hl_variable" href="mapdata_8cpp.html#aefe6bf9dc07644e13aaa24b9d95b4f3b">t_card_science</a> ? <a class="code hl_variable" href="iexamine_8cpp.html#aae6faeb7445e8e1c34fc703da8024a24">itype_id_science</a> :</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>                           here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a34d3e394008e88efd4f4b4e6a431af9f">t_card_military</a> ? <a class="code hl_variable" href="iexamine_8cpp.html#a5fe89cc3d04c9ca612fc21d3fe465591">itype_id_military</a> :</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>                           <a class="code hl_variable" href="iexamine_8cpp.html#a9c1f34b48e1a550fda280e4a5aff7a69">itype_id_industrial</a> );</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>    <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">has_amount</a>( card_type, 1 ) &amp;&amp; <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Swipe your ID card?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>        p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_turns&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;tmp : here.<a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( examp, 3 ) ) {</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>            <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#ae0e590a7541967775d4a3981a28d2ae5">t_door_metal_locked</a> ) {</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>                here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#aeefbc08f73d0fc9c356d59505db15211">t_door_metal_c</a> );</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>                <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>            }</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>        }</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>        <span class="keywordflow">for</span>( <a class="code hl_class" href="classmonster.html">monster</a> &amp;critter : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_monsters() ) {</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>            <span class="comment">// Check 1) same overmap coords, 2) turret, 3) hostile</span></div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinate__conversions_8cpp.html#ad1ca17bea3d4e8bbd38de078f5d504bf">ms_to_omt_copy</a>( here.<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( critter.pos() ) ) == <a class="code hl_function" href="coordinate__conversions_8cpp.html#ad1ca17bea3d4e8bbd38de078f5d504bf">ms_to_omt_copy</a>( here.<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( examp ) ) &amp;&amp;</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>                critter.has_flag( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842ae2bb0f1f53d62f5dc03f50871da903ac">MF_ID_CARD_DESPAWN</a> ) &amp;&amp;</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>                critter.attitude_to( p ) == Creature::Attitude::A_HOSTILE ) {</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;remove_zombie( critter );</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>            }</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>        }</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a> ) {</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You insert your ID card.&quot;</span> ) );</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The nearby doors unlock.&quot;</span> ) );</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>            p.<a class="code hl_function" href="classCharacter.html#a7cb114203e03014f9834a10fa4bff24e">use_amount</a>( card_type, 1 );</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The nearby doors are already opened.&quot;</span> ) );</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>        }</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Attempt to hack this card-reader?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>        <a class="code hl_function" href="iexamine_8cpp.html#aae4267b3209a79d919707bd1ba1c2071">try_start_hacking</a>( p, examp );</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>    }</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>}</div>
<div class="ttc" id="aclassCharacter_html_a7cb114203e03014f9834a10fa4bff24e"><div class="ttname"><a href="classCharacter.html#a7cb114203e03014f9834a10fa4bff24e">Character::use_amount</a></div><div class="ttdeci">std::list&lt; item &gt; use_amount(itype_id it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09633">character.cpp:9633</a></div></div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08754">map.cpp:8754</a></div></div>
<div class="ttc" id="aclassmap_html_a75c60b0b73d8b492df608a2a4b824784"><div class="ttname"><a href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">map::ter_set</a></div><div class="ttdeci">bool ter_set(const tripoint &amp;p, const ter_id &amp;new_terrain)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01703">map.cpp:1703</a></div></div>
<div class="ttc" id="aclassmap_html_aba8f330c2cc25be0652489b42d8dd530"><div class="ttname"><a href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">map::ter</a></div><div class="ttdeci">ter_id ter(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01562">map.cpp:1562</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00084">monster.h:85</a></div></div>
<div class="ttc" id="aclassvisitable_html_ac50bc4422d4636a70a97d41787f22d0d"><div class="ttname"><a href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">visitable::has_amount</a></div><div class="ttdeci">bool has_amount(const itype_id &amp;what, int qty, bool pseudo=true, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdoc">Check instance provides at least qty of an item (.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l01111">visitable.cpp:1111</a></div></div>
<div class="ttc" id="ahandle__action_8cpp_html_a18a5c5b03ba964c4d5d06e062510c99c"><div class="ttname"><a href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a></div><div class="ttdeci">static void open()</div><div class="ttdef"><b>Definition:</b> <a href="handle__action_8cpp_source.html#l00516">handle_action.cpp:516</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a5fe89cc3d04c9ca612fc21d3fe465591"><div class="ttname"><a href="iexamine_8cpp.html#a5fe89cc3d04c9ca612fc21d3fe465591">itype_id_military</a></div><div class="ttdeci">static const itype_id itype_id_military(&quot;id_military&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a9c1f34b48e1a550fda280e4a5aff7a69"><div class="ttname"><a href="iexamine_8cpp.html#a9c1f34b48e1a550fda280e4a5aff7a69">itype_id_industrial</a></div><div class="ttdeci">static const itype_id itype_id_industrial(&quot;id_industrial&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aae4267b3209a79d919707bd1ba1c2071"><div class="ttname"><a href="iexamine_8cpp.html#aae4267b3209a79d919707bd1ba1c2071">try_start_hacking</a></div><div class="ttdeci">static bool try_start_hacking(player &amp;p, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l00979">iexamine.cpp:979</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_aae6faeb7445e8e1c34fc703da8024a24"><div class="ttname"><a href="iexamine_8cpp.html#aae6faeb7445e8e1c34fc703da8024a24">itype_id_science</a></div><div class="ttdeci">static const itype_id itype_id_science(&quot;id_science&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_a34d3e394008e88efd4f4b4e6a431af9f"><div class="ttname"><a href="mapdata_8cpp.html#a34d3e394008e88efd4f4b4e6a431af9f">t_card_military</a></div><div class="ttdeci">ter_id t_card_military</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00724">mapdata.cpp:724</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_ae0e590a7541967775d4a3981a28d2ae5"><div class="ttname"><a href="mapdata_8cpp.html#ae0e590a7541967775d4a3981a28d2ae5">t_door_metal_locked</a></div><div class="ttdeci">ter_id t_door_metal_locked</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00664">mapdata.cpp:664</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aeefbc08f73d0fc9c356d59505db15211"><div class="ttname"><a href="mapdata_8cpp.html#aeefbc08f73d0fc9c356d59505db15211">t_door_metal_c</a></div><div class="ttdeci">ter_id t_door_metal_c</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00664">mapdata.cpp:664</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aefe6bf9dc07644e13aaa24b9d95b4f3b"><div class="ttname"><a href="mapdata_8cpp.html#aefe6bf9dc07644e13aaa24b9d95b4f3b">t_card_science</a></div><div class="ttdeci">ter_id t_card_science</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00724">mapdata.cpp:724</a></div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842ae2bb0f1f53d62f5dc03f50871da903ac"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842ae2bb0f1f53d62f5dc03f50871da903ac">MF_ID_CARD_DESPAWN</a></div><div class="ttdeci">@ MF_ID_CARD_DESPAWN</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00114">mtype.h:114</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l08399">map::getabs()</a>, <a class="el" href="visitable_8cpp_source.html#l01111">visitable&lt; T &gt;::has_amount()</a>, <a class="el" href="iexamine_8cpp.html#a9c1f34b48e1a550fda280e4a5aff7a69">itype_id_industrial</a>, <a class="el" href="iexamine_8cpp.html#a5fe89cc3d04c9ca612fc21d3fe465591">itype_id_military</a>, <a class="el" href="iexamine_8cpp.html#aae6faeb7445e8e1c34fc703da8024a24">itype_id_science</a>, <a class="el" href="enums_8h_source.html#l00260">m_good</a>, <a class="el" href="mtype_8h_source.html#l00114">MF_ID_CARD_DESPAWN</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="coordinate__conversions_8cpp_source.html#l00162">ms_to_omt_copy()</a>, <a class="el" href="handle__action_8cpp_source.html#l00516">open()</a>, <a class="el" href="map_8cpp_source.html#l08754">map::points_in_radius()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="mapdata_8cpp_source.html#l00724">t_card_military</a>, <a class="el" href="mapdata_8cpp_source.html#l00724">t_card_science</a>, <a class="el" href="mapdata_8cpp_source.html#l00664">t_door_metal_c</a>, <a class="el" href="mapdata_8cpp_source.html#l00664">t_door_metal_locked</a>, <a class="el" href="map_8cpp_source.html#l01562">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, <a class="el" href="iexamine_8cpp_source.html#l00979">try_start_hacking()</a>, and <a class="el" href="character_8cpp_source.html#l09633">Character::use_amount()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00792">get_hack_type()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ab0acf94f10f196bbb35fed1c57ca1a9b" name="ab0acf94f10f196bbb35fed1c57ca1a9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0acf94f10f196bbb35fed1c57ca1a9b">&#9670;&nbsp;</a></span>cardreader_foodplace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::cardreader_foodplace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01073">1073</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>{</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>    <span class="keywordflow">if</span>( ( p.<a class="code hl_function" href="classCharacter.html#acae7f46d89bece81776b29bb0b1c3ca3">is_wearing</a>( <a class="code hl_class" href="classstring__id.html">itype_id</a>( <span class="stringliteral">&quot;foodperson_mask&quot;</span> ) ) ||</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>          p.<a class="code hl_function" href="classCharacter.html#acae7f46d89bece81776b29bb0b1c3ca3">is_wearing</a>( <a class="code hl_class" href="classstring__id.html">itype_id</a>( <span class="stringliteral">&quot;foodperson_mask_on&quot;</span> ) ) ) &amp;&amp;</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>        <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Press mask on the reader?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>        p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -100 );</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>        <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;tmp : here.<a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( examp, 3 ) ) {</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>            <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#ae0e590a7541967775d4a3981a28d2ae5">t_door_metal_locked</a> ) {</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>                here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#aeefbc08f73d0fc9c356d59505db15211">t_door_metal_c</a> );</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>                <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>            }</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>        }</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a> ) {</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You press your face on the reader.&quot;</span> ) );</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The nearby doors are unlocked.&quot;</span> ) );</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( examp, 6, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;Hello Foodperson.  Welcome home.\&quot;&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;speech&quot;</span>, <span class="stringliteral">&quot;welcome&quot;</span> );</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The nearby doors are already unlocked.&quot;</span> ) );</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Lock doors?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;tmp : here.<a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( examp, 3 ) ) {</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>                    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#aab774c3759d22a582afa8c2daba6a0cc">t_door_metal_o</a> || here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#aeefbc08f73d0fc9c356d59505db15211">t_door_metal_c</a> ) {</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>                        <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() == tmp ) {</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>                            p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You are in the way of the door, move before trying again.&quot;</span> ) );</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>                            here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#ae0e590a7541967775d4a3981a28d2ae5">t_door_metal_locked</a> );</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>                        }</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>                    }</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>                }</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>            }</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>        }</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">has_amount</a>( <a class="code hl_class" href="classstring__id.html">itype_id</a>( <span class="stringliteral">&quot;foodperson_mask&quot;</span> ), 1 ) ||</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>               p.<a class="code hl_function" href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">has_amount</a>( <a class="code hl_class" href="classstring__id.html">itype_id</a>( <span class="stringliteral">&quot;foodperson_mask_on&quot;</span> ), 1 ) ) {</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( examp, 6, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;FOODPERSON DETECTED.  Please make yourself presentable.\&quot;&quot;</span> ), <span class="keyword">true</span>,</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>                       <span class="stringliteral">&quot;speech&quot;</span>, <span class="stringliteral">&quot;welcome&quot;</span> );</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( examp, 6, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;Your face is inadequate.  Please go away.\&quot;&quot;</span> ), <span class="keyword">true</span>,</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>                       <span class="stringliteral">&quot;speech&quot;</span>, <span class="stringliteral">&quot;welcome&quot;</span> );</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Attempt to hack this card-reader?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>            <a class="code hl_function" href="iexamine_8cpp.html#aae4267b3209a79d919707bd1ba1c2071">try_start_hacking</a>( p, examp );</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>        }</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>    }</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>}</div>
<div class="ttc" id="aclassCharacter_html_acae7f46d89bece81776b29bb0b1c3ca3"><div class="ttname"><a href="classCharacter.html#acae7f46d89bece81776b29bb0b1c3ca3">Character::is_wearing</a></div><div class="ttdeci">bool is_wearing(const item &amp;itm) const</div><div class="ttdoc">Returns true if the player is wearing the item.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03234">character.cpp:3234</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad24859164517ed6e392e21df69527199"><div class="ttname"><a href="classCharacter.html#ad24859164517ed6e392e21df69527199">Character::pos</a></div><div class="ttdeci">const tripoint &amp; pos() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00601">character.cpp:601</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aab774c3759d22a582afa8c2daba6a0cc"><div class="ttname"><a href="mapdata_8cpp.html#aab774c3759d22a582afa8c2daba6a0cc">t_door_metal_o</a></div><div class="ttdeci">ter_id t_door_metal_o</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00664">mapdata.cpp:664</a></div></div>
<div class="ttc" id="anamespacesounds_html_a6bb79ae1c9c3dcd8c8e0b28c66b0398d"><div class="ttname"><a href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a></div><div class="ttdeci">void sound(const tripoint &amp;p, int vol, sound_t category, const std::string &amp;description, bool ambient=false, const std::string &amp;id=&quot;&quot;, const std::string &amp;variant=&quot;default&quot;)</div><div class="ttdoc">Sound at (p) of intensity (vol)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00177">sounds.cpp:177</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a></div><div class="ttdeci">@ electronic_speech</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::electronic_speech</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="visitable_8cpp_source.html#l01111">visitable&lt; T &gt;::has_amount()</a>, <a class="el" href="character_8cpp_source.html#l03234">Character::is_wearing()</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="enums_8h_source.html#l00260">m_good</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="handle__action_8cpp_source.html#l00516">open()</a>, <a class="el" href="map_8cpp_source.html#l08754">map::points_in_radius()</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="mapdata_8cpp_source.html#l00664">t_door_metal_c</a>, <a class="el" href="mapdata_8cpp_source.html#l00664">t_door_metal_locked</a>, <a class="el" href="mapdata_8cpp_source.html#l00664">t_door_metal_o</a>, <a class="el" href="map_8cpp_source.html#l01562">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, and <a class="el" href="iexamine_8cpp_source.html#l00979">try_start_hacking()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="af85cfc275716670ec072d2b872aedd1c" name="af85cfc275716670ec072d2b872aedd1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af85cfc275716670ec072d2b872aedd1c">&#9670;&nbsp;</a></span>cardreader_robofac()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::cardreader_robofac </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01059">1059</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>{</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>    <a class="code hl_class" href="classstring__id.html">itype_id</a> card_type = <a class="code hl_variable" href="iexamine_8cpp.html#aae6faeb7445e8e1c34fc703da8024a24">itype_id_science</a>;</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>    <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">has_amount</a>( card_type, 1 ) &amp;&amp; <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Swipe your ID card?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>        p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -100 );</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>        p.<a class="code hl_function" href="classCharacter.html#a7cb114203e03014f9834a10fa4bff24e">use_amount</a>( card_type, 1 );</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The card reader short circuits!&quot;</span> ) );</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>        <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a8dfb407493928df3e4272a83a981d921">t_card_reader_broken</a> );</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>        <a class="code hl_function" href="namespaceiexamine.html#aa7f9f1abbc5c0c637003e366e85160f3">intercom</a>( p, examp );</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You have never seen this card reader model before.  Hacking it seems impossible.&quot;</span> ) );</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>    }</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>}</div>
<div class="ttc" id="amapdata_8cpp_html_a8dfb407493928df3e4272a83a981d921"><div class="ttname"><a href="mapdata_8cpp.html#a8dfb407493928df3e4272a83a981d921">t_card_reader_broken</a></div><div class="ttdeci">ter_id t_card_reader_broken</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00724">mapdata.cpp:724</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_aa7f9f1abbc5c0c637003e366e85160f3"><div class="ttname"><a href="namespaceiexamine.html#aa7f9f1abbc5c0c637003e366e85160f3">iexamine::intercom</a></div><div class="ttdeci">void intercom(player &amp;p, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01121">iexamine.cpp:1121</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="visitable_8cpp_source.html#l01111">visitable&lt; T &gt;::has_amount()</a>, <a class="el" href="iexamine_8cpp_source.html#l01121">intercom()</a>, <a class="el" href="iexamine_8cpp.html#aae6faeb7445e8e1c34fc703da8024a24">itype_id_science</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="mapdata_8cpp_source.html#l00724">t_card_reader_broken</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, and <a class="el" href="character_8cpp_source.html#l09633">Character::use_amount()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="aef1e066e643dd0dc1eb2f2b603c213f9" name="aef1e066e643dd0dc1eb2f2b603c213f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef1e066e643dd0dc1eb2f2b603c213f9">&#9670;&nbsp;</a></span>chainfence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::chainfence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompt climbing over fence. </p>
<p >Calculates move cost, applies it to player and, moves them. </p>
Dexterity decreases chances of slipping while climbing 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01161">1161</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>{</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>    <span class="comment">// We&#39;re not going to do anything if we&#39;re already on that point.</span></div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>    <span class="comment">// Also prompt the player before taking an action.</span></div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>    <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() == examp || !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Climb obstacle?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>    }</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span> </div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#adc9b587eea6f8ad93e0bde8347dd792e">flag_CLIMB_SIMPLE</a>, examp ) &amp;&amp; p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#add3801e5054573e6c7c0ef0276339fdf">trait_PARKOUR</a> ) ) {</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You vault over the obstacle with ease.&quot;</span> ) );</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100; <span class="comment">// Not tall enough to warrant spider-climbing, so only relevant trait.</span></div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#adc9b587eea6f8ad93e0bde8347dd792e">flag_CLIMB_SIMPLE</a>, examp ) ) {</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You vault over the obstacle.&quot;</span> ) );</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 300; <span class="comment">// Most common move cost for barricades pre-change.</span></div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">trait_ARACHNID_ARMS_OK</a> ) &amp;&amp;</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>               !p.<a class="code hl_function" href="classCharacter.html#a6d3588802fde645fd5387038b259377c">wearing_something_on</a>( <a class="code hl_class" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Climbing this obstacle is trivial for one such as you.&quot;</span> ) );</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 75; <span class="comment">// Yes, faster than walking.  6-8 limbs are impressive.</span></div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac41827abd252cabc27c7c385291f71e4">trait_INSECT_ARMS_OK</a> ) &amp;&amp;</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>               !p.<a class="code hl_function" href="classCharacter.html#a6d3588802fde645fd5387038b259377c">wearing_something_on</a>( <a class="code hl_class" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You quickly scale the fence.&quot;</span> ) );</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 90;</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#add3801e5054573e6c7c0ef0276339fdf">trait_PARKOUR</a> ) ) {</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This obstacle is no match for your freerunning abilities.&quot;</span> ) );</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 400;<span class="comment"></span></div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span><span class="comment">        ///\EFFECT_DEX decreases chances of slipping while climbing</span></div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span><span class="comment"></span>        <span class="keywordtype">int</span> climb = p.<a class="code hl_variable" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a>;</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>        <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a3a176c0b195118f620ddab93c2ced71b">trait_BADKNEES</a> ) ) {</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>            climb = climb / 2;</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>        }</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;slip_down() ) {</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>        }</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> += climb * 10;</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>        <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;plmove&quot;</span>, <span class="stringliteral">&quot;clear_obstacle&quot;</span>, <a class="code hl_function" href="namespacesfx.html#a1f138eaa92db132e81ce591751c512cc">sfx::get_heard_volume</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) );</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>    }</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>    <span class="keywordflow">if</span>( p.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>        here.<a class="code hl_function" href="classmap.html#a53d95390d133477f8b4a1ce76482750b">unboard_vehicle</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>    }</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>    p.<a class="code hl_function" href="classCharacter.html#a81bb9016c05d558713f6bce2512cd9e5">setpos</a>( examp );</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>    <span class="keywordflow">if</span>( examp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &lt; <a class="code hl_variable" href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a> || examp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &lt; <a class="code hl_variable" href="game__constants_8h.html#acf60bb2d3beb1625a9344e3291dda674">HALF_MAPSIZE_Y</a> ||</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>        examp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &gt;= <a class="code hl_variable" href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a> + <a class="code hl_variable" href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a> || examp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &gt;= <a class="code hl_variable" href="game__constants_8h.html#acf60bb2d3beb1625a9344e3291dda674">HALF_MAPSIZE_Y</a> + <a class="code hl_variable" href="game__constants_8h.html#a4cfa35de359af17f7bc6c2a424339eb5">SEEY</a> ) {</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>        <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classplayer.html#af4d6390315e3c781edf8649c5ae59a33">is_player</a>() ) {</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;update_map( p );</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>        }</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>    }</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>}</div>
<div class="ttc" id="aclassCharacter_html_a4065ac02745befad248425d307b71849"><div class="ttname"><a href="classCharacter.html#a4065ac02745befad248425d307b71849">Character::dex_cur</a></div><div class="ttdeci">int dex_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00265">character.h:265</a></div></div>
<div class="ttc" id="aclassCharacter_html_a61bc9422c35b63128532af268e52cb71"><div class="ttname"><a href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">Character::in_vehicle</a></div><div class="ttdeci">bool in_vehicle</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01573">character.h:1573</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6d3588802fde645fd5387038b259377c"><div class="ttname"><a href="classCharacter.html#a6d3588802fde645fd5387038b259377c">Character::wearing_something_on</a></div><div class="ttdeci">bool wearing_something_on(const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns true if the character is wearing something on the entered body part.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08863">character.cpp:8863</a></div></div>
<div class="ttc" id="aclassmap_html_a27e22f0999ea03eff18babc48643c568"><div class="ttname"><a href="classmap.html#a27e22f0999ea03eff18babc48643c568">map::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02374">map.cpp:2374</a></div></div>
<div class="ttc" id="aclassmap_html_a53d95390d133477f8b4a1ce76482750b"><div class="ttname"><a href="classmap.html#a53d95390d133477f8b4a1ce76482750b">map::unboard_vehicle</a></div><div class="ttdeci">void unboard_vehicle(const vpart_reference &amp;, Character *passenger, bool dead_passenger=false)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01145">map.cpp:1145</a></div></div>
<div class="ttc" id="aclassplayer_html_af4d6390315e3c781edf8649c5ae59a33"><div class="ttname"><a href="classplayer.html#af4d6390315e3c781edf8649c5ae59a33">player::is_player</a></div><div class="ttdeci">bool is_player() const override</div><div class="ttdef"><b>Definition:</b> <a href="player_8h_source.html#l00093">player.h:93</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a39fd8a829e3dc412646663066dbdb54c"><div class="ttname"><a href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a></div><div class="ttdeci">static constexpr int SEEX</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00035">game_constants.h:35</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a4cfa35de359af17f7bc6c2a424339eb5"><div class="ttname"><a href="game__constants_8h.html#a4cfa35de359af17f7bc6c2a424339eb5">SEEY</a></div><div class="ttdeci">static constexpr int SEEY</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00036">game_constants.h:36</a></div></div>
<div class="ttc" id="agame__constants_8h_html_acf60bb2d3beb1625a9344e3291dda674"><div class="ttname"><a href="game__constants_8h.html#acf60bb2d3beb1625a9344e3291dda674">HALF_MAPSIZE_Y</a></div><div class="ttdeci">static constexpr int HALF_MAPSIZE_Y</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00042">game_constants.h:42</a></div></div>
<div class="ttc" id="agame__constants_8h_html_adf7bb33c88c44d0c1da57b5948ead4ac"><div class="ttname"><a href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a></div><div class="ttdeci">static constexpr int HALF_MAPSIZE_X</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00041">game_constants.h:41</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a3a176c0b195118f620ddab93c2ced71b"><div class="ttname"><a href="iexamine_8cpp.html#a3a176c0b195118f620ddab93c2ced71b">trait_BADKNEES</a></div><div class="ttdeci">static const trait_id trait_BADKNEES(&quot;BADKNEES&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac41827abd252cabc27c7c385291f71e4"><div class="ttname"><a href="iexamine_8cpp.html#ac41827abd252cabc27c7c385291f71e4">trait_INSECT_ARMS_OK</a></div><div class="ttdeci">static const trait_id trait_INSECT_ARMS_OK(&quot;INSECT_ARMS_OK&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_accbe02d1b542c1aeb1081f0e11e3afd5"><div class="ttname"><a href="iexamine_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">trait_ARACHNID_ARMS_OK</a></div><div class="ttdeci">static const trait_id trait_ARACHNID_ARMS_OK(&quot;ARACHNID_ARMS_OK&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_adc9b587eea6f8ad93e0bde8347dd792e"><div class="ttname"><a href="iexamine_8cpp.html#adc9b587eea6f8ad93e0bde8347dd792e">flag_CLIMB_SIMPLE</a></div><div class="ttdeci">static const std::string flag_CLIMB_SIMPLE(&quot;CLIMB_SIMPLE&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_add3801e5054573e6c7c0ef0276339fdf"><div class="ttname"><a href="iexamine_8cpp.html#add3801e5054573e6c7c0ef0276339fdf">trait_PARKOUR</a></div><div class="ttdeci">static const trait_id trait_PARKOUR(&quot;PARKOUR&quot;)</div></div>
<div class="ttc" id="anamespacesfx_html_a1f138eaa92db132e81ce591751c512cc"><div class="ttname"><a href="namespacesfx.html#a1f138eaa92db132e81ce591751c512cc">sfx::get_heard_volume</a></div><div class="ttdeci">int get_heard_volume(const tripoint &amp;source)</div><div class="ttdoc">Functions from sfx that do not use the SDL_mixer API at all.</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l01641">sounds.cpp:1641</a></div></div>
<div class="ttc" id="anamespacesfx_html_a8fa2bb887ac81392fb686cc4079b5d5a"><div class="ttname"><a href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a></div><div class="ttdeci">void play_variant_sound(const std::string &amp;id, const std::string &amp;variant, int volume, units::angle angle, double pitch_min=-1.0, double pitch_max=-1.0)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l01597">sounds.cpp:1597</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="character_8h_source.html#l00265">Character::dex_cur</a>, <a class="el" href="iexamine_8cpp.html#adc9b587eea6f8ad93e0bde8347dd792e">flag_CLIMB_SIMPLE()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="sounds_8cpp_source.html#l01641">sfx::get_heard_volume()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="game__constants_8h_source.html#l00041">HALF_MAPSIZE_X</a>, <a class="el" href="game__constants_8h_source.html#l00042">HALF_MAPSIZE_Y</a>, <a class="el" href="map_8cpp_source.html#l02374">map::has_flag()</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="character_8h_source.html#l01573">Character::in_vehicle</a>, <a class="el" href="player_8h_source.html#l00093">player::is_player()</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="sounds_8cpp_source.html#l01597">sfx::play_variant_sound()</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="game__constants_8h_source.html#l00035">SEEX</a>, <a class="el" href="game__constants_8h_source.html#l00036">SEEY</a>, <a class="el" href="character_8h_source.html#l00815">Character::setpos()</a>, <a class="el" href="iexamine_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">trait_ARACHNID_ARMS_OK</a>, <a class="el" href="iexamine_8cpp.html#a3a176c0b195118f620ddab93c2ced71b">trait_BADKNEES</a>, <a class="el" href="iexamine_8cpp.html#ac41827abd252cabc27c7c385291f71e4">trait_INSECT_ARMS_OK</a>, <a class="el" href="iexamine_8cpp.html#add3801e5054573e6c7c0ef0276339fdf">trait_PARKOUR</a>, <a class="el" href="map_8cpp_source.html#l01145">map::unboard_vehicle()</a>, <a class="el" href="character_8cpp_source.html#l08863">Character::wearing_something_on()</a>, <a class="el" href="point_8h_source.html#l00136">tripoint::x</a>, and <a class="el" href="point_8h_source.html#l00137">tripoint::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a3e84b5b22d961bae9e963560651be225" name="a3e84b5b22d961bae9e963560651be225"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e84b5b22d961bae9e963560651be225">&#9670;&nbsp;</a></span>check_power()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::check_power </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l06269">6269</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06270" name="l06270"></a><span class="lineno"> 6270</span>{</div>
<div class="line"><a id="l06271" name="l06271"></a><span class="lineno"> 6271</span>    <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> abspos( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( examp ) );</div>
<div class="line"><a id="l06272" name="l06272"></a><span class="lineno"> 6272</span>    <a class="code hl_class" href="classbattery__tile.html">battery_tile</a> *battery = <a class="code hl_function" href="namespaceactive__tiles.html#af02db941c999ac559b9f2874d4609cfd">active_tiles::furn_at&lt;battery_tile&gt;</a>( abspos );</div>
<div class="line"><a id="l06273" name="l06273"></a><span class="lineno"> 6273</span>    <span class="keywordflow">if</span>( battery != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l06274" name="l06274"></a><span class="lineno"> 6274</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This battery stores %d kJ of electric power.&quot;</span> ), battery-&gt;<a class="code hl_function" href="classbattery__tile.html#aec6a0e2de153c8e7e469b65e587439ef">get_resource</a>() );</div>
<div class="line"><a id="l06275" name="l06275"></a><span class="lineno"> 6275</span>    }</div>
<div class="line"><a id="l06276" name="l06276"></a><span class="lineno"> 6276</span>    <span class="keywordtype">int</span> amt = <a class="code hl_function" href="distribution__grid_8h.html#ae8e6a5ac44a7f17ff6b6d1d86522d942">get_distribution_grid_tracker</a>().<a class="code hl_function" href="classdistribution__grid__tracker.html#a6fce22c007b9a8b4532aabefc8321aa5">grid_at</a>( abspos ).<a class="code hl_function" href="classdistribution__grid.html#a7beaf038705d51885b0f6644391d19bc">get_resource</a>();</div>
<div class="line"><a id="l06277" name="l06277"></a><span class="lineno"> 6277</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This electric grid stores %d kJ of electric power.&quot;</span> ), amt );</div>
<div class="line"><a id="l06278" name="l06278"></a><span class="lineno"> 6278</span>}</div>
<div class="ttc" id="aclassbattery__tile_html"><div class="ttname"><a href="classbattery__tile.html">battery_tile</a></div><div class="ttdef"><b>Definition:</b> <a href="active__tile__data__def_8h_source.html#l00020">active_tile_data_def.h:21</a></div></div>
<div class="ttc" id="aclassbattery__tile_html_aec6a0e2de153c8e7e469b65e587439ef"><div class="ttname"><a href="classbattery__tile.html#aec6a0e2de153c8e7e469b65e587439ef">battery_tile::get_resource</a></div><div class="ttdeci">int get_resource() const</div><div class="ttdef"><b>Definition:</b> <a href="active__tile__data_8cpp_source.html#l00192">active_tile_data.cpp:192</a></div></div>
<div class="ttc" id="aclassdistribution__grid__tracker_html_a6fce22c007b9a8b4532aabefc8321aa5"><div class="ttname"><a href="classdistribution__grid__tracker.html#a6fce22c007b9a8b4532aabefc8321aa5">distribution_grid_tracker::grid_at</a></div><div class="ttdeci">distribution_grid &amp; grid_at(const tripoint_abs_ms &amp;p)</div><div class="ttdoc">Gets grid at given global map square coordinate.</div><div class="ttdef"><b>Definition:</b> <a href="distribution__grid_8cpp_source.html#l00263">distribution_grid.cpp:263</a></div></div>
<div class="ttc" id="aclassdistribution__grid_html_a7beaf038705d51885b0f6644391d19bc"><div class="ttname"><a href="classdistribution__grid.html#a7beaf038705d51885b0f6644391d19bc">distribution_grid::get_resource</a></div><div class="ttdeci">int get_resource(bool recurse=true) const</div><div class="ttdef"><b>Definition:</b> <a href="distribution__grid_8cpp_source.html#l00121">distribution_grid.cpp:121</a></div></div>
<div class="ttc" id="adistribution__grid_8h_html_ae8e6a5ac44a7f17ff6b6d1d86522d942"><div class="ttname"><a href="distribution__grid_8h.html#ae8e6a5ac44a7f17ff6b6d1d86522d942">get_distribution_grid_tracker</a></div><div class="ttdeci">distribution_grid_tracker &amp; get_distribution_grid_tracker()</div><div class="ttdoc">Returns distribution grid tracker that is a part of the global game *g.</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l12091">game.cpp:12091</a></div></div>
<div class="ttc" id="anamespaceactive__tiles_html_af02db941c999ac559b9f2874d4609cfd"><div class="ttname"><a href="namespaceactive__tiles.html#af02db941c999ac559b9f2874d4609cfd">active_tiles::furn_at&lt; battery_tile &gt;</a></div><div class="ttdeci">template battery_tile * furn_at&lt; battery_tile &gt;(const tripoint_abs_ms &amp;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="namespaceactive__tiles.html#af02db941c999ac559b9f2874d4609cfd">active_tiles::furn_at&lt; battery_tile &gt;()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="game_8cpp_source.html#l12091">get_distribution_grid_tracker()</a>, <a class="el" href="active__tile__data_8cpp_source.html#l00192">battery_tile::get_resource()</a>, <a class="el" href="distribution__grid_8cpp_source.html#l00121">distribution_grid::get_resource()</a>, <a class="el" href="distribution__grid_8cpp_source.html#l00263">distribution_grid_tracker::grid_at()</a>, and <a class="el" href="enums_8h_source.html#l00265">m_info</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a4e699eeec282f7f36864ca548f573d38" name="a4e699eeec282f7f36864ca548f573d38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e699eeec282f7f36864ca548f573d38">&#9670;&nbsp;</a></span>choose_fertilizer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> iexamine::choose_fertilizer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ask_player</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02522">2522</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span>{</div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span>    std::vector&lt;const item *&gt; f_inv = p.<a class="code hl_function" href="classCharacter.html#a77dab73efee10d517925c57310ec1f95">all_items_with_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a6667890439d15281d61810dfde0dc2fa">flag_FERTILIZER</a> );</div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span>    <span class="keywordflow">if</span>( f_inv.empty() ) {</div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You have no fertilizer for the %s.&quot;</span> ), pname );</div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>        <span class="keywordflow">return</span> <a class="code hl_typedef" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>();</div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>    }</div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span> </div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>    std::vector&lt;itype_id&gt; f_types;</div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span>    std::vector&lt;std::string&gt; f_names;</div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;f : f_inv ) {</div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacedetail.html#ad06b74f7502b63cbab323bba1ca3f72b">std::find</a>( f_types.begin(), f_types.end(), f-&gt;typeId() ) == f_types.end() ) {</div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span>            f_types.push_back( f-&gt;typeId() );</div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>            f_names.push_back( f-&gt;tname() );</div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span>        }</div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span>    }</div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span> </div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>    <span class="keywordflow">if</span>( ask_player &amp;&amp; !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Fertilize the %s&quot;</span> ), pname ) ) {</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span>        <span class="keywordflow">return</span> <a class="code hl_typedef" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>();</div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>    }</div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span> </div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span>    <span class="comment">// Choose fertilizer from list</span></div>
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span>    <span class="keywordtype">int</span> f_index = 0;</div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>    <span class="keywordflow">if</span>( f_types.size() &gt; 1 ) {</div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span>        f_index = <a class="code hl_class" href="classuilist.html">uilist</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use which fertilizer?&quot;</span> ), f_names );</div>
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"> 2547</span>    }</div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span>    <span class="keywordflow">if</span>( f_index &lt; 0 ) {</div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span>        <span class="keywordflow">return</span> <a class="code hl_typedef" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>();</div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>    }</div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span> </div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span>    <span class="keywordflow">return</span> f_types[f_index];</div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span> </div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span>}</div>
<div class="ttc" id="aclassCharacter_html_a77dab73efee10d517925c57310ec1f95"><div class="ttname"><a href="classCharacter.html#a77dab73efee10d517925c57310ec1f95">Character::all_items_with_flag</a></div><div class="ttdeci">std::vector&lt; const item * &gt; all_items_with_flag(const std::string &amp;flag) const</div><div class="ttdoc">All items that have the given flag (item::has_flag).</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09598">character.cpp:9598</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a6667890439d15281d61810dfde0dc2fa"><div class="ttname"><a href="iexamine_8cpp.html#a6667890439d15281d61810dfde0dc2fa">flag_FERTILIZER</a></div><div class="ttdeci">static const std::string flag_FERTILIZER(&quot;FERTILIZER&quot;)</div></div>
<div class="ttc" id="anamespacedetail_html_ad06b74f7502b63cbab323bba1ca3f72b"><div class="ttname"><a href="namespacedetail.html#ad06b74f7502b63cbab323bba1ca3f72b">detail::find</a></div><div class="ttdeci">FMT_CONSTEXPR bool find(Ptr first, Ptr last, T value, Ptr &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format_8h_source.html#l03355">fmtlib_format.h:3355</a></div></div>
<div class="ttc" id="atype__id_8h_html_ac2f82f863d4e9e8f267a77a73910ebbf"><div class="ttname"><a href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a></div><div class="ttdeci">string_id&lt; itype &gt; itype_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00080">type_id.h:80</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l09598">Character::all_items_with_flag()</a>, <a class="el" href="fmtlib__format_8h_source.html#l03355">detail::find()</a>, <a class="el" href="iexamine_8cpp.html#a6667890439d15281d61810dfde0dc2fa">flag_FERTILIZER()</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, and <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02555">aggie_plant()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l04527">activity_handlers::fertilize_plot_do_turn()</a>.</p>

</div>
</div>
<a id="a8f334def5e7dde048b2cfa85a741ce9b" name="a8f334def5e7dde048b2cfa85a741ce9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f334def5e7dde048b2cfa85a741ce9b">&#9670;&nbsp;</a></span>clean_water_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::clean_water_source </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03881">3881</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03882" name="l03882"></a><span class="lineno"> 3882</span>{</div>
<div class="line"><a id="l03883" name="l03883"></a><span class="lineno"> 3883</span>    <a class="code hl_class" href="classitem.html">item</a> water = <a class="code hl_class" href="classitem.html">item</a>( <span class="stringliteral">&quot;water_clean&quot;</span>, <a class="code hl_variable" href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a>, <a class="code hl_variable" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">item::INFINITE_CHARGES</a> );</div>
<div class="line"><a id="l03884" name="l03884"></a><span class="lineno"> 3884</span>    <a class="code hl_function" href="namespaceliquid__handler.html#a30393ea5ae789bd91dc85e09f7c504e2">liquid_handler::handle_liquid</a>( water, <span class="keyword">nullptr</span>, 0, &amp;examp );</div>
<div class="line"><a id="l03885" name="l03885"></a><span class="lineno"> 3885</span>}</div>
<div class="ttc" id="aclassitem_html_a109dfb20d6dac296bab6c44db0f8ab1a"><div class="ttname"><a href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">item::INFINITE_CHARGES</a></div><div class="ttdeci">static const int INFINITE_CHARGES</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02158">item.h:2158</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ab01178b933b4f1c62bd75b2edfdbaf79"><div class="ttname"><a href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a></div><div class="ttdeci">const time_point &amp; start_of_cataclysm</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00033">calendar.cpp:33</a></div></div>
<div class="ttc" id="anamespaceliquid__handler_html_a30393ea5ae789bd91dc85e09f7c504e2"><div class="ttname"><a href="namespaceliquid__handler.html#a30393ea5ae789bd91dc85e09f7c504e2">liquid_handler::handle_liquid</a></div><div class="ttdeci">bool handle_liquid(item &amp;liquid, item *const source, const int radius, const tripoint *const source_pos, const vehicle *const source_veh, const int part_num, const monster *const source_mon)</div><div class="ttdoc">This may start a player activity if either source_pos or source_veh is not null.</div><div class="ttdef"><b>Definition:</b> <a href="handle__liquid_8cpp_source.html#l00400">handle_liquid.cpp:400</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="handle__liquid_8cpp_source.html#l00400">liquid_handler::handle_liquid()</a>, <a class="el" href="item_8h_source.html#l02158">item::INFINITE_CHARGES</a>, and <a class="el" href="calendar_8cpp_source.html#l00033">calendar::start_of_cataclysm</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a5705f33b9a0cf88d7bb6c4f3c9f648b6" name="a5705f33b9a0cf88d7bb6c4f3c9f648b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5705f33b9a0cf88d7bb6c4f3c9f648b6">&#9670;&nbsp;</a></span>controls_gate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::controls_gate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open or close gate. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00970">970</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>{</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use the %s?&quot;</span> ), <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().tername( examp ) ) ) {</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    }</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;toggle_gate( examp );</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, and <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="gates_8cpp_source.html#l00103">anonymous_namespace{gates.cpp}::gate_data::check()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a21dd96f64237acd62065510e4417c9a4" name="a21dd96f64237acd62065510e4417c9a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21dd96f64237acd62065510e4417c9a4">&#9670;&nbsp;</a></span>curtains()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::curtains </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04141">4141</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04142" name="l04142"></a><span class="lineno"> 4142</span>{</div>
<div class="line"><a id="l04143" name="l04143"></a><span class="lineno"> 4143</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l04144" name="l04144"></a><span class="lineno"> 4144</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> closed_window_with_curtains = here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a28545c378424dd8dce926da887af1ea7">flag_BARRICADABLE_WINDOW_CURTAINS</a>, examp );</div>
<div class="line"><a id="l04145" name="l04145"></a><span class="lineno"> 4145</span>    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">is_outside</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) &amp;&amp; ( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#adb0e298ce058ece669d5f78a82c20b7a">flag_WALL</a>, examp ) ||</div>
<div class="line"><a id="l04146" name="l04146"></a><span class="lineno"> 4146</span>                                        closed_window_with_curtains ) ) {</div>
<div class="line"><a id="l04147" name="l04147"></a><span class="lineno"> 4147</span>        <a class="code hl_function" href="namespaceiexamine.html#ade298007b9644bd1dd31a165c84c273f">locked_object</a>( p, examp );</div>
<div class="line"><a id="l04148" name="l04148"></a><span class="lineno"> 4148</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04149" name="l04149"></a><span class="lineno"> 4149</span>    }</div>
<div class="line"><a id="l04150" name="l04150"></a><span class="lineno"> 4150</span> </div>
<div class="line"><a id="l04151" name="l04151"></a><span class="lineno"> 4151</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">ter_id</a> ter = here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp );</div>
<div class="line"><a id="l04152" name="l04152"></a><span class="lineno"> 4152</span> </div>
<div class="line"><a id="l04153" name="l04153"></a><span class="lineno"> 4153</span>    <span class="comment">// Peek through the curtains, or tear them down.</span></div>
<div class="line"><a id="l04154" name="l04154"></a><span class="lineno"> 4154</span>    <a class="code hl_class" href="classuilist.html">uilist</a> window_menu;</div>
<div class="line"><a id="l04155" name="l04155"></a><span class="lineno"> 4155</span>    window_menu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Do what with the curtains?&quot;</span> );</div>
<div class="line"><a id="l04156" name="l04156"></a><span class="lineno"> 4156</span>    window_menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 0, ( !ter.<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_variable" href="structter__t.html#abec3ff6b6de8dcffdd615d4c1a908d99">close</a> &amp;&amp;</div>
<div class="line"><a id="l04157" name="l04157"></a><span class="lineno"> 4157</span>                               closed_window_with_curtains ), <span class="charliteral">&#39;p&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Peek through the closed curtains.&quot;</span> ) );</div>
<div class="line"><a id="l04158" name="l04158"></a><span class="lineno"> 4158</span>    window_menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 1, <span class="keyword">true</span>, <span class="charliteral">&#39;t&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Tear down the curtains.&quot;</span> ) );</div>
<div class="line"><a id="l04159" name="l04159"></a><span class="lineno"> 4159</span>    window_menu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l04160" name="l04160"></a><span class="lineno"> 4160</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> choice = window_menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l04161" name="l04161"></a><span class="lineno"> 4161</span>    <span class="keywordflow">if</span>( choice == 0 ) {</div>
<div class="line"><a id="l04162" name="l04162"></a><span class="lineno"> 4162</span>        <span class="comment">// Peek</span></div>
<div class="line"><a id="l04163" name="l04163"></a><span class="lineno"> 4163</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;peek( examp );</div>
<div class="line"><a id="l04164" name="l04164"></a><span class="lineno"> 4164</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You carefully peek through the curtains.&quot;</span> ) );</div>
<div class="line"><a id="l04165" name="l04165"></a><span class="lineno"> 4165</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( choice == 1 ) {</div>
<div class="line"><a id="l04166" name="l04166"></a><span class="lineno"> 4166</span>        <span class="comment">// Mr. Gorbachev, tear down those curtains!</span></div>
<div class="line"><a id="l04167" name="l04167"></a><span class="lineno"> 4167</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp )-&gt;<a class="code hl_function" href="structmap__data__common__t.html#a0f9c7a6620be695133ab7675958143ad">has_curtains</a>() ) {</div>
<div class="line"><a id="l04168" name="l04168"></a><span class="lineno"> 4168</span>            here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp )-&gt;<a class="code hl_variable" href="structmap__data__common__t.html#a201aa05623f9484cdfe27cadfc5962a9">curtain_transform</a> );</div>
<div class="line"><a id="l04169" name="l04169"></a><span class="lineno"> 4169</span>        }</div>
<div class="line"><a id="l04170" name="l04170"></a><span class="lineno"> 4170</span> </div>
<div class="line"><a id="l04171" name="l04171"></a><span class="lineno"> 4171</span>        here.<a class="code hl_function" href="classmap.html#acfe43259087397daac52876165a3120c">spawn_item</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), <a class="code hl_variable" href="iexamine_8cpp.html#a9579eda537b28a33a9d7027f67524ee3">itype_nail</a>, 1, 4, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l04172" name="l04172"></a><span class="lineno"> 4172</span>        here.<a class="code hl_function" href="classmap.html#acfe43259087397daac52876165a3120c">spawn_item</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), <a class="code hl_variable" href="iexamine_8cpp.html#a8177cdbd5018d9944687a9ec28eafcc1">itype_sheet</a>, 2, 0, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l04173" name="l04173"></a><span class="lineno"> 4173</span>        here.<a class="code hl_function" href="classmap.html#acfe43259087397daac52876165a3120c">spawn_item</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), <a class="code hl_variable" href="iexamine_8cpp.html#a507edb748d0809febec3f0ccb457c760">itype_stick</a>, 1, 0, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l04174" name="l04174"></a><span class="lineno"> 4174</span>        here.<a class="code hl_function" href="classmap.html#acfe43259087397daac52876165a3120c">spawn_item</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), <a class="code hl_variable" href="iexamine_8cpp.html#a02e82e402a863e0dc999947e5d4ca47c">itype_string_36</a>, 1, 0, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l04175" name="l04175"></a><span class="lineno"> 4175</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 10_seconds );</div>
<div class="line"><a id="l04176" name="l04176"></a><span class="lineno"> 4176</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You tear the curtains and curtain rod off the windowframe.&quot;</span> ) );</div>
<div class="line"><a id="l04177" name="l04177"></a><span class="lineno"> 4177</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04178" name="l04178"></a><span class="lineno"> 4178</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a id="l04179" name="l04179"></a><span class="lineno"> 4179</span>    }</div>
<div class="line"><a id="l04180" name="l04180"></a><span class="lineno"> 4180</span>}</div>
<div class="ttc" id="aclassint__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">int_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00026">ammo_effect.cpp:26</a></div></div>
<div class="ttc" id="aclassmap_html_a3bc75c8b706a54c1575b4460b2f363b1"><div class="ttname"><a href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">map::is_outside</a></div><div class="ttdeci">bool is_outside(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02625">map.cpp:2625</a></div></div>
<div class="ttc" id="aclassmap_html_acfe43259087397daac52876165a3120c"><div class="ttname"><a href="classmap.html#acfe43259087397daac52876165a3120c">map::spawn_item</a></div><div class="ttdeci">void spawn_item(const tripoint &amp;p, const itype_id &amp;type_id, unsigned quantity=1, int charges=0, const time_point &amp;birthday=calendar::start_of_cataclysm, int damlevel=0)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04313">map.cpp:4313</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a02e82e402a863e0dc999947e5d4ca47c"><div class="ttname"><a href="iexamine_8cpp.html#a02e82e402a863e0dc999947e5d4ca47c">itype_string_36</a></div><div class="ttdeci">static const itype_id itype_string_36(&quot;string_36&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a28545c378424dd8dce926da887af1ea7"><div class="ttname"><a href="iexamine_8cpp.html#a28545c378424dd8dce926da887af1ea7">flag_BARRICADABLE_WINDOW_CURTAINS</a></div><div class="ttdeci">static const std::string flag_BARRICADABLE_WINDOW_CURTAINS(&quot;BARRICADABLE_WINDOW_CURTAINS&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a507edb748d0809febec3f0ccb457c760"><div class="ttname"><a href="iexamine_8cpp.html#a507edb748d0809febec3f0ccb457c760">itype_stick</a></div><div class="ttdeci">static const itype_id itype_stick(&quot;stick&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a8177cdbd5018d9944687a9ec28eafcc1"><div class="ttname"><a href="iexamine_8cpp.html#a8177cdbd5018d9944687a9ec28eafcc1">itype_sheet</a></div><div class="ttdeci">static const itype_id itype_sheet(&quot;sheet&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a9579eda537b28a33a9d7027f67524ee3"><div class="ttname"><a href="iexamine_8cpp.html#a9579eda537b28a33a9d7027f67524ee3">itype_nail</a></div><div class="ttdeci">static const itype_id itype_nail(&quot;nail&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_adb0e298ce058ece669d5f78a82c20b7a"><div class="ttname"><a href="iexamine_8cpp.html#adb0e298ce058ece669d5f78a82c20b7a">flag_WALL</a></div><div class="ttdeci">static const std::string flag_WALL(&quot;WALL&quot;)</div></div>
<div class="ttc" id="anamespaceiexamine_html_ade298007b9644bd1dd31a165c84c273f"><div class="ttname"><a href="namespaceiexamine.html#ade298007b9644bd1dd31a165c84c273f">iexamine::locked_object</a></div><div class="ttdeci">void locked_object(player &amp;p, const tripoint &amp;examp)</div><div class="ttdoc">Checks whether PC has a crowbar then calls iuse.crowbar.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01546">iexamine.cpp:1546</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_a0f9c7a6620be695133ab7675958143ad"><div class="ttname"><a href="structmap__data__common__t.html#a0f9c7a6620be695133ab7675958143ad">map_data_common_t::has_curtains</a></div><div class="ttdeci">bool has_curtains() const</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00366">mapdata.h:366</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_a201aa05623f9484cdfe27cadfc5962a9"><div class="ttname"><a href="structmap__data__common__t.html#a201aa05623f9484cdfe27cadfc5962a9">map_data_common_t::curtain_transform</a></div><div class="ttdeci">ter_str_id curtain_transform</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00364">mapdata.h:364</a></div></div>
<div class="ttc" id="astructter__t_html_abec3ff6b6de8dcffdd615d4c1a908d99"><div class="ttname"><a href="structter__t.html#abec3ff6b6de8dcffdd615d4c1a908d99">ter_t::close</a></div><div class="ttdeci">ter_str_id close</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00467">mapdata.h:467</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="mapdata_8h_source.html#l00467">ter_t::close</a>, <a class="el" href="mapdata_8h_source.html#l00364">map_data_common_t::curtain_transform</a>, <a class="el" href="iexamine_8cpp.html#a28545c378424dd8dce926da887af1ea7">flag_BARRICADABLE_WINDOW_CURTAINS()</a>, <a class="el" href="iexamine_8cpp.html#adb0e298ce058ece669d5f78a82c20b7a">flag_WALL()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="mapdata_8h_source.html#l00366">map_data_common_t::has_curtains()</a>, <a class="el" href="map_8cpp_source.html#l02374">map::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l02625">map::is_outside()</a>, <a class="el" href="iexamine_8cpp.html#a9579eda537b28a33a9d7027f67524ee3">itype_nail</a>, <a class="el" href="iexamine_8cpp.html#a8177cdbd5018d9944687a9ec28eafcc1">itype_sheet</a>, <a class="el" href="iexamine_8cpp.html#a507edb748d0809febec3f0ccb457c760">itype_stick</a>, <a class="el" href="iexamine_8cpp.html#a02e82e402a863e0dc999947e5d4ca47c">itype_string_36</a>, <a class="el" href="iexamine_8cpp_source.html#l01546">locked_object()</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="map_8cpp_source.html#l04313">map::spawn_item()</a>, <a class="el" href="map_8cpp_source.html#l01562">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="vehicle__display_8cpp_source.html#l00090">vehicle::part_color()</a>.</p>

</div>
</div>
<a id="aa62be34f736ae472e1f9735122dd4e4c" name="aa62be34f736ae472e1f9735122dd4e4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa62be34f736ae472e1f9735122dd4e4c">&#9670;&nbsp;</a></span>cvdmachine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::cvdmachine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pick an appropriate item and apply diamond coating if possible. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00261">261</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>{</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    <span class="comment">// Select an item to which it is possible to apply a diamond coating</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    <span class="keyword">auto</span> loc = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;inv_map_splice( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; e ) {</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        <span class="keywordflow">return</span> ( e.<a class="code hl_function" href="classitem.html#afc63d995cea3dad634b29fc8b9932ea9">is_melee</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8ff698c0509e78ff65c7c7ec899b4f51">DT_CUT</a> ) || e.<a class="code hl_function" href="classitem.html#afc63d995cea3dad634b29fc8b9932ea9">is_melee</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a> ) ) &amp;&amp; e.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_class" href="classstring__id.html">material_id</a>( <span class="stringliteral">&quot;steel&quot;</span> ) ) &amp;&amp;</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>               !e.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a6e3abd26810b9daacc0533ce433b2171">flag_DIAMOND</a> ) &amp;&amp; !e.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#acaa6875764b9cba9b9415892c7eb258d">flag_NO_CVD</a> );</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    }, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Apply diamond coating&quot;</span> ), 1, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You don&#39;t have a suitable item to coat with diamond&quot;</span> ) );</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    }</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span> </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <span class="comment">// Require materials proportional to selected item volume</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <span class="keyword">auto</span> qty = loc-&gt;volume() / <a class="code hl_variable" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a>;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    qty = std::max( 1, qty );</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    <span class="keyword">auto</span> reqs = *<a class="code hl_typedef" href="type__id_8h.html#afb36dc6d5925e5112e70d60a171ebeb1">requirement_id</a>( <span class="stringliteral">&quot;cvd_diamond&quot;</span> ) * qty;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    <span class="keywordflow">if</span>( !reqs.can_make_with_inventory( p.<a class="code hl_function" href="classCharacter.html#abd358c7a7757575b70b1613dbcce40a7">crafting_inventory</a>(), <a class="code hl_function" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> ) ) {</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <span class="stringliteral">&quot;%s&quot;</span>, reqs.list_missing() );</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    }</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span> </div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    <span class="comment">// Consume materials</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : reqs.get_components() ) {</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        p.<a class="code hl_function" href="classplayer.html#ad1f5e6d21b83313ab148302140083b99">consume_items</a>( e, 1, <a class="code hl_function" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    }</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : reqs.get_tools() ) {</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>        p.<a class="code hl_function" href="classplayer.html#aafa6cc2db2568af687ab21f09f8e4c2e">consume_tools</a>( e );</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    }</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    p.<a class="code hl_function" href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">invalidate_crafting_inventory</a>();</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <span class="comment">// Apply flag to item</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    loc-&gt;set_flag( <span class="stringliteral">&quot;DIAMOND&quot;</span> );</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You apply a diamond coating to your %s&quot;</span> ), loc-&gt;type_name() );</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_turns&lt;int&gt;( 10_seconds ) );</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>}</div>
<div class="ttc" id="aclassitem_html_a4326944ae95f4d265c8ca1c76ed89a03"><div class="ttname"><a href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">item::made_of</a></div><div class="ttdeci">const std::vector&lt; material_id &gt; &amp; made_of() const</div><div class="ttdoc">The ids of all the materials this is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06438">item.cpp:6438</a></div></div>
<div class="ttc" id="aclassitem_html_afc63d995cea3dad634b29fc8b9932ea9"><div class="ttname"><a href="classitem.html#afc63d995cea3dad634b29fc8b9932ea9">item::is_melee</a></div><div class="ttdeci">bool is_melee(damage_type dt) const</div><div class="ttdoc">Is this item an effective melee weapon for the given damage type?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06702">item.cpp:6702</a></div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a></div><div class="ttdeci">@ DT_STAB</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00027">damage.h:27</a></div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aa8ff698c0509e78ff65c7c7ec899b4f51"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8ff698c0509e78ff65c7c7ec899b4f51">DT_CUT</a></div><div class="ttdeci">@ DT_CUT</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00025">damage.h:25</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a6e3abd26810b9daacc0533ce433b2171"><div class="ttname"><a href="iexamine_8cpp.html#a6e3abd26810b9daacc0533ce433b2171">flag_DIAMOND</a></div><div class="ttdeci">static const std::string flag_DIAMOND(&quot;DIAMOND&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_acaa6875764b9cba9b9415892c7eb258d"><div class="ttname"><a href="iexamine_8cpp.html#acaa6875764b9cba9b9415892c7eb258d">flag_NO_CVD</a></div><div class="ttdeci">static const std::string flag_NO_CVD(&quot;NO_CVD&quot;)</div></div>
<div class="ttc" id="anamespaceunits_html_a58e7d31fbaa28a1dd45fb598f8d1fba9"><div class="ttname"><a href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a></div><div class="ttdeci">static constexpr volume legacy_volume_factor</div><div class="ttdef"><b>Definition:</b> <a href="units__volume_8h_source.html#l00050">units_volume.h:50</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="crafting_8cpp_source.html#l01513">player::consume_items()</a>, <a class="el" href="crafting_8cpp_source.html#l01845">player::consume_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l00556">Character::crafting_inventory()</a>, <a class="el" href="damage_8h_source.html#l00025">DT_CUT</a>, <a class="el" href="damage_8h_source.html#l00027">DT_STAB</a>, <a class="el" href="iexamine_8cpp.html#a6e3abd26810b9daacc0533ce433b2171">flag_DIAMOND()</a>, <a class="el" href="iexamine_8cpp.html#acaa6875764b9cba9b9415892c7eb258d">flag_NO_CVD()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="item_8cpp_source.html#l05328">item::has_flag()</a>, <a class="el" href="crafting_8cpp_source.html#l00598">Character::invalidate_crafting_inventory()</a>, <a class="el" href="item_8h_source.html#l02265">is_crafting_component()</a>, <a class="el" href="item_8cpp_source.html#l06702">item::is_melee()</a>, <a class="el" href="units__volume_8h_source.html#l00050">units::legacy_volume_factor</a>, <a class="el" href="enums_8h_source.html#l00260">m_good</a>, <a class="el" href="item_8cpp_source.html#l06438">item::made_of()</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, and <a class="el" href="output_8cpp_source.html#l00764">popup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ac5019d45288b6ccbee9d1b57c1ebbb33" name="ac5019d45288b6ccbee9d1b57c1ebbb33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5019d45288b6ccbee9d1b57c1ebbb33">&#9670;&nbsp;</a></span>deployed_furniture()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::deployed_furniture </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01240">1240</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>{</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Take down the %s?&quot;</span> ), here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( pos ).<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_function" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() ) ) {</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>    }</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>    p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You take down the %s.&quot;</span> ),</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>                         here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( pos ).<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_function" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() );</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>    <span class="keyword">const</span> <span class="keyword">auto</span> furn_item = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( pos ).<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_variable" href="structfurn__t.html#a57b74b8dc09a89bb25ec33315c22178e">deployed_item</a>;</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>    here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( pos, <a class="code hl_class" href="classitem.html">item</a>( furn_item, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) );</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( pos, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>}</div>
<div class="ttc" id="aclassmap_html_a5579e13088b4ccd9c5a75458919d528a"><div class="ttname"><a href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">map::add_item_or_charges</a></div><div class="ttdeci">item &amp; add_item_or_charges(const tripoint &amp;pos, item obj, bool overflow=true)</div><div class="ttdoc">Adds an item to map tile or stacks charges.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04354">map.cpp:4354</a></div></div>
<div class="ttc" id="astructfurn__t_html_a57b74b8dc09a89bb25ec33315c22178e"><div class="ttname"><a href="structfurn__t.html#a57b74b8dc09a89bb25ec33315c22178e">furn_t::deployed_item</a></div><div class="ttdeci">itype_id deployed_item</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00513">mapdata.h:513</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_a1e749bfdff8adff5829dc013dcac0cc1"><div class="ttname"><a href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">map_data_common_t::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00513">mapdata.cpp:513</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="mapdata_8h_source.html#l00513">furn_t::deployed_item</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="mapdata_8cpp_source.html#l00513">map_data_common_t::name()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapdata_8cpp_source.html#l01609">finalize_furn()</a>, <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="iexamine_8cpp_source.html#l05996">smoker_options()</a>.</p>

</div>
</div>
<a id="a222f29521bdeef4881aee8a31983cbb8" name="a222f29521bdeef4881aee8a31983cbb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a222f29521bdeef4881aee8a31983cbb8">&#9670;&nbsp;</a></span>dimensional_portal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::dimensional_portal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l06229">6229</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06230" name="l06230"></a><span class="lineno"> 6230</span>{</div>
<div class="line"><a id="l06231" name="l06231"></a><span class="lineno"> 6231</span>    <a class="code hl_class" href="classuilist.html">uilist</a> menu;</div>
<div class="line"><a id="l06232" name="l06232"></a><span class="lineno"> 6232</span>    menu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;What to do with the portal:&quot;</span> );</div>
<div class="line"><a id="l06233" name="l06233"></a><span class="lineno"> 6233</span>    menu.<a class="code hl_variable" href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">desc_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06234" name="l06234"></a><span class="lineno"> 6234</span> </div>
<div class="line"><a id="l06235" name="l06235"></a><span class="lineno"> 6235</span>    std::vector&lt;const item *&gt; nukes = p.<a class="code hl_function" href="classCharacter.html#a77dab73efee10d517925c57310ec1f95">all_items_with_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a7d35bca8445952e92b60e326f8a6a99c">flag_CLOSES_PORTAL</a> );</div>
<div class="line"><a id="l06236" name="l06236"></a><span class="lineno"> 6236</span>    menu.<a class="code hl_function" href="classuilist.html#ae186aa01767463de50315306c6c51479">addentry_desc</a>( 0, !nukes.empty(), <span class="charliteral">&#39;e&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Close from here&quot;</span> ),</div>
<div class="line"><a id="l06237" name="l06237"></a><span class="lineno"> 6237</span>                        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Requires a nuclear explosive&quot;</span> ) );</div>
<div class="line"><a id="l06238" name="l06238"></a><span class="lineno"> 6238</span>    menu.<a class="code hl_function" href="classuilist.html#ae186aa01767463de50315306c6c51479">addentry_desc</a>( 1, <span class="keyword">true</span>, <span class="charliteral">&#39;Q&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Sacrifice yourself&quot;</span> ),</div>
<div class="line"><a id="l06239" name="l06239"></a><span class="lineno"> 6239</span>                        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This will kill you, but close the portal&quot;</span> ) );</div>
<div class="line"><a id="l06240" name="l06240"></a><span class="lineno"> 6240</span>    menu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l06241" name="l06241"></a><span class="lineno"> 6241</span> </div>
<div class="line"><a id="l06242" name="l06242"></a><span class="lineno"> 6242</span>    <span class="keywordflow">switch</span>( menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a id="l06243" name="l06243"></a><span class="lineno"> 6243</span>        <span class="keywordflow">case</span> 0: {</div>
<div class="line"><a id="l06244" name="l06244"></a><span class="lineno"> 6244</span>            <a class="code hl_class" href="classitem__location.html">item_location</a> the_nuke = <a class="code hl_function" href="namespacegame__menus_1_1inv.html#a9eafc067094abf546e276b125d2fc788">game_menus::inv::titled_filter_menu</a>( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l06245" name="l06245"></a><span class="lineno"> 6245</span>                <span class="keywordflow">return</span> it.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a7d35bca8445952e92b60e326f8a6a99c">flag_CLOSES_PORTAL</a> );</div>
<div class="line"><a id="l06246" name="l06246"></a><span class="lineno"> 6246</span>            }, <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classavatar.html">avatar</a> &amp;<span class="keyword">&gt;</span>( p ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;What to use to close the portal?&quot;</span> ) );</div>
<div class="line"><a id="l06247" name="l06247"></a><span class="lineno"> 6247</span>            <span class="keywordflow">if</span>( !the_nuke ) {</div>
<div class="line"><a id="l06248" name="l06248"></a><span class="lineno"> 6248</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a id="l06249" name="l06249"></a><span class="lineno"> 6249</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06250" name="l06250"></a><span class="lineno"> 6250</span>            }</div>
<div class="line"><a id="l06251" name="l06251"></a><span class="lineno"> 6251</span> </div>
<div class="line"><a id="l06252" name="l06252"></a><span class="lineno"> 6252</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You throw the armed %s into the portal!&quot;</span> ), the_nuke-&gt;<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l06253" name="l06253"></a><span class="lineno"> 6253</span>            the_nuke.<a class="code hl_function" href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">remove_item</a>();</div>
<div class="line"><a id="l06254" name="l06254"></a><span class="lineno"> 6254</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.translate_radius( <a class="code hl_variable" href="iexamine_8cpp.html#adacba772aef4ff2199ab4f509bae44b8">t_dimensional_portal</a>, <a class="code hl_variable" href="mapdata_8cpp.html#ab8e227f2aa03a641d69d86a746ab77f2">t_thconc_floor</a>, 5, examp, <span class="keyword">true</span> );</div>
<div class="line"><a id="l06255" name="l06255"></a><span class="lineno"> 6255</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;win();</div>
<div class="line"><a id="l06256" name="l06256"></a><span class="lineno"> 6256</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06257" name="l06257"></a><span class="lineno"> 6257</span>        }</div>
<div class="line"><a id="l06258" name="l06258"></a><span class="lineno"> 6258</span> </div>
<div class="line"><a id="l06259" name="l06259"></a><span class="lineno"> 6259</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l06260" name="l06260"></a><span class="lineno"> 6260</span>            p.<a class="code hl_function" href="classCreature.html#a6ebcf1d6c0af9f4223695752a5ae3632">set_all_parts_hp_cur</a>( 0 );</div>
<div class="line"><a id="l06261" name="l06261"></a><span class="lineno"> 6261</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.translate_radius( <a class="code hl_variable" href="iexamine_8cpp.html#adacba772aef4ff2199ab4f509bae44b8">t_dimensional_portal</a>, <a class="code hl_variable" href="mapdata_8cpp.html#ab8e227f2aa03a641d69d86a746ab77f2">t_thconc_floor</a>, 5, examp, <span class="keyword">true</span> );</div>
<div class="line"><a id="l06262" name="l06262"></a><span class="lineno"> 6262</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;win();</div>
<div class="line"><a id="l06263" name="l06263"></a><span class="lineno"> 6263</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06264" name="l06264"></a><span class="lineno"> 6264</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l06265" name="l06265"></a><span class="lineno"> 6265</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a id="l06266" name="l06266"></a><span class="lineno"> 6266</span>    }</div>
<div class="line"><a id="l06267" name="l06267"></a><span class="lineno"> 6267</span>}</div>
<div class="ttc" id="aclassCreature_html_a6ebcf1d6c0af9f4223695752a5ae3632"><div class="ttname"><a href="classCreature.html#a6ebcf1d6c0af9f4223695752a5ae3632">Creature::set_all_parts_hp_cur</a></div><div class="ttdeci">void set_all_parts_hp_cur(int set)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01651">creature.cpp:1651</a></div></div>
<div class="ttc" id="aclassitem__location_html_a41e90133672d99aa1cecde670e37c23c"><div class="ttname"><a href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">item_location::remove_item</a></div><div class="ttdeci">void remove_item()</div><div class="ttdoc">Removes the selected item from the game.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l00758">item_location.cpp:758</a></div></div>
<div class="ttc" id="aclassitem_html_a7e78e26dcf9b357cda769c3ca2938eda"><div class="ttname"><a href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, bool with_prefix=true, unsigned int truncate=0) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04574">item.cpp:4574</a></div></div>
<div class="ttc" id="aclassuilist_html_a1a7ee6e719a4f1bba45fc94e29a19166"><div class="ttname"><a href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">uilist::desc_enabled</a></div><div class="ttdeci">bool desc_enabled</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00352">ui.h:352</a></div></div>
<div class="ttc" id="aclassuilist_html_ae186aa01767463de50315306c6c51479"><div class="ttname"><a href="classuilist.html#ae186aa01767463de50315306c6c51479">uilist::addentry_desc</a></div><div class="ttdeci">void addentry_desc(const std::string &amp;str, const std::string &amp;desc)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00952">ui.cpp:952</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a7d35bca8445952e92b60e326f8a6a99c"><div class="ttname"><a href="iexamine_8cpp.html#a7d35bca8445952e92b60e326f8a6a99c">flag_CLOSES_PORTAL</a></div><div class="ttdeci">static const std::string flag_CLOSES_PORTAL(&quot;CLOSES_PORTAL&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_adacba772aef4ff2199ab4f509bae44b8"><div class="ttname"><a href="iexamine_8cpp.html#adacba772aef4ff2199ab4f509bae44b8">t_dimensional_portal</a></div><div class="ttdeci">static const ter_str_id t_dimensional_portal(&quot;t_dimensional_portal&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_ab8e227f2aa03a641d69d86a746ab77f2"><div class="ttname"><a href="mapdata_8cpp.html#ab8e227f2aa03a641d69d86a746ab77f2">t_thconc_floor</a></div><div class="ttdeci">ter_id t_thconc_floor</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00633">mapdata.cpp:633</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a9eafc067094abf546e276b125d2fc788"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a9eafc067094abf546e276b125d2fc788">game_menus::inv::titled_filter_menu</a></div><div class="ttdeci">item_location titled_filter_menu(item_filter filter, avatar &amp;you, const std::string &amp;title, const std::string &amp;none_message=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l00273">game_inventory.cpp:273</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l00952">uilist::addentry_desc()</a>, <a class="el" href="character_8cpp_source.html#l09598">Character::all_items_with_flag()</a>, <a class="el" href="ui_8h_source.html#l00352">uilist::desc_enabled</a>, <a class="el" href="iexamine_8cpp.html#a7d35bca8445952e92b60e326f8a6a99c">flag_CLOSES_PORTAL()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="item_8cpp_source.html#l05328">item::has_flag()</a>, <a class="el" href="enums_8h_source.html#l00260">m_good</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="item__location_8cpp_source.html#l00758">item_location::remove_item()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="creature_8cpp_source.html#l01651">Creature::set_all_parts_hp_cur()</a>, <a class="el" href="iexamine_8cpp.html#adacba772aef4ff2199ab4f509bae44b8">t_dimensional_portal</a>, <a class="el" href="mapdata_8cpp_source.html#l00633">t_thconc_floor</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="game__inventory_8cpp_source.html#l00273">game_menus::inv::titled_filter_menu()</a>, and <a class="el" href="item_8cpp_source.html#l04574">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="afa141a09fae9828e002013cbea5aa019" name="afa141a09fae9828e002013cbea5aa019"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa141a09fae9828e002013cbea5aa019">&#9670;&nbsp;</a></span>dirtmound()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::dirtmound </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If it's warm enough, pick one of the player's seeds and plant it. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02302">2302</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>{</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span> </div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="group__Weather.html#gadb21721b572a715148778ab71405819a">warm_enough_to_plant</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) ) {</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It is too cold to plant anything now.&quot;</span> ) );</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>    }</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>    <span class="comment">/* ambient_light_at() not working?</span></div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span><span class="comment">    if (here.ambient_light_at(examp) &lt; LIGHT_AMBIENT_LOW) {</span></div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span><span class="comment">        add_msg(m_info, _(&quot;It is too dark to plant anything now.&quot;));</span></div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span><span class="comment">        return;</span></div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span><span class="comment">    }*/</span></div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>    std::vector&lt;item *&gt; seed_inv = p.<a class="code hl_function" href="classvisitable.html#a5b3c37fbe8209cab68aa26d3cc7f4300">items_with</a>( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; itm ) {</div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>        <span class="keywordflow">return</span> itm.<a class="code hl_function" href="classitem.html#ab00eaab576446da90f829d1ceae66c98">is_seed</a>();</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>    } );</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>    <span class="keywordflow">if</span>( seed_inv.empty() ) {</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You have no seeds to plant.&quot;</span> ) );</div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>    }</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>    <span class="keywordflow">if</span>( !here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Something&#39;s lying there…&quot;</span> ) );</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>    }</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span> </div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>    <span class="keyword">auto</span> seed_entries = <a class="code hl_function" href="namespaceiexamine.html#a52eaa83fb4f8dacccac4a5e736cf3fe1">get_seed_entries</a>( seed_inv );</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span> </div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>    <span class="keywordtype">int</span> seed_index = <a class="code hl_function" href="namespaceiexamine.html#a8076e42db14f124567108b5754caa31a">query_seed</a>( seed_entries );</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span> </div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span>    <span class="comment">// Did we cancel?</span></div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>    <span class="keywordflow">if</span>( seed_index &lt; 0 || seed_index &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( seed_entries.size() ) ) {</div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You saved your seeds for later.&quot;</span> ) );</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>    }</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;seed_id = std::get&lt;0&gt;( seed_entries[seed_index] );</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span> </div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>    <a class="code hl_function" href="namespaceiexamine.html#acbcb2fec05977cfc1aeb875072177529">plant_seed</a>( p, examp, seed_id );</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>}</div>
<div class="ttc" id="aclassitem_html_ab00eaab576446da90f829d1ceae66c98"><div class="ttname"><a href="classitem.html#ab00eaab576446da90f829d1ceae66c98">item::is_seed</a></div><div class="ttdeci">bool is_seed() const</div><div class="ttdoc">Whether this is actually a seed, the seed functions won't be of much use for non-seeds.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09803">item.cpp:9803</a></div></div>
<div class="ttc" id="agroup__Weather_html_gadb21721b572a715148778ab71405819a"><div class="ttname"><a href="group__Weather.html#gadb21721b572a715148778ab71405819a">warm_enough_to_plant</a></div><div class="ttdeci">bool warm_enough_to_plant(const tripoint &amp;pos)</div><div class="ttdoc">Is it warm enough to plant seeds?</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01027">weather.cpp:1027</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a52eaa83fb4f8dacccac4a5e736cf3fe1"><div class="ttname"><a href="namespaceiexamine.html#a52eaa83fb4f8dacccac4a5e736cf3fe1">iexamine::get_seed_entries</a></div><div class="ttdeci">std::vector&lt; seed_tuple &gt; get_seed_entries(const std::vector&lt; item * &gt; &amp;seed_inv)</div><div class="ttdoc">Make lists of unique seed types and names for the menu(no multiple hemp seeds etc)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02237">iexamine.cpp:2237</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a8076e42db14f124567108b5754caa31a"><div class="ttname"><a href="namespaceiexamine.html#a8076e42db14f124567108b5754caa31a">iexamine::query_seed</a></div><div class="ttdeci">int query_seed(const std::vector&lt; seed_tuple &gt; &amp;seed_entries)</div><div class="ttdoc">Choose seed for planting.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02263">iexamine.cpp:2263</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_acbcb2fec05977cfc1aeb875072177529"><div class="ttname"><a href="namespaceiexamine.html#acbcb2fec05977cfc1aeb875072177529">iexamine::plant_seed</a></div><div class="ttdeci">void plant_seed(player &amp;p, const tripoint &amp;examp, const itype_id &amp;seed_id)</div><div class="ttdoc">Actual planting of selected seed.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02291">iexamine.cpp:2291</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l02237">get_seed_entries()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="item_8cpp_source.html#l09803">item::is_seed()</a>, <a class="el" href="visitable_8cpp_source.html#l00324">visitable&lt; T &gt;::items_with()</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="iexamine_8cpp_source.html#l02291">plant_seed()</a>, <a class="el" href="iexamine_8cpp_source.html#l02263">query_seed()</a>, and <a class="el" href="weather_8cpp_source.html#l01027">warm_enough_to_plant()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l06734">colorized_ter_name_flags_at()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a26da5c0d7d3f559de5dc84db22194726" name="a26da5c0d7d3f559de5dc84db22194726"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26da5c0d7d3f559de5dc84db22194726">&#9670;&nbsp;</a></span>door_peephole()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::door_peephole </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock/open door or attempt to peek through peephole. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01749">1749</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>{</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">is_outside</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) ) {</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>        <span class="comment">// if door is a locked type attempt to open</span></div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a8445ee22fd6c769a2296df444ed70663">flag_OPENCLOSE_INSIDE</a>, examp ) ) {</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>            <a class="code hl_function" href="namespaceiexamine.html#ade298007b9644bd1dd31a165c84c273f">locked_object</a>( p, examp );</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>            p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You cannot look through the peephole from the outside.&quot;</span> ) );</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>        }</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span> </div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>    }</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span> </div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>    <span class="comment">// Peek through the peephole, or open the door.</span></div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> choice = <a class="code hl_class" href="classuilist.html">uilist</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Do what with the door?&quot;</span> ), {</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Peek through peephole.&quot;</span> ),</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Open door.&quot;</span> )</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>    } );</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>    <span class="keywordflow">if</span>( choice == 0 ) {</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>        <span class="comment">// Peek</span></div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;peek( examp );</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You peek through the peephole.&quot;</span> ) );</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( choice == 1 ) {</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>        here.<a class="code hl_function" href="classmap.html#a1f9586b472e2bf4dac4487c0a061c152">open_door</a>( examp, <span class="keyword">true</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You open the door.&quot;</span> ) );</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>    }</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>}</div>
<div class="ttc" id="aclassmap_html_a1f9586b472e2bf4dac4487c0a061c152"><div class="ttname"><a href="classmap.html#a1f9586b472e2bf4dac4487c0a061c152">map::open_door</a></div><div class="ttdeci">bool open_door(const tripoint &amp;p, bool inside, bool check_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03977">map.cpp:3977</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a8445ee22fd6c769a2296df444ed70663"><div class="ttname"><a href="iexamine_8cpp.html#a8445ee22fd6c769a2296df444ed70663">flag_OPENCLOSE_INSIDE</a></div><div class="ttdeci">static const std::string flag_OPENCLOSE_INSIDE(&quot;OPENCLOSE_INSIDE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="iexamine_8cpp.html#a8445ee22fd6c769a2296df444ed70663">flag_OPENCLOSE_INSIDE()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l02374">map::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l02625">map::is_outside()</a>, <a class="el" href="iexamine_8cpp_source.html#l01546">locked_object()</a>, <a class="el" href="map_8cpp_source.html#l03977">map::open_door()</a>, and <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a59e8dc7876a35827a2b062bb9042b49e" name="a59e8dc7876a35827a2b062bb9042b49e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59e8dc7876a35827a2b062bb9042b49e">&#9670;&nbsp;</a></span>egg_sack_generic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::egg_sack_generic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a039e4134b8c5eb549ca440b962667a2f">mtype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>montype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Spawn spiders from a spider egg sack in radius 1 around the egg sack. </p>
<p >Transforms the egg sack furniture into a ruptured egg sack (f_egg_sacke). Also spawns eggs. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>The player </td></tr>
    <tr><td class="paramname">examp</td><td>Location of egg sack </td></tr>
    <tr><td class="paramname">montype</td><td>The monster type of the created spiders. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02175">2175</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>{</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>    <span class="keyword">const</span> std::string old_furn_name = here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp );</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Harvest the %s?&quot;</span> ), old_furn_name ) ) {</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>    }</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a5e28ecc1b2166c28ee267c59db9cb35d">f_egg_sacke</a> );</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>    <span class="keywordtype">int</span> monster_count = 0;</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;nearby_pos : <a class="code hl_function" href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a>( examp, 1 ) ) {</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( montype, nearby_pos ) ) {</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>                monster_count++;</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>            }</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>        }</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>    }</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>    <span class="keywordtype">int</span> roll = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 4, 20 );</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>    <span class="keywordtype">bool</span> drop_eggs = monster_count &gt;= 1;</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; roll; i++ ) {</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>        <a class="code hl_function" href="iexamine_8cpp.html#a3afe8194537a31e6cb0289fe0fd4998a">handle_harvest</a>( p, <span class="stringliteral">&quot;spider_egg&quot;</span>, drop_eggs );</div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>    }</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>    <span class="keywordflow">if</span>( monster_count == 1 ) {</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A spiderling bursts from the %s!&quot;</span> ), old_furn_name );</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( monster_count &gt;= 1 ) {</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Spiderlings burst from the %s!&quot;</span> ), old_furn_name );</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>    }</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>}</div>
<div class="ttc" id="aartifact_8cpp_html_a70800e95389f34dd34186fafaea2a840"><div class="ttname"><a href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a></div><div class="ttdeci">units::quantity&lt; V, B &gt; rng(const units::quantity&lt; V, B &gt; &amp;min, const units::quantity&lt; V, B &gt; &amp;max)</div><div class="ttdef"><b>Definition:</b> <a href="artifact_8cpp_source.html#l00032">artifact.cpp:32</a></div></div>
<div class="ttc" id="aclassmap_html_a20933e73f539d62c2a10bed22bb9a0c7"><div class="ttname"><a href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">map::furnname</a></div><div class="ttdeci">std::string furnname(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01533">map.cpp:1533</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a13a12943d34d5f17e6c3b4e730659fc6"><div class="ttname"><a href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale &gt; &gt; closest_points_first(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc, int min_dist, int max_dist)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00596">coordinates.h:596</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00264">enums.h:264</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a3afe8194537a31e6cb0289fe0fd4998a"><div class="ttname"><a href="iexamine_8cpp.html#a3afe8194537a31e6cb0289fe0fd4998a">handle_harvest</a></div><div class="ttdeci">static void handle_harvest(player &amp;p, const std::string &amp;itemid, bool force_drop)</div><div class="ttdoc">Spawn an item after harvesting the plant.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01896">iexamine.cpp:1896</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a5e28ecc1b2166c28ee267c59db9cb35d"><div class="ttname"><a href="mapdata_8cpp.html#a5e28ecc1b2166c28ee267c59db9cb35d">f_egg_sacke</a></div><div class="ttdeci">furn_id f_egg_sacke</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01125">mapdata.cpp:1125</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00065">rng.cpp:65</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="coordinates_8h_source.html#l00596">closest_points_first()</a>, <a class="el" href="mapdata_8cpp_source.html#l01125">f_egg_sacke</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01533">map::furnname()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l01896">handle_harvest()</a>, <a class="el" href="enums_8h_source.html#l00264">m_warning</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, and <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02207">egg_sackbw()</a>, <a class="el" href="iexamine_8cpp_source.html#l02212">egg_sackcs()</a>, and <a class="el" href="iexamine_8cpp_source.html#l02217">egg_sackws()</a>.</p>

</div>
</div>
<a id="a4b58506a068692d3e7bdbba54bcdd0e3" name="a4b58506a068692d3e7bdbba54bcdd0e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b58506a068692d3e7bdbba54bcdd0e3">&#9670;&nbsp;</a></span>egg_sackbw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::egg_sackbw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02207">2207</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>{</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>    <a class="code hl_function" href="namespaceiexamine.html#a59e8dc7876a35827a2b062bb9042b49e">egg_sack_generic</a>( p, examp, <a class="code hl_variable" href="iexamine_8cpp.html#a24b9e5d5ed84502eb7d79b46332f2ff3">mon_spider_widow_giant_s</a> );</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_a24b9e5d5ed84502eb7d79b46332f2ff3"><div class="ttname"><a href="iexamine_8cpp.html#a24b9e5d5ed84502eb7d79b46332f2ff3">mon_spider_widow_giant_s</a></div><div class="ttdeci">static const mtype_id mon_spider_widow_giant_s(&quot;mon_spider_widow_giant_s&quot;)</div></div>
<div class="ttc" id="anamespaceiexamine_html_a59e8dc7876a35827a2b062bb9042b49e"><div class="ttname"><a href="namespaceiexamine.html#a59e8dc7876a35827a2b062bb9042b49e">iexamine::egg_sack_generic</a></div><div class="ttdeci">void egg_sack_generic(player &amp;p, const tripoint &amp;examp, const mtype_id &amp;montype)</div><div class="ttdoc">Spawn spiders from a spider egg sack in radius 1 around the egg sack.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02175">iexamine.cpp:2175</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iexamine_8cpp_source.html#l02175">egg_sack_generic()</a>, and <a class="el" href="iexamine_8cpp.html#a24b9e5d5ed84502eb7d79b46332f2ff3">mon_spider_widow_giant_s</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="aa428237c27923ada5eb94a1615bf5dd9" name="aa428237c27923ada5eb94a1615bf5dd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa428237c27923ada5eb94a1615bf5dd9">&#9670;&nbsp;</a></span>egg_sackcs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::egg_sackcs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02212">2212</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>{</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>    <a class="code hl_function" href="namespaceiexamine.html#a59e8dc7876a35827a2b062bb9042b49e">egg_sack_generic</a>( p, examp, <a class="code hl_variable" href="iexamine_8cpp.html#a03c4227fbec1b14401735080c5acf03a">mon_spider_cellar_giant_s</a> );</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_a03c4227fbec1b14401735080c5acf03a"><div class="ttname"><a href="iexamine_8cpp.html#a03c4227fbec1b14401735080c5acf03a">mon_spider_cellar_giant_s</a></div><div class="ttdeci">static const mtype_id mon_spider_cellar_giant_s(&quot;mon_spider_cellar_giant_s&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iexamine_8cpp_source.html#l02175">egg_sack_generic()</a>, and <a class="el" href="iexamine_8cpp.html#a03c4227fbec1b14401735080c5acf03a">mon_spider_cellar_giant_s</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ac63a5eb772d6de3333d46998804176ac" name="ac63a5eb772d6de3333d46998804176ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac63a5eb772d6de3333d46998804176ac">&#9670;&nbsp;</a></span>egg_sackws()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::egg_sackws </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02217">2217</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>{</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>    <a class="code hl_function" href="namespaceiexamine.html#a59e8dc7876a35827a2b062bb9042b49e">egg_sack_generic</a>( p, examp, <a class="code hl_variable" href="iexamine_8cpp.html#aea618155367b80908859ae217c64becf">mon_spider_web_s</a> );</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_aea618155367b80908859ae217c64becf"><div class="ttname"><a href="iexamine_8cpp.html#aea618155367b80908859ae217c64becf">mon_spider_web_s</a></div><div class="ttdeci">static const mtype_id mon_spider_web_s(&quot;mon_spider_web_s&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iexamine_8cpp_source.html#l02175">egg_sack_generic()</a>, and <a class="el" href="iexamine_8cpp.html#aea618155367b80908859ae217c64becf">mon_spider_web_s</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ab4fee7395ae362ec1cdc5cc9c9fa5911" name="ab4fee7395ae362ec1cdc5cc9c9fa5911"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4fee7395ae362ec1cdc5cc9c9fa5911">&#9670;&nbsp;</a></span>elevator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::elevator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If underground, move 2 levels up else move 2 levels down. </p>
<p >Stable movement between levels 0 and -2. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00885">885</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>{</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use the %s?&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) ) ) {</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>    }</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    <span class="keywordtype">int</span> movez = ( examp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &lt; 0 ? 2 : -2 );</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span> </div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> original_floor_omt = <a class="code hl_function" href="coordinate__conversions_8cpp.html#ad1ca17bea3d4e8bbd38de078f5d504bf">ms_to_omt_copy</a>( here.<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( examp ) );</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> new_floor_omt = original_floor_omt + <a class="code hl_struct" href="structtripoint.html">tripoint</a>( <a class="code hl_variable" href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a>, movez );</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span> </div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span> </div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>    <span class="comment">// first find critters in the destination elevator and move them out of the way</span></div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classCreature.html">Creature</a> &amp;critter : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_creatures() ) {</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>        <span class="keywordflow">if</span>( critter.is_player() ) {</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a483a2928c33c4f70d1b00ac5dc37ebcc">flag_ELEVATOR</a>, critter.pos() ) ) {</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> critter_omt = <a class="code hl_function" href="coordinate__conversions_8cpp.html#ad1ca17bea3d4e8bbd38de078f5d504bf">ms_to_omt_copy</a>( here.<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( critter.pos() ) );</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>            <span class="keywordflow">if</span>( critter_omt == new_floor_omt ) {</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;candidate : <a class="code hl_function" href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a>( critter.pos(), 10 ) ) {</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>                    <span class="keywordflow">if</span>( !here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a483a2928c33c4f70d1b00ac5dc37ebcc">flag_ELEVATOR</a>, candidate ) &amp;&amp;</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>                        here.<a class="code hl_function" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( candidate ) &amp;&amp;</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>                        !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( candidate ) ) {</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>                        critter.setpos( candidate );</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>                    }</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>                }</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>            }</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>        }</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>    }</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span> </div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>    <span class="comment">// TODO: do we have struct or pair to indicate from -&gt; to?</span></div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_function" href="activity__item__handling_8cpp.html#aa503550e17ef5526e621cdace3449e1f">move_item</a> = [&amp;]( <a class="code hl_class" href="classmap__stack.html">map_stack</a> &amp; items, <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp; src, <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp; dest ) {</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); it != items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>            here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( dest, *it );</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>            it = here.<a class="code hl_function" href="classmap.html#ad12f3e2ddb1c38ca6b8e75a1a9e48a3d">i_rem</a>( src, it );</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>        }</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>    };</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span> </div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>    <span class="keyword">const</span> <span class="keyword">auto</span> first_elevator_tile = [&amp;]( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp; pos ) -&gt; <a class="code hl_struct" href="structtripoint.html">tripoint</a> {</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;candidate : <a class="code hl_function" href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a>( pos, 10 ) )</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>        {</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>            <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a483a2928c33c4f70d1b00ac5dc37ebcc">flag_ELEVATOR</a>, candidate ) ) {</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>                <span class="keywordflow">return</span> candidate;</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>            }</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>        }</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>        <span class="keywordflow">return</span> pos;</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>    };</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span> </div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>    <span class="comment">// move along every item in the elevator</span></div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;pos : <a class="code hl_function" href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), 10 ) ) {</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a483a2928c33c4f70d1b00ac5dc37ebcc">flag_ELEVATOR</a>, pos ) ) {</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>            <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( pos );</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> dest = first_elevator_tile( pos + <a class="code hl_struct" href="structtripoint.html">tripoint</a>( 0, 0, movez ) );</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>            <a class="code hl_function" href="activity__item__handling_8cpp.html#aa503550e17ef5526e621cdace3449e1f">move_item</a>( items, pos, dest );</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>        }</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>    }</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span> </div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>    <span class="comment">// move the player</span></div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;vertical_move( movez, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span> </div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>    <span class="comment">// finally, bring along everyone who was in the elevator with the player</span></div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classCreature.html">Creature</a> &amp;critter : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_creatures() ) {</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>        <span class="keywordflow">if</span>( critter.is_player() ) {</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a483a2928c33c4f70d1b00ac5dc37ebcc">flag_ELEVATOR</a>, critter.pos() ) ) {</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> critter_omt = <a class="code hl_function" href="coordinate__conversions_8cpp.html#ad1ca17bea3d4e8bbd38de078f5d504bf">ms_to_omt_copy</a>( here.<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( critter.pos() ) );</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span> </div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>            <span class="keywordflow">if</span>( critter_omt == original_floor_omt ) {</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;candidate : <a class="code hl_function" href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), 10 ) ) {</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>                    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#a483a2928c33c4f70d1b00ac5dc37ebcc">flag_ELEVATOR</a>, candidate ) &amp;&amp;</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>                        candidate != p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() &amp;&amp;</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>                        !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( candidate ) ) {</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>                        critter.setpos( candidate );</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>                    }</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>                }</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>            }</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>        }</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>    }</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>}</div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_aa503550e17ef5526e621cdace3449e1f"><div class="ttname"><a href="activity__item__handling_8cpp.html#aa503550e17ef5526e621cdace3449e1f">move_item</a></div><div class="ttdeci">static void move_item(player &amp;p, item &amp;it, const int quantity, const tripoint &amp;src, const tripoint &amp;dest, vehicle *src_veh, int src_part, const activity_id &amp;activity_to_restore=activity_id::NULL_ID())</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00978">activity_item_handling.cpp:978</a></div></div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00077">creature.h:78</a></div></div>
<div class="ttc" id="aclassmap_html_ad12f3e2ddb1c38ca6b8e75a1a9e48a3d"><div class="ttname"><a href="classmap.html#ad12f3e2ddb1c38ca6b8e75a1a9e48a3d">map::i_rem</a></div><div class="ttdeci">map_stack::iterator i_rem(const tripoint &amp;p, map_stack::const_iterator it)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04222">map.cpp:4222</a></div></div>
<div class="ttc" id="aclassmap_html_af563dc2397e71a053569cb45c6bb7e77"><div class="ttname"><a href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">map::passable</a></div><div class="ttdeci">bool passable(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01864">map.cpp:1864</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a483a2928c33c4f70d1b00ac5dc37ebcc"><div class="ttname"><a href="iexamine_8cpp.html#a483a2928c33c4f70d1b00ac5dc37ebcc">flag_ELEVATOR</a></div><div class="ttdeci">static const std::string flag_ELEVATOR(&quot;ELEVATOR&quot;)</div></div>
<div class="ttc" id="apoint_8h_html_a0ee2195dcb488ae55fbf4316f5011172"><div class="ttname"><a href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a></div><div class="ttdeci">static constexpr point point_zero</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00260">point.h:260</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="coordinates_8h_source.html#l00596">closest_points_first()</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="iexamine_8cpp.html#a483a2928c33c4f70d1b00ac5dc37ebcc">flag_ELEVATOR()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l08399">map::getabs()</a>, <a class="el" href="map_8cpp_source.html#l02374">map::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l04222">map::i_rem()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00978">move_item()</a>, <a class="el" href="coordinate__conversions_8cpp_source.html#l00162">ms_to_omt_copy()</a>, <a class="el" href="map_8cpp_source.html#l01864">map::passable()</a>, <a class="el" href="point_8h_source.html#l00260">point_zero</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="map_8cpp_source.html#l01773">map::tername()</a>, and <a class="el" href="point_8h_source.html#l00138">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a9b9c90bb21163bd14d5c2e438d2bd89e" name="a9b9c90bb21163bd14d5c2e438d2bd89e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b9c90bb21163bd14d5c2e438d2bd89e">&#9670;&nbsp;</a></span>fault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fault </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display popup with reference to "The Enigma of Amigara Fault.". </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01618">1618</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>{</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>    <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This wall is perfectly vertical.  Odd, twisted holes are set in it, leading\n&quot;</span></div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>              <span class="stringliteral">&quot;as far back into the solid rock as you can see.  The holes are humanoid in\n&quot;</span></div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>              <span class="stringliteral">&quot;shape, but with long, twisted, distended limbs.&quot;</span> ) );</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, and <a class="el" href="output_8cpp_source.html#l00764">popup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="avatar__functions_8cpp_source.html#l00174">avatar_funcs::mend_item()</a>.</p>

</div>
</div>
<a id="a3c3c28dc38fceedbba0d1d9b907df46f" name="a3c3c28dc38fceedbba0d1d9b907df46f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c3c28dc38fceedbba0d1d9b907df46f">&#9670;&nbsp;</a></span>fertilize_plant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fertilize_plant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>fertilizer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02479">2479</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02480" name="l02480"></a><span class="lineno"> 2480</span>{</div>
<div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span>    <a class="code hl_class" href="classret__val.html">ret_val&lt;bool&gt;</a> can_fert = <a class="code hl_function" href="namespaceiexamine.html#a1ff48dd50fbbb6d65965d377aebfeb61">can_fertilize</a>( p, tile, fertilizer );</div>
<div class="line"><a id="l02482" name="l02482"></a><span class="lineno"> 2482</span>    <span class="keywordflow">if</span>( !can_fert.<a class="code hl_function" href="classret__val.html#afe534a279647e88c4ab321d0c338d9d5">success</a>() ) {</div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( can_fert.<a class="code hl_function" href="classret__val.html#a21a7086f33223dff3431b16c7abbd58c">str</a>() );</div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span>    }</div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span> </div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span>    std::list&lt;item&gt; planted = p.<a class="code hl_function" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( fertilizer, 1 );</div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span> </div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span>    <span class="comment">// Reduce the amount of time it takes until the next stage of the plant by</span></div>
<div class="line"><a id="l02490" name="l02490"></a><span class="lineno"> 2490</span>    <span class="comment">// 20% of a seasons length. (default 2.8 days).</span></div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> fertilizerEpoch = <a class="code hl_function" href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a>() * 0.2;</div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span> </div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span>    <span class="comment">// Can&#39;t use item_stack::only_item() since there might be fertilizer</span></div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( tile );</div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a> = std::find_if( items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span>        return it.is_seed();</div>
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"> 2498</span>    } );</div>
<div class="line"><a id="l02499" name="l02499"></a><span class="lineno"> 2499</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a> == items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>() ) {</div>
<div class="line"><a id="l02500" name="l02500"></a><span class="lineno"> 2500</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Missing seed for plant at (%d, %d, %d)&quot;</span>, tile.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, tile.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>, tile.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a id="l02501" name="l02501"></a><span class="lineno"> 2501</span>        here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( tile );</div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( tile, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>    }</div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span> </div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>    <span class="comment">// TODO: item should probably clamp the value on its own</span></div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span>    <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a>-&gt;set_birthday( <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a>-&gt;birthday() - fertilizerEpoch );</div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span>    <span class="comment">// The plant furniture has the NOITEM token which prevents adding items on that square,</span></div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span>    <span class="comment">// spawned items are moved to an adjacent field instead, but the fertilizer token</span></div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span>    <span class="comment">// must be on the square of the plant, therefore this hack:</span></div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>    <span class="keyword">const</span> <span class="keyword">auto</span> old_furn = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( tile );</div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( tile, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span>    here.<a class="code hl_function" href="classmap.html#acfe43259087397daac52876165a3120c">spawn_item</a>( tile, <a class="code hl_variable" href="iexamine_8cpp.html#ac0f9f7fa2c1a490eff73f2d180399ffe">itype_fertilizer</a>, 1, 1, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( tile, old_furn );</div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span>    p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 10_seconds ) );</div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span> </div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span>    <span class="comment">//~ %1$s: plant name, %2$s: fertilizer name</span></div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You fertilize the %1$s with the %2$s.&quot;</span> ), <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a>-&gt;get_plant_name(),</div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>             planted.front().tname() );</div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span>}</div>
<div class="ttc" id="aclassret__val_html"><div class="ttname"><a href="classret__val.html">ret_val</a></div><div class="ttdoc">The class represents a composite return value of an arbitrary function (result).</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00020">ret_val.h:21</a></div></div>
<div class="ttc" id="aclassret__val_html_a21a7086f33223dff3431b16c7abbd58c"><div class="ttname"><a href="classret__val.html#a21a7086f33223dff3431b16c7abbd58c">ret_val::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00078">ret_val.h:78</a></div></div>
<div class="ttc" id="aclassret__val_html_afe534a279647e88c4ab321d0c338d9d5"><div class="ttname"><a href="classret__val.html#afe534a279647e88c4ab321d0c338d9d5">ret_val::success</a></div><div class="ttdeci">bool success() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00070">ret_val.h:70</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac0f9f7fa2c1a490eff73f2d180399ffe"><div class="ttname"><a href="iexamine_8cpp.html#ac0f9f7fa2c1a490eff73f2d180399ffe">itype_fertilizer</a></div><div class="ttdeci">static const itype_id itype_fertilizer(&quot;fertilizer&quot;)</div></div>
<div class="ttc" id="anamespacecalendar_html_aa61c940cc539463295afa98e7bf7d22b"><div class="ttname"><a href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a></div><div class="ttdeci">time_duration season_length()</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00466">calendar.cpp:466</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a1ff48dd50fbbb6d65965d377aebfeb61"><div class="ttname"><a href="namespaceiexamine.html#a1ff48dd50fbbb6d65965d377aebfeb61">iexamine::can_fertilize</a></div><div class="ttdeci">ret_val&lt; bool &gt; can_fertilize(player &amp;p, const tripoint &amp;tile, const itype_id &amp;fertilizer)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02460">iexamine.cpp:2460</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="iexamine_8cpp_source.html#l02460">can_fertilize()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l04247">map::i_clear()</a>, <a class="el" href="iexamine_8cpp.html#ac0f9f7fa2c1a490eff73f2d180399ffe">itype_fertilizer</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="calendar_8cpp_source.html#l00466">calendar::season_length()</a>, <a class="el" href="iuse_8cpp_source.html#l05958">iuse::seed()</a>, <a class="el" href="map_8cpp_source.html#l04313">map::spawn_item()</a>, <a class="el" href="ret__val_8h_source.html#l00078">ret_val&lt; T &gt;::str()</a>, <a class="el" href="ret__val_8h_source.html#l00070">ret_val&lt; T &gt;::success()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="character_8cpp_source.html#l09665">Character::use_charges()</a>, <a class="el" href="point_8h_source.html#l00136">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00137">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00138">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02555">aggie_plant()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l04527">activity_handlers::fertilize_plot_do_turn()</a>.</p>

</div>
</div>
<a id="a0b17f2a7b8cbe0fc611dce45c08b442b" name="a0b17f2a7b8cbe0fc611dce45c08b442b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b17f2a7b8cbe0fc611dce45c08b442b">&#9670;&nbsp;</a></span>fireplace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fireplace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02919">2919</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span>{</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> already_on_fire = here.<a class="code hl_function" href="classmap.html#a2b9a117ad421bd11ca8efd7449ce2528">has_nearby_fire</a>( examp, 0 );</div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> furn_is_deployed = !here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_variable" href="structfurn__t.html#a57b74b8dc09a89bb25ec33315c22178e">deployed_item</a>.<a class="code hl_function" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>();</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span> </div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span>    std::multimap&lt;int, item *&gt; firestarters;</div>
<div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> *it : p.<a class="code hl_function" href="classvisitable.html#a5b3c37fbe8209cab68aa26d3cc7f4300">items_with</a>( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"> 2927</span>    return it.has_flag( flag_FIRESTARTER ) || it.has_flag( flag_FIRE );</div>
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"> 2928</span>    } ) ) {</div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span>        <span class="keyword">const</span> <span class="keyword">auto</span> usef = it-&gt;<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;firestarter&quot;</span> );</div>
<div class="line"><a id="l02930" name="l02930"></a><span class="lineno"> 2930</span>        <span class="keywordflow">if</span>( usef != <span class="keyword">nullptr</span> &amp;&amp; usef-&gt;get_actor_ptr() != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l02931" name="l02931"></a><span class="lineno"> 2931</span>            <span class="keyword">const</span> <span class="keyword">auto</span> actor = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="classfirestarter__actor.html">firestarter_actor</a> *<span class="keyword">&gt;</span>( usef-&gt;get_actor_ptr() );</div>
<div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span>            <span class="keywordflow">if</span>( actor-&gt;can_use( p, *it, <span class="keyword">false</span>, examp ).success() ) {</div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span>                firestarters.insert( std::pair&lt;int, item *&gt;( actor-&gt;moves_cost_fast, it ) );</div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"> 2934</span>            }</div>
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span>        }</div>
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"> 2936</span>    }</div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span> </div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_firestarter = !firestarters.empty();</div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_bionic_firestarter = p.<a class="code hl_function" href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">has_bionic</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a4ff01c21f781cc397ad5ca4c9ca309e8">bio_lighter</a> ) &amp;&amp;</div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span>                                        p.<a class="code hl_function" href="classCharacter.html#a8e23dcce68b00cf1b74fbb36bcf0101e">enough_power_for</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a4ff01c21f781cc397ad5ca4c9ca309e8">bio_lighter</a> );</div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span> </div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span>    <a class="code hl_class" href="classuilist.html">uilist</a> selection_menu;</div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span>    selection_menu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Select an action&quot;</span> );</div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span>    selection_menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 0, <span class="keyword">true</span>, <span class="charliteral">&#39;g&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Get items&quot;</span> ) );</div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span>    <span class="keywordflow">if</span>( !already_on_fire ) {</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>        selection_menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 1, has_firestarter, <span class="charliteral">&#39;f&#39;</span>,</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span>                                 has_firestarter ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Start a fire&quot;</span> ) : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Start a fire… you&#39;ll need a fire source.&quot;</span> ) );</div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>        <span class="keywordflow">if</span>( has_bionic_firestarter ) {</div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span>            selection_menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 2, <span class="keyword">true</span>, <span class="charliteral">&#39;b&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use a CBM to start a fire&quot;</span> ) );</div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>        }</div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span>        selection_menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 4, <span class="keyword">true</span>, <span class="charliteral">&#39;e&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Extinguish fire&quot;</span> ) );</div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span>    }</div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span>    <span class="keywordflow">if</span>( furn_is_deployed ) {</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span>        selection_menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 3, <span class="keyword">true</span>, <span class="charliteral">&#39;t&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Take down the %s&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) );</div>
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"> 2956</span>    }</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span>    selection_menu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span> </div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>    <span class="keywordflow">switch</span>( selection_menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span>        <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span>            <a class="code hl_function" href="namespacepickup.html#a4346ea9e7a9b05efee7cef2fa3838f16">pickup::pick_up</a>( examp, 0 );</div>
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"> 2963</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"> 2964</span>        <span class="keywordflow">case</span> 1: {</div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;firestarter : firestarters ) {</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span>                <a class="code hl_class" href="classitem.html">item</a> *it = firestarter.second;</div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span>                <span class="keyword">const</span> <span class="keyword">auto</span> usef = it-&gt;<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;firestarter&quot;</span> );</div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span>                <span class="keyword">const</span> <span class="keyword">auto</span> actor = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="classfirestarter__actor.html">firestarter_actor</a> *<span class="keyword">&gt;</span>( usef-&gt;get_actor_ptr() );</div>
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"> 2969</span>                p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You attempt to start a fire with your %s…&quot;</span> ), it-&gt;<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span>                <span class="keyword">const</span> <a class="code hl_class" href="classret__val.html">ret_val&lt;bool&gt;</a> can_use = actor-&gt;can_use( p, *it, <span class="keyword">false</span>, examp );</div>
<div class="line"><a id="l02971" name="l02971"></a><span class="lineno"> 2971</span>                <span class="keywordflow">if</span>( can_use.<a class="code hl_function" href="classret__val.html#afe534a279647e88c4ab321d0c338d9d5">success</a>() ) {</div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> charges = actor-&gt;use( p, *it, <span class="keyword">false</span>, examp );</div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>                    p.<a class="code hl_function" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( it-&gt;<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>(), charges );</div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02975" name="l02975"></a><span class="lineno"> 2975</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02976" name="l02976"></a><span class="lineno"> 2976</span>                    p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, can_use.<a class="code hl_function" href="classret__val.html#a21a7086f33223dff3431b16c7abbd58c">str</a>() );</div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span>                }</div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span>            }</div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span>            p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You weren&#39;t able to start a fire.&quot;</span> ) );</div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span>        }</div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span>        <span class="keywordflow">case</span> 2: {</div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span>            <span class="keywordflow">if</span>( !here.<a class="code hl_function" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( examp, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> ) &amp;&amp; here.<a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( examp, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a>, 1 ) ) {</div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span>                p.<a class="code hl_function" href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">mod_power_level</a>( -<a class="code hl_variable" href="iexamine_8cpp.html#a4ff01c21f781cc397ad5ca4c9ca309e8">bio_lighter</a>-&gt;<a class="code hl_variable" href="structbionic__data.html#a91d04ff5e3de875e747fff05418f6253">power_activate</a> );</div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>                p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span>                p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t light a fire there.&quot;</span> ) );</div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span>            }</div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span>        }</div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span>        <span class="keywordflow">case</span> 3: {</div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span>            <span class="keywordflow">if</span>( already_on_fire ) {</div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>                <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Really take down the %s while it&#39;s on fire?&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span>                }</div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span>            }</div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span>            p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You take down the %s.&quot;</span> ),</div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>                                 here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) );</div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>            <span class="keyword">const</span> <span class="keyword">auto</span> furn_item = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_variable" href="structfurn__t.html#a57b74b8dc09a89bb25ec33315c22178e">deployed_item</a>;</div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>            here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( examp, <a class="code hl_class" href="classitem.html">item</a>( furn_item, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) );</div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span>            here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span>        }</div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span>        <span class="keywordflow">case</span> 4: {</div>
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span>            here.<a class="code hl_function" href="classmap.html#a02ff5fbdbdb3df97210f4874c41fd75a">remove_field</a>( examp, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> );</div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>            p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -200 );</div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span>            p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;With a few determined moves you put out the fire in the %s.&quot;</span> ),</div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span>                                 here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) );</div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span>        }</div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span>    }</div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>}</div>
<div class="ttc" id="aclassCharacter_html_a17446e14fd6046648a505c4aaec3d976"><div class="ttname"><a href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">Character::mod_power_level</a></div><div class="ttdeci">void mod_power_level(const units::energy &amp;npower)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01924">character.cpp:1924</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5751b689e5a4ecd43b6de5c3e2d31541"><div class="ttname"><a href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">Character::has_bionic</a></div><div class="ttdeci">bool has_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01814">character.cpp:1814</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8e23dcce68b00cf1b74fbb36bcf0101e"><div class="ttname"><a href="classCharacter.html#a8e23dcce68b00cf1b74fbb36bcf0101e">Character::enough_power_for</a></div><div class="ttdeci">bool enough_power_for(const bionic_id &amp;bid) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01956">character.cpp:1956</a></div></div>
<div class="ttc" id="aclassfirestarter__actor_html"><div class="ttname"><a href="classfirestarter__actor.html">firestarter_actor</a></div><div class="ttdoc">Starts a fire instantly.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00528">iuse_actor.h:529</a></div></div>
<div class="ttc" id="aclassmap_html_a02ff5fbdbdb3df97210f4874c41fd75a"><div class="ttname"><a href="classmap.html#a02ff5fbdbdb3df97210f4874c41fd75a">map::remove_field</a></div><div class="ttdeci">void remove_field(const tripoint &amp;p, const field_type_id &amp;field_to_remove)</div><div class="ttdoc">Remove field entry at xy, ignored if the field entry is not present.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05585">map.cpp:5585</a></div></div>
<div class="ttc" id="aclassmap_html_a2b9a117ad421bd11ca8efd7449ce2528"><div class="ttname"><a href="classmap.html#a2b9a117ad421bd11ca8efd7449ce2528">map::has_nearby_fire</a></div><div class="ttdeci">bool has_nearby_fire(const tripoint &amp;p, int radius=1)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02815">map.cpp:2815</a></div></div>
<div class="ttc" id="aclassmap_html_a30cfefdb115c16c5e1af6cc99f94bbbd"><div class="ttname"><a href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">map::get_field</a></div><div class="ttdeci">field_entry * get_field(const tripoint &amp;p, const field_type_id &amp;type)</div><div class="ttdoc">Get field of specific type at point.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05505">map.cpp:5505</a></div></div>
<div class="ttc" id="aclassmap_html_a32a9de57ddea3145ca42e6acfde7f3d6"><div class="ttname"><a href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">map::add_field</a></div><div class="ttdeci">bool add_field(const tripoint &amp;p, const field_type_id &amp;type_id, int intensity=INT_MAX, const time_duration &amp;age=0_turns, bool hit_player=true)</div><div class="ttdoc">Add field entry at point, or set intensity if present.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05528">map.cpp:5528</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a261d438c14892c55153e1b615c548164"><div class="ttname"><a href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a></div><div class="ttdeci">field_type_id fd_fire</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00345">field_type.cpp:345</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a4ff01c21f781cc397ad5ca4c9ca309e8"><div class="ttname"><a href="iexamine_8cpp.html#a4ff01c21f781cc397ad5ca4c9ca309e8">bio_lighter</a></div><div class="ttdeci">static const bionic_id bio_lighter(&quot;bio_lighter&quot;)</div></div>
<div class="ttc" id="anamespacepickup_html_a4346ea9e7a9b05efee7cef2fa3838f16"><div class="ttname"><a href="namespacepickup.html#a4346ea9e7a9b05efee7cef2fa3838f16">pickup::pick_up</a></div><div class="ttdeci">void pick_up(const tripoint &amp;p, int min, from_where get_items_from=prompt)</div><div class="ttdoc">Pick up items; 'g' or ',' or via examine()</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00575">pickup.cpp:575</a></div></div>
<div class="ttc" id="astructbionic__data_html_a91d04ff5e3de875e747fff05418f6253"><div class="ttname"><a href="structbionic__data.html#a91d04ff5e3de875e747fff05418f6253">bionic_data::power_activate</a></div><div class="ttdeci">units::energy power_activate</div><div class="ttdoc">Power cost on activation.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00037">bionics.h:37</a></div></div>
<div class="ttc" id="astructitype_html_a304367633fdfe6c63a53bdce0caced92"><div class="ttname"><a href="structitype.html#a304367633fdfe6c63a53bdce0caced92">itype::get_use</a></div><div class="ttdeci">const use_function * get_use(const std::string &amp;iuse_name) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00166">itype.cpp:166</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l05528">map::add_field()</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="iexamine_8cpp.html#a4ff01c21f781cc397ad5ca4c9ca309e8">bio_lighter</a>, <a class="el" href="mapdata_8h_source.html#l00513">furn_t::deployed_item</a>, <a class="el" href="character_8cpp_source.html#l01956">Character::enough_power_for()</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="field__type_8cpp_source.html#l00345">fd_fire</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01533">map::furnname()</a>, <a class="el" href="map_8cpp_source.html#l05505">map::get_field()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="itype_8cpp_source.html#l00166">itype::get_use()</a>, <a class="el" href="character_8cpp_source.html#l01814">Character::has_bionic()</a>, <a class="el" href="map_8cpp_source.html#l02815">map::has_nearby_fire()</a>, <a class="el" href="string__id_8h_source.html#l00298">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="visitable_8cpp_source.html#l00324">visitable&lt; T &gt;::items_with()</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="character_8cpp_source.html#l01924">Character::mod_power_level()</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="pickup_8cpp_source.html#l00575">pickup::pick_up()</a>, <a class="el" href="bionics_8h_source.html#l00037">bionic_data::power_activate</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="map_8cpp_source.html#l05585">map::remove_field()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="ret__val_8h_source.html#l00078">ret_val&lt; T &gt;::str()</a>, <a class="el" href="ret__val_8h_source.html#l00070">ret_val&lt; T &gt;::success()</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l04574">item::tname()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="item_8h_source.html#l02160">item::type</a>, <a class="el" href="item_8cpp_source.html#l08374">item::typeId()</a>, and <a class="el" href="character_8cpp_source.html#l09665">Character::use_charges()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l05463">game::examine()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="afa7f20e381003b17ad280374cce3b10d" name="afa7f20e381003b17ad280374cce3b10d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa7f20e381003b17ad280374cce3b10d">&#9670;&nbsp;</a></span>flower_bluebell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_bluebell </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2b3efa2907483dbcfcbf885df6911b30" name="a2b3efa2907483dbcfcbf885df6911b30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b3efa2907483dbcfcbf885df6911b30">&#9670;&nbsp;</a></span>flower_cactus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_cactus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompt pick cactus pad. </p>
<p >Not safe for player. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01974">1974</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>{</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="iexamine_8cpp.html#a7275f774429f8bae00796e9ea033fa7c">dead_plant</a>( <span class="keyword">true</span>, p, examp ) ) {</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>    }</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span> </div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Pick %s?&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>    }</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span> </div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 6 ) ) {</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The cactus&#39; nettles sting you!&quot;</span> ) );</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>        p.<a class="code hl_function" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_l&quot;</span> ), 4 );</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>        p.<a class="code hl_function" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_r&quot;</span> ), 4 );</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>    }</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span> </div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span> </div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>    <a class="code hl_function" href="iexamine_8cpp.html#a3afe8194537a31e6cb0289fe0fd4998a">handle_harvest</a>( p, <span class="stringliteral">&quot;cactus_pad&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>    <a class="code hl_function" href="iexamine_8cpp.html#a3afe8194537a31e6cb0289fe0fd4998a">handle_harvest</a>( p, <span class="stringliteral">&quot;seed_cactus&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>}</div>
<div class="ttc" id="aclassCharacter_html_a7c11a4f12bee9f80279bff21faa54153"><div class="ttname"><a href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">Character::apply_damage</a></div><div class="ttdeci">void apply_damage(Creature *source, bodypart_id hurt, int dam, bool bypass_med=false) override</div><div class="ttdoc">Actually hurt the player, hurts a body_part directly, no armor reduction.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08404">character.cpp:8404</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a7275f774429f8bae00796e9ea033fa7c"><div class="ttname"><a href="iexamine_8cpp.html#a7275f774429f8bae00796e9ea033fa7c">dead_plant</a></div><div class="ttdeci">static bool dead_plant(bool flower, player &amp;p, const tripoint &amp;examp)</div><div class="ttdoc">If it's winter: show msg and return true.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01849">iexamine.cpp:1849</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l08404">Character::apply_damage()</a>, <a class="el" href="iexamine_8cpp_source.html#l01849">dead_plant()</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01533">map::furnname()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l01896">handle_harvest()</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, and <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ad09fd96e48e24b5d0916e069ff4d731b" name="ad09fd96e48e24b5d0916e069ff4d731b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fd96e48e24b5d0916e069ff4d731b">&#9670;&nbsp;</a></span>flower_dahlia()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_dahlia </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dig up its roots or drink its nectar if you can. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02001">2001</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>{</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="iexamine_8cpp.html#a7275f774429f8bae00796e9ea033fa7c">dead_plant</a>( <span class="keyword">true</span>, p, examp ) ) {</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>    }</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span> </div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="iexamine_8cpp.html#ac157cb8d54abefdba3d800abed617921">drink_nectar</a>( p ) ) {</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>    }</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span> </div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>    <span class="keywordtype">bool</span> can_get_root = p.<a class="code hl_function" href="classvisitable.html#a62ad0b8f7866ec171a709c56e4a25ff2">has_quality</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a> ) || p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a17ec945038dd28db3e0041be27e319ad">trait_BURROW</a> );</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>    <span class="keywordflow">if</span>( can_get_root ) {</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Pick %s?&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>        }</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You don&#39;t have a digging tool to dig up roots.  Pick %s anyway?&quot;</span> ),</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>                       here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>        }</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>    }</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span> </div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span> </div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>    <span class="keywordflow">if</span>( can_get_root ) {</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>        <a class="code hl_function" href="iexamine_8cpp.html#a3afe8194537a31e6cb0289fe0fd4998a">handle_harvest</a>( p, <span class="stringliteral">&quot;dahlia_root&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>    }</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>    <a class="code hl_function" href="iexamine_8cpp.html#a3afe8194537a31e6cb0289fe0fd4998a">handle_harvest</a>( p, <span class="stringliteral">&quot;seed_dahlia&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>    <a class="code hl_function" href="iexamine_8cpp.html#a3afe8194537a31e6cb0289fe0fd4998a">handle_harvest</a>( p, <span class="stringliteral">&quot;withered&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>    <span class="comment">// There was a bud and flower spawn here</span></div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>    <span class="comment">// But those were useless, don&#39;t re-add until they get useful</span></div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_a17ec945038dd28db3e0041be27e319ad"><div class="ttname"><a href="iexamine_8cpp.html#a17ec945038dd28db3e0041be27e319ad">trait_BURROW</a></div><div class="ttdeci">static const trait_id trait_BURROW(&quot;BURROW&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a73439c0a480cbe825af2284e8134349c"><div class="ttname"><a href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a></div><div class="ttdeci">static const quality_id qual_DIG(&quot;DIG&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac157cb8d54abefdba3d800abed617921"><div class="ttname"><a href="iexamine_8cpp.html#ac157cb8d54abefdba3d800abed617921">drink_nectar</a></div><div class="ttdeci">static bool drink_nectar(player &amp;p)</div><div class="ttdoc">Consume Nectar.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01880">iexamine.cpp:1880</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="iexamine_8cpp_source.html#l01849">dead_plant()</a>, <a class="el" href="iexamine_8cpp_source.html#l01880">drink_nectar()</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01533">map::furnname()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l01896">handle_harvest()</a>, <a class="el" href="visitable_8cpp_source.html#l00169">visitable&lt; T &gt;::has_quality()</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, and <a class="el" href="iexamine_8cpp.html#a17ec945038dd28db3e0041be27e319ad">trait_BURROW</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ac98935de66036feaefbebba3864da5bf" name="ac98935de66036feaefbebba3864da5bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac98935de66036feaefbebba3864da5bf">&#9670;&nbsp;</a></span>flower_marloss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_marloss </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02141">2141</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>{</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="calendar_8cpp.html#a81656706da6c7486137ad8578c0f523e">season_of_year</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) == <a class="code hl_enumvalue" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba1d8c9db74467f6c2fdad36f154ca6873">WINTER</a> ) {</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This flower is still alive, despite the harsh conditions…&quot;</span> ) );</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>    }</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>    <a class="code hl_class" href="classitem.html">item</a> nectar( <span class="stringliteral">&quot;nectar&quot;</span> );</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="iexamine_8cpp.html#af7f617a2322cfcb84700260ef745ff6b">can_drink_nectar</a>( p, nectar ) ) {</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You feel out of place as you explore the %s. Drink?&quot;</span> ),</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>                       here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>        }</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 30_seconds ); <span class="comment">// Takes 30 seconds</span></div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This flower tastes very wrong…&quot;</span> ) );</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>        <span class="comment">// If you can drink flowers, you&#39;re post-thresh and the Mycus does not want you.</span></div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>        p.<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a0c073c8608c88bb092d72f27944a7df1">effect_teleglow</a>, 10_minutes );</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>    }</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Pick %s?&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>    }</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>    here.<a class="code hl_function" href="classmap.html#acfe43259087397daac52876165a3120c">spawn_item</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), <a class="code hl_variable" href="iexamine_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a>, 1, 3, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>    <a class="code hl_function" href="iexamine_8cpp.html#a3afe8194537a31e6cb0289fe0fd4998a">handle_harvest</a>( p, <span class="stringliteral">&quot;withered&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a81656706da6c7486137ad8578c0f523e"><div class="ttname"><a href="calendar_8cpp.html#a81656706da6c7486137ad8578c0f523e">season_of_year</a></div><div class="ttdeci">season_type season_of_year(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00547">calendar.cpp:547</a></div></div>
<div class="ttc" id="acalendar_8h_html_a5ac915753729cd68b608506d3c63ad1ba1d8c9db74467f6c2fdad36f154ca6873"><div class="ttname"><a href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba1d8c9db74467f6c2fdad36f154ca6873">WINTER</a></div><div class="ttdeci">@ WINTER</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00021">calendar.h:21</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01007">creature.cpp:1007</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a0c073c8608c88bb092d72f27944a7df1"><div class="ttname"><a href="iexamine_8cpp.html#a0c073c8608c88bb092d72f27944a7df1">effect_teleglow</a></div><div class="ttdeci">static const efftype_id effect_teleglow(&quot;teleglow&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a398ef54be46ee27b157365a389e9d4e5"><div class="ttname"><a href="iexamine_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a></div><div class="ttdeci">static const itype_id itype_marloss_seed(&quot;marloss_seed&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_af7f617a2322cfcb84700260ef745ff6b"><div class="ttname"><a href="iexamine_8cpp.html#af7f617a2322cfcb84700260ef745ff6b">can_drink_nectar</a></div><div class="ttdeci">static bool can_drink_nectar(const player &amp;p, const item &amp;nectar)</div><div class="ttdoc">Helper method to see if player has traits, hunger and mouthwear for drinking nectar.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01868">iexamine.cpp:1868</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l01007">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="iexamine_8cpp_source.html#l01868">can_drink_nectar()</a>, <a class="el" href="iexamine_8cpp.html#a0c073c8608c88bb092d72f27944a7df1">effect_teleglow</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01533">map::furnname()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l01896">handle_harvest()</a>, <a class="el" href="iexamine_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="calendar_8cpp_source.html#l00547">season_of_year()</a>, <a class="el" href="map_8cpp_source.html#l04313">map::spawn_item()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, and <a class="el" href="calendar_8h_source.html#l00021">WINTER</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a8c743293fc45820598fd640ad19c0441" name="a8c743293fc45820598fd640ad19c0441"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c743293fc45820598fd640ad19c0441">&#9670;&nbsp;</a></span>flower_poppy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_poppy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompt pick (or drink nectar if able) poppy bud. </p>
<p >Not safe for player.</p>
<p >Drinking causes: -25 hunger, +20 fatigue, pkill2-70 effect and, 1 in 20 pkiller-1 addiction. Picking w/ env_resist &lt; 5 causes 1 in 3 sleep for 12 min and 4 dmg to each leg </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01915">1915</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>{</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="iexamine_8cpp.html#a7275f774429f8bae00796e9ea033fa7c">dead_plant</a>( <span class="keyword">true</span>, p, examp ) ) {</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>    }</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>    <span class="comment">// TODO: Get rid of this section and move it to eating</span></div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>    <span class="comment">// Two y/n prompts is just too much</span></div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>    <a class="code hl_class" href="classitem.html">item</a> poppy( <span class="stringliteral">&quot;nectar&quot;</span>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, 1 );</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="iexamine_8cpp.html#af7f617a2322cfcb84700260ef745ff6b">can_drink_nectar</a>( p, poppy ) ) {</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You feel woozy as you explore the %s. Drink?&quot;</span> ),</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>                       here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>        }</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 30_seconds ); <span class="comment">// You take your time...</span></div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You slowly suck up the nectar.&quot;</span> ) );</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>        p.<a class="code hl_function" href="classCharacter.html#a7eadf5cda537e47e73289fa9afe85e67">eat</a>( poppy );</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>        p.<a class="code hl_function" href="classCharacter.html#a67a7e1b4bc1b191c747a27a1575ee1a6">mod_fatigue</a>( 20 );</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>        p.<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a1b1e7277edfa2ba4a473cd58b150bd92">effect_pkill2</a>, 7_minutes );</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>        <span class="comment">// Please drink poppy nectar responsibly.</span></div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 20 ) ) {</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>            p.<a class="code hl_function" href="classCharacter.html#a218867c29011e068411140277abdab80">add_addiction</a>( <a class="code hl_enumvalue" href="pldata_8h.html#abffc2f52fa6cfeac2e388c6de0ac295bae84226181e271c2b3c7afb435e77dd3b">add_type::PKILLER</a>, 1 );</div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>        }</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>    }</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Pick %s?&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>    }</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span> </div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>    <span class="keywordtype">int</span> resist = p.<a class="code hl_function" href="classCharacter.html#a8bc4c7c3d24cec4d735cf276e02de93a">get_env_resist</a>( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;mouth&quot;</span> ) );</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span> </div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>    <span class="keywordflow">if</span>( resist &lt; 10 ) {</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>        <span class="comment">// Can&#39;t smell the flowers with a gas mask on!</span></div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This flower has a heady aroma.&quot;</span> ) );</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>    }</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span> </div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>    <span class="keyword">auto</span> recentWeather = <a class="code hl_function" href="group__Weather.html#gacc90b85ac1849784280f581a1fb7ade8">sum_conditions</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> - 10_minutes, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span> </div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>    <span class="comment">// If it has been raining recently, then this event is twice less likely.</span></div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>    <span class="keywordflow">if</span>( ( ( recentWeather.rain_amount &gt; 1 ) ? <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 6 ) : <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) &amp;&amp; resist &lt; 5 ) {</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>        <span class="comment">// Should user player::infect, but can&#39;t!</span></div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>        <span class="comment">// player::infect needs to be restructured to return a bool indicating success.</span></div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You fall asleep…&quot;</span> ) );</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>        p.<a class="code hl_function" href="classCharacter.html#a4886c07d74c7e8ad7ce2ced7d8238015">fall_asleep</a>( 2_hours );</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your legs are covered in the poppy&#39;s roots!&quot;</span> ) );</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>        p.<a class="code hl_function" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_l&quot;</span> ), 4 );</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>        p.<a class="code hl_function" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_r&quot;</span> ), 4 );</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 50;</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>    }</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span> </div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span> </div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>    <a class="code hl_function" href="iexamine_8cpp.html#a3afe8194537a31e6cb0289fe0fd4998a">handle_harvest</a>( p, <span class="stringliteral">&quot;poppy_bud&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>    <a class="code hl_function" href="iexamine_8cpp.html#a3afe8194537a31e6cb0289fe0fd4998a">handle_harvest</a>( p, <span class="stringliteral">&quot;withered&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>}</div>
<div class="ttc" id="aclassCharacter_html_a218867c29011e068411140277abdab80"><div class="ttname"><a href="classCharacter.html#a218867c29011e068411140277abdab80">Character::add_addiction</a></div><div class="ttdeci">void add_addiction(add_type type, int strength)</div><div class="ttdoc">Adds an addiction to the player.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l01959">suffer.cpp:1959</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4886c07d74c7e8ad7ce2ced7d8238015"><div class="ttname"><a href="classCharacter.html#a4886c07d74c7e8ad7ce2ced7d8238015">Character::fall_asleep</a></div><div class="ttdeci">void fall_asleep()</div><div class="ttdoc">Adds &quot;sleep&quot; to the player.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09276">character.cpp:9276</a></div></div>
<div class="ttc" id="aclassCharacter_html_a67a7e1b4bc1b191c747a27a1575ee1a6"><div class="ttname"><a href="classCharacter.html#a67a7e1b4bc1b191c747a27a1575ee1a6">Character::mod_fatigue</a></div><div class="ttdeci">virtual void mod_fatigue(int nfatigue)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04456">character.cpp:4456</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7eadf5cda537e47e73289fa9afe85e67"><div class="ttname"><a href="classCharacter.html#a7eadf5cda537e47e73289fa9afe85e67">Character::eat</a></div><div class="ttdeci">bool eat(item &amp;food, bool force=false)</div><div class="ttdoc">Used for eating entered comestible, returns true if comestible is successfully eaten.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00828">consumption.cpp:828</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8bc4c7c3d24cec4d735cf276e02de93a"><div class="ttname"><a href="classCharacter.html#a8bc4c7c3d24cec4d735cf276e02de93a">Character::get_env_resist</a></div><div class="ttdeci">int get_env_resist(bodypart_id bp) const override</div><div class="ttdoc">Returns overall env_resist on a body_part.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07027">character.cpp:7027</a></div></div>
<div class="ttc" id="agroup__Weather_html_gacc90b85ac1849784280f581a1fb7ade8"><div class="ttname"><a href="group__Weather.html#gacc90b85ac1849784280f581a1fb7ade8">sum_conditions</a></div><div class="ttdeci">weather_sum sum_conditions(const time_point &amp;start, const time_point &amp;end, const tripoint &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00153">weather.cpp:153</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a1b1e7277edfa2ba4a473cd58b150bd92"><div class="ttname"><a href="iexamine_8cpp.html#a1b1e7277edfa2ba4a473cd58b150bd92">effect_pkill2</a></div><div class="ttdeci">static const efftype_id effect_pkill2(&quot;pkill2&quot;)</div></div>
<div class="ttc" id="apldata_8h_html_abffc2f52fa6cfeac2e388c6de0ac295bae84226181e271c2b3c7afb435e77dd3b"><div class="ttname"><a href="pldata_8h.html#abffc2f52fa6cfeac2e388c6de0ac295bae84226181e271c2b3c7afb435e77dd3b">add_type::PKILLER</a></div><div class="ttdeci">@ PKILLER</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="suffer_8cpp_source.html#l01959">Character::add_addiction()</a>, <a class="el" href="creature_8cpp_source.html#l01007">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l08404">Character::apply_damage()</a>, <a class="el" href="iexamine_8cpp_source.html#l01868">can_drink_nectar()</a>, <a class="el" href="iexamine_8cpp_source.html#l01849">dead_plant()</a>, <a class="el" href="consumption_8cpp_source.html#l00828">Character::eat()</a>, <a class="el" href="iexamine_8cpp.html#a1b1e7277edfa2ba4a473cd58b150bd92">effect_pkill2</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="character_8cpp_source.html#l09276">Character::fall_asleep()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01533">map::furnname()</a>, <a class="el" href="character_8cpp_source.html#l07027">Character::get_env_resist()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l01896">handle_harvest()</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="enums_8h_source.html#l00264">m_warning</a>, <a class="el" href="character_8cpp_source.html#l04456">Character::mod_fatigue()</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="pldata_8h.html#abffc2f52fa6cfeac2e388c6de0ac295bae84226181e271c2b3c7afb435e77dd3b">PKILLER</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="weather_8cpp_source.html#l00153">sum_conditions()</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ae80c096877c8704c6e608cdf1cf758de" name="ae80c096877c8704c6e608cdf1cf758de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae80c096877c8704c6e608cdf1cf758de">&#9670;&nbsp;</a></span>flower_spurge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_spurge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a79cb04ffc3e5850531236742eb36b4de" name="a79cb04ffc3e5850531236742eb36b4de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79cb04ffc3e5850531236742eb36b4de">&#9670;&nbsp;</a></span>flower_tulip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_tulip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6f77465b3675373940b88779de1a2151" name="a6f77465b3675373940b88779de1a2151"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f77465b3675373940b88779de1a2151">&#9670;&nbsp;</a></span>fswitch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fswitch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01780">1780</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>{</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Flip the %s?&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) ) ) {</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>    }</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>    <a class="code hl_class" href="classint__id.html">ter_id</a> terid = here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp );</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>    p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 1_seconds );</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> tmp;</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>    tmp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = examp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>    <span class="keywordflow">for</span>( tmp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = examp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>; tmp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &lt;= examp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> + 5; tmp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>++ ) {</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>        <span class="keywordflow">for</span>( tmp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = 0; tmp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &lt; <a class="code hl_variable" href="game__constants_8h.html#a2f229f6ae9b3affb78ec8139ccdbf18e">MAPSIZE_X</a>; tmp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>++ ) {</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>            <span class="keywordflow">if</span>( terid == <a class="code hl_variable" href="mapdata_8cpp.html#af9adbccf7882feecf338c6bb30e66e66">t_switch_rg</a> ) {</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>                <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a26a6d9487dc1a4400e0b2d523b63cda4">t_rock_red</a> ) {</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>                    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#aa1c46a2b28b95e030ca153c4deaaf6ad">t_floor_red</a> );</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#aa1c46a2b28b95e030ca153c4deaaf6ad">t_floor_red</a> ) {</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>                    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a26a6d9487dc1a4400e0b2d523b63cda4">t_rock_red</a> );</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a6a7599f54d4e85effce3ed134583bdb9">t_rock_green</a> ) {</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>                    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a8512aac5a3fc2d227933e43a21e596ff">t_floor_green</a> );</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a8512aac5a3fc2d227933e43a21e596ff">t_floor_green</a> ) {</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>                    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a6a7599f54d4e85effce3ed134583bdb9">t_rock_green</a> );</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>                }</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( terid == <a class="code hl_variable" href="mapdata_8cpp.html#a8fcdba3a9256f236712f7f2d0a100f8b">t_switch_gb</a> ) {</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>                <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a78ed298fd0200b207d294ec292d528e0">t_rock_blue</a> ) {</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>                    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a58a2737b29e13c56171a4fa224efc57b">t_floor_blue</a> );</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a58a2737b29e13c56171a4fa224efc57b">t_floor_blue</a> ) {</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>                    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a78ed298fd0200b207d294ec292d528e0">t_rock_blue</a> );</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a6a7599f54d4e85effce3ed134583bdb9">t_rock_green</a> ) {</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>                    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a8512aac5a3fc2d227933e43a21e596ff">t_floor_green</a> );</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a8512aac5a3fc2d227933e43a21e596ff">t_floor_green</a> ) {</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>                    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a6a7599f54d4e85effce3ed134583bdb9">t_rock_green</a> );</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>                }</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( terid == <a class="code hl_variable" href="mapdata_8cpp.html#a5f957bfe26512594a885d393bc7219f5">t_switch_rb</a> ) {</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>                <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a78ed298fd0200b207d294ec292d528e0">t_rock_blue</a> ) {</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>                    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a58a2737b29e13c56171a4fa224efc57b">t_floor_blue</a> );</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a58a2737b29e13c56171a4fa224efc57b">t_floor_blue</a> ) {</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>                    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a78ed298fd0200b207d294ec292d528e0">t_rock_blue</a> );</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a26a6d9487dc1a4400e0b2d523b63cda4">t_rock_red</a> ) {</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>                    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#aa1c46a2b28b95e030ca153c4deaaf6ad">t_floor_red</a> );</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#aa1c46a2b28b95e030ca153c4deaaf6ad">t_floor_red</a> ) {</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>                    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a26a6d9487dc1a4400e0b2d523b63cda4">t_rock_red</a> );</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>                }</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( terid == <a class="code hl_variable" href="mapdata_8cpp.html#a181b00b9b8390fb8bc83a118b2d39737">t_switch_even</a> ) {</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>                <span class="keywordflow">if</span>( ( tmp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> - examp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> ) % 2 == 1 ) {</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>                    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a26a6d9487dc1a4400e0b2d523b63cda4">t_rock_red</a> ) {</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>                        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#aa1c46a2b28b95e030ca153c4deaaf6ad">t_floor_red</a> );</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#aa1c46a2b28b95e030ca153c4deaaf6ad">t_floor_red</a> ) {</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>                        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a26a6d9487dc1a4400e0b2d523b63cda4">t_rock_red</a> );</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a6a7599f54d4e85effce3ed134583bdb9">t_rock_green</a> ) {</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>                        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a8512aac5a3fc2d227933e43a21e596ff">t_floor_green</a> );</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a8512aac5a3fc2d227933e43a21e596ff">t_floor_green</a> ) {</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>                        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a6a7599f54d4e85effce3ed134583bdb9">t_rock_green</a> );</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a78ed298fd0200b207d294ec292d528e0">t_rock_blue</a> ) {</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>                        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a58a2737b29e13c56171a4fa224efc57b">t_floor_blue</a> );</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a58a2737b29e13c56171a4fa224efc57b">t_floor_blue</a> ) {</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>                        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( tmp, <a class="code hl_variable" href="mapdata_8cpp.html#a78ed298fd0200b207d294ec292d528e0">t_rock_blue</a> );</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>                    }</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>                }</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>            }</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>        }</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>    }</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You hear the rumble of rock shifting.&quot;</span> ) );</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;timed_events.add( <a class="code hl_enumvalue" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7ade80fcbd19e3b0efd70c9ece798150c0">TIMED_EVENT_TEMPLE_SPAWN</a>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + 3_turns );</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>}</div>
<div class="ttc" id="agame__constants_8h_html_a2f229f6ae9b3affb78ec8139ccdbf18e"><div class="ttname"><a href="game__constants_8h.html#a2f229f6ae9b3affb78ec8139ccdbf18e">MAPSIZE_X</a></div><div class="ttdeci">static constexpr int MAPSIZE_X</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00038">game_constants.h:38</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a181b00b9b8390fb8bc83a118b2d39737"><div class="ttname"><a href="mapdata_8cpp.html#a181b00b9b8390fb8bc83a118b2d39737">t_switch_even</a></div><div class="ttdeci">ter_id t_switch_even</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00729">mapdata.cpp:729</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a26a6d9487dc1a4400e0b2d523b63cda4"><div class="ttname"><a href="mapdata_8cpp.html#a26a6d9487dc1a4400e0b2d523b63cda4">t_rock_red</a></div><div class="ttdeci">ter_id t_rock_red</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00728">mapdata.cpp:728</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a58a2737b29e13c56171a4fa224efc57b"><div class="ttname"><a href="mapdata_8cpp.html#a58a2737b29e13c56171a4fa224efc57b">t_floor_blue</a></div><div class="ttdeci">ter_id t_floor_blue</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00728">mapdata.cpp:728</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a5f957bfe26512594a885d393bc7219f5"><div class="ttname"><a href="mapdata_8cpp.html#a5f957bfe26512594a885d393bc7219f5">t_switch_rb</a></div><div class="ttdeci">ter_id t_switch_rb</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00729">mapdata.cpp:729</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a6a7599f54d4e85effce3ed134583bdb9"><div class="ttname"><a href="mapdata_8cpp.html#a6a7599f54d4e85effce3ed134583bdb9">t_rock_green</a></div><div class="ttdeci">ter_id t_rock_green</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00728">mapdata.cpp:728</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a78ed298fd0200b207d294ec292d528e0"><div class="ttname"><a href="mapdata_8cpp.html#a78ed298fd0200b207d294ec292d528e0">t_rock_blue</a></div><div class="ttdeci">ter_id t_rock_blue</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00728">mapdata.cpp:728</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a8512aac5a3fc2d227933e43a21e596ff"><div class="ttname"><a href="mapdata_8cpp.html#a8512aac5a3fc2d227933e43a21e596ff">t_floor_green</a></div><div class="ttdeci">ter_id t_floor_green</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00728">mapdata.cpp:728</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a8fcdba3a9256f236712f7f2d0a100f8b"><div class="ttname"><a href="mapdata_8cpp.html#a8fcdba3a9256f236712f7f2d0a100f8b">t_switch_gb</a></div><div class="ttdeci">ter_id t_switch_gb</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00729">mapdata.cpp:729</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aa1c46a2b28b95e030ca153c4deaaf6ad"><div class="ttname"><a href="mapdata_8cpp.html#aa1c46a2b28b95e030ca153c4deaaf6ad">t_floor_red</a></div><div class="ttdeci">ter_id t_floor_red</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00728">mapdata.cpp:728</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_af9adbccf7882feecf338c6bb30e66e66"><div class="ttname"><a href="mapdata_8cpp.html#af9adbccf7882feecf338c6bb30e66e66">t_switch_rg</a></div><div class="ttdeci">ter_id t_switch_rg</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00729">mapdata.cpp:729</a></div></div>
<div class="ttc" id="atimed__event_8h_html_ad10eb56251f11e9a5694491529afbcc7ade80fcbd19e3b0efd70c9ece798150c0"><div class="ttname"><a href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7ade80fcbd19e3b0efd70c9ece798150c0">TIMED_EVENT_TEMPLE_SPAWN</a></div><div class="ttdeci">@ TIMED_EVENT_TEMPLE_SPAWN</div><div class="ttdef"><b>Definition:</b> <a href="timed__event_8h_source.html#l00021">timed_event.h:21</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="enums_8h_source.html#l00264">m_warning</a>, <a class="el" href="game__constants_8h_source.html#l00038">MAPSIZE_X</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="mapdata_8cpp_source.html#l00728">t_floor_blue</a>, <a class="el" href="mapdata_8cpp_source.html#l00728">t_floor_green</a>, <a class="el" href="mapdata_8cpp_source.html#l00728">t_floor_red</a>, <a class="el" href="mapdata_8cpp_source.html#l00728">t_rock_blue</a>, <a class="el" href="mapdata_8cpp_source.html#l00728">t_rock_green</a>, <a class="el" href="mapdata_8cpp_source.html#l00728">t_rock_red</a>, <a class="el" href="mapdata_8cpp_source.html#l00729">t_switch_even</a>, <a class="el" href="mapdata_8cpp_source.html#l00729">t_switch_gb</a>, <a class="el" href="mapdata_8cpp_source.html#l00729">t_switch_rb</a>, <a class="el" href="mapdata_8cpp_source.html#l00729">t_switch_rg</a>, <a class="el" href="map_8cpp_source.html#l01562">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, <a class="el" href="map_8cpp_source.html#l01773">map::tername()</a>, <a class="el" href="timed__event_8h_source.html#l00021">TIMED_EVENT_TEMPLE_SPAWN</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="point_8h_source.html#l00136">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00137">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00138">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="abb0c2d8b376175c6d36c01540095c652" name="abb0c2d8b376175c6d36c01540095c652"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb0c2d8b376175c6d36c01540095c652">&#9670;&nbsp;</a></span>fungus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fungus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove furniture. </p>
<p >Add spore effect. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02225">2225</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>{</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s crumbles into spores!&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) );</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>    <a class="code hl_class" href="classfungal__effects.html">fungal_effects</a>( *<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>, here ).<a class="code hl_function" href="classfungal__effects.html#af20c43b3b075705a45a9cbf87aa39df4">create_spores</a>( examp, &amp;p );</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>    p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 50;</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>}</div>
<div class="ttc" id="aclassfungal__effects_html"><div class="ttname"><a href="classfungal__effects.html">fungal_effects</a></div><div class="ttdef"><b>Definition:</b> <a href="fungal__effects_8h_source.html#l00010">fungal_effects.h:11</a></div></div>
<div class="ttc" id="aclassfungal__effects_html_af20c43b3b075705a45a9cbf87aa39df4"><div class="ttname"><a href="classfungal__effects.html#af20c43b3b075705a45a9cbf87aa39df4">fungal_effects::create_spores</a></div><div class="ttdeci">void create_spores(const tripoint &amp;p, Creature *origin=nullptr)</div><div class="ttdoc">Makes spores at p.</div><div class="ttdef"><b>Definition:</b> <a href="fungal__effects_8cpp_source.html#l00114">fungal_effects.cpp:114</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="fungal__effects_8cpp_source.html#l00114">fungal_effects::create_spores()</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01533">map::furnname()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, and <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l06734">colorized_ter_name_flags_at()</a>, <a class="el" href="monattack_8cpp_source.html#l01729">mattack::fungus_corporate()</a>, <a class="el" href="iexamine_8cpp_source.html#l02394">harvest_plant()</a>, <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l08773">game::walk_move()</a>.</p>

</div>
</div>
<a id="abf0f3ba40d0f370a12e73d6ed01a83f1" name="abf0f3ba40d0f370a12e73d6ed01a83f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf0f3ba40d0f370a12e73d6ed01a83f1">&#9670;&nbsp;</a></span>fvat_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fvat_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03017">3017</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span>{</div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span>    <a class="code hl_class" href="classstring__id.html">itype_id</a> brew_type;</div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span>    std::string brew_nname;</div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span>    <span class="keywordtype">bool</span> to_deposit = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">auto</span> vat_volume = <a class="code hl_function" href="namespaceunits.html#a13286963083a3168f592347b8c335ea4">units::from_liter</a>( 50 );</div>
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"> 3023</span>    <span class="keywordtype">bool</span> vat_full = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span>    <span class="keywordtype">bool</span> ferment = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span>    <span class="keywordtype">bool</span> brew_present = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>    <span class="keywordtype">int</span> charges_on_ground = 0;</div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>    <span class="keyword">auto</span> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> item_it = items.begin(); item_it != items.end(); ) {</div>
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"> 3030</span>        <span class="keywordflow">if</span>( !item_it-&gt;is_brewable() || brew_present ) {</div>
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"> 3031</span>            <span class="comment">// This isn&#39;t a brew or there was already another kind of brew inside,</span></div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span>            <span class="comment">// so this has to be moved.</span></div>
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"> 3033</span>            items.<a class="code hl_function" href="classmap__stack.html#abbc2e2342baf6a35d2f6422a6bc78bbb">insert</a>( *item_it );</div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span>            <span class="comment">// This will add items to a space near the vat, because it&#39;s flagged as NOITEM.</span></div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span>            item_it = items.erase( item_it );</div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>            item_it++;</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span>            brew_present = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span>        }</div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span>    }</div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span>    <span class="keywordflow">if</span>( !brew_present ) {</div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This keg is empty.&quot;</span> ) );</div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>        <span class="comment">// TODO: Allow using brews from crafting inventory</span></div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>        <span class="keyword">const</span> <span class="keyword">auto</span> b_inv = p.<a class="code hl_function" href="classvisitable.html#a5b3c37fbe8209cab68aa26d3cc7f4300">items_with</a>( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l03045" name="l03045"></a><span class="lineno"> 3045</span>            <span class="keywordflow">return</span> it.<a class="code hl_function" href="classitem.html#a9781b39e9c1a98383f202db9935b6a23">is_brewable</a>();</div>
<div class="line"><a id="l03046" name="l03046"></a><span class="lineno"> 3046</span>        } );</div>
<div class="line"><a id="l03047" name="l03047"></a><span class="lineno"> 3047</span>        <span class="keywordflow">if</span>( b_inv.empty() ) {</div>
<div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You have no brew to ferment.&quot;</span> ) );</div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span>        }</div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span>        <span class="comment">// Make lists of unique typeids and names for the menu</span></div>
<div class="line"><a id="l03052" name="l03052"></a><span class="lineno"> 3052</span>        <span class="comment">// Code shamelessly stolen from the crop planting function!</span></div>
<div class="line"><a id="l03053" name="l03053"></a><span class="lineno"> 3053</span>        std::vector&lt;itype_id&gt; b_types;</div>
<div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span>        std::vector&lt;std::string&gt; b_names;</div>
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"> 3055</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;<a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> : b_inv ) {</div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacedetail.html#ad06b74f7502b63cbab323bba1ca3f72b">std::find</a>( b_types.begin(), b_types.end(), <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>-&gt;typeId() ) == b_types.end() ) {</div>
<div class="line"><a id="l03057" name="l03057"></a><span class="lineno"> 3057</span>                b_types.push_back( <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>-&gt;typeId() );</div>
<div class="line"><a id="l03058" name="l03058"></a><span class="lineno"> 3058</span>                b_names.push_back( <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>-&gt;typeId() ) );</div>
<div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span>            }</div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span>        }</div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>        <span class="comment">// Choose brew from list</span></div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>        <span class="keywordtype">int</span> b_index = 0;</div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>        <span class="keywordflow">if</span>( b_types.size() &gt; 1 ) {</div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>            b_index = <a class="code hl_class" href="classuilist.html">uilist</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use which brew?&quot;</span> ), b_names );</div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span>        } <span class="keywordflow">else</span> { <span class="comment">//Only one brew type was in inventory, so it&#39;s automatically used</span></div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Set %s in the vat?&quot;</span> ), b_names[0] ) ) {</div>
<div class="line"><a id="l03067" name="l03067"></a><span class="lineno"> 3067</span>                b_index = -1;</div>
<div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span>            }</div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span>        }</div>
<div class="line"><a id="l03070" name="l03070"></a><span class="lineno"> 3070</span>        <span class="keywordflow">if</span>( b_index &lt; 0 ) {</div>
<div class="line"><a id="l03071" name="l03071"></a><span class="lineno"> 3071</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03072" name="l03072"></a><span class="lineno"> 3072</span>        }</div>
<div class="line"><a id="l03073" name="l03073"></a><span class="lineno"> 3073</span>        to_deposit = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span>        brew_type = b_types[b_index];</div>
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"> 3075</span>        brew_nname = <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( brew_type );</div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span>        <a class="code hl_class" href="classitem.html">item</a> &amp;brew = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code hl_function" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>();</div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span>        brew_type = brew.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>();</div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span>        brew_nname = <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( brew_type );</div>
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"> 3080</span>        charges_on_ground = brew.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a id="l03081" name="l03081"></a><span class="lineno"> 3081</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This keg contains %s (%d), %0.f%% full.&quot;</span> ),</div>
<div class="line"><a id="l03082" name="l03082"></a><span class="lineno"> 3082</span>                 brew.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>(), brew.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, brew.<a class="code hl_function" href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">volume</a>() * 100.0 / vat_volume );</div>
<div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span>        <span class="keyword">enum</span> <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a> { ADD_BREW, REMOVE_BREW, START_FERMENT };</div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span>        <a class="code hl_class" href="classuilist.html">uilist</a> selectmenu;</div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>        selectmenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Select an action&quot;</span> );</div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( ADD_BREW, ( p.<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( brew_type ) &gt; 0 ), <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Add more %s to the vat&quot;</span> ), brew_nname );</div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( REMOVE_BREW, brew.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ), <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove %s from the vat&quot;</span> ), brew.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l03090" name="l03090"></a><span class="lineno"> 3090</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( START_FERMENT, <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Start fermenting cycle&quot;</span> ) );</div>
<div class="line"><a id="l03091" name="l03091"></a><span class="lineno"> 3091</span>        selectmenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span>        <span class="keywordflow">switch</span>( selectmenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span>            <span class="keywordflow">case</span> ADD_BREW: {</div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span>                to_deposit = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03095" name="l03095"></a><span class="lineno"> 3095</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03096" name="l03096"></a><span class="lineno"> 3096</span>            }</div>
<div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span>            <span class="keywordflow">case</span> REMOVE_BREW: {</div>
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"> 3098</span>                <a class="code hl_function" href="namespaceliquid__handler.html#ae4b5ac39dbc51d5559ba9d6f901395f0">liquid_handler::handle_liquid_from_ground</a>( here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), examp );</div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"> 3099</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03100" name="l03100"></a><span class="lineno"> 3100</span>            }</div>
<div class="line"><a id="l03101" name="l03101"></a><span class="lineno"> 3101</span>            <span class="keywordflow">case</span> START_FERMENT: {</div>
<div class="line"><a id="l03102" name="l03102"></a><span class="lineno"> 3102</span>                ferment = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span>            }</div>
<div class="line"><a id="l03105" name="l03105"></a><span class="lineno"> 3105</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03106" name="l03106"></a><span class="lineno"> 3106</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a id="l03107" name="l03107"></a><span class="lineno"> 3107</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span>        }</div>
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"> 3109</span>    }</div>
<div class="line"><a id="l03110" name="l03110"></a><span class="lineno"> 3110</span>    <span class="keywordflow">if</span>( to_deposit ) {</div>
<div class="line"><a id="l03111" name="l03111"></a><span class="lineno"> 3111</span>        <a class="code hl_class" href="classitem.html">item</a> brew( brew_type, <a class="code hl_variable" href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a> );</div>
<div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span>        <span class="keywordtype">int</span> charges_held = p.<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( brew_type );</div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span>        brew.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = charges_on_ground;</div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; charges_held &amp;&amp; !vat_full; i++ ) {</div>
<div class="line"><a id="l03115" name="l03115"></a><span class="lineno"> 3115</span>            p.<a class="code hl_function" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( brew_type, 1 );</div>
<div class="line"><a id="l03116" name="l03116"></a><span class="lineno"> 3116</span>            brew.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>++;</div>
<div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span>            <span class="keywordflow">if</span>( brew.<a class="code hl_function" href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">volume</a>() &gt;= vat_volume ) {</div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span>                vat_full = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>            }</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span>        }</div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Set %s in the vat.&quot;</span> ), brew_nname );</div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The keg now contains %s (%d), %0.f%% full.&quot;</span> ),</div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span>                 brew.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>(), brew.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, brew.<a class="code hl_function" href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">volume</a>() * 100.0 / vat_volume );</div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>        here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l03125" name="l03125"></a><span class="lineno"> 3125</span>        <span class="comment">//This is needed to bypass NOITEM</span></div>
<div class="line"><a id="l03126" name="l03126"></a><span class="lineno"> 3126</span>        here.<a class="code hl_function" href="classmap.html#a64d3ea19afd7a9c65f072dd65fb15405">add_item</a>( examp, brew );</div>
<div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 20_seconds );</div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span>        <span class="keywordflow">if</span>( !vat_full ) {</div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>            ferment = <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Start fermenting cycle?&quot;</span> ) );</div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>        }</div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span>    }</div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span>    <span class="keywordflow">if</span>( vat_full || ferment ) {</div>
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"> 3133</span>        here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code hl_function" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code hl_function" href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">set_age</a>( 0_turns );</div>
<div class="line"><a id="l03134" name="l03134"></a><span class="lineno"> 3134</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a84d3ee009aa3efcb5140032dc87e6b1b">f_fvat_full</a> );</div>
<div class="line"><a id="l03135" name="l03135"></a><span class="lineno"> 3135</span>        <span class="keywordflow">if</span>( vat_full ) {</div>
<div class="line"><a id="l03136" name="l03136"></a><span class="lineno"> 3136</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The vat is full, so you close the lid and start the fermenting cycle.&quot;</span> ) );</div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You close the lid and start the fermenting cycle.&quot;</span> ) );</div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span>        }</div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>    }</div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span>}</div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09951">item.cpp:9951</a></div></div>
<div class="ttc" id="aclassitem_html_a51eafbdf8b331d88b741c0c527f98eb9"><div class="ttname"><a href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">item::volume</a></div><div class="ttdeci">units::volume volume(bool integral=false) const</div><div class="ttdoc">Total volume of an item accounting for all contained/integrated items NOTE: Result is rounded up to n...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05129">item.cpp:5129</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02199">item.h:2199</a></div></div>
<div class="ttc" id="aclassitem_html_a9781b39e9c1a98383f202db9935b6a23"><div class="ttname"><a href="classitem.html#a9781b39e9c1a98383f202db9935b6a23">item::is_brewable</a></div><div class="ttdeci">bool is_brewable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06628">item.cpp:6628</a></div></div>
<div class="ttc" id="aclassitem_html_ab55a5629e6fe769a7ac314c02d25ecef"><div class="ttname"><a href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">item::set_age</a></div><div class="ttdeci">void set_age(const time_duration &amp;age)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10039">item.cpp:10039</a></div></div>
<div class="ttc" id="aclassmap__stack_html_abbc2e2342baf6a35d2f6422a6bc78bbb"><div class="ttname"><a href="classmap__stack.html#abbc2e2342baf6a35d2f6422a6bc78bbb">map_stack::insert</a></div><div class="ttdeci">void insert(const item &amp;newitem) override</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00158">map.cpp:158</a></div></div>
<div class="ttc" id="aclassvisitable_html_a517e20b6f6c13b8316d5cce8e310b871"><div class="ttname"><a href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">visitable::charges_of</a></div><div class="ttdeci">int charges_of(const itype_id &amp;what, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, std::function&lt; void(int)&gt; visitor=nullptr) const</div><div class="ttdoc">Count maximum available charges from this instance and any contained items.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00946">visitable.cpp:946</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a></div><div class="ttdeci">@ LIQUID</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00175">enums.h:175</a></div></div>
<div class="ttc" id="amagic_8cpp_html_aa93a189fb7bbbf87be54bcc7bd11bb6f"><div class="ttname"><a href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a></div><div class="ttdeci">constexpr double b</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01031">magic.cpp:1031</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a84d3ee009aa3efcb5140032dc87e6b1b"><div class="ttname"><a href="mapdata_8cpp.html#a84d3ee009aa3efcb5140032dc87e6b1b">f_fvat_full</a></div><div class="ttdeci">furn_id f_fvat_full</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01122">mapdata.cpp:1122</a></div></div>
<div class="ttc" id="anamespaceliquid__handler_html_ae4b5ac39dbc51d5559ba9d6f901395f0"><div class="ttname"><a href="namespaceliquid__handler.html#ae4b5ac39dbc51d5559ba9d6f901395f0">liquid_handler::handle_liquid_from_ground</a></div><div class="ttdeci">bool handle_liquid_from_ground(map_stack::iterator on_ground, const tripoint &amp;pos, const int radius)</div><div class="ttdoc">Handle finite liquid from ground.</div><div class="ttdef"><b>Definition:</b> <a href="handle__liquid_8cpp_source.html#l00114">handle_liquid.cpp:114</a></div></div>
<div class="ttc" id="anamespaceunits_html_a13286963083a3168f592347b8c335ea4"><div class="ttname"><a href="namespaceunits.html#a13286963083a3168f592347b8c335ea4">units::from_liter</a></div><div class="ttdeci">constexpr quantity&lt; value_type, volume_in_milliliter_tag &gt; from_liter(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units__volume_8h_source.html#l00032">units_volume.h:32</a></div></div>
<div class="ttc" id="aui_8h_html_a06d5f3667ed71fa40939c4e7367e30ce"><div class="ttname"><a href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a></div><div class="ttdeci">const int MENU_AUTOASSIGN</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00031">ui.h:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04454">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="magic_8cpp_source.html#l01031">b</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="item_8h_source.html#l02199">item::charges</a>, <a class="el" href="visitable_8cpp_source.html#l00946">visitable&lt; T &gt;::charges_of()</a>, <a class="el" href="mapdata_8cpp_source.html#l01122">f_fvat_full</a>, <a class="el" href="fmtlib__format_8h_source.html#l03355">detail::find()</a>, <a class="el" href="units__volume_8h_source.html#l00032">units::from_liter()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00114">liquid_handler::handle_liquid_from_ground()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l04247">map::i_clear()</a>, <a class="el" href="map_8cpp_source.html#l00158">map_stack::insert()</a>, <a class="el" href="item_8cpp_source.html#l06628">item::is_brewable()</a>, <a class="el" href="visitable_8cpp_source.html#l00324">visitable&lt; T &gt;::items_with()</a>, <a class="el" href="enums_8h_source.html#l00175">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="item_8cpp_source.html#l06438">item::made_of()</a>, <a class="el" href="ui_8h_source.html#l00031">MENU_AUTOASSIGN</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="item_8cpp_source.html#l09951">item::nname()</a>, <a class="el" href="item__stack_8cpp_source.html#l00083">item_stack::only_item()</a>, <a class="el" href="path__info_8cpp_source.html#l00230">PATH_INFO::options()</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="item_8cpp_source.html#l10039">item::set_age()</a>, <a class="el" href="calendar_8cpp_source.html#l00033">calendar::start_of_cataclysm</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l04574">item::tname()</a>, <a class="el" href="item_8cpp_source.html#l08374">item::typeId()</a>, <a class="el" href="character_8cpp_source.html#l09665">Character::use_charges()</a>, and <a class="el" href="item_8cpp_source.html#l05129">item::volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="aab259c0833ed22f2dad9ab91e9bb3306" name="aab259c0833ed22f2dad9ab91e9bb3306"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab259c0833ed22f2dad9ab91e9bb3306">&#9670;&nbsp;</a></span>fvat_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fvat_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03143">3143</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span>{</div>
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"> 3145</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03146" name="l03146"></a><span class="lineno"> 3146</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items_here = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l03147" name="l03147"></a><span class="lineno"> 3147</span>    <span class="keywordflow">if</span>( items_here.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;fvat_full was empty!&quot;</span> );</div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a8e7682f21923f2776bfbe53f63ef1971">f_fvat_empty</a> );</div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span>    }</div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span> </div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> &amp;it : items_here ) {</div>
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"> 3154</span>        <span class="keywordflow">if</span>( !it.made_of( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) ) {</div>
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"> 3155</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You remove %s from the vat.&quot;</span> ), it.tname() );</div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span>            here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), it );</div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span>            here.<a class="code hl_function" href="classmap.html#ad12f3e2ddb1c38ca6b8e75a1a9e48a3d">i_rem</a>( examp, &amp;it );</div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span>        }</div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>    }</div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span> </div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span>    <span class="keywordflow">if</span>( items_here.empty() ) {</div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a8e7682f21923f2776bfbe53f63ef1971">f_fvat_empty</a> );</div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03164" name="l03164"></a><span class="lineno"> 3164</span>    }</div>
<div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span> </div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>    <a class="code hl_class" href="classitem.html">item</a> &amp;brew_i = *items_here.begin();</div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>    <span class="comment">// Does the vat contain unfermented brew, or already fermented booze?</span></div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span>    <span class="comment">// TODO: Allow &quot;recursive brewing&quot; to continue without player having to check on it</span></div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span>    <span class="keywordflow">if</span>( brew_i.<a class="code hl_function" href="classitem.html#a9781b39e9c1a98383f202db9935b6a23">is_brewable</a>() ) {</div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There&#39;s a vat of %s set to ferment there.&quot;</span> ), brew_i.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span> </div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span>        <span class="comment">// TODO: change brew_time to return time_duration</span></div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span>        <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> brew_time = brew_i.<a class="code hl_function" href="classitem.html#a1c4782661219fccd444ab8d91ec04d58">brewing_time</a>();</div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span>        <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> progress = brew_i.<a class="code hl_function" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>();</div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span>        <span class="keywordflow">if</span>( progress &lt; brew_time ) {</div>
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"> 3176</span>            <span class="keywordtype">int</span> hours = to_hours&lt;int&gt;( brew_time - progress );</div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>            <span class="keywordflow">if</span>( hours &lt; 1 ) {</div>
<div class="line"><a id="l03178" name="l03178"></a><span class="lineno"> 3178</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It will finish brewing in less than an hour.&quot;</span> ) );</div>
<div class="line"><a id="l03179" name="l03179"></a><span class="lineno"> 3179</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;It will finish brewing in about %d hour.&quot;</span>,</div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span>                                   <span class="stringliteral">&quot;It will finish brewing in about %d hours.&quot;</span>,</div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span>                                   hours ), hours );</div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span>            }</div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span>        }</div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span> </div>
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"> 3187</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Finish brewing?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span>            <span class="keyword">const</span> <span class="keyword">auto</span> results = brew_i.<a class="code hl_function" href="classitem.html#a099ea278b365213e371a3c125b7d8342">brewing_results</a>();</div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span> </div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span>            here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"> 3191</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> : results ) {</div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>                <span class="comment">// TODO: Different age based on settings</span></div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span>                <a class="code hl_class" href="classitem.html">item</a> booze( <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>, brew_i.<a class="code hl_function" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>(), brew_i.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> );</div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span>                here.<a class="code hl_function" href="classmap.html#a64d3ea19afd7a9c65f072dd65fb15405">add_item</a>( examp, booze );</div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span>                <span class="keywordflow">if</span>( booze.made_of( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) ) {</div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is now ready for bottling.&quot;</span> ), booze.tname() );</div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span>                }</div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span>            }</div>
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"> 3199</span> </div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>            p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 5_seconds );</div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>            p.<a class="code hl_function" href="classCharacter.html#a3d70ebd707bada8879208e98f07f7223">practice</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a>, std::min( to_minutes&lt;int&gt;( brew_time ) / 10, 100 ) );</div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span>        }</div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span> </div>
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"> 3204</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There&#39;s a vat of fermented %s there.&quot;</span> ), brew_i.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span>    }</div>
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"> 3208</span> </div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span>    <span class="keyword">const</span> std::string booze_name = brew_i.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>();</div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceliquid__handler.html#ae4b5ac39dbc51d5559ba9d6f901395f0">liquid_handler::handle_liquid_from_ground</a>( items_here.begin(), examp ) ) {</div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a8e7682f21923f2776bfbe53f63ef1971">f_fvat_empty</a> );</div>
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"> 3212</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You squeeze the last drops of %s from the vat.&quot;</span> ), booze_name );</div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span>    }</div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>}</div>
<div class="ttc" id="aclassCharacter_html_a3d70ebd707bada8879208e98f07f7223"><div class="ttname"><a href="classCharacter.html#a3d70ebd707bada8879208e98f07f7223">Character::practice</a></div><div class="ttdeci">void practice(const skill_id &amp;id, int amount, int cap=99, bool suppress_warning=false)</div><div class="ttdoc">This handles giving xp for a skill.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03417">character.cpp:3417</a></div></div>
<div class="ttc" id="aclassitem_html_a099ea278b365213e371a3c125b7d8342"><div class="ttname"><a href="classitem.html#a099ea278b365213e371a3c125b7d8342">item::brewing_results</a></div><div class="ttdeci">const std::vector&lt; itype_id &gt; &amp; brewing_results() const</div><div class="ttdoc">The results of fermenting this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05976">item.cpp:5976</a></div></div>
<div class="ttc" id="aclassitem_html_a1c4782661219fccd444ab8d91ec04d58"><div class="ttname"><a href="classitem.html#a1c4782661219fccd444ab8d91ec04d58">item::brewing_time</a></div><div class="ttdeci">time_duration brewing_time() const</div><div class="ttdoc">Time for this item to be fully fermented.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05971">item.cpp:5971</a></div></div>
<div class="ttc" id="aclassitem_html_a46b9bb1181827a365eb83d935c663677"><div class="ttname"><a href="classitem.html#a46b9bb1181827a365eb83d935c663677">item::birthday</a></div><div class="ttdeci">time_point birthday() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10055">item.cpp:10055</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ad0e39d29af45ea0a03f280197b35ca72"><div class="ttname"><a href="iexamine_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a></div><div class="ttdeci">static const skill_id skill_cooking(&quot;cooking&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_a8e7682f21923f2776bfbe53f63ef1971"><div class="ttname"><a href="mapdata_8cpp.html#a8e7682f21923f2776bfbe53f63ef1971">f_fvat_empty</a></div><div class="ttdeci">furn_id f_fvat_empty</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01122">mapdata.cpp:1122</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04454">map::add_item()</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l10034">item::age()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="item_8cpp_source.html#l10055">item::birthday()</a>, <a class="el" href="item_8cpp_source.html#l05976">item::brewing_results()</a>, <a class="el" href="item_8cpp_source.html#l05971">item::brewing_time()</a>, <a class="el" href="item_8h_source.html#l02199">item::charges</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="mapdata_8cpp_source.html#l01122">f_fvat_empty</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00114">liquid_handler::handle_liquid_from_ground()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l04247">map::i_clear()</a>, <a class="el" href="map_8cpp_source.html#l04222">map::i_rem()</a>, <a class="el" href="item_8cpp_source.html#l06628">item::is_brewable()</a>, <a class="el" href="enums_8h_source.html#l00175">LIQUID</a>, <a class="el" href="item_8cpp_source.html#l06438">item::made_of()</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="character_8cpp_source.html#l03417">Character::practice()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="iexamine_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a>, <a class="el" href="item_8cpp_source.html#l04574">item::tname()</a>, and <a class="el" href="translations_8cpp_source.html#l00036">vgettext()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l01513">activity_handlers::fill_liquid_do_turn()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ac5ce69b72dee988c76accafb9e881709" name="ac5ce69b72dee988c76accafb9e881709"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5ce69b72dee988c76accafb9e881709">&#9670;&nbsp;</a></span>gaspump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::gaspump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use "gas pump." Will pump any liquids on tile. </p>
Dexterity decreases chance of spilling gas from a pump Dexterity decreases amount of gas spilled from a pump 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00356">356</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>{</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use the %s?&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) ) ) {</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    }</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    <span class="keyword">auto</span> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> item_it = items.begin(); item_it != items.end(); ++item_it ) {</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        <span class="keywordflow">if</span>( item_it-&gt;made_of( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) ) {<span class="comment"></span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span><span class="comment">            ///\EFFECT_DEX decreases chance of spilling gas from a pump</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span><span class="comment"></span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 + p.<a class="code hl_function" href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">get_dex</a>() ) ) {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You accidentally spill the %s.&quot;</span> ), item_it-&gt;type_name() );</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>                <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">auto</span> max_spill_volume = <a class="code hl_function" href="namespaceunits.html#a13286963083a3168f592347b8c335ea4">units::from_liter</a>( 1 );</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> max_spill_charges = std::max( 1, item_it-&gt;charges_per_volume( max_spill_volume ) );<span class="comment"></span></div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span><span class="comment">                ///\EFFECT_DEX decreases amount of gas spilled from a pump</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span><span class="comment"></span>                <span class="keyword">const</span> <span class="keywordtype">int</span> qty = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, max_spill_charges * 8.0 / std::max( 1, p.<a class="code hl_function" href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">get_dex</a>() ) );</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span> </div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>                <a class="code hl_class" href="classitem.html">item</a> spill = item_it-&gt;<a class="code hl_function" href="classitem.html#a3c47a272ada88bc7d3d31a6a4b8a672c">split</a>( qty );</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>                <span class="keywordflow">if</span>( spill.<a class="code hl_function" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>                    here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), *item_it );</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>                    items.erase( item_it );</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>                    here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), spill );</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>                }</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span> </div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>                <a class="code hl_function" href="namespaceliquid__handler.html#ae4b5ac39dbc51d5559ba9d6f901395f0">liquid_handler::handle_liquid_from_ground</a>( item_it, examp, 1 );</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>            }</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        }</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    }</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Out of order.&quot;</span> ) );</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>}</div>
<div class="ttc" id="aclassCharacter_html_a34a927d0f161ac92ab0d462397828bd5"><div class="ttname"><a href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">Character::get_dex</a></div><div class="ttdeci">virtual int get_dex() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04094">character.cpp:4094</a></div></div>
<div class="ttc" id="aclassitem_html_a3c47a272ada88bc7d3d31a6a4b8a672c"><div class="ttname"><a href="classitem.html#a3c47a272ada88bc7d3d31a6a4b8a672c">item::split</a></div><div class="ttdeci">item split(int qty)</div><div class="ttdoc">Splits a count-by-charges item always leaving source item with minimum of 1 charge.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00724">item.cpp:724</a></div></div>
<div class="ttc" id="aclassitem_html_a4d5555082454b3cb192f59a70838c891"><div class="ttname"><a href="classitem.html#a4d5555082454b3cb192f59a70838c891">item::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00735">item.cpp:735</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="units__volume_8h_source.html#l00032">units::from_liter()</a>, <a class="el" href="character_8cpp_source.html#l04094">Character::get_dex()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00114">liquid_handler::handle_liquid_from_ground()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="item_8cpp_source.html#l00735">item::is_null()</a>, <a class="el" href="enums_8h_source.html#l00175">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="item_8cpp_source.html#l00724">item::split()</a>, and <a class="el" href="map_8cpp_source.html#l01773">map::tername()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l01513">activity_handlers::fill_liquid_do_turn()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a063625d8728319f6e54a792b609f1719" name="a063625d8728319f6e54a792b609f1719"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a063625d8728319f6e54a792b609f1719">&#9670;&nbsp;</a></span>get_harvest_items()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; <a class="el" href="classitem.html">item</a> &gt; iexamine::get_harvest_items </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>plant_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seed_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>byproducts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Items that appear when a generic plant is harvested. </p>
<p >Seed <a class="el" href="structislot__seed.html">islot_seed</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>The seed type, must have a <a class="el" href="structitype.html#ad55b9f82e65f57e8cfb6ecc4fc0445cb">itype::seed</a> slot. </td></tr>
    <tr><td class="paramname">plant_count</td><td>Number of fruits to generate. For charge-based items, this specifies multiples of the default charge. </td></tr>
    <tr><td class="paramname">seed_count</td><td>Number of seeds to generate. </td></tr>
    <tr><td class="paramname">byproducts</td><td>If true, byproducts (like straw, withered plants, see <a class="el" href="structislot__seed.html#aeaf44d52989cf1aba2bd0fbf17c37519">islot_seed::byproducts</a>) are included. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02350">2350</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span>{</div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>    std::list&lt;item&gt; <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>;</div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span>    <span class="keywordflow">if</span>( !type.seed ) {</div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>        <span class="keywordflow">return</span> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>;</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>    }</div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structislot__seed.html">islot_seed</a> &amp;seed_data = *type.seed;</div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>    <span class="comment">// This is a temporary measure, itype should instead provide appropriate accessors</span></div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>    <span class="comment">// to expose data about the seed item to allow harvesting to function.</span></div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp;seed_type = type.get_id();</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span> </div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span>    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_function" href="namespaceom__direction.html#a75c0342ea30288a5a6d5bdbff38f7cde">add</a> = [&amp;]( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp; <a class="code hl_function" href="classint__id.html#a09d4f824b2540da7e682d10cdf324081">id</a>, <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> ) {</div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>        <a class="code hl_class" href="classitem.html">item</a> new_item( <span class="keywordtype">id</span>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>        <span class="keywordflow">if</span>( new_item.count_by_charges() &amp;&amp; <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> &gt; 0 ) {</div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>            new_item.charges *= <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>;</div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>            new_item.charges /= seed_data.<a class="code hl_variable" href="structislot__seed.html#a78d156b1edac50b5dca40ad9c2bc093e">fruit_div</a>;</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>            <span class="keywordflow">if</span>( new_item.charges &lt;= 0 ) {</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>                new_item.charges = 1;</div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>            }</div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>            <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.push_back( new_item );</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> &gt; 0 ) {</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>            <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.insert( <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.begin(), <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>, new_item );</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>        }</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>    };</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span> </div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>    <span class="keywordflow">if</span>( seed_data.<a class="code hl_variable" href="structislot__seed.html#a7eb466642b2a218be8e60deff15c1c1e">spawn_seeds</a> ) {</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>        <a class="code hl_function" href="namespaceom__direction.html#a75c0342ea30288a5a6d5bdbff38f7cde">add</a>( seed_type, seed_count );</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>    }</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span> </div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>    <a class="code hl_function" href="namespaceom__direction.html#a75c0342ea30288a5a6d5bdbff38f7cde">add</a>( seed_data.<a class="code hl_variable" href="structislot__seed.html#a716438e2fcc04356b120fa909f15f68c">fruit_id</a>, plant_count );</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span> </div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>    <span class="keywordflow">if</span>( byproducts ) {</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;<a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> : seed_data.<a class="code hl_variable" href="structislot__seed.html#aeaf44d52989cf1aba2bd0fbf17c37519">byproducts</a> ) {</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>            <a class="code hl_function" href="namespaceom__direction.html#a75c0342ea30288a5a6d5bdbff38f7cde">add</a>( <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>, 1 );</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>        }</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>    }</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span> </div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>    <span class="keywordflow">return</span> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>;</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>}</div>
<div class="ttc" id="aclassint__id_html_a09d4f824b2540da7e682d10cdf324081"><div class="ttname"><a href="classint__id.html#a09d4f824b2540da7e682d10cdf324081">int_id::id</a></div><div class="ttdeci">const string_id&lt; ammo_effect &gt; &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00033">ammo_effect.cpp:33</a></div></div>
<div class="ttc" id="anamespacedetail_html_ab2f84fb3de26acdac3fc63a2dce5ea5e"><div class="ttname"><a href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">detail::count</a></div><div class="ttdeci">constexpr size_t count()</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__core_8h_source.html#l01073">fmtlib_core.h:1073</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a75c0342ea30288a5a6d5bdbff38f7cde"><div class="ttname"><a href="namespaceom__direction.html#a75c0342ea30288a5a6d5bdbff38f7cde">om_direction::add</a></div><div class="ttdeci">type add(type dir1, type dir2)</div><div class="ttdoc">Returns a sum of two numbers.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l04195">overmap.cpp:4195</a></div></div>
<div class="ttc" id="astructislot__seed_html"><div class="ttname"><a href="structislot__seed.html">islot_seed</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00733">itype.h:733</a></div></div>
<div class="ttc" id="astructislot__seed_html_a716438e2fcc04356b120fa909f15f68c"><div class="ttname"><a href="structislot__seed.html#a716438e2fcc04356b120fa909f15f68c">islot_seed::fruit_id</a></div><div class="ttdeci">itype_id fruit_id</div><div class="ttdoc">Type id of the fruit item.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00749">itype.h:749</a></div></div>
<div class="ttc" id="astructislot__seed_html_a78d156b1edac50b5dca40ad9c2bc093e"><div class="ttname"><a href="structislot__seed.html#a78d156b1edac50b5dca40ad9c2bc093e">islot_seed::fruit_div</a></div><div class="ttdeci">int fruit_div</div><div class="ttdoc">Amount of harvested charges of fruits is divided by this number.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00741">itype.h:741</a></div></div>
<div class="ttc" id="astructislot__seed_html_a7eb466642b2a218be8e60deff15c1c1e"><div class="ttname"><a href="structislot__seed.html#a7eb466642b2a218be8e60deff15c1c1e">islot_seed::spawn_seeds</a></div><div class="ttdeci">bool spawn_seeds</div><div class="ttdoc">Whether to spawn seed items additionally to the fruit items.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00753">itype.h:753</a></div></div>
<div class="ttc" id="astructislot__seed_html_aeaf44d52989cf1aba2bd0fbf17c37519"><div class="ttname"><a href="structislot__seed.html#aeaf44d52989cf1aba2bd0fbf17c37519">islot_seed::byproducts</a></div><div class="ttdeci">std::vector&lt; itype_id &gt; byproducts</div><div class="ttdoc">Additionally items (a list of their item ids) that will spawn when harvesting the plant.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00757">itype.h:757</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="overmap_8cpp_source.html#l04195">om_direction::add()</a>, <a class="el" href="magic_8cpp_source.html#l01031">b</a>, <a class="el" href="itype_8h_source.html#l00757">islot_seed::byproducts</a>, <a class="el" href="item_8h_source.html#l02199">item::charges</a>, <a class="el" href="fmtlib__core_8h_source.html#l01073">detail::count()</a>, <a class="el" href="item_8cpp_source.html#l06030">item::count_by_charges()</a>, <a class="el" href="itype_8h_source.html#l00741">islot_seed::fruit_div</a>, <a class="el" href="itype_8h_source.html#l00749">islot_seed::fruit_id</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="itype_8h_source.html#l00753">islot_seed::spawn_seeds</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="faction__camp_8cpp_source.html#l02281">farm_action()</a>, <a class="el" href="iexamine_8cpp_source.html#l02394">harvest_plant()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01370">vehicle::operate_reaper()</a>.</p>

</div>
</div>
<a id="a52eaa83fb4f8dacccac4a5e736cf3fe1" name="a52eaa83fb4f8dacccac4a5e736cf3fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52eaa83fb4f8dacccac4a5e736cf3fe1">&#9670;&nbsp;</a></span>get_seed_entries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a> &gt; iexamine::get_seed_entries </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classitem.html">item</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>seed_inv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make lists of unique seed types and names for the menu(no multiple hemp seeds etc) </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02237">2237</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>{</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>    std::map&lt;itype_id, int&gt; seed_map;</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;<a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a> : seed_inv ) {</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>        seed_map[<a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a>-&gt;typeId()] += ( <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a>-&gt;charges &gt; 0 ? <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a>-&gt;charges : 1 );</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>    }</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span> </div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>    std::vector&lt;seed_tuple&gt; seed_entries;</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>    seed_entries.reserve( seed_map.size() );</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;pr : seed_map ) {</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>        seed_entries.emplace_back(</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>            pr.first, <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( pr.first, pr.second ), pr.second );</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>    }</div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span> </div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>    <span class="comment">// Sort by name</span></div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>    std::sort( seed_entries.begin(), seed_entries.end(),</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>    []( <span class="keyword">const</span> <a class="code hl_typedef" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a> &amp; l, <span class="keyword">const</span> <a class="code hl_typedef" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a> &amp; r ) {</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>        return std::get&lt;1&gt;( l ).compare( std::get&lt;1&gt;( r ) ) &lt; 0;</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>    } );</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span> </div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>    <span class="keywordflow">return</span> seed_entries;</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>}</div>
<div class="ttc" id="aiexamine_8h_html_af451d8686f9b469b7d76b4d643773b6a"><div class="ttname"><a href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a></div><div class="ttdeci">std::tuple&lt; itype_id, std::string, int &gt; seed_tuple</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8h_source.html#l00020">iexamine.h:20</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l09951">item::nname()</a>, and <a class="el" href="iuse_8cpp_source.html#l05958">iuse::seed()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02302">dirtmound()</a>, <a class="el" href="clzones_8cpp_source.html#l00283">plot_options::query_seed()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01222">vehicle::reload_seeds()</a>.</p>

</div>
</div>
<a id="ada89967c78ff4632820932976c12ab8b" name="ada89967c78ff4632820932976c12ab8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada89967c78ff4632820932976c12ab8b">&#9670;&nbsp;</a></span>getGasPumpByNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a1159dbaba81931271dbfe5b9c7f041b3">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; iexamine::getGasPumpByNumber </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>number</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04357">4357</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04358" name="l04358"></a><span class="lineno"> 4358</span>{</div>
<div class="line"><a id="l04359" name="l04359"></a><span class="lineno"> 4359</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l04360" name="l04360"></a><span class="lineno"> 4360</span>    <span class="keywordtype">int</span> k = 0;</div>
<div class="line"><a id="l04361" name="l04361"></a><span class="lineno"> 4361</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;tmp : here.<a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p, 12 ) ) {</div>
<div class="line"><a id="l04362" name="l04362"></a><span class="lineno"> 4362</span>        <span class="keyword">const</span> <span class="keyword">auto</span> t = here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp );</div>
<div class="line"><a id="l04363" name="l04363"></a><span class="lineno"> 4363</span>        <span class="keywordflow">if</span>( ( t == <a class="code hl_typedef" href="mapdata_8h.html#a35072a9fdd9a8d25da4e647a63d1c445">ter_str_id</a>( <span class="stringliteral">&quot;t_gas_pump&quot;</span> ) || t == <a class="code hl_typedef" href="mapdata_8h.html#a35072a9fdd9a8d25da4e647a63d1c445">ter_str_id</a>( <span class="stringliteral">&quot;t_gas_pump_a&quot;</span> ) ) &amp;&amp; number == k++ ) {</div>
<div class="line"><a id="l04364" name="l04364"></a><span class="lineno"> 4364</span>            <span class="keywordflow">return</span> tmp;</div>
<div class="line"><a id="l04365" name="l04365"></a><span class="lineno"> 4365</span>        }</div>
<div class="line"><a id="l04366" name="l04366"></a><span class="lineno"> 4366</span>    }</div>
<div class="line"><a id="l04367" name="l04367"></a><span class="lineno"> 4367</span>    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a id="l04368" name="l04368"></a><span class="lineno"> 4368</span>}</div>
<div class="ttc" id="amapdata_8h_html_a35072a9fdd9a8d25da4e647a63d1c445"><div class="ttname"><a href="mapdata_8h.html#a35072a9fdd9a8d25da4e647a63d1c445">ter_str_id</a></div><div class="ttdeci">string_id&lt; ter_t &gt; ter_str_id</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00024">mapdata.h:24</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l08754">map::points_in_radius()</a>, and <a class="el" href="map_8cpp_source.html#l01562">map::ter()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00813">hacking_activity_actor::finish()</a>, and <a class="el" href="iexamine_8cpp_source.html#l04440">pay_gas()</a>.</p>

</div>
</div>
<a id="acdcb6865f2a40fffafcff3115d93b693" name="acdcb6865f2a40fffafcff3115d93b693"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdcb6865f2a40fffafcff3115d93b693">&#9670;&nbsp;</a></span>getNearFilledGasTank()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a1159dbaba81931271dbfe5b9c7f041b3">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; iexamine::getNearFilledGasTank </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>gas_units</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04248">4248</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04249" name="l04249"></a><span class="lineno"> 4249</span>{</div>
<div class="line"><a id="l04250" name="l04250"></a><span class="lineno"> 4250</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l04251" name="l04251"></a><span class="lineno"> 4251</span>    std::optional&lt;tripoint&gt; tank_loc;</div>
<div class="line"><a id="l04252" name="l04252"></a><span class="lineno"> 4252</span>    <span class="keywordtype">int</span> distance = INT_MAX;</div>
<div class="line"><a id="l04253" name="l04253"></a><span class="lineno"> 4253</span>    gas_units = 0;</div>
<div class="line"><a id="l04254" name="l04254"></a><span class="lineno"> 4254</span> </div>
<div class="line"><a id="l04255" name="l04255"></a><span class="lineno"> 4255</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;tmp : here.<a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( <a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b">center</a>, <a class="code hl_variable" href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a> * 2 ) ) {</div>
<div class="line"><a id="l04256" name="l04256"></a><span class="lineno"> 4256</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) != <a class="code hl_class" href="classstring__id.html">ter_str_id</a>( <span class="stringliteral">&quot;t_gas_tank&quot;</span> ) ) {</div>
<div class="line"><a id="l04257" name="l04257"></a><span class="lineno"> 4257</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04258" name="l04258"></a><span class="lineno"> 4258</span>        }</div>
<div class="line"><a id="l04259" name="l04259"></a><span class="lineno"> 4259</span> </div>
<div class="line"><a id="l04260" name="l04260"></a><span class="lineno"> 4260</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> new_distance = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( <a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b">center</a>, tmp );</div>
<div class="line"><a id="l04261" name="l04261"></a><span class="lineno"> 4261</span> </div>
<div class="line"><a id="l04262" name="l04262"></a><span class="lineno"> 4262</span>        <span class="keywordflow">if</span>( new_distance &gt;= distance ) {</div>
<div class="line"><a id="l04263" name="l04263"></a><span class="lineno"> 4263</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04264" name="l04264"></a><span class="lineno"> 4264</span>        }</div>
<div class="line"><a id="l04265" name="l04265"></a><span class="lineno"> 4265</span>        <span class="keywordflow">if</span>( !tank_loc ) {</div>
<div class="line"><a id="l04266" name="l04266"></a><span class="lineno"> 4266</span>            <span class="comment">// Return a potentially empty tank, but only if we don&#39;t find a closer full one.</span></div>
<div class="line"><a id="l04267" name="l04267"></a><span class="lineno"> 4267</span>            tank_loc.emplace( tmp );</div>
<div class="line"><a id="l04268" name="l04268"></a><span class="lineno"> 4268</span>        }</div>
<div class="line"><a id="l04269" name="l04269"></a><span class="lineno"> 4269</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;k : here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( tmp ) ) {</div>
<div class="line"><a id="l04270" name="l04270"></a><span class="lineno"> 4270</span>            <span class="keywordflow">if</span>( k.made_of( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) ) {</div>
<div class="line"><a id="l04271" name="l04271"></a><span class="lineno"> 4271</span>                <a class="code hl_enumvalue" href="namespaceovermap__ui.html#a5cd0d32854b59999d3a728288bc7daaaaa74ec9c5b6882f79e32a8fbd8da90c1b">distance</a> = new_distance;</div>
<div class="line"><a id="l04272" name="l04272"></a><span class="lineno"> 4272</span>                tank_loc.emplace( tmp );</div>
<div class="line"><a id="l04273" name="l04273"></a><span class="lineno"> 4273</span>                gas_units = k.charges;</div>
<div class="line"><a id="l04274" name="l04274"></a><span class="lineno"> 4274</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04275" name="l04275"></a><span class="lineno"> 4275</span>            }</div>
<div class="line"><a id="l04276" name="l04276"></a><span class="lineno"> 4276</span>        }</div>
<div class="line"><a id="l04277" name="l04277"></a><span class="lineno"> 4277</span>    }</div>
<div class="line"><a id="l04278" name="l04278"></a><span class="lineno"> 4278</span>    <span class="keywordflow">return</span> tank_loc;</div>
<div class="line"><a id="l04279" name="l04279"></a><span class="lineno"> 4279</span>}</div>
<div class="ttc" id="acoordinates_8h_html_a47953b33a873caa0861b12222842a5ec"><div class="ttname"><a href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00519">coordinates.h:519</a></div></div>
<div class="ttc" id="aenums_8h_html_a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b"><div class="ttname"><a href="enums_8h.html#a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b">center</a></div><div class="ttdeci">@ center</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00323">enums.h:323</a></div></div>
<div class="ttc" id="anamespaceovermap__ui_html_a5cd0d32854b59999d3a728288bc7daaaaa74ec9c5b6882f79e32a8fbd8da90c1b"><div class="ttname"><a href="namespaceovermap__ui.html#a5cd0d32854b59999d3a728288bc7daaaaa74ec9c5b6882f79e32a8fbd8da90c1b">overmap_ui::sort_mode_t::distance</a></div><div class="ttdeci">@ distance</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enums_8h_source.html#l00323">center</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="enums_8h_source.html#l00175">LIQUID</a>, <a class="el" href="map_8cpp_source.html#l08754">map::points_in_radius()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="game__constants_8h_source.html#l00035">SEEX</a>, and <a class="el" href="map_8cpp_source.html#l01562">map::ter()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00813">hacking_activity_actor::finish()</a>, and <a class="el" href="iexamine_8cpp_source.html#l04440">pay_gas()</a>.</p>

</div>
</div>
<a id="a743ddabf5650b28322c4d674020d2099" name="a743ddabf5650b28322c4d674020d2099"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a743ddabf5650b28322c4d674020d2099">&#9670;&nbsp;</a></span>gunsafe_el()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::gunsafe_el </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to "hack" the gunsafe's electronic lock and open it. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01464">1464</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>{</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Attempt to hack this safe?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>        <a class="code hl_function" href="iexamine_8cpp.html#aae4267b3209a79d919707bd1ba1c2071">try_start_hacking</a>( p, examp );</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>    }</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, and <a class="el" href="iexamine_8cpp_source.html#l00979">try_start_hacking()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00792">get_hack_type()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a387213cfb1350c7bbdffc067c42e135b" name="a387213cfb1350c7bbdffc067c42e135b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a387213cfb1350c7bbdffc067c42e135b">&#9670;&nbsp;</a></span>harvest_furn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvest_furn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02100">2100</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>{</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>    <span class="keywordtype">bool</span> auto_forage = get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_FEATURES&quot;</span> ) &amp;&amp;</div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>                       get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;both&quot;</span>;</div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="iexamine_8cpp.html#a2581c83e4682bf7f7a287b0577413c0c">harvest_common</a>( p, examp, <span class="keyword">true</span>, <span class="keyword">false</span>, auto_forage ) ) {</div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>        <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>    }</div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_a2581c83e4682bf7f7a287b0577413c0c"><div class="ttname"><a href="iexamine_8cpp.html#a2581c83e4682bf7f7a287b0577413c0c">harvest_common</a></div><div class="ttdeci">static bool harvest_common(player &amp;p, const tripoint &amp;examp, bool furn, bool nectar, bool auto_forage=false)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02037">iexamine.cpp:2037</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, and <a class="el" href="iexamine_8cpp_source.html#l02037">harvest_common()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l09095">game::place_player()</a>.</p>

</div>
</div>
<a id="ada197d8d6086e268c3e3e18b02cb8112" name="ada197d8d6086e268c3e3e18b02cb8112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada197d8d6086e268c3e3e18b02cb8112">&#9670;&nbsp;</a></span>harvest_furn_nectar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvest_furn_nectar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02091">2091</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>{</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>    <span class="keywordtype">bool</span> auto_forage = get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_FEATURES&quot;</span> ) &amp;&amp;</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>                       get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;both&quot;</span>;</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="iexamine_8cpp.html#a2581c83e4682bf7f7a287b0577413c0c">harvest_common</a>( p, examp, <span class="keyword">true</span>, <span class="keyword">true</span>, auto_forage ) ) {</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>        <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>    }</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, and <a class="el" href="iexamine_8cpp_source.html#l02037">harvest_common()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l09095">game::place_player()</a>.</p>

</div>
</div>
<a id="ada8613299c6f18c55e1817a633773917" name="ada8613299c6f18c55e1817a633773917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada8613299c6f18c55e1817a633773917">&#9670;&nbsp;</a></span>harvest_plant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvest_plant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>from_activity</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actual harvesting of selected plant. </p>
Survival increases number of plants harvested from a seed 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02394">2394</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>{</div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>    <span class="comment">// Can&#39;t use item_stack::only_item() since there might be fertilizer</span></div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a> = std::find_if( items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>        return it.is_seed();</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>    } );</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span> </div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a> == items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>() ) {</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Missing seed for plant at (%d, %d, %d)&quot;</span>, examp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, examp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>, examp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>        here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>    }</div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span> </div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp;seedType = <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a>-&gt;typeId();</div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>    <span class="keywordflow">if</span>( seedType == <a class="code hl_variable" href="iexamine_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">itype_fungal_seeds</a> ) {</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>        <a class="code hl_function" href="namespaceiexamine.html#abb0c2d8b376175c6d36c01540095c652">fungus</a>( p, examp );</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>        here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( seedType == <a class="code hl_variable" href="iexamine_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a> ) {</div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>        <a class="code hl_function" href="namespaceiexamine.html#abb0c2d8b376175c6d36c01540095c652">fungus</a>( p, examp );</div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>        here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>        <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a> ) &amp;&amp; ( p.<a class="code hl_function" href="classCharacter.html#a42c4ba47635e0659553c233c399da84a">get_kcal_percent</a>() &lt; 0.8f ||</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>                p.<a class="code hl_function" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() &gt; <a class="code hl_enumvalue" href="character_8h.html#a2e6af65e94e820564fb484840378cf4aa780f1db7fbc188c7154e8bbd5c14fb02">thirst_levels::very_thirsty</a> ) ) {</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>            here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#ad5fdc2a50afac29f86454e5080aaa836">t_marloss</a> );</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>                     <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;We have altered this unit&#39;s configuration to extract and provide local nutriment.  The Mycus provides.&quot;</span> ) );</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac948a4eb7ffef572bcb31aa96082292d">trait_M_DEFENDER</a> ) ) || ( ( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#af34ffb9de37241e71030cdc7183ba183">trait_M_SPORES</a> ) ||</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>                   p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a1559e4ecbfd1ba3582826f58c2408587">trait_M_FERTILE</a> ) ) &amp;&amp;</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>                   <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) ) {</div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( <a class="code hl_variable" href="iexamine_8cpp.html#aa98e65f7b10de7b33d3c7e877e7d00b6">mon_fungal_blossom</a>, examp );</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The seed blooms forth!  We have brought true beauty to this world.&quot;</span> ) );</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> ) ) || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>            here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#aed4e9b5d39114b077bf7be3cebe9bff9">f_flower_marloss</a> );</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The seed blossoms rather rapidly…&quot;</span> ) );</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>            here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#af40460921c42b6a0ee06e43badd3845b">f_flower_fungal</a> );</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The seed blossoms into a flower-looking fungus.&quot;</span> ) );</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>        }</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span>    } <span class="keywordflow">else</span> { <span class="comment">// Generic seed, use the seed item data</span></div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structitype.html">itype</a> &amp;<a class="code hl_enumeration" href="namespacedetail.html#ad46d232fb6116de4dac0c43dbde8e7a9">type</a> = *<a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a>-&gt;type;</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>        here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span> </div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>        <span class="keywordtype">int</span> skillLevel = p.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> );<span class="comment"></span></div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span><span class="comment">        ///\EFFECT_SURVIVAL increases number of plants harvested from a seed</span></div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span><span class="comment"></span>        <span class="keywordtype">int</span> plant_count = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( skillLevel / 2, skillLevel );</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>        plant_count *= here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp )-&gt;<a class="code hl_variable" href="structfurn__t.html#ac3845e974a411f26a4481f8c21e579e7">plant</a>-&gt;harvest_multiplier;</div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> max_harvest_count = get_option&lt;int&gt;( <span class="stringliteral">&quot;MAX_HARVEST_COUNT&quot;</span> );</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span>        <span class="keywordflow">if</span>( plant_count &gt;= max_harvest_count ) {</div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>            plant_count = max_harvest_count;</div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( plant_count &lt;= 0 ) {</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>            plant_count = 1;</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>        }</div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> seedCount = std::max( 1, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( plant_count / 4, plant_count / 2 ) );</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : <a class="code hl_function" href="namespaceiexamine.html#a063625d8728319f6e54a792b609f1719">get_harvest_items</a>( type, plant_count, seedCount, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span>            <span class="keywordflow">if</span>( from_activity ) {</div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>                i.set_var( <span class="stringliteral">&quot;activity_var&quot;</span>, p.<a class="code hl_variable" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a> );</div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>            }</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>            here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( examp, i );</div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>        }</div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_typedef" href="type__id_8h.html#a13fd56b9ac506b2517d4889040e0ef66">furn_str_id</a>( here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp )-&gt;<a class="code hl_variable" href="structfurn__t.html#ac3845e974a411f26a4481f8c21e579e7">plant</a>-&gt;transform ) );</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 10_seconds );</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>    }</div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>}</div>
<div class="ttc" id="acharacter_8h_html_a2e6af65e94e820564fb484840378cf4aa780f1db7fbc188c7154e8bbd5c14fb02"><div class="ttname"><a href="character_8h.html#a2e6af65e94e820564fb484840378cf4aa780f1db7fbc188c7154e8bbd5c14fb02">thirst_levels::very_thirsty</a></div><div class="ttdeci">@ very_thirsty</div></div>
<div class="ttc" id="aclassCharacter_html_a42c4ba47635e0659553c233c399da84a"><div class="ttname"><a href="classCharacter.html#a42c4ba47635e0659553c233c399da84a">Character::get_kcal_percent</a></div><div class="ttdeci">float get_kcal_percent() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04348">character.cpp:4348</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6592c35167738421f3e04ca8808d37db"><div class="ttname"><a href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">Character::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01566">character.h:1566</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7ca6c670844c9fd8c419c474788a7bf7"><div class="ttname"><a href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">Character::get_thirst</a></div><div class="ttdeci">int get_thirst() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04353">character.cpp:4353</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a1559e4ecbfd1ba3582826f58c2408587"><div class="ttname"><a href="iexamine_8cpp.html#a1559e4ecbfd1ba3582826f58c2408587">trait_M_FERTILE</a></div><div class="ttdeci">static const trait_id trait_M_FERTILE(&quot;M_FERTILE&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a1dde15b62a88d05d0f3218beccaedc4e"><div class="ttname"><a href="iexamine_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">itype_fungal_seeds</a></div><div class="ttdeci">static const itype_id itype_fungal_seeds(&quot;fungal_seeds&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a40331e22a139e13b3b70f387c9fdd390"><div class="ttname"><a href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a></div><div class="ttdeci">static const trait_id trait_THRESH_MYCUS(&quot;THRESH_MYCUS&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aa98e65f7b10de7b33d3c7e877e7d00b6"><div class="ttname"><a href="iexamine_8cpp.html#aa98e65f7b10de7b33d3c7e877e7d00b6">mon_fungal_blossom</a></div><div class="ttdeci">static const mtype_id mon_fungal_blossom(&quot;mon_fungal_blossom&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac038c6319122de04af85fb88e6618601"><div class="ttname"><a href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a></div><div class="ttdeci">static const skill_id skill_survival(&quot;survival&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac71452586eb6cf87fab888bc561dc897"><div class="ttname"><a href="iexamine_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a></div><div class="ttdeci">static const trait_id trait_M_DEPENDENT(&quot;M_DEPENDENT&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac948a4eb7ffef572bcb31aa96082292d"><div class="ttname"><a href="iexamine_8cpp.html#ac948a4eb7ffef572bcb31aa96082292d">trait_M_DEFENDER</a></div><div class="ttdeci">static const trait_id trait_M_DEFENDER(&quot;M_DEFENDER&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_af34ffb9de37241e71030cdc7183ba183"><div class="ttname"><a href="iexamine_8cpp.html#af34ffb9de37241e71030cdc7183ba183">trait_M_SPORES</a></div><div class="ttdeci">static const trait_id trait_M_SPORES(&quot;M_SPORES&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_ad5fdc2a50afac29f86454e5080aaa836"><div class="ttname"><a href="mapdata_8cpp.html#ad5fdc2a50afac29f86454e5080aaa836">t_marloss</a></div><div class="ttdeci">ter_id t_marloss</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00692">mapdata.cpp:692</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aed4e9b5d39114b077bf7be3cebe9bff9"><div class="ttname"><a href="mapdata_8cpp.html#aed4e9b5d39114b077bf7be3cebe9bff9">f_flower_marloss</a></div><div class="ttdeci">furn_id f_flower_marloss</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01126">mapdata.cpp:1126</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_af40460921c42b6a0ee06e43badd3845b"><div class="ttname"><a href="mapdata_8cpp.html#af40460921c42b6a0ee06e43badd3845b">f_flower_fungal</a></div><div class="ttdeci">furn_id f_flower_fungal</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01118">mapdata.cpp:1118</a></div></div>
<div class="ttc" id="anamespacedetail_html_ad46d232fb6116de4dac0c43dbde8e7a9"><div class="ttname"><a href="namespacedetail.html#ad46d232fb6116de4dac0c43dbde8e7a9">detail::type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__core_8h_source.html#l01087">fmtlib_core.h:1087</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a063625d8728319f6e54a792b609f1719"><div class="ttname"><a href="namespaceiexamine.html#a063625d8728319f6e54a792b609f1719">iexamine::get_harvest_items</a></div><div class="ttdeci">std::list&lt; item &gt; get_harvest_items(const itype &amp;type, int plant_count, int seed_count, bool byproducts)</div><div class="ttdoc">Items that appear when a generic plant is harvested.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02350">iexamine.cpp:2350</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_abb0c2d8b376175c6d36c01540095c652"><div class="ttname"><a href="namespaceiexamine.html#abb0c2d8b376175c6d36c01540095c652">iexamine::fungus</a></div><div class="ttdeci">void fungus(player &amp;p, const tripoint &amp;examp)</div><div class="ttdoc">Remove furniture.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02225">iexamine.cpp:2225</a></div></div>
<div class="ttc" id="astructfurn__t_html_ac3845e974a411f26a4481f8c21e579e7"><div class="ttname"><a href="structfurn__t.html#ac3845e974a411f26a4481f8c21e579e7">furn_t::plant</a></div><div class="ttdeci">cata::value_ptr&lt; plant_data &gt; plant</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00519">mapdata.h:519</a></div></div>
<div class="ttc" id="atype__id_8h_html_a13fd56b9ac506b2517d4889040e0ef66"><div class="ttname"><a href="type__id_8h.html#a13fd56b9ac506b2517d4889040e0ef66">furn_str_id</a></div><div class="ttdeci">string_id&lt; furn_t &gt; furn_str_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00065">type_id.h:65</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="mapdata_8cpp_source.html#l01118">f_flower_fungal</a>, <a class="el" href="mapdata_8cpp_source.html#l01126">f_flower_marloss</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="iexamine_8cpp_source.html#l02225">fungus()</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="iexamine_8cpp_source.html#l02350">get_harvest_items()</a>, <a class="el" href="character_8cpp_source.html#l04348">Character::get_kcal_percent()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="character_8cpp_source.html#l03351">Character::get_skill_level()</a>, <a class="el" href="character_8cpp_source.html#l04353">Character::get_thirst()</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l04247">map::i_clear()</a>, <a class="el" href="iexamine_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">itype_fungal_seeds</a>, <a class="el" href="iexamine_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="iexamine_8cpp.html#aa98e65f7b10de7b33d3c7e877e7d00b6">mon_fungal_blossom</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="character_8h_source.html#l01566">Character::name</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="mapdata_8h_source.html#l00519">furn_t::plant</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="iuse_8cpp_source.html#l05958">iuse::seed()</a>, <a class="el" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>, <a class="el" href="mapdata_8cpp_source.html#l00692">t_marloss</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#ac948a4eb7ffef572bcb31aa96082292d">trait_M_DEFENDER</a>, <a class="el" href="iexamine_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a>, <a class="el" href="iexamine_8cpp.html#a1559e4ecbfd1ba3582826f58c2408587">trait_M_FERTILE</a>, <a class="el" href="iexamine_8cpp.html#af34ffb9de37241e71030cdc7183ba183">trait_M_SPORES</a>, <a class="el" href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a>, <a class="el" href="character_8h.html#a2e6af65e94e820564fb484840378cf4aa780f1db7fbc188c7154e8bbd5c14fb02">very_thirsty</a>, <a class="el" href="point_8h_source.html#l00136">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00137">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00138">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02555">aggie_plant()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l02839">generic_multi_activity_do()</a>.</p>

</div>
</div>
<a id="a309fb1c49f2bad87724009a149b2150c" name="a309fb1c49f2bad87724009a149b2150c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a309fb1c49f2bad87724009a149b2150c">&#9670;&nbsp;</a></span>harvest_ter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvest_ter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02121">2121</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>{</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>    <span class="keywordtype">bool</span> auto_forage = get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_FEATURES&quot;</span> ) &amp;&amp;</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>                       ( get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;both&quot;</span> ||</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>                         get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;trees&quot;</span> );</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="iexamine_8cpp.html#a2581c83e4682bf7f7a287b0577413c0c">harvest_common</a>( p, examp, <span class="keyword">false</span>, <span class="keyword">false</span>, auto_forage ) ) {</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>        <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, here.<a class="code hl_function" href="classmap.html#aa644647b252ed03e1724952f4bf45b33">get_ter_transforms_into</a>( examp ) );</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>    }</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>}</div>
<div class="ttc" id="aclassmap_html_aa644647b252ed03e1724952f4bf45b33"><div class="ttname"><a href="classmap.html#aa644647b252ed03e1724952f4bf45b33">map::get_ter_transforms_into</a></div><div class="ttdeci">ter_id get_ter_transforms_into(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01671">map.cpp:1671</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l01671">map::get_ter_transforms_into()</a>, <a class="el" href="iexamine_8cpp_source.html#l02037">harvest_common()</a>, and <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l09095">game::place_player()</a>.</p>

</div>
</div>
<a id="a5628356bba646a766326d701d857338d" name="a5628356bba646a766326d701d857338d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5628356bba646a766326d701d857338d">&#9670;&nbsp;</a></span>harvest_ter_nectar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvest_ter_nectar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02109">2109</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>{</div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>    <span class="keywordtype">bool</span> auto_forage = get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_FEATURES&quot;</span> ) &amp;&amp;</div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>                       ( get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;both&quot;</span> ||</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>                         get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;bushes&quot;</span> ||</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>                         get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;trees&quot;</span> );</div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="iexamine_8cpp.html#a2581c83e4682bf7f7a287b0577413c0c">harvest_common</a>( p, examp, <span class="keyword">false</span>, <span class="keyword">true</span>, auto_forage ) ) {</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span>        <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, here.<a class="code hl_function" href="classmap.html#aa644647b252ed03e1724952f4bf45b33">get_ter_transforms_into</a>( examp ) );</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>    }</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l01671">map::get_ter_transforms_into()</a>, <a class="el" href="iexamine_8cpp_source.html#l02037">harvest_common()</a>, and <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l09095">game::place_player()</a>.</p>

</div>
</div>
<a id="a2d6be14c6ca6b453726ef977c97add0a" name="a2d6be14c6ca6b453726ef977c97add0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d6be14c6ca6b453726ef977c97add0a">&#9670;&nbsp;</a></span>harvested_plant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvested_plant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Only harvest a plant once per season. </p>
<p >Display message and call <a class="el" href="namespaceiexamine.html#a45c131e909371e96743dfe0a21ba75a6" title="Nothing player can interact with here.">iexamine::none</a>. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02135">2135</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>{</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>    p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Nothing can be harvested from this plant in current season&quot;</span> ) );</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>    <a class="code hl_function" href="namespaceiexamine.html#a45c131e909371e96743dfe0a21ba75a6">iexamine::none</a>( p, examp );</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>}</div>
<div class="ttc" id="anamespaceiexamine_html_a45c131e909371e96743dfe0a21ba75a6"><div class="ttname"><a href="namespaceiexamine.html#a45c131e909371e96743dfe0a21ba75a6">iexamine::none</a></div><div class="ttdeci">void none(player &amp;p, const tripoint &amp;examp)</div><div class="ttdoc">Nothing player can interact with here.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l00253">iexamine.cpp:253</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, and <a class="el" href="iexamine_8cpp_source.html#l00253">none()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a8f416fad095ebdced5c867b735550fa4" name="a8f416fad095ebdced5c867b735550fa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f416fad095ebdced5c867b735550fa4">&#9670;&nbsp;</a></span>has_keg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iexamine::has_keg </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether there is a keg on the map that can be filled via <a class="el" href="namespaceiexamine.html#a700893be2f824844fdc4b4ea4b2ee148">pour_into_keg</a>. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03225">3225</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span>{</div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="iexamine_8cpp.html#a59732e8d3f1cbbbe942381c75cff885f">get_keg_capacity</a>( pos ) &gt; 0_ml;</div>
<div class="line"><a id="l03228" name="l03228"></a><span class="lineno"> 3228</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_a59732e8d3f1cbbbe942381c75cff885f"><div class="ttname"><a href="iexamine_8cpp.html#a59732e8d3f1cbbbe942381c75cff885f">get_keg_capacity</a></div><div class="ttdeci">static units::volume get_keg_capacity(const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03216">iexamine.cpp:3216</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iexamine_8cpp_source.html#l03216">get_keg_capacity()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l01513">activity_handlers::fill_liquid_do_turn()</a>, and <a class="el" href="handle__liquid_8cpp_source.html#l00156">liquid_handler::get_liquid_target()</a>.</p>

</div>
</div>
<a id="aa7f9f1abbc5c0c637003e366e85160f3" name="aa7f9f1abbc5c0c637003e366e85160f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7f9f1abbc5c0c637003e366e85160f3">&#9670;&nbsp;</a></span>intercom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::intercom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01121">1121</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>{</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>    <span class="keyword">const</span> std::vector&lt;npc *&gt; intercom_npcs = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_npcs_if( [examp]( <span class="keyword">const</span> <a class="code hl_class" href="classnpc.html">npc</a> &amp; guy ) {</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>        <span class="keywordflow">return</span> guy.<a class="code hl_variable" href="classnpc.html#a2d47ff8926fed9a85d1168e7e514f871">myclass</a> == <a class="code hl_typedef" href="item_8cpp.html#a7413a5cfb0fe40e0bcd082ec6a449102">npc_class_id</a>( <span class="stringliteral">&quot;NC_ROBOFAC_INTERCOM&quot;</span> ) &amp;&amp; <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( guy.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), examp ) &lt; 10;</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>    } );</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>    <span class="keywordflow">if</span>( intercom_npcs.empty() ) {</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;No one responds.&quot;</span> ) );</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>        intercom_npcs.front()-&gt;talk_to_u( <span class="keyword">false</span> );</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>    }</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>}</div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00743">npc.h:744</a></div></div>
<div class="ttc" id="aclassnpc_html_a2d47ff8926fed9a85d1168e7e514f871"><div class="ttname"><a href="classnpc.html#a2d47ff8926fed9a85d1168e7e514f871">npc::myclass</a></div><div class="ttdeci">npc_class_id myclass</div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l01213">npc.h:1213</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a7413a5cfb0fe40e0bcd082ec6a449102"><div class="ttname"><a href="item_8cpp.html#a7413a5cfb0fe40e0bcd082ec6a449102">npc_class_id</a></div><div class="ttdeci">string_id&lt; npc_class &gt; npc_class_id</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00290">item.cpp:290</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="npc_8h_source.html#l01213">npc::myclass</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, and <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l01059">cardreader_robofac()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a212745f84e7b0f500aecc42cf2d9c707" name="a212745f84e7b0f500aecc42cf2d9c707"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a212745f84e7b0f500aecc42cf2d9c707">&#9670;&nbsp;</a></span>keg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::keg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03256">3256</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03257" name="l03257"></a><span class="lineno"> 3257</span>{</div>
<div class="line"><a id="l03258" name="l03258"></a><span class="lineno"> 3258</span>    <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l03259" name="l03259"></a><span class="lineno"> 3259</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03260" name="l03260"></a><span class="lineno"> 3260</span>    <span class="keyword">const</span> <span class="keyword">auto</span> keg_name = here.<a class="code hl_function" href="classmap.html#a148fb7ddc87ffb1da97dd33e0529c983">name</a>( examp );</div>
<div class="line"><a id="l03261" name="l03261"></a><span class="lineno"> 3261</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> keg_cap = <a class="code hl_function" href="iexamine_8cpp.html#a59732e8d3f1cbbbe942381c75cff885f">get_keg_capacity</a>( examp );</div>
<div class="line"><a id="l03262" name="l03262"></a><span class="lineno"> 3262</span> </div>
<div class="line"><a id="l03263" name="l03263"></a><span class="lineno"> 3263</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_container_with_liquid = <a class="code hl_class" href="classmap__cursor.html">map_cursor</a>( examp ).<a class="code hl_function" href="classvisitable.html#abf24bf044bbf16def702fd78351fc46f">has_item_with</a>( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l03264" name="l03264"></a><span class="lineno"> 3264</span>        <span class="keywordflow">return</span> !it.<a class="code hl_function" href="classitem.html#a5996f63ca1797fc01482678b51a87680">is_container_empty</a>() &amp;&amp; it.<a class="code hl_function" href="classitem.html#a54fe4917d343209ae2fdb9b163bd967a">can_unload_liquid</a>();</div>
<div class="line"><a id="l03265" name="l03265"></a><span class="lineno"> 3265</span>    } );</div>
<div class="line"><a id="l03266" name="l03266"></a><span class="lineno"> 3266</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> liquid_present = <a class="code hl_class" href="classmap__cursor.html">map_cursor</a>( examp ).<a class="code hl_function" href="classvisitable.html#abf24bf044bbf16def702fd78351fc46f">has_item_with</a>( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l03267" name="l03267"></a><span class="lineno"> 3267</span>        <span class="keywordflow">return</span> it.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> );</div>
<div class="line"><a id="l03268" name="l03268"></a><span class="lineno"> 3268</span>    } );</div>
<div class="line"><a id="l03269" name="l03269"></a><span class="lineno"> 3269</span> </div>
<div class="line"><a id="l03270" name="l03270"></a><span class="lineno"> 3270</span>    <span class="keywordflow">if</span>( !liquid_present || has_container_with_liquid ) {</div>
<div class="line"><a id="l03271" name="l03271"></a><span class="lineno"> 3271</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It is empty.&quot;</span> ) );</div>
<div class="line"><a id="l03272" name="l03272"></a><span class="lineno"> 3272</span>        <span class="comment">// Get list of all drinks</span></div>
<div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span>        <span class="keyword">auto</span> drinks_inv = p.<a class="code hl_function" href="classvisitable.html#a5b3c37fbe8209cab68aa26d3cc7f4300">items_with</a>( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"> 3274</span>            <span class="keywordflow">return</span> it.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> );</div>
<div class="line"><a id="l03275" name="l03275"></a><span class="lineno"> 3275</span>        } );</div>
<div class="line"><a id="l03276" name="l03276"></a><span class="lineno"> 3276</span>        <span class="keywordflow">if</span>( drinks_inv.empty() ) {</div>
<div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You don&#39;t have any drinks to fill the %s with.&quot;</span> ), keg_name );</div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span>        }</div>
<div class="line"><a id="l03280" name="l03280"></a><span class="lineno"> 3280</span>        <span class="comment">// Make lists of unique drinks... about third time we do this, maybe we ought to make a function next time</span></div>
<div class="line"><a id="l03281" name="l03281"></a><span class="lineno"> 3281</span>        std::vector&lt;itype_id&gt; drink_types;</div>
<div class="line"><a id="l03282" name="l03282"></a><span class="lineno"> 3282</span>        std::vector&lt;std::string&gt; drink_names;</div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"> 3283</span>        std::vector&lt;double&gt; drink_rot;</div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;drink : drinks_inv ) {</div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span>            <span class="keyword">auto</span> found_drink = <a class="code hl_function" href="namespacedetail.html#ad06b74f7502b63cbab323bba1ca3f72b">std::find</a>( drink_types.begin(), drink_types.end(), drink-&gt;typeId() );</div>
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"> 3286</span>            <span class="keywordflow">if</span>( found_drink == drink_types.end() ) {</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span>                drink_types.push_back( drink-&gt;typeId() );</div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span>                drink_names.push_back( <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( drink-&gt;typeId() ) );</div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span>                drink_rot.push_back( drink-&gt;get_relative_rot() );</div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span>                <span class="keyword">auto</span> rot_iter = std::next( drink_rot.begin(), std::distance( drink_types.begin(), found_drink ) );</div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span>                <span class="comment">// Yep, worst rot wins.</span></div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span>                *rot_iter = std::max( *rot_iter, drink-&gt;get_relative_rot() );</div>
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"> 3294</span>            }</div>
<div class="line"><a id="l03295" name="l03295"></a><span class="lineno"> 3295</span>        }</div>
<div class="line"><a id="l03296" name="l03296"></a><span class="lineno"> 3296</span>        <span class="comment">// Choose drink to store in keg from list</span></div>
<div class="line"><a id="l03297" name="l03297"></a><span class="lineno"> 3297</span>        <span class="keywordtype">int</span> drink_index = 0;</div>
<div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span>        <span class="keywordflow">if</span>( drink_types.size() &gt; 1 ) {</div>
<div class="line"><a id="l03299" name="l03299"></a><span class="lineno"> 3299</span>            drink_index = <a class="code hl_class" href="classuilist.html">uilist</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Store which drink?&quot;</span> ), drink_names );</div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>            <span class="keywordflow">if</span>( drink_index &lt; 0 || <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( drink_index ) &gt;= drink_types.size() ) {</div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span>                drink_index = -1;</div>
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"> 3302</span>            }</div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>        } <span class="keywordflow">else</span> { <span class="comment">//Only one drink type was in inventory, so it&#39;s automatically used</span></div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Fill the %1$s with %2$s?&quot;</span> ),</div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>                           keg_name, drink_names[0].c_str() ) ) {</div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span>                drink_index = -1;</div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span>            }</div>
<div class="line"><a id="l03308" name="l03308"></a><span class="lineno"> 3308</span>        }</div>
<div class="line"><a id="l03309" name="l03309"></a><span class="lineno"> 3309</span>        <span class="keywordflow">if</span>( drink_index &lt; 0 ) {</div>
<div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span>        }</div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span> </div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span>        <span class="comment">// First empty the keg of foreign objects</span></div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span>        <a class="code hl_function" href="iexamine_8cpp.html#a8778e47a7cd8da1779330966216e12e1">displace_items_except_one_liquid</a>( examp );</div>
<div class="line"><a id="l03315" name="l03315"></a><span class="lineno"> 3315</span> </div>
<div class="line"><a id="l03316" name="l03316"></a><span class="lineno"> 3316</span>        <span class="comment">//Store liquid chosen in the keg</span></div>
<div class="line"><a id="l03317" name="l03317"></a><span class="lineno"> 3317</span>        <a class="code hl_class" href="classstring__id.html">itype_id</a> drink_type = drink_types[ drink_index ];</div>
<div class="line"><a id="l03318" name="l03318"></a><span class="lineno"> 3318</span>        <span class="keywordtype">int</span> charges_held = p.<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( drink_type );</div>
<div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span>        <a class="code hl_class" href="classitem.html">item</a> drink( drink_type, <a class="code hl_variable" href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a> );</div>
<div class="line"><a id="l03320" name="l03320"></a><span class="lineno"> 3320</span>        drink.set_relative_rot( drink_rot[ drink_index ] );</div>
<div class="line"><a id="l03321" name="l03321"></a><span class="lineno"> 3321</span>        drink.charges = 0;</div>
<div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span>        <span class="keywordtype">bool</span> keg_full = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; charges_held &amp;&amp; !keg_full; i++ ) {</div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.use_charges( drink.typeId(), 1 );</div>
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"> 3325</span>            drink.charges++;</div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span>            keg_full = drink.volume() &gt;= keg_cap;</div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>        }</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span>        <span class="keywordflow">if</span>( keg_full ) {</div>
<div class="line"><a id="l03329" name="l03329"></a><span class="lineno"> 3329</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You completely fill the %1$s with %2$s.&quot;</span> ),</div>
<div class="line"><a id="l03330" name="l03330"></a><span class="lineno"> 3330</span>                     keg_name, <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( drink_type ) );</div>
<div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03332" name="l03332"></a><span class="lineno"> 3332</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You fill the %1$s with %2$s.&quot;</span> ),</div>
<div class="line"><a id="l03333" name="l03333"></a><span class="lineno"> 3333</span>                     keg_name, <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( drink_type ) );</div>
<div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span>        }</div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 10_seconds );</div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span>        here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span>        here.<a class="code hl_function" href="classmap.html#a64d3ea19afd7a9c65f072dd65fb15405">add_item</a>( examp, drink );</div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"> 3339</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"> 3340</span>        <span class="comment">// First empty the keg of foreign objects</span></div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span>        <a class="code hl_function" href="iexamine_8cpp.html#a8778e47a7cd8da1779330966216e12e1">displace_items_except_one_liquid</a>( examp );</div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span> </div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>        <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span>        <a class="code hl_class" href="classitem.html">item</a> &amp;drink = items.<a class="code hl_function" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>();</div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span>        <span class="keyword">const</span> std::string drink_tname = drink.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>();</div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span>        <span class="keyword">const</span> std::string drink_nname = <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( drink.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() );</div>
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"> 3347</span>        <span class="keyword">enum</span> <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a> {</div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>            DISPENSE,</div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span>            HAVE_A_DRINK,</div>
<div class="line"><a id="l03350" name="l03350"></a><span class="lineno"> 3350</span>            REFILL,</div>
<div class="line"><a id="l03351" name="l03351"></a><span class="lineno"> 3351</span>            EXAMINE,</div>
<div class="line"><a id="l03352" name="l03352"></a><span class="lineno"> 3352</span>        };</div>
<div class="line"><a id="l03353" name="l03353"></a><span class="lineno"> 3353</span>        <a class="code hl_class" href="classuilist.html">uilist</a> selectmenu;</div>
<div class="line"><a id="l03354" name="l03354"></a><span class="lineno"> 3354</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( DISPENSE, drink.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ), <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a id="l03355" name="l03355"></a><span class="lineno"> 3355</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Dispense or dump %s&quot;</span> ), drink_tname );</div>
<div class="line"><a id="l03356" name="l03356"></a><span class="lineno"> 3356</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( HAVE_A_DRINK, drink.<a class="code hl_function" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp; drink.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ),</div>
<div class="line"><a id="l03357" name="l03357"></a><span class="lineno"> 3357</span>                             <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Have a drink&quot;</span> ) );</div>
<div class="line"><a id="l03358" name="l03358"></a><span class="lineno"> 3358</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( REFILL, <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Refill&quot;</span> ) );</div>
<div class="line"><a id="l03359" name="l03359"></a><span class="lineno"> 3359</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( EXAMINE, <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Examine&quot;</span> ) );</div>
<div class="line"><a id="l03360" name="l03360"></a><span class="lineno"> 3360</span> </div>
<div class="line"><a id="l03361" name="l03361"></a><span class="lineno"> 3361</span>        selectmenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Select an action&quot;</span> );</div>
<div class="line"><a id="l03362" name="l03362"></a><span class="lineno"> 3362</span>        selectmenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l03363" name="l03363"></a><span class="lineno"> 3363</span> </div>
<div class="line"><a id="l03364" name="l03364"></a><span class="lineno"> 3364</span>        <span class="keywordflow">switch</span>( selectmenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a id="l03365" name="l03365"></a><span class="lineno"> 3365</span>            <span class="keywordflow">case</span> DISPENSE:</div>
<div class="line"><a id="l03366" name="l03366"></a><span class="lineno"> 3366</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceliquid__handler.html#ae4b5ac39dbc51d5559ba9d6f901395f0">liquid_handler::handle_liquid_from_ground</a>( items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), examp ) ) {</div>
<div class="line"><a id="l03367" name="l03367"></a><span class="lineno"> 3367</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You squeeze the last drops of %1$s from the %2$s.&quot;</span> ),</div>
<div class="line"><a id="l03368" name="l03368"></a><span class="lineno"> 3368</span>                             drink_tname, keg_name );</div>
<div class="line"><a id="l03369" name="l03369"></a><span class="lineno"> 3369</span>                }</div>
<div class="line"><a id="l03370" name="l03370"></a><span class="lineno"> 3370</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03371" name="l03371"></a><span class="lineno"> 3371</span> </div>
<div class="line"><a id="l03372" name="l03372"></a><span class="lineno"> 3372</span>            <span class="keywordflow">case</span> HAVE_A_DRINK:</div>
<div class="line"><a id="l03373" name="l03373"></a><span class="lineno"> 3373</span>                <span class="keywordflow">if</span>( !p.<a class="code hl_function" href="classCharacter.html#a7eadf5cda537e47e73289fa9afe85e67">eat</a>( drink ) ) {</div>
<div class="line"><a id="l03374" name="l03374"></a><span class="lineno"> 3374</span>                    <span class="keywordflow">return</span>; <span class="comment">// They didn&#39;t actually drink</span></div>
<div class="line"><a id="l03375" name="l03375"></a><span class="lineno"> 3375</span>                }</div>
<div class="line"><a id="l03376" name="l03376"></a><span class="lineno"> 3376</span> </div>
<div class="line"><a id="l03377" name="l03377"></a><span class="lineno"> 3377</span>                <span class="keywordflow">if</span>( drink.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> == 0 ) {</div>
<div class="line"><a id="l03378" name="l03378"></a><span class="lineno"> 3378</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You squeeze the last drops of %1$s from the %2$s.&quot;</span> ),</div>
<div class="line"><a id="l03379" name="l03379"></a><span class="lineno"> 3379</span>                             drink_tname, keg_name );</div>
<div class="line"><a id="l03380" name="l03380"></a><span class="lineno"> 3380</span>                    here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l03381" name="l03381"></a><span class="lineno"> 3381</span>                }</div>
<div class="line"><a id="l03382" name="l03382"></a><span class="lineno"> 3382</span>                p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 5_seconds );</div>
<div class="line"><a id="l03383" name="l03383"></a><span class="lineno"> 3383</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03384" name="l03384"></a><span class="lineno"> 3384</span> </div>
<div class="line"><a id="l03385" name="l03385"></a><span class="lineno"> 3385</span>            <span class="keywordflow">case</span> REFILL: {</div>
<div class="line"><a id="l03386" name="l03386"></a><span class="lineno"> 3386</span>                <span class="keywordflow">if</span>( drink.<a class="code hl_function" href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">volume</a>() &gt;= keg_cap ) {</div>
<div class="line"><a id="l03387" name="l03387"></a><span class="lineno"> 3387</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is completely full.&quot;</span> ), keg_name );</div>
<div class="line"><a id="l03388" name="l03388"></a><span class="lineno"> 3388</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03389" name="l03389"></a><span class="lineno"> 3389</span>                }</div>
<div class="line"><a id="l03390" name="l03390"></a><span class="lineno"> 3390</span>                <span class="keywordtype">int</span> charges_held = p.<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( drink.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() );</div>
<div class="line"><a id="l03391" name="l03391"></a><span class="lineno"> 3391</span>                <span class="keywordflow">if</span>( charges_held &lt; 1 ) {</div>
<div class="line"><a id="l03392" name="l03392"></a><span class="lineno"> 3392</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You don&#39;t have any %1$s to fill the %2$s with.&quot;</span> ),</div>
<div class="line"><a id="l03393" name="l03393"></a><span class="lineno"> 3393</span>                             drink_nname, keg_name );</div>
<div class="line"><a id="l03394" name="l03394"></a><span class="lineno"> 3394</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03395" name="l03395"></a><span class="lineno"> 3395</span>                }</div>
<div class="line"><a id="l03396" name="l03396"></a><span class="lineno"> 3396</span>                <a class="code hl_class" href="classitem.html">item</a> tmp( drink.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>(), <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, charges_held );</div>
<div class="line"><a id="l03397" name="l03397"></a><span class="lineno"> 3397</span>                <a class="code hl_function" href="namespaceiexamine.html#a700893be2f824844fdc4b4ea4b2ee148">pour_into_keg</a>( examp, tmp );</div>
<div class="line"><a id="l03398" name="l03398"></a><span class="lineno"> 3398</span>                p.<a class="code hl_function" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( drink.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>(), charges_held - tmp.charges );</div>
<div class="line"><a id="l03399" name="l03399"></a><span class="lineno"> 3399</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You fill the %1$s with %2$s.&quot;</span> ), keg_name, drink_nname );</div>
<div class="line"><a id="l03400" name="l03400"></a><span class="lineno"> 3400</span>                p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 10_seconds );</div>
<div class="line"><a id="l03401" name="l03401"></a><span class="lineno"> 3401</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03402" name="l03402"></a><span class="lineno"> 3402</span>            }</div>
<div class="line"><a id="l03403" name="l03403"></a><span class="lineno"> 3403</span> </div>
<div class="line"><a id="l03404" name="l03404"></a><span class="lineno"> 3404</span>            <span class="keywordflow">case</span> EXAMINE: {</div>
<div class="line"><a id="l03405" name="l03405"></a><span class="lineno"> 3405</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It contains %s (%d), %0.f%% full.&quot;</span> ),</div>
<div class="line"><a id="l03406" name="l03406"></a><span class="lineno"> 3406</span>                         drink_tname, drink.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, drink.<a class="code hl_function" href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">volume</a>() * 100.0 / keg_cap );</div>
<div class="line"><a id="l03407" name="l03407"></a><span class="lineno"> 3407</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03408" name="l03408"></a><span class="lineno"> 3408</span>            }</div>
<div class="line"><a id="l03409" name="l03409"></a><span class="lineno"> 3409</span> </div>
<div class="line"><a id="l03410" name="l03410"></a><span class="lineno"> 3410</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03411" name="l03411"></a><span class="lineno"> 3411</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03412" name="l03412"></a><span class="lineno"> 3412</span>        }</div>
<div class="line"><a id="l03413" name="l03413"></a><span class="lineno"> 3413</span>    }</div>
<div class="line"><a id="l03414" name="l03414"></a><span class="lineno"> 3414</span>}</div>
<div class="ttc" id="aclassitem_html_a54fe4917d343209ae2fdb9b163bd967a"><div class="ttname"><a href="classitem.html#a54fe4917d343209ae2fdb9b163bd967a">item::can_unload_liquid</a></div><div class="ttdeci">bool can_unload_liquid() const</div><div class="ttdoc">Returns true if not empty if it's liquid, it's not currently frozen in resealable container.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06875">item.cpp:6875</a></div></div>
<div class="ttc" id="aclassitem_html_a5996f63ca1797fc01482678b51a87680"><div class="ttname"><a href="classitem.html#a5996f63ca1797fc01482678b51a87680">item::is_container_empty</a></div><div class="ttdeci">bool is_container_empty() const</div><div class="ttdoc">Whether this item has no contents at all.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06862">item.cpp:6862</a></div></div>
<div class="ttc" id="aclassitem_html_aad45569fa1fdd99d602eabbbbca04f75"><div class="ttname"><a href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">item::is_food</a></div><div class="ttdeci">bool is_food() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06617">item.cpp:6617</a></div></div>
<div class="ttc" id="aclassmap__cursor_html"><div class="ttname"><a href="classmap__cursor.html">map_cursor</a></div><div class="ttdef"><b>Definition:</b> <a href="map__selector_8h_source.html#l00010">map_selector.h:11</a></div></div>
<div class="ttc" id="aclassmap_html_a148fb7ddc87ffb1da97dd33e0529c983"><div class="ttname"><a href="classmap.html#a148fb7ddc87ffb1da97dd33e0529c983">map::name</a></div><div class="ttdeci">std::string name(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01389">map.cpp:1389</a></div></div>
<div class="ttc" id="aclassvisitable_html_abf24bf044bbf16def702fd78351fc46f"><div class="ttname"><a href="classvisitable.html#abf24bf044bbf16def702fd78351fc46f">visitable::has_item_with</a></div><div class="ttdeci">bool has_item_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter) const</div><div class="ttdoc">Returns true if any item (including those within a container) matches the filter.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00104">visitable.cpp:104</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a8778e47a7cd8da1779330966216e12e1"><div class="ttname"><a href="iexamine_8cpp.html#a8778e47a7cd8da1779330966216e12e1">displace_items_except_one_liquid</a></div><div class="ttdeci">static void displace_items_except_one_liquid(const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03230">iexamine.cpp:3230</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a700893be2f824844fdc4b4ea4b2ee148"><div class="ttname"><a href="namespaceiexamine.html#a700893be2f824844fdc4b4ea4b2ee148">iexamine::pour_into_keg</a></div><div class="ttdeci">bool pour_into_keg(const tripoint &amp;pos, item &amp;liquid)</div><div class="ttdoc">Pour liquid into a keg (furniture) on the map.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03421">iexamine.cpp:3421</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04454">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="item_8cpp_source.html#l06875">item::can_unload_liquid()</a>, <a class="el" href="item_8h_source.html#l02199">item::charges</a>, <a class="el" href="visitable_8cpp_source.html#l00946">visitable&lt; T &gt;::charges_of()</a>, <a class="el" href="iexamine_8cpp_source.html#l03230">displace_items_except_one_liquid()</a>, <a class="el" href="consumption_8cpp_source.html#l00828">Character::eat()</a>, <a class="el" href="fmtlib__format_8h_source.html#l03355">detail::find()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="iexamine_8cpp_source.html#l03216">get_keg_capacity()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00114">liquid_handler::handle_liquid_from_ground()</a>, <a class="el" href="visitable_8cpp_source.html#l00104">visitable&lt; T &gt;::has_item_with()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l04247">map::i_clear()</a>, <a class="el" href="item_8cpp_source.html#l06862">item::is_container_empty()</a>, <a class="el" href="item_8cpp_source.html#l06617">item::is_food()</a>, <a class="el" href="visitable_8cpp_source.html#l00324">visitable&lt; T &gt;::items_with()</a>, <a class="el" href="enums_8h_source.html#l00175">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="item_8cpp_source.html#l06438">item::made_of()</a>, <a class="el" href="ui_8h_source.html#l00031">MENU_AUTOASSIGN</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="map_8cpp_source.html#l01389">map::name()</a>, <a class="el" href="item_8cpp_source.html#l09951">item::nname()</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="item__stack_8cpp_source.html#l00083">item_stack::only_item()</a>, <a class="el" href="path__info_8cpp_source.html#l00230">PATH_INFO::options()</a>, <a class="el" href="iexamine_8cpp_source.html#l03421">pour_into_keg()</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="item_8cpp_source.html#l05564">item::set_relative_rot()</a>, <a class="el" href="calendar_8cpp_source.html#l00033">calendar::start_of_cataclysm</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l04574">item::tname()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="item_8cpp_source.html#l08374">item::typeId()</a>, <a class="el" href="character_8cpp_source.html#l09665">Character::use_charges()</a>, and <a class="el" href="item_8cpp_source.html#l05129">item::volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a82fa11f641d3792302e86cdbec0e4011" name="a82fa11f641d3792302e86cdbec0e4011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82fa11f641d3792302e86cdbec0e4011">&#9670;&nbsp;</a></span>kiln_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::kiln_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Fabrication decreases loss when firing a kiln 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02590">2590</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span>{</div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>    <a class="code hl_class" href="classint__id.html">furn_id</a> cur_kiln_type = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>    <a class="code hl_class" href="classint__id.html">furn_id</a> next_kiln_type = <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a>;</div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>    <span class="keywordflow">if</span>( cur_kiln_type == <a class="code hl_variable" href="mapdata_8cpp.html#aef342ed27573d00d000ea3677179c5c4">f_kiln_empty</a> ) {</div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span>        next_kiln_type = <a class="code hl_variable" href="mapdata_8cpp.html#a09f87424ec9bf0512e4a6722ab285d39">f_kiln_full</a>;</div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur_kiln_type == <a class="code hl_variable" href="mapdata_8cpp.html#a63d437890c5282d8dacd47808e7a6b0b">f_kiln_metal_empty</a> ) {</div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span>        next_kiln_type = <a class="code hl_variable" href="mapdata_8cpp.html#adcb99821fd2d2e0f0df5f4b2f4f24b8a">f_kiln_metal_full</a>;</div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action kiln_empty, but is of type %s&quot;</span>,</div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>                  here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code hl_function" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code hl_function" href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">c_str</a>() );</div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>    }</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span> </div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::set&lt;material_id&gt; kilnable{ <a class="code hl_typedef" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( <span class="stringliteral">&quot;wood&quot;</span> ), <a class="code hl_typedef" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( <span class="stringliteral">&quot;bone&quot;</span> ) };</div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span>    <span class="keywordtype">bool</span> fuel_present = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>    <span class="keyword">auto</span> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;i : items ) {</div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span>        <span class="keywordflow">if</span>( i.typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a> ) {</div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This kiln already contains charcoal.&quot;</span> ) );</div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove it before firing the kiln again.&quot;</span> ) );</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( i.made_of_any( kilnable ) ) {</div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>            fuel_present = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This kiln contains %s, which can&#39;t be made into charcoal!&quot;</span> ), i.tname( 1,</div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>                     <span class="keyword">false</span> ) );</div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span>        }</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span>    }</div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span> </div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span>    <span class="keywordflow">if</span>( !fuel_present ) {</div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This kiln is empty.  Fill it with wood or bone and try again.&quot;</span> ) );</div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>    }</div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span><span class="comment"></span> </div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span><span class="comment">    ///\EFFECT_FABRICATION decreases loss when firing a kiln</span></div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span><span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">int</span> skill = p.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a> );</div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>    <span class="keywordtype">int</span> loss = 60 - 2 *</div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>               skill; <span class="comment">// We can afford to be inefficient - logs and skeletons are cheap, charcoal isn&#39;t</span></div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span> </div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>    <span class="comment">// Burn stuff that should get charred, leave out the rest</span></div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> total_volume = 0_ml;</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;i : items ) {</div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>        total_volume += i.volume();</div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span>    }</div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span> </div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> char_volume = ( 100 - loss ) * total_volume / 100;</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span>    <span class="keywordtype">int</span> char_charges = <a class="code hl_variable" href="iexamine_8cpp.html#a6c9d36f2ac7b8adb5b1055508b33ce80">itype_unfinished_charcoal</a>-&gt;<a class="code hl_function" href="structitype.html#a437edaf34e4c8b5bd688005360507b7d">charges_per_volume</a>( char_volume );</div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span>    <span class="keywordflow">if</span>( char_charges &lt; 1 ) {</div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The batch in this kiln is too small to yield any charcoal.&quot;</span> ) );</div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>    }</div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span> </div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span>    <span class="keywordflow">if</span>( !p.<a class="code hl_function" href="classCharacter.html#a9bff3208a5e121c4e3a71b81b378e4e7">has_charges</a>( <a class="code hl_variable" href="iexamine_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, 1 ) ) {</div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This kiln is ready to be fired, but you have no fire source.&quot;</span> ) );</div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This kiln contains %s %s of material, and is ready to be fired.&quot;</span> ),</div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>                 <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( total_volume ), <a class="code hl_function" href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a>() );</div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Fire the kiln?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span>        }</div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>    }</div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span> </div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>    p.<a class="code hl_function" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( <a class="code hl_variable" href="iexamine_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, 1 );</div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>    here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, next_kiln_type );</div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>    <a class="code hl_class" href="classitem.html">item</a> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a6c9d36f2ac7b8adb5b1055508b33ce80">itype_unfinished_charcoal</a>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span>    <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.charges = char_charges;</div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>    here.<a class="code hl_function" href="classmap.html#a64d3ea19afd7a9c65f072dd65fb15405">add_item</a>( examp, <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> );</div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You fire the charcoal kiln.&quot;</span> ) );</div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_a6c9d36f2ac7b8adb5b1055508b33ce80"><div class="ttname"><a href="iexamine_8cpp.html#a6c9d36f2ac7b8adb5b1055508b33ce80">itype_unfinished_charcoal</a></div><div class="ttdeci">static const itype_id itype_unfinished_charcoal(&quot;unfinished_charcoal&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aa5ffa4fd2e1363b9474c32c3a47a6df9"><div class="ttname"><a href="iexamine_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a></div><div class="ttdeci">static const itype_id itype_fire(&quot;fire&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab59a154650bd3771bb30915bd559c7b6"><div class="ttname"><a href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a></div><div class="ttdeci">static const itype_id itype_charcoal(&quot;charcoal&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_a09f87424ec9bf0512e4a6722ab285d39"><div class="ttname"><a href="mapdata_8cpp.html#a09f87424ec9bf0512e4a6722ab285d39">f_kiln_full</a></div><div class="ttdeci">furn_id f_kiln_full</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01129">mapdata.cpp:1129</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a63d437890c5282d8dacd47808e7a6b0b"><div class="ttname"><a href="mapdata_8cpp.html#a63d437890c5282d8dacd47808e7a6b0b">f_kiln_metal_empty</a></div><div class="ttdeci">furn_id f_kiln_metal_empty</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01129">mapdata.cpp:1129</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_adcb99821fd2d2e0f0df5f4b2f4f24b8a"><div class="ttname"><a href="mapdata_8cpp.html#adcb99821fd2d2e0f0df5f4b2f4f24b8a">f_kiln_metal_full</a></div><div class="ttdeci">furn_id f_kiln_metal_full</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01129">mapdata.cpp:1129</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aef342ed27573d00d000ea3677179c5c4"><div class="ttname"><a href="mapdata_8cpp.html#aef342ed27573d00d000ea3677179c5c4">f_kiln_empty</a></div><div class="ttdeci">furn_id f_kiln_empty</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01129">mapdata.cpp:1129</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04454">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="string__id_8h_source.html#l00247">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="itype_8cpp_source.html#l00131">itype::charges_per_volume()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="mapdata_8cpp_source.html#l01129">f_kiln_empty</a>, <a class="el" href="mapdata_8cpp_source.html#l01129">f_kiln_full</a>, <a class="el" href="mapdata_8cpp_source.html#l01129">f_kiln_metal_empty</a>, <a class="el" href="mapdata_8cpp_source.html#l01129">f_kiln_metal_full</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="output_8cpp_source.html#l02020">format_volume()</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="character_8cpp_source.html#l03351">Character::get_skill_level()</a>, <a class="el" href="character_8cpp_source.html#l09605">Character::has_charges()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l04247">map::i_clear()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a>, <a class="el" href="iexamine_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, <a class="el" href="iexamine_8cpp.html#a6c9d36f2ac7b8adb5b1055508b33ce80">itype_unfinished_charcoal</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="iexamine_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="character_8cpp_source.html#l09665">Character::use_charges()</a>, and <a class="el" href="units__utility_8cpp_source.html#l00037">volume_units_abbr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a9adbf32691928d1fb64896cadbabc373" name="a9adbf32691928d1fb64896cadbabc373"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9adbf32691928d1fb64896cadbabc373">&#9670;&nbsp;</a></span>kiln_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::kiln_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02665">2665</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>{</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span>    <a class="code hl_class" href="classint__id.html">furn_id</a> cur_kiln_type = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>    <a class="code hl_class" href="classint__id.html">furn_id</a> next_kiln_type = <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a>;</div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>    <span class="keywordflow">if</span>( cur_kiln_type == <a class="code hl_variable" href="mapdata_8cpp.html#a09f87424ec9bf0512e4a6722ab285d39">f_kiln_full</a> ) {</div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>        next_kiln_type = <a class="code hl_variable" href="mapdata_8cpp.html#aef342ed27573d00d000ea3677179c5c4">f_kiln_empty</a>;</div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur_kiln_type == <a class="code hl_variable" href="mapdata_8cpp.html#adcb99821fd2d2e0f0df5f4b2f4f24b8a">f_kiln_metal_full</a> ) {</div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>        next_kiln_type = <a class="code hl_variable" href="mapdata_8cpp.html#a63d437890c5282d8dacd47808e7a6b0b">f_kiln_metal_empty</a>;</div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action kiln_full, but is of type %s&quot;</span>,</div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>                  here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code hl_function" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code hl_function" href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">c_str</a>() );</div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span>    }</div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span> </div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span>    <span class="keywordflow">if</span>( items.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This kiln is empty…&quot;</span> ) );</div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, next_kiln_type );</div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span>    }</div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There&#39;s a charcoal kiln there.&quot;</span> ) );</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> firing_time = 6_hours; <span class="comment">// 5 days in real life</span></div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> time_left = firing_time - items.<a class="code hl_function" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code hl_function" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>();</div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>    <span class="keywordflow">if</span>( time_left &gt; 0_turns ) {</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span>        <span class="keywordtype">int</span> hours = to_hours&lt;int&gt;( time_left );</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>        <span class="keywordtype">int</span> minutes = to_minutes&lt;int&gt;( time_left ) + 1;</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>        <span class="keywordflow">if</span>( minutes &gt; 60 ) {</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;It will finish burning in about %d hour.&quot;</span>,</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span>                               <span class="stringliteral">&quot;It will finish burning in about %d hours.&quot;</span>,</div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span>                               hours ), hours );</div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( minutes &gt; 30 ) {</div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It will finish burning in less than an hour.&quot;</span> ) );</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It should take about %d minutes to finish burning.&quot;</span> ), minutes );</div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>        }</div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>    }</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span> </div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> total_volume = 0_ml;</div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span>    <span class="comment">// Burn stuff that should get charred, leave out the rest</span></div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> item_it = items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); item_it != items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span>        <span class="keywordflow">if</span>( item_it-&gt;typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a6c9d36f2ac7b8adb5b1055508b33ce80">itype_unfinished_charcoal</a> || item_it-&gt;typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a> ) {</div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>            total_volume += item_it-&gt;volume();</div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>            item_it = items.<a class="code hl_function" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( item_it );</div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span>            item_it++;</div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>        }</div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span>    }</div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span> </div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span>    <a class="code hl_class" href="classitem.html">item</a> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>    <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.charges = <a class="code hl_variable" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a>-&gt;<a class="code hl_function" href="structitype.html#a437edaf34e4c8b5bd688005360507b7d">charges_per_volume</a>( total_volume );</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>    here.<a class="code hl_function" href="classmap.html#a64d3ea19afd7a9c65f072dd65fb15405">add_item</a>( examp, <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> );</div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, next_kiln_type );</div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It has finished burning, yielding %d charcoal.&quot;</span> ), <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.charges );</div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04454">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l10034">item::age()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="string__id_8h_source.html#l00247">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="itype_8cpp_source.html#l00131">itype::charges_per_volume()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00153">map_stack::erase()</a>, <a class="el" href="mapdata_8cpp_source.html#l01129">f_kiln_empty</a>, <a class="el" href="mapdata_8cpp_source.html#l01129">f_kiln_full</a>, <a class="el" href="mapdata_8cpp_source.html#l01129">f_kiln_metal_empty</a>, <a class="el" href="mapdata_8cpp_source.html#l01129">f_kiln_metal_full</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a>, <a class="el" href="iexamine_8cpp.html#a6c9d36f2ac7b8adb5b1055508b33ce80">itype_unfinished_charcoal</a>, <a class="el" href="item__stack_8cpp_source.html#l00083">item_stack::only_item()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, and <a class="el" href="translations_8cpp_source.html#l00036">vgettext()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="af44785c44ed5b238072e392c7805a6fe" name="af44785c44ed5b238072e392c7805a6fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af44785c44ed5b238072e392c7805a6fe">&#9670;&nbsp;</a></span>ledge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::ledge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04610">4610</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04611" name="l04611"></a><span class="lineno"> 4611</span>{</div>
<div class="line"><a id="l04612" name="l04612"></a><span class="lineno"> 4612</span>    <span class="keyword">enum</span> ledge_action : <span class="keywordtype">int</span> { jump_over, climb_down, spin_web_bridge };</div>
<div class="line"><a id="l04613" name="l04613"></a><span class="lineno"> 4613</span> </div>
<div class="line"><a id="l04614" name="l04614"></a><span class="lineno"> 4614</span>    <a class="code hl_class" href="classuilist.html">uilist</a> cmenu;</div>
<div class="line"><a id="l04615" name="l04615"></a><span class="lineno"> 4615</span>    cmenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There is a ledge here.  What do you want to do?&quot;</span> );</div>
<div class="line"><a id="l04616" name="l04616"></a><span class="lineno"> 4616</span>    cmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( ledge_action::jump_over, <span class="keyword">true</span>, <span class="charliteral">&#39;j&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Jump over.&quot;</span> ) );</div>
<div class="line"><a id="l04617" name="l04617"></a><span class="lineno"> 4617</span>    cmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( ledge_action::climb_down, <span class="keyword">true</span>, <span class="charliteral">&#39;c&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Climb down.&quot;</span> ) );</div>
<div class="line"><a id="l04618" name="l04618"></a><span class="lineno"> 4618</span>    <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a8ee77896548a00569c87774d7b765b6f">trait_WEB_BRIDGE</a> ) ) {</div>
<div class="line"><a id="l04619" name="l04619"></a><span class="lineno"> 4619</span>        cmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( ledge_action::spin_web_bridge, <span class="keyword">true</span>, <span class="charliteral">&#39;w&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Spin Web Bridge.&quot;</span> ) );</div>
<div class="line"><a id="l04620" name="l04620"></a><span class="lineno"> 4620</span>    }</div>
<div class="line"><a id="l04621" name="l04621"></a><span class="lineno"> 4621</span> </div>
<div class="line"><a id="l04622" name="l04622"></a><span class="lineno"> 4622</span>    cmenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l04623" name="l04623"></a><span class="lineno"> 4623</span> </div>
<div class="line"><a id="l04624" name="l04624"></a><span class="lineno"> 4624</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l04625" name="l04625"></a><span class="lineno"> 4625</span>    <span class="keywordflow">switch</span>( cmenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a id="l04626" name="l04626"></a><span class="lineno"> 4626</span>        <span class="keywordflow">case</span> ledge_action::jump_over: {</div>
<div class="line"><a id="l04627" name="l04627"></a><span class="lineno"> 4627</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> dest( p.<a class="code hl_function" href="classCharacter.html#a464e960411f87bd3be76d5142dc255cb">posx</a>() + 2 * <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( examp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> - p.<a class="code hl_function" href="classCharacter.html#a464e960411f87bd3be76d5142dc255cb">posx</a>() ), p.<a class="code hl_function" href="classCharacter.html#a4b4d2e6bf4190c6470b282ce60183c0f">posy</a>() + 2 * <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( examp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> - p.<a class="code hl_function" href="classCharacter.html#a4b4d2e6bf4190c6470b282ce60183c0f">posy</a>() ),</div>
<div class="line"><a id="l04628" name="l04628"></a><span class="lineno"> 4628</span>                           p.<a class="code hl_function" href="classCharacter.html#a0d0cb32a95161137e0c61303f84b3753">posz</a>() );</div>
<div class="line"><a id="l04629" name="l04629"></a><span class="lineno"> 4629</span>            <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">get_str</a>() &lt; 4 ) {</div>
<div class="line"><a id="l04630" name="l04630"></a><span class="lineno"> 4630</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You are too weak to jump over an obstacle.&quot;</span> ) );</div>
<div class="line"><a id="l04631" name="l04631"></a><span class="lineno"> 4631</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( 100 * p.<a class="code hl_function" href="classCharacter.html#a5929e955c11ee6c749447472df7c774d">weight_carried</a>() / p.<a class="code hl_function" href="classCharacter.html#a0bdec852c8280a1cb4bb5e45e14057b5">weight_capacity</a>() &gt; 25 ) {</div>
<div class="line"><a id="l04632" name="l04632"></a><span class="lineno"> 4632</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You are too burdened to jump over an obstacle.&quot;</span> ) );</div>
<div class="line"><a id="l04633" name="l04633"></a><span class="lineno"> 4633</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !here.<a class="code hl_function" href="classmap.html#a3188771064ca49d4798c6a80bfad0fcd">valid_move</a>( examp, dest, <span class="keyword">false</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l04634" name="l04634"></a><span class="lineno"> 4634</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You cannot jump over an obstacle - something is blocking the way.&quot;</span> ) );</div>
<div class="line"><a id="l04635" name="l04635"></a><span class="lineno"> 4635</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( dest ) ) {</div>
<div class="line"><a id="l04636" name="l04636"></a><span class="lineno"> 4636</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You cannot jump over an obstacle - there is %s blocking the way.&quot;</span> ),</div>
<div class="line"><a id="l04637" name="l04637"></a><span class="lineno"> 4637</span>                         <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( dest )-&gt;disp_name() );</div>
<div class="line"><a id="l04638" name="l04638"></a><span class="lineno"> 4638</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( dest ).<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_variable" href="structter__t.html#ac732273f5e5c2f3298182003c032f871">trap</a> == <a class="code hl_variable" href="memorial__logger_8cpp.html#a9d7e5dc72cb6e99095b4cb3d0d26ecd4">tr_ledge</a> ) {</div>
<div class="line"><a id="l04639" name="l04639"></a><span class="lineno"> 4639</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You are not going to jump over an obstacle only to fall down.&quot;</span> ) );</div>
<div class="line"><a id="l04640" name="l04640"></a><span class="lineno"> 4640</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04641" name="l04641"></a><span class="lineno"> 4641</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You jump over an obstacle.&quot;</span> ) );</div>
<div class="line"><a id="l04642" name="l04642"></a><span class="lineno"> 4642</span>                p.<a class="code hl_function" href="classCharacter.html#a81bb9016c05d558713f6bce2512cd9e5">setpos</a>( dest );</div>
<div class="line"><a id="l04643" name="l04643"></a><span class="lineno"> 4643</span>            }</div>
<div class="line"><a id="l04644" name="l04644"></a><span class="lineno"> 4644</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04645" name="l04645"></a><span class="lineno"> 4645</span>        }</div>
<div class="line"><a id="l04646" name="l04646"></a><span class="lineno"> 4646</span>        <span class="keywordflow">case</span> ledge_action::climb_down: {</div>
<div class="line"><a id="l04647" name="l04647"></a><span class="lineno"> 4647</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> where = examp;</div>
<div class="line"><a id="l04648" name="l04648"></a><span class="lineno"> 4648</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> below = examp;</div>
<div class="line"><a id="l04649" name="l04649"></a><span class="lineno"> 4649</span>            below.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>--;</div>
<div class="line"><a id="l04650" name="l04650"></a><span class="lineno"> 4650</span>            <span class="keywordflow">while</span>( here.<a class="code hl_function" href="classmap.html#a3188771064ca49d4798c6a80bfad0fcd">valid_move</a>( where, below, <span class="keyword">false</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l04651" name="l04651"></a><span class="lineno"> 4651</span>                where.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>--;</div>
<div class="line"><a id="l04652" name="l04652"></a><span class="lineno"> 4652</span>                below.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>--;</div>
<div class="line"><a id="l04653" name="l04653"></a><span class="lineno"> 4653</span>            }</div>
<div class="line"><a id="l04654" name="l04654"></a><span class="lineno"> 4654</span> </div>
<div class="line"><a id="l04655" name="l04655"></a><span class="lineno"> 4655</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> height = examp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> - where.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l04656" name="l04656"></a><span class="lineno"> 4656</span>            <span class="keywordflow">if</span>( height == 0 ) {</div>
<div class="line"><a id="l04657" name="l04657"></a><span class="lineno"> 4657</span>                p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t climb down there.&quot;</span> ) );</div>
<div class="line"><a id="l04658" name="l04658"></a><span class="lineno"> 4658</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04659" name="l04659"></a><span class="lineno"> 4659</span>            }</div>
<div class="line"><a id="l04660" name="l04660"></a><span class="lineno"> 4660</span> </div>
<div class="line"><a id="l04661" name="l04661"></a><span class="lineno"> 4661</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> has_grapnel = p.<a class="code hl_function" href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">has_amount</a>( <a class="code hl_variable" href="iexamine_8cpp.html#aafb1b26622217051e88207772589b086">itype_grapnel</a>, 1 );</div>
<div class="line"><a id="l04662" name="l04662"></a><span class="lineno"> 4662</span>            <span class="keyword">const</span> <span class="keyword">auto</span> climb_cost = <a class="code hl_function" href="namespacemap__funcs.html#a8f22c4f8a377d195788aa0fa4d315491">map_funcs::climbing_cost</a>( here, where, examp );</div>
<div class="line"><a id="l04663" name="l04663"></a><span class="lineno"> 4663</span>            <span class="keyword">const</span> <span class="keyword">auto</span> fall_mod = p.<a class="code hl_function" href="classCharacter.html#a9fe1505d3048960ac1d51f2ea8238f71">fall_damage_mod</a>();</div>
<div class="line"><a id="l04664" name="l04664"></a><span class="lineno"> 4664</span>            <span class="keyword">const</span> std::string query_str = <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;Looks like %d story.  Jump down?&quot;</span>,</div>
<div class="line"><a id="l04665" name="l04665"></a><span class="lineno"> 4665</span>                                                    <span class="stringliteral">&quot;Looks like %d stories.  Jump down?&quot;</span>,</div>
<div class="line"><a id="l04666" name="l04666"></a><span class="lineno"> 4666</span>                                                    height );</div>
<div class="line"><a id="l04667" name="l04667"></a><span class="lineno"> 4667</span> </div>
<div class="line"><a id="l04668" name="l04668"></a><span class="lineno"> 4668</span>            <span class="keywordflow">if</span>( height &gt; 1 &amp;&amp; !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( query_str.c_str(), height ) ) {</div>
<div class="line"><a id="l04669" name="l04669"></a><span class="lineno"> 4669</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04670" name="l04670"></a><span class="lineno"> 4670</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( height == 1 ) {</div>
<div class="line"><a id="l04671" name="l04671"></a><span class="lineno"> 4671</span>                <span class="keyword">enum class</span> climb_result {</div>
<div class="line"><a id="l04672" name="l04672"></a><span class="lineno"> 4672</span>                    one_way_dangerous, one_way_unclimbable,</div>
<div class="line"><a id="l04673" name="l04673"></a><span class="lineno"> 4673</span>                    both_way_safe, both_way_grapnel, both_way_hard_to_climb,</div>
<div class="line"><a id="l04674" name="l04674"></a><span class="lineno"> 4674</span>                };</div>
<div class="line"><a id="l04675" name="l04675"></a><span class="lineno"> 4675</span>                <span class="keyword">const</span> <span class="keyword">auto</span> get_climb_result = [&amp;]() {</div>
<div class="line"><a id="l04676" name="l04676"></a><span class="lineno"> 4676</span>                    <span class="keywordflow">if</span>( has_grapnel ) {</div>
<div class="line"><a id="l04677" name="l04677"></a><span class="lineno"> 4677</span>                        <span class="keywordflow">return</span> climb_result::both_way_grapnel;</div>
<div class="line"><a id="l04678" name="l04678"></a><span class="lineno"> 4678</span>                    }</div>
<div class="line"><a id="l04679" name="l04679"></a><span class="lineno"> 4679</span>                    <span class="keywordflow">if</span>( climb_cost.has_value() ) {</div>
<div class="line"><a id="l04680" name="l04680"></a><span class="lineno"> 4680</span>                        <span class="keywordflow">return</span> climb_cost.value() &lt; 200</div>
<div class="line"><a id="l04681" name="l04681"></a><span class="lineno"> 4681</span>                               ? climb_result::both_way_safe</div>
<div class="line"><a id="l04682" name="l04682"></a><span class="lineno"> 4682</span>                               : climb_result::both_way_hard_to_climb;</div>
<div class="line"><a id="l04683" name="l04683"></a><span class="lineno"> 4683</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04684" name="l04684"></a><span class="lineno"> 4684</span>                        <span class="keywordflow">return</span> fall_mod &gt; 0.8</div>
<div class="line"><a id="l04685" name="l04685"></a><span class="lineno"> 4685</span>                               ? climb_result::one_way_dangerous</div>
<div class="line"><a id="l04686" name="l04686"></a><span class="lineno"> 4686</span>                               : climb_result::one_way_unclimbable;</div>
<div class="line"><a id="l04687" name="l04687"></a><span class="lineno"> 4687</span>                    }</div>
<div class="line"><a id="l04688" name="l04688"></a><span class="lineno"> 4688</span>                };</div>
<div class="line"><a id="l04689" name="l04689"></a><span class="lineno"> 4689</span>                <span class="keyword">const</span> <span class="keyword">auto</span> get_message = []( climb_result res ) {</div>
<div class="line"><a id="l04690" name="l04690"></a><span class="lineno"> 4690</span>                    <span class="keywordflow">switch</span>( res ) {</div>
<div class="line"><a id="l04691" name="l04691"></a><span class="lineno"> 4691</span>                        <span class="keywordflow">case</span> climb_result::both_way_safe:</div>
<div class="line"><a id="l04692" name="l04692"></a><span class="lineno"> 4692</span>                            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You climb down.&quot;</span> );</div>
<div class="line"><a id="l04693" name="l04693"></a><span class="lineno"> 4693</span>                        <span class="keywordflow">case</span> climb_result::both_way_grapnel:</div>
<div class="line"><a id="l04694" name="l04694"></a><span class="lineno"> 4694</span>                            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You tie the rope around your waist and begin to climb down.&quot;</span> );</div>
<div class="line"><a id="l04695" name="l04695"></a><span class="lineno"> 4695</span>                        <span class="keywordflow">case</span> climb_result::both_way_hard_to_climb:</div>
<div class="line"><a id="l04696" name="l04696"></a><span class="lineno"> 4696</span>                            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You climb down but feel that it won&#39;t be easy to climb back up.&quot;</span> );</div>
<div class="line"><a id="l04697" name="l04697"></a><span class="lineno"> 4697</span>                        <span class="keywordflow">case</span> climb_result::one_way_dangerous:</div>
<div class="line"><a id="l04698" name="l04698"></a><span class="lineno"> 4698</span>                            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You probably won&#39;t be able to get up and jumping down may hurt.  Jump?&quot;</span> );</div>
<div class="line"><a id="l04699" name="l04699"></a><span class="lineno"> 4699</span>                        <span class="keywordflow">case</span> climb_result::one_way_unclimbable:</div>
<div class="line"><a id="l04700" name="l04700"></a><span class="lineno"> 4700</span>                            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You probably won&#39;t be able to get back up.  Climb down?&quot;</span> );</div>
<div class="line"><a id="l04701" name="l04701"></a><span class="lineno"> 4701</span>                    }</div>
<div class="line"><a id="l04702" name="l04702"></a><span class="lineno"> 4702</span>                    <a class="code hl_function" href="namespacecata.html#ab53cf6757bb7d3a1ead8c109eec43ee3">cata::unreachable</a>();</div>
<div class="line"><a id="l04703" name="l04703"></a><span class="lineno"> 4703</span>                };</div>
<div class="line"><a id="l04704" name="l04704"></a><span class="lineno"> 4704</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;climb_cost: %d&quot;</span>, climb_cost.value_or( -1 ) );</div>
<div class="line"><a id="l04705" name="l04705"></a><span class="lineno"> 4705</span>                <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> = get_climb_result();</div>
<div class="line"><a id="l04706" name="l04706"></a><span class="lineno"> 4706</span>                <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> = get_message( <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> );</div>
<div class="line"><a id="l04707" name="l04707"></a><span class="lineno"> 4707</span>                <span class="keywordflow">switch</span>( <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> ) {</div>
<div class="line"><a id="l04708" name="l04708"></a><span class="lineno"> 4708</span>                    <span class="keywordflow">case</span> climb_result::both_way_safe:</div>
<div class="line"><a id="l04709" name="l04709"></a><span class="lineno"> 4709</span>                    <span class="keywordflow">case</span> climb_result::both_way_grapnel:</div>
<div class="line"><a id="l04710" name="l04710"></a><span class="lineno"> 4710</span>                    <span class="keywordflow">case</span> climb_result::both_way_hard_to_climb:</div>
<div class="line"><a id="l04711" name="l04711"></a><span class="lineno"> 4711</span>                        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> );</div>
<div class="line"><a id="l04712" name="l04712"></a><span class="lineno"> 4712</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04713" name="l04713"></a><span class="lineno"> 4713</span>                    <span class="keywordflow">case</span> climb_result::one_way_dangerous:</div>
<div class="line"><a id="l04714" name="l04714"></a><span class="lineno"> 4714</span>                    <span class="keywordflow">case</span> climb_result::one_way_unclimbable:</div>
<div class="line"><a id="l04715" name="l04715"></a><span class="lineno"> 4715</span>                    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l04716" name="l04716"></a><span class="lineno"> 4716</span>                        <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> ) ) {</div>
<div class="line"><a id="l04717" name="l04717"></a><span class="lineno"> 4717</span>                            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04718" name="l04718"></a><span class="lineno"> 4718</span>                        }</div>
<div class="line"><a id="l04719" name="l04719"></a><span class="lineno"> 4719</span>                }</div>
<div class="line"><a id="l04720" name="l04720"></a><span class="lineno"> 4720</span>            }</div>
<div class="line"><a id="l04721" name="l04721"></a><span class="lineno"> 4721</span> </div>
<div class="line"><a id="l04722" name="l04722"></a><span class="lineno"> 4722</span>            p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 1_seconds + 1_seconds * fall_mod );</div>
<div class="line"><a id="l04723" name="l04723"></a><span class="lineno"> 4723</span>            p.<a class="code hl_function" href="classCharacter.html#a81bb9016c05d558713f6bce2512cd9e5">setpos</a>( examp );</div>
<div class="line"><a id="l04724" name="l04724"></a><span class="lineno"> 4724</span> </div>
<div class="line"><a id="l04725" name="l04725"></a><span class="lineno"> 4725</span>            <span class="keywordflow">if</span>( climb_cost &gt; 0 || <a class="code hl_function" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 0.8, 1.0 ) &gt; fall_mod ) {</div>
<div class="line"><a id="l04726" name="l04726"></a><span class="lineno"> 4726</span>                <span class="comment">// One tile of falling less (possibly zero)</span></div>
<div class="line"><a id="l04727" name="l04727"></a><span class="lineno"> 4727</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;vertical_move( -1, <span class="keyword">true</span> );</div>
<div class="line"><a id="l04728" name="l04728"></a><span class="lineno"> 4728</span>            }</div>
<div class="line"><a id="l04729" name="l04729"></a><span class="lineno"> 4729</span>            here.<a class="code hl_function" href="classmap.html#a75a40ba325d4b3764befa9e60edd6ddf">creature_on_trap</a>( p );</div>
<div class="line"><a id="l04730" name="l04730"></a><span class="lineno"> 4730</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04731" name="l04731"></a><span class="lineno"> 4731</span>        }</div>
<div class="line"><a id="l04732" name="l04732"></a><span class="lineno"> 4732</span>        <span class="keywordflow">case</span> ledge_action::spin_web_bridge: {</div>
<div class="line"><a id="l04733" name="l04733"></a><span class="lineno"> 4733</span> </div>
<div class="line"><a id="l04734" name="l04734"></a><span class="lineno"> 4734</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="mutation_8cpp.html#a859a80724f53b1970d8b75279e5a4e3c">can_use_mutation_warn</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a8ee77896548a00569c87774d7b765b6f">trait_WEB_BRIDGE</a>, p ) ) {</div>
<div class="line"><a id="l04735" name="l04735"></a><span class="lineno"> 4735</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04736" name="l04736"></a><span class="lineno"> 4736</span>            }</div>
<div class="line"><a id="l04737" name="l04737"></a><span class="lineno"> 4737</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="character_8h.html#addab86bfe6fd0bf8c22ec43df3ec051da1c21724609ac70f1573fd4b755c64ddb">range</a> = 6; <span class="comment">//this means we could web across a gap of 5.</span></div>
<div class="line"><a id="l04738" name="l04738"></a><span class="lineno"> 4738</span>            <span class="keywordtype">int</span> success_range = 0;</div>
<div class="line"><a id="l04739" name="l04739"></a><span class="lineno"> 4739</span>            <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04740" name="l04740"></a><span class="lineno"> 4740</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 2; i &lt;= <a class="code hl_enumvalue" href="character_8h.html#addab86bfe6fd0bf8c22ec43df3ec051da1c21724609ac70f1573fd4b755c64ddb">range</a>; i++ ) {</div>
<div class="line"><a id="l04741" name="l04741"></a><span class="lineno"> 4741</span>                <span class="comment">//break at the first non empty space encountered</span></div>
<div class="line"><a id="l04742" name="l04742"></a><span class="lineno"> 4742</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter( <a class="code hl_struct" href="structtripoint.html">tripoint</a>( p.<a class="code hl_function" href="classCharacter.html#a464e960411f87bd3be76d5142dc255cb">posx</a>() + i * <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( examp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> - p.<a class="code hl_function" href="classCharacter.html#a464e960411f87bd3be76d5142dc255cb">posx</a>() ),</div>
<div class="line"><a id="l04743" name="l04743"></a><span class="lineno"> 4743</span>                                        p.<a class="code hl_function" href="classCharacter.html#a4b4d2e6bf4190c6470b282ce60183c0f">posy</a>() + i * <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( examp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> - p.<a class="code hl_function" href="classCharacter.html#a4b4d2e6bf4190c6470b282ce60183c0f">posy</a>() ), p.<a class="code hl_function" href="classCharacter.html#a0d0cb32a95161137e0c61303f84b3753">posz</a>() ) ) != <a class="code hl_variable" href="mapdata_8cpp.html#a231b1a6e4c654fd6584736e5397439c9">t_open_air</a> ) {</div>
<div class="line"><a id="l04744" name="l04744"></a><span class="lineno"> 4744</span>                    success_range = i;</div>
<div class="line"><a id="l04745" name="l04745"></a><span class="lineno"> 4745</span>                    <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04746" name="l04746"></a><span class="lineno"> 4746</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04747" name="l04747"></a><span class="lineno"> 4747</span>                }</div>
<div class="line"><a id="l04748" name="l04748"></a><span class="lineno"> 4748</span>            }</div>
<div class="line"><a id="l04749" name="l04749"></a><span class="lineno"> 4749</span>            <span class="keywordflow">if</span>( !<a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> ) {</div>
<div class="line"><a id="l04750" name="l04750"></a><span class="lineno"> 4750</span>                p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There is nothing for your to attach your web to!&quot;</span> ) );</div>
<div class="line"><a id="l04751" name="l04751"></a><span class="lineno"> 4751</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04752" name="l04752"></a><span class="lineno"> 4752</span>                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 1; i &lt; success_range; i++ ) {</div>
<div class="line"><a id="l04753" name="l04753"></a><span class="lineno"> 4753</span>                    <a class="code hl_struct" href="structtripoint.html">tripoint</a> dest( p.<a class="code hl_function" href="classCharacter.html#a464e960411f87bd3be76d5142dc255cb">posx</a>() + i * <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( examp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> - p.<a class="code hl_function" href="classCharacter.html#a464e960411f87bd3be76d5142dc255cb">posx</a>() ), p.<a class="code hl_function" href="classCharacter.html#a4b4d2e6bf4190c6470b282ce60183c0f">posy</a>() + i * <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( examp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> - p.<a class="code hl_function" href="classCharacter.html#a4b4d2e6bf4190c6470b282ce60183c0f">posy</a>() ),</div>
<div class="line"><a id="l04754" name="l04754"></a><span class="lineno"> 4754</span>                                   p.<a class="code hl_function" href="classCharacter.html#a0d0cb32a95161137e0c61303f84b3753">posz</a>() );</div>
<div class="line"><a id="l04755" name="l04755"></a><span class="lineno"> 4755</span> </div>
<div class="line"><a id="l04756" name="l04756"></a><span class="lineno"> 4756</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter_set( dest, <a class="code hl_variable" href="iexamine_8cpp.html#a2f4d385b684f4729bf1102c4c13feaff">t_web_bridge</a> );</div>
<div class="line"><a id="l04757" name="l04757"></a><span class="lineno"> 4757</span>                }</div>
<div class="line"><a id="l04758" name="l04758"></a><span class="lineno"> 4758</span>                p.<a class="code hl_function" href="classCharacter.html#adf3d5d081bee618b84701d090cea91cb">mutation_spend_resources</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a8ee77896548a00569c87774d7b765b6f">trait_WEB_BRIDGE</a> );</div>
<div class="line"><a id="l04759" name="l04759"></a><span class="lineno"> 4759</span>            }</div>
<div class="line"><a id="l04760" name="l04760"></a><span class="lineno"> 4760</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04761" name="l04761"></a><span class="lineno"> 4761</span>        }</div>
<div class="line"><a id="l04762" name="l04762"></a><span class="lineno"> 4762</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l04763" name="l04763"></a><span class="lineno"> 4763</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You decided to step back from the ledge.&quot;</span> ) );</div>
<div class="line"><a id="l04764" name="l04764"></a><span class="lineno"> 4764</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04765" name="l04765"></a><span class="lineno"> 4765</span>    }</div>
<div class="line"><a id="l04766" name="l04766"></a><span class="lineno"> 4766</span>}</div>
<div class="ttc" id="acharacter_8h_html_addab86bfe6fd0bf8c22ec43df3ec051da1c21724609ac70f1573fd4b755c64ddb"><div class="ttname"><a href="character_8h.html#addab86bfe6fd0bf8c22ec43df3ec051da1c21724609ac70f1573fd4b755c64ddb">range</a></div><div class="ttdeci">@ range</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00104">character.h:104</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0bdec852c8280a1cb4bb5e45e14057b5"><div class="ttname"><a href="classCharacter.html#a0bdec852c8280a1cb4bb5e45e14057b5">Character::weight_capacity</a></div><div class="ttdeci">units::mass weight_capacity() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02626">character.cpp:2626</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0d0cb32a95161137e0c61303f84b3753"><div class="ttname"><a href="classCharacter.html#a0d0cb32a95161137e0c61303f84b3753">Character::posz</a></div><div class="ttdeci">int posz() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00803">character.h:803</a></div></div>
<div class="ttc" id="aclassCharacter_html_a464e960411f87bd3be76d5142dc255cb"><div class="ttname"><a href="classCharacter.html#a464e960411f87bd3be76d5142dc255cb">Character::posx</a></div><div class="ttdeci">int posx() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00797">character.h:797</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4b4d2e6bf4190c6470b282ce60183c0f"><div class="ttname"><a href="classCharacter.html#a4b4d2e6bf4190c6470b282ce60183c0f">Character::posy</a></div><div class="ttdeci">int posy() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00800">character.h:800</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5929e955c11ee6c749447472df7c774d"><div class="ttname"><a href="classCharacter.html#a5929e955c11ee6c749447472df7c774d">Character::weight_carried</a></div><div class="ttdeci">units::mass weight_carried() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02537">character.cpp:2537</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5aba683ccf77cb560a0a932308289bd9"><div class="ttname"><a href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">Character::get_str</a></div><div class="ttdeci">virtual int get_str() const</div><div class="ttdoc">Getters for stats exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04090">character.cpp:4090</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9fe1505d3048960ac1d51f2ea8238f71"><div class="ttname"><a href="classCharacter.html#a9fe1505d3048960ac1d51f2ea8238f71">Character::fall_damage_mod</a></div><div class="ttdeci">float fall_damage_mod() const override</div><div class="ttdoc">Returns multiplier on fall damage at low velocity (knockback/pit/1 z-level, not 5 z-levels)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10803">character.cpp:10803</a></div></div>
<div class="ttc" id="aclassCharacter_html_adf3d5d081bee618b84701d090cea91cb"><div class="ttname"><a href="classCharacter.html#adf3d5d081bee618b84701d090cea91cb">Character::mutation_spend_resources</a></div><div class="ttdeci">void mutation_spend_resources(const trait_id &amp;mut)</div><div class="ttdoc">Removes the appropriate costs (NOTE: will reapply mods &amp; recalc sightlines in case of newly activated...</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l01698">mutation.cpp:1698</a></div></div>
<div class="ttc" id="aclassmap_html_a3188771064ca49d4798c6a80bfad0fcd"><div class="ttname"><a href="classmap.html#a3188771064ca49d4798c6a80bfad0fcd">map::valid_move</a></div><div class="ttdeci">bool valid_move(const tripoint &amp;from, const tripoint &amp;to, bool bash=false, bool flying=false, bool via_ramp=false) const</div><div class="ttdoc">Returns true if a creature could walk from from to to in one step.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01925">map.cpp:1925</a></div></div>
<div class="ttc" id="aclassmap_html_a75a40ba325d4b3764befa9e60edd6ddf"><div class="ttname"><a href="classmap.html#a75a40ba325d4b3764befa9e60edd6ddf">map::creature_on_trap</a></div><div class="ttdeci">void creature_on_trap(Creature &amp;critter, bool may_avoid=true)</div><div class="ttdoc">Apply trap effects to the creature, similar to creature_in_field.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08621">map.cpp:8621</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a></div><div class="ttdeci">@ m_debug</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00271">enums.h:271</a></div></div>
<div class="ttc" id="aenums_8h_html_a89bed42d8e3efcd44570febc837f088e"><div class="ttname"><a href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a></div><div class="ttdeci">constexpr int sgn(const T x)</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00008">enums.h:8</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a2f4d385b684f4729bf1102c4c13feaff"><div class="ttname"><a href="iexamine_8cpp.html#a2f4d385b684f4729bf1102c4c13feaff">t_web_bridge</a></div><div class="ttdeci">static const ter_str_id t_web_bridge(&quot;t_web_bridge&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a8ee77896548a00569c87774d7b765b6f"><div class="ttname"><a href="iexamine_8cpp.html#a8ee77896548a00569c87774d7b765b6f">trait_WEB_BRIDGE</a></div><div class="ttdeci">static const trait_id trait_WEB_BRIDGE(&quot;WEB_BRIDGE&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aafb1b26622217051e88207772589b086"><div class="ttname"><a href="iexamine_8cpp.html#aafb1b26622217051e88207772589b086">itype_grapnel</a></div><div class="ttdeci">static const itype_id itype_grapnel(&quot;grapnel&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_a231b1a6e4c654fd6584736e5397439c9"><div class="ttname"><a href="mapdata_8cpp.html#a231b1a6e4c654fd6584736e5397439c9">t_open_air</a></div><div class="ttdeci">ter_id t_open_air</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00729">mapdata.cpp:729</a></div></div>
<div class="ttc" id="amemorial__logger_8cpp_html_a9d7e5dc72cb6e99095b4cb3d0d26ecd4"><div class="ttname"><a href="memorial__logger_8cpp.html#a9d7e5dc72cb6e99095b4cb3d0d26ecd4">tr_ledge</a></div><div class="ttdeci">static const trap_str_id tr_ledge(&quot;tr_ledge&quot;)</div></div>
<div class="ttc" id="amutation_8cpp_html_a859a80724f53b1970d8b75279e5a4e3c"><div class="ttname"><a href="mutation_8cpp.html#a859a80724f53b1970d8b75279e5a4e3c">can_use_mutation_warn</a></div><div class="ttdeci">bool can_use_mutation_warn(const trait_id &amp;mut, const Character &amp;character)</div><div class="ttdoc">Calls can_use_mutation and if it fails, print a standard message.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l01687">mutation.cpp:1687</a></div></div>
<div class="ttc" id="anamespacebehavior_html_af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b"><div class="ttname"><a href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">behavior::success</a></div><div class="ttdeci">@ success</div><div class="ttdef"><b>Definition:</b> <a href="behavior_8h_source.html#l00020">behavior.h:20</a></div></div>
<div class="ttc" id="anamespacecata_html_ab53cf6757bb7d3a1ead8c109eec43ee3"><div class="ttname"><a href="namespacecata.html#ab53cf6757bb7d3a1ead8c109eec43ee3">cata::unreachable</a></div><div class="ttdeci">void unreachable()</div><div class="ttdoc">Marks unreachable code.</div><div class="ttdef"><b>Definition:</b> <a href="cata__unreachable_8h_source.html#l00037">cata_unreachable.h:37</a></div></div>
<div class="ttc" id="anamespacemap__funcs_html_a8f22c4f8a377d195788aa0fa4d315491"><div class="ttname"><a href="namespacemap__funcs.html#a8f22c4f8a377d195788aa0fa4d315491">map_funcs::climbing_cost</a></div><div class="ttdeci">auto climbing_cost(const map &amp;m, const tripoint &amp;from, const tripoint &amp;to) -&gt; std::optional&lt; int &gt;</div><div class="ttdoc">Checks both the neighborhoods of from and to for climbable surfaces, returns move cost of climbing fr...</div><div class="ttdef"><b>Definition:</b> <a href="map__functions_8cpp_source.html#l00016">map_functions.cpp:16</a></div></div>
<div class="ttc" id="anamespacemapgen__defer_html_a616ad2c7ee2eb002b683b41b04a888c1"><div class="ttname"><a href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">mapgen_defer::message</a></div><div class="ttdeci">std::string message</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l00411">mapgen.cpp:411</a></div></div>
<div class="ttc" id="arng_8cpp_html_a0c88381d6334a2fbaa726c53f5cf9bb9"><div class="ttname"><a href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a></div><div class="ttdeci">double rng_float(double lo, double hi)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00028">rng.cpp:28</a></div></div>
<div class="ttc" id="astructter__t_html_ac732273f5e5c2f3298182003c032f871"><div class="ttname"><a href="structter__t.html#ac732273f5e5c2f3298182003c032f871">ter_t::trap</a></div><div class="ttdeci">trap_id trap</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00473">mapdata.h:473</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="mutation_8cpp_source.html#l01687">can_use_mutation_warn()</a>, <a class="el" href="map__functions_8cpp_source.html#l00016">map_funcs::climbing_cost()</a>, <a class="el" href="map_8cpp_source.html#l08621">map::creature_on_trap()</a>, <a class="el" href="character_8cpp_source.html#l10803">Character::fall_damage_mod()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="character_8cpp_source.html#l04090">Character::get_str()</a>, <a class="el" href="visitable_8cpp_source.html#l01111">visitable&lt; T &gt;::has_amount()</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="iexamine_8cpp.html#aafb1b26622217051e88207772589b086">itype_grapnel</a>, <a class="el" href="enums_8h_source.html#l00271">m_debug</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="enums_8h_source.html#l00264">m_warning</a>, <a class="el" href="mapgen_8cpp_source.html#l00411">mapgen_defer::message</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="mutation_8cpp_source.html#l01698">Character::mutation_spend_resources()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="output_8cpp_source.html#l00764">popup()</a>, <a class="el" href="character_8h_source.html#l00797">Character::posx()</a>, <a class="el" href="character_8h_source.html#l00800">Character::posy()</a>, <a class="el" href="character_8h_source.html#l00803">Character::posz()</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="character_8h_source.html#l00104">range</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="rng_8cpp_source.html#l00028">rng_float()</a>, <a class="el" href="character_8h_source.html#l00815">Character::setpos()</a>, <a class="el" href="enums_8h_source.html#l00008">sgn()</a>, <a class="el" href="behavior_8h_source.html#l00020">behavior::success</a>, <a class="el" href="mapdata_8cpp_source.html#l00729">t_open_air</a>, <a class="el" href="iexamine_8cpp.html#a2f4d385b684f4729bf1102c4c13feaff">t_web_bridge</a>, <a class="el" href="map_8cpp_source.html#l01562">map::ter()</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="memorial__logger_8cpp.html#a9d7e5dc72cb6e99095b4cb3d0d26ecd4">tr_ledge</a>, <a class="el" href="iexamine_8cpp.html#a8ee77896548a00569c87774d7b765b6f">trait_WEB_BRIDGE</a>, <a class="el" href="mapdata_8h_source.html#l00473">ter_t::trap</a>, <a class="el" href="cata__unreachable_8h_source.html#l00037">cata::unreachable()</a>, <a class="el" href="map_8cpp_source.html#l01925">map::valid_move()</a>, <a class="el" href="translations_8cpp_source.html#l00036">vgettext()</a>, <a class="el" href="character_8cpp_source.html#l02626">Character::weight_capacity()</a>, <a class="el" href="character_8cpp_source.html#l02537">Character::weight_carried()</a>, <a class="el" href="point_8h_source.html#l00136">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00137">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00138">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ade298007b9644bd1dd31a165c84c273f" name="ade298007b9644bd1dd31a165c84c273f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade298007b9644bd1dd31a165c84c273f">&#9670;&nbsp;</a></span>locked_object()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::locked_object </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether PC has a crowbar then calls <a class="el" href="namespaceiuse.html#a9430d817f535840cefa29014ad73a062">iuse.crowbar</a>. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01546">1546</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>{</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span> </div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>    <a class="code hl_class" href="classsafe__reference.html">safe_reference&lt;item&gt;</a> prying_tool = <a class="code hl_function" href="iexamine_8cpp.html#ab95b5229caf77d3b7a3cea7c9161c68e">find_best_prying_tool</a>( p );</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>    <span class="keywordflow">if</span>( prying_tool ) {</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>        <a class="code hl_function" href="iexamine_8cpp.html#a6faf1e23a351b5d8794d2de23e57472a">apply_prying_tool</a>( p, prying_tool.<a class="code hl_function" href="classsafe__reference.html#a4e8ced33481c2328f540363058eb9257">get</a>(), examp );</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>    }</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span> </div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>    <span class="comment">// if the furniture/terrain is also lockpickable</span></div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <span class="stringliteral">&quot;LOCKED&quot;</span>, examp ) ) {</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>        <a class="code hl_class" href="classsafe__reference.html">safe_reference&lt;item&gt;</a> lock_picking_tool = <a class="code hl_function" href="iexamine_8cpp.html#a683f2cd9e3de490da109dff64d2dc368">find_best_lock_picking_tool</a>( p );</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>        <span class="keywordflow">if</span>( lock_picking_tool ) {</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>            <a class="code hl_function" href="iexamine_8cpp.html#ac76be4ed7114f2d0c303cc8a1d570f1d">apply_lock_picking_tool</a>( p, lock_picking_tool.<a class="code hl_function" href="classsafe__reference.html#a4e8ced33481c2328f540363058eb9257">get</a>(), examp );</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is locked.  If only you had something to pry it or pick its lock…&quot;</span> ),</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>                     here.<a class="code hl_function" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( examp ) ? here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) : here.<a class="code hl_function" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) );</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>        }</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>    }</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span> </div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is locked.  If only you had something to pry it…&quot;</span> ),</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>             here.<a class="code hl_function" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( examp ) ? here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) : here.<a class="code hl_function" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) );</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>}</div>
<div class="ttc" id="aclassmap_html_a00008f407a53edc2445622618d7ed071"><div class="ttname"><a href="classmap.html#a00008f407a53edc2445622618d7ed071">map::has_furn</a></div><div class="ttdeci">bool has_furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01407">map.cpp:1407</a></div></div>
<div class="ttc" id="aclassmap_html_a516c0764134cc86b57297811520395f7"><div class="ttname"><a href="classmap.html#a516c0764134cc86b57297811520395f7">map::has_flag_ter_or_furn</a></div><div class="ttdeci">bool has_flag_ter_or_furn(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02403">map.cpp:2403</a></div></div>
<div class="ttc" id="aclasssafe__reference_html"><div class="ttname"><a href="classsafe__reference.html">safe_reference</a></div><div class="ttdoc">A pair of classes to provide safe references to objects.</div><div class="ttdef"><b>Definition:</b> <a href="safe__reference_8h_source.html#l00024">safe_reference.h:25</a></div></div>
<div class="ttc" id="aclasssafe__reference_html_a4e8ced33481c2328f540363058eb9257"><div class="ttname"><a href="classsafe__reference.html#a4e8ced33481c2328f540363058eb9257">safe_reference::get</a></div><div class="ttdeci">T * get() const</div><div class="ttdef"><b>Definition:</b> <a href="safe__reference_8h_source.html#l00029">safe_reference.h:29</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a683f2cd9e3de490da109dff64d2dc368"><div class="ttname"><a href="iexamine_8cpp.html#a683f2cd9e3de490da109dff64d2dc368">find_best_lock_picking_tool</a></div><div class="ttdeci">static safe_reference&lt; item &gt; find_best_lock_picking_tool(player &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01491">iexamine.cpp:1491</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a6faf1e23a351b5d8794d2de23e57472a"><div class="ttname"><a href="iexamine_8cpp.html#a6faf1e23a351b5d8794d2de23e57472a">apply_prying_tool</a></div><div class="ttdeci">static void apply_prying_tool(player &amp;p, item *it, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01514">iexamine.cpp:1514</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab95b5229caf77d3b7a3cea7c9161c68e"><div class="ttname"><a href="iexamine_8cpp.html#ab95b5229caf77d3b7a3cea7c9161c68e">find_best_prying_tool</a></div><div class="ttdeci">static safe_reference&lt; item &gt; find_best_prying_tool(player &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01471">iexamine.cpp:1471</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac76be4ed7114f2d0c303cc8a1d570f1d"><div class="ttname"><a href="iexamine_8cpp.html#ac76be4ed7114f2d0c303cc8a1d570f1d">apply_lock_picking_tool</a></div><div class="ttdeci">static void apply_lock_picking_tool(player &amp;p, item *it, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01526">iexamine.cpp:1526</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="iexamine_8cpp_source.html#l01526">apply_lock_picking_tool()</a>, <a class="el" href="iexamine_8cpp_source.html#l01514">apply_prying_tool()</a>, <a class="el" href="iexamine_8cpp_source.html#l01491">find_best_lock_picking_tool()</a>, <a class="el" href="iexamine_8cpp_source.html#l01471">find_best_prying_tool()</a>, <a class="el" href="map_8cpp_source.html#l01533">map::furnname()</a>, <a class="el" href="safe__reference_8h_source.html#l00029">safe_reference&lt; T &gt;::get()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l02403">map::has_flag_ter_or_furn()</a>, <a class="el" href="map_8cpp_source.html#l01407">map::has_furn()</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, and <a class="el" href="map_8cpp_source.html#l01773">map::tername()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l04141">curtains()</a>, <a class="el" href="iexamine_8cpp_source.html#l01749">door_peephole()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a06c1947e94ea34ddc4aee4f584c5fc8b" name="a06c1947e94ea34ddc4aee4f584c5fc8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06c1947e94ea34ddc4aee4f584c5fc8b">&#9670;&nbsp;</a></span>locked_object_pickable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::locked_object_pickable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether PC has picklocks then calls <a class="el" href="classpick__lock__actor.html" title="This implements lock picking.">pick_lock_actor</a>. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01575">1575</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>{</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span> </div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>    <a class="code hl_class" href="classsafe__reference.html">safe_reference&lt;item&gt;</a> lock_picking_tool = <a class="code hl_function" href="iexamine_8cpp.html#a683f2cd9e3de490da109dff64d2dc368">find_best_lock_picking_tool</a>( p );</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>    <span class="keywordflow">if</span>( lock_picking_tool ) {</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>        <a class="code hl_function" href="iexamine_8cpp.html#ac76be4ed7114f2d0c303cc8a1d570f1d">apply_lock_picking_tool</a>( p, lock_picking_tool.<a class="code hl_function" href="classsafe__reference.html#a4e8ced33481c2328f540363058eb9257">get</a>(), examp );</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>    }</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span> </div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is locked.  If only you had something to pick its lock…&quot;</span> ),</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>             here.<a class="code hl_function" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( examp ) ? here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) : here.<a class="code hl_function" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) );</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="iexamine_8cpp_source.html#l01526">apply_lock_picking_tool()</a>, <a class="el" href="iexamine_8cpp_source.html#l01491">find_best_lock_picking_tool()</a>, <a class="el" href="map_8cpp_source.html#l01533">map::furnname()</a>, <a class="el" href="safe__reference_8h_source.html#l00029">safe_reference&lt; T &gt;::get()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l01407">map::has_furn()</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, and <a class="el" href="map_8cpp_source.html#l01773">map::tername()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a5e019567c1f8ce2c1f580160ea21185c" name="a5e019567c1f8ce2c1f580160ea21185c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e019567c1f8ce2c1f580160ea21185c">&#9670;&nbsp;</a></span>migo_nerve_cluster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::migo_nerve_cluster </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l06280">6280</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06281" name="l06281"></a><span class="lineno"> 6281</span>{</div>
<div class="line"><a id="l06282" name="l06282"></a><span class="lineno"> 6282</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l06283" name="l06283"></a><span class="lineno"> 6283</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This looks important.  Tear open nerve cluster?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l06284" name="l06284"></a><span class="lineno"> 6284</span>        p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -200 );</div>
<div class="line"><a id="l06285" name="l06285"></a><span class="lineno"> 6285</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You grab hold of a sinewy tendril and wrench it loose!&quot;</span> ) );</div>
<div class="line"><a id="l06286" name="l06286"></a><span class="lineno"> 6286</span>        <a class="code hl_function" href="namespacemap__funcs.html#a60f9a4c25252a0b8cffa456f6bc25887">map_funcs::migo_nerve_cage_removal</a>( here, examp, <span class="keyword">false</span> );</div>
<div class="line"><a id="l06287" name="l06287"></a><span class="lineno"> 6287</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_typedef" href="type__id_8h.html#a6bc1468ac54b6176b517879f5f77564e">furn_id</a>( <span class="stringliteral">&quot;f_alien_scar&quot;</span> ) );</div>
<div class="line"><a id="l06288" name="l06288"></a><span class="lineno"> 6288</span>    }</div>
<div class="line"><a id="l06289" name="l06289"></a><span class="lineno"> 6289</span>}</div>
<div class="ttc" id="anamespacemap__funcs_html_a60f9a4c25252a0b8cffa456f6bc25887"><div class="ttname"><a href="namespacemap__funcs.html#a60f9a4c25252a0b8cffa456f6bc25887">map_funcs::migo_nerve_cage_removal</a></div><div class="ttdeci">void migo_nerve_cage_removal(map &amp;m, const tripoint &amp;p, bool spawn_damaged)</div><div class="ttdef"><b>Definition:</b> <a href="map__functions_8cpp_source.html#l00029">map_functions.cpp:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map__functions_8cpp_source.html#l00029">map_funcs::migo_nerve_cage_removal()</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, and <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a639d89c065849a9b4c19a27ac234ce2d" name="a639d89c065849a9b4c19a27ac234ce2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a639d89c065849a9b4c19a27ac234ce2d">&#9670;&nbsp;</a></span>mill_finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::mill_finalize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>start_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l05497">5497</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05498" name="l05498"></a><span class="lineno"> 5498</span>{</div>
<div class="line"><a id="l05499" name="l05499"></a><span class="lineno"> 5499</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l05500" name="l05500"></a><span class="lineno"> 5500</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">furn_id</a> cur_mill_type = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a id="l05501" name="l05501"></a><span class="lineno"> 5501</span>    <a class="code hl_class" href="classint__id.html">furn_id</a> next_mill_type = <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a>;</div>
<div class="line"><a id="l05502" name="l05502"></a><span class="lineno"> 5502</span>    <span class="keywordflow">if</span>( cur_mill_type == <a class="code hl_variable" href="mapdata_8cpp.html#a01fb598c3d9c2c34ac4e6c4650a2fcc2">f_wind_mill_active</a> ) {</div>
<div class="line"><a id="l05503" name="l05503"></a><span class="lineno"> 5503</span>        next_mill_type = <a class="code hl_variable" href="mapdata_8cpp.html#ad8f895d0bf37d7e8a4a17a77f0d6d009">f_wind_mill</a>;</div>
<div class="line"><a id="l05504" name="l05504"></a><span class="lineno"> 5504</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur_mill_type == <a class="code hl_variable" href="mapdata_8cpp.html#a702a9660059f90d2296a177d760d00db">f_water_mill_active</a> ) {</div>
<div class="line"><a id="l05505" name="l05505"></a><span class="lineno"> 5505</span>        next_mill_type = <a class="code hl_variable" href="mapdata_8cpp.html#aa8ee599d085db956194bf87c5db9da99">f_water_mill</a>;</div>
<div class="line"><a id="l05506" name="l05506"></a><span class="lineno"> 5506</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05507" name="l05507"></a><span class="lineno"> 5507</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Furniture executed action mill_finalize, but is of type %s&quot;</span>,</div>
<div class="line"><a id="l05508" name="l05508"></a><span class="lineno"> 5508</span>                  here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code hl_function" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code hl_function" href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">c_str</a>() );</div>
<div class="line"><a id="l05509" name="l05509"></a><span class="lineno"> 5509</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05510" name="l05510"></a><span class="lineno"> 5510</span>    }</div>
<div class="line"><a id="l05511" name="l05511"></a><span class="lineno"> 5511</span> </div>
<div class="line"><a id="l05512" name="l05512"></a><span class="lineno"> 5512</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l05513" name="l05513"></a><span class="lineno"> 5513</span>    <span class="keywordflow">if</span>( items.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a id="l05514" name="l05514"></a><span class="lineno"> 5514</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, next_mill_type );</div>
<div class="line"><a id="l05515" name="l05515"></a><span class="lineno"> 5515</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05516" name="l05516"></a><span class="lineno"> 5516</span>    }</div>
<div class="line"><a id="l05517" name="l05517"></a><span class="lineno"> 5517</span> </div>
<div class="line"><a id="l05518" name="l05518"></a><span class="lineno"> 5518</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> &amp;it : items ) {</div>
<div class="line"><a id="l05519" name="l05519"></a><span class="lineno"> 5519</span>        <span class="keywordflow">if</span>( it.type-&gt;milling_data ) {</div>
<div class="line"><a id="l05520" name="l05520"></a><span class="lineno"> 5520</span>            it.mod_last_rot_check( <a class="code hl_variable" href="iexamine_8cpp.html#ab52e720c1cc88c381313199ac4a3b26a">milling_time</a> );</div>
<div class="line"><a id="l05521" name="l05521"></a><span class="lineno"> 5521</span>            <span class="keyword">const</span> <a class="code hl_class" href="classislot__milling.html">islot_milling</a> &amp;mdata = *it.type-&gt;milling_data;</div>
<div class="line"><a id="l05522" name="l05522"></a><span class="lineno"> 5522</span>            <a class="code hl_class" href="classitem.html">item</a> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>( mdata.<a class="code hl_variable" href="classislot__milling.html#aa8ae9e815c2a51ce3d78ee40b95c18d7">into_</a>, start_time + <a class="code hl_variable" href="iexamine_8cpp.html#ab52e720c1cc88c381313199ac4a3b26a">milling_time</a>, it.count() * mdata.<a class="code hl_variable" href="classislot__milling.html#af210f6fffa11c0a99e20a3c38f981877">conversion_rate_</a> );</div>
<div class="line"><a id="l05523" name="l05523"></a><span class="lineno"> 5523</span>            <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.components.push_back( it );</div>
<div class="line"><a id="l05524" name="l05524"></a><span class="lineno"> 5524</span>            <span class="comment">// copied from item::inherit_flags, which can not be called here because it requires a recipe.</span></div>
<div class="line"><a id="l05525" name="l05525"></a><span class="lineno"> 5525</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;f : it.type-&gt;item_tags ) {</div>
<div class="line"><a id="l05526" name="l05526"></a><span class="lineno"> 5526</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classjson__flag.html#ad60cc8cafad9e89dfbab36fd8dbd0eda">json_flag::get</a>( f ).craft_inherit() ) {</div>
<div class="line"><a id="l05527" name="l05527"></a><span class="lineno"> 5527</span>                    <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.set_flag( f );</div>
<div class="line"><a id="l05528" name="l05528"></a><span class="lineno"> 5528</span>                }</div>
<div class="line"><a id="l05529" name="l05529"></a><span class="lineno"> 5529</span>            }</div>
<div class="line"><a id="l05530" name="l05530"></a><span class="lineno"> 5530</span>            <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.recipe_charges = <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.charges;</div>
<div class="line"><a id="l05531" name="l05531"></a><span class="lineno"> 5531</span>            <span class="comment">// Set flag to tell set_relative_rot() to calc from bday not now</span></div>
<div class="line"><a id="l05532" name="l05532"></a><span class="lineno"> 5532</span>            <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.set_flag( <a class="code hl_function" href="iexamine_8cpp.html#a8b527a5661651f15eb8a120d75bf46f2">flag_PROCESSING_RESULT</a> );</div>
<div class="line"><a id="l05533" name="l05533"></a><span class="lineno"> 5533</span>            <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.set_relative_rot( it.get_relative_rot() );</div>
<div class="line"><a id="l05534" name="l05534"></a><span class="lineno"> 5534</span>            <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.unset_flag( <a class="code hl_function" href="iexamine_8cpp.html#a8b527a5661651f15eb8a120d75bf46f2">flag_PROCESSING_RESULT</a> );</div>
<div class="line"><a id="l05535" name="l05535"></a><span class="lineno"> 5535</span>            it = <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>;</div>
<div class="line"><a id="l05536" name="l05536"></a><span class="lineno"> 5536</span>        }</div>
<div class="line"><a id="l05537" name="l05537"></a><span class="lineno"> 5537</span>    }</div>
<div class="line"><a id="l05538" name="l05538"></a><span class="lineno"> 5538</span>    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, next_mill_type );</div>
<div class="line"><a id="l05539" name="l05539"></a><span class="lineno"> 5539</span>}</div>
<div class="ttc" id="aclassislot__milling_html"><div class="ttname"><a href="classislot__milling.html">islot_milling</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00797">itype.h:798</a></div></div>
<div class="ttc" id="aclassislot__milling_html_aa8ae9e815c2a51ce3d78ee40b95c18d7"><div class="ttname"><a href="classislot__milling.html#aa8ae9e815c2a51ce3d78ee40b95c18d7">islot_milling::into_</a></div><div class="ttdeci">itype_id into_</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00800">itype.h:800</a></div></div>
<div class="ttc" id="aclassislot__milling_html_af210f6fffa11c0a99e20a3c38f981877"><div class="ttname"><a href="classislot__milling.html#af210f6fffa11c0a99e20a3c38f981877">islot_milling::conversion_rate_</a></div><div class="ttdeci">int conversion_rate_</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00801">itype.h:801</a></div></div>
<div class="ttc" id="aclassjson__flag_html_ad60cc8cafad9e89dfbab36fd8dbd0eda"><div class="ttname"><a href="classjson__flag.html#ad60cc8cafad9e89dfbab36fd8dbd0eda">json_flag::get</a></div><div class="ttdeci">static const json_flag &amp; get(const std::string &amp;id)</div><div class="ttdoc">Fetches flag definition (or null flag if not found)</div><div class="ttdef"><b>Definition:</b> <a href="flag_8cpp_source.html#l00070">flag.cpp:70</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a8b527a5661651f15eb8a120d75bf46f2"><div class="ttname"><a href="iexamine_8cpp.html#a8b527a5661651f15eb8a120d75bf46f2">flag_PROCESSING_RESULT</a></div><div class="ttdeci">static const std::string flag_PROCESSING_RESULT(&quot;PROCESSING_RESULT&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab52e720c1cc88c381313199ac4a3b26a"><div class="ttname"><a href="iexamine_8cpp.html#ab52e720c1cc88c381313199ac4a3b26a">milling_time</a></div><div class="ttdeci">static const time_duration milling_time</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l00248">iexamine.cpp:248</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a01fb598c3d9c2c34ac4e6c4650a2fcc2"><div class="ttname"><a href="mapdata_8cpp.html#a01fb598c3d9c2c34ac4e6c4650a2fcc2">f_wind_mill_active</a></div><div class="ttdeci">furn_id f_wind_mill_active</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01133">mapdata.cpp:1133</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a702a9660059f90d2296a177d760d00db"><div class="ttname"><a href="mapdata_8cpp.html#a702a9660059f90d2296a177d760d00db">f_water_mill_active</a></div><div class="ttdeci">furn_id f_water_mill_active</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01132">mapdata.cpp:1132</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aa8ee599d085db956194bf87c5db9da99"><div class="ttname"><a href="mapdata_8cpp.html#aa8ee599d085db956194bf87c5db9da99">f_water_mill</a></div><div class="ttdeci">furn_id f_water_mill</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01132">mapdata.cpp:1132</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_ad8f895d0bf37d7e8a4a17a77f0d6d009"><div class="ttname"><a href="mapdata_8cpp.html#ad8f895d0bf37d7e8a4a17a77f0d6d009">f_wind_mill</a></div><div class="ttdeci">furn_id f_wind_mill</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01133">mapdata.cpp:1133</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="string__id_8h_source.html#l00247">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="itype_8h_source.html#l00801">islot_milling::conversion_rate_</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="mapdata_8cpp_source.html#l01132">f_water_mill</a>, <a class="el" href="mapdata_8cpp_source.html#l01132">f_water_mill_active</a>, <a class="el" href="mapdata_8cpp_source.html#l01133">f_wind_mill</a>, <a class="el" href="mapdata_8cpp_source.html#l01133">f_wind_mill_active</a>, <a class="el" href="iexamine_8cpp.html#a8b527a5661651f15eb8a120d75bf46f2">flag_PROCESSING_RESULT()</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="flag_8cpp_source.html#l00070">json_flag::get()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="itype_8h_source.html#l00800">islot_milling::into_</a>, and <a class="el" href="iexamine_8cpp_source.html#l00248">milling_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="item_8cpp_source.html#l09187">item::process_fake_mill()</a>.</p>

</div>
</div>
<a id="a04569e7ba85955feff7bf4488d81d0f1" name="a04569e7ba85955feff7bf4488d81d0f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04569e7ba85955feff7bf4488d81d0f1">&#9670;&nbsp;</a></span>nanofab()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::nanofab </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UI FOR LAB_FINALE NANO FABRICATOR. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00301">301</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>{</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <span class="keywordtype">bool</span> table_exists = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> <a class="code hl_struct" href="structspawn__point.html">spawn_point</a>;</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;valid_location : here.<a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( examp, 1 ) ) {</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( valid_location ) == <a class="code hl_class" href="classstring__id.html">ter_str_id</a>( <span class="stringliteral">&quot;t_nanofab_body&quot;</span> ) ) {</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>            <a class="code hl_struct" href="structspawn__point.html">spawn_point</a> = valid_location;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>            table_exists = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        }</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    }</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <span class="keywordflow">if</span>( !table_exists ) {</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    }</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span> </div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    <span class="keyword">auto</span> nanofab_template = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;inv_map_splice( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; e ) {</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>        <span class="keywordflow">return</span> e.<a class="code hl_function" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( <span class="stringliteral">&quot;NANOFAB_ITEM_ID&quot;</span> );</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    }, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Introduce Nanofabricator template&quot;</span> ), <a class="code hl_variable" href="cached__options_8cpp.html#a1467e25ae6a1c8f9d4489be4a8e014a3">PICKUP_RANGE</a>,</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You don&#39;t have any usable templates.&quot;</span> ) );</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <span class="keywordflow">if</span>( !nanofab_template ) {</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    }</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <a class="code hl_class" href="classitem.html">item</a> new_item( nanofab_template-&gt;get_var( <span class="stringliteral">&quot;NANOFAB_ITEM_ID&quot;</span> ), <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span> </div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    <span class="keyword">auto</span> qty = std::max( 1, new_item.volume() / 250_ml );</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    <span class="keyword">auto</span> reqs = *<a class="code hl_typedef" href="type__id_8h.html#afb36dc6d5925e5112e70d60a171ebeb1">requirement_id</a>( <span class="stringliteral">&quot;nanofabricator&quot;</span> ) * qty;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span> </div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <span class="keywordflow">if</span>( !reqs.can_make_with_inventory( p.<a class="code hl_function" href="classCharacter.html#abd358c7a7757575b70b1613dbcce40a7">crafting_inventory</a>(), <a class="code hl_function" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> ) ) {</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <span class="stringliteral">&quot;%s&quot;</span>, reqs.list_missing() );</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    }</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <span class="comment">// Consume materials</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : reqs.get_components() ) {</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        p.<a class="code hl_function" href="classplayer.html#ad1f5e6d21b83313ab148302140083b99">consume_items</a>( e, 1, <a class="code hl_function" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    }</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : reqs.get_tools() ) {</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>        p.<a class="code hl_function" href="classplayer.html#aafa6cc2db2568af687ab21f09f8e4c2e">consume_tools</a>( e );</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    }</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    p.<a class="code hl_function" href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">invalidate_crafting_inventory</a>();</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    <span class="keywordflow">if</span>( new_item.is_armor() &amp;&amp; new_item.has_flag( <a class="code hl_function" href="iexamine_8cpp.html#ad66d76d379c8d5dcdbb69ceac398607b">flag_VARSIZE</a> ) ) {</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        new_item.set_flag( <span class="stringliteral">&quot;FIT&quot;</span> );</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    }</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span> </div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( <a class="code hl_struct" href="structspawn__point.html">spawn_point</a>, new_item );</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>}</div>
<div class="ttc" id="acached__options_8cpp_html_a1467e25ae6a1c8f9d4489be4a8e014a3"><div class="ttname"><a href="cached__options_8cpp.html#a1467e25ae6a1c8f9d4489be4a8e014a3">PICKUP_RANGE</a></div><div class="ttdeci">int PICKUP_RANGE</div><div class="ttdoc">Items on the map with at most this distance to the player are considered available for crafting,...</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00019">cached_options.cpp:19</a></div></div>
<div class="ttc" id="aclassitem_html_a478ecf81e48540e1ba39de33df968c43"><div class="ttname"><a href="classitem.html#a478ecf81e48540e1ba39de33df968c43">item::has_var</a></div><div class="ttdeci">bool has_var(const std::string &amp;name) const</div><div class="ttdoc">Whether the variable is defined at all.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01078">item.cpp:1078</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ad66d76d379c8d5dcdbb69ceac398607b"><div class="ttname"><a href="iexamine_8cpp.html#ad66d76d379c8d5dcdbb69ceac398607b">flag_VARSIZE</a></div><div class="ttdeci">static const std::string flag_VARSIZE(&quot;VARSIZE&quot;)</div></div>
<div class="ttc" id="astructspawn__point_html"><div class="ttname"><a href="structspawn__point.html">spawn_point</a></div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00035">submap.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="crafting_8cpp_source.html#l01513">player::consume_items()</a>, <a class="el" href="crafting_8cpp_source.html#l01845">player::consume_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l00556">Character::crafting_inventory()</a>, <a class="el" href="iexamine_8cpp.html#ad66d76d379c8d5dcdbb69ceac398607b">flag_VARSIZE()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="item_8cpp_source.html#l05328">item::has_flag()</a>, <a class="el" href="item_8cpp_source.html#l01078">item::has_var()</a>, <a class="el" href="crafting_8cpp_source.html#l00598">Character::invalidate_crafting_inventory()</a>, <a class="el" href="item_8cpp_source.html#l06729">item::is_armor()</a>, <a class="el" href="item_8h_source.html#l02265">is_crafting_component()</a>, <a class="el" href="cached__options_8cpp_source.html#l00019">PICKUP_RANGE</a>, <a class="el" href="map_8cpp_source.html#l08754">map::points_in_radius()</a>, <a class="el" href="output_8cpp_source.html#l00764">popup()</a>, <a class="el" href="item_8cpp_source.html#l05357">item::set_flag()</a>, <a class="el" href="map_8cpp_source.html#l01562">map::ter()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, and <a class="el" href="item_8cpp_source.html#l05129">item::volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a45c131e909371e96743dfe0a21ba75a6" name="a45c131e909371e96743dfe0a21ba75a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45c131e909371e96743dfe0a21ba75a6">&#9670;&nbsp;</a></span>none()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::none </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Nothing player can interact with here. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00253">253</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>{</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;That is a %s.&quot;</span> ), <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>( examp ) );</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>}</div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l04129">overmap.cpp:4129</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, and <a class="el" href="overmap_8cpp_source.html#l04129">om_direction::name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="action_8cpp_source.html#l00590">can_examine_at()</a>, <a class="el" href="mapdata_8cpp_source.html#l01568">map_data_common_t::check()</a>, <a class="el" href="iuse_8cpp_source.html#l06734">colorized_ter_name_flags_at()</a>, <a class="el" href="iexamine_8cpp_source.html#l01849">dead_plant()</a>, <a class="el" href="map_8cpp_source.html#l01684">map::examine()</a>, <a class="el" href="game_8cpp_source.html#l05463">game::examine()</a>, <a class="el" href="mapdata_8cpp_source.html#l01609">finalize_furn()</a>, <a class="el" href="map_8cpp_source.html#l01628">map::get_harvest()</a>, <a class="el" href="map_8cpp_source.html#l01648">map::get_harvest_names()</a>, <a class="el" href="iexamine_8cpp_source.html#l02037">harvest_common()</a>, <a class="el" href="iexamine_8cpp_source.html#l02135">harvested_plant()</a>, <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, <a class="el" href="iexamine_8cpp_source.html#l03454">pick_plant()</a>, and <a class="el" href="game_8cpp_source.html#l09095">game::place_player()</a>.</p>

</div>
</div>
<a id="a1bb33c7fa54e92589524b59657633198" name="a1bb33c7fa54e92589524b59657633198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bb33c7fa54e92589524b59657633198">&#9670;&nbsp;</a></span>notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display popup message pulled from the object's message property. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01628">1628</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>{</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>    std::string <a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_furn( pos ) ?</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>                          <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.furn( pos ).obj().message :</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>                          <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter( pos ).obj().message;</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a>.empty() ) {</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> ) );</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>    }</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="mapgen_8cpp_source.html#l00411">mapgen_defer::message</a>, and <a class="el" href="output_8cpp_source.html#l00764">popup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a060b59dbae83b1188922a4b701894532" name="a060b59dbae83b1188922a4b701894532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a060b59dbae83b1188922a4b701894532">&#9670;&nbsp;</a></span>on_smoke_out()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::on_smoke_out </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>start_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l05813">5813</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05814" name="l05814"></a><span class="lineno"> 5814</span>{</div>
<div class="line"><a id="l05815" name="l05815"></a><span class="lineno"> 5815</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l05816" name="l05816"></a><span class="lineno"> 5816</span>    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_class" href="classstring__id.html">furn_str_id</a>( <span class="stringliteral">&quot;f_smoking_rack_active&quot;</span> ) ||</div>
<div class="line"><a id="l05817" name="l05817"></a><span class="lineno"> 5817</span>        here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_class" href="classstring__id.html">furn_str_id</a>( <span class="stringliteral">&quot;f_metal_smoking_rack_active&quot;</span> ) ) {</div>
<div class="line"><a id="l05818" name="l05818"></a><span class="lineno"> 5818</span>        <a class="code hl_function" href="iexamine_8cpp.html#a2d48a582491a46c59641e525e445ab44">smoker_finalize</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, examp, start_time );</div>
<div class="line"><a id="l05819" name="l05819"></a><span class="lineno"> 5819</span>    }</div>
<div class="line"><a id="l05820" name="l05820"></a><span class="lineno"> 5820</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_a2d48a582491a46c59641e525e445ab44"><div class="ttname"><a href="iexamine_8cpp.html#a2d48a582491a46c59641e525e445ab44">smoker_finalize</a></div><div class="ttdeci">static void smoker_finalize(player &amp;, const tripoint &amp;examp, const time_point &amp;start_time)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05541">iexamine.cpp:5541</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, and <a class="el" href="iexamine_8cpp_source.html#l05541">smoker_finalize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item_8cpp_source.html#l09204">item::process_fake_smoke()</a>.</p>

</div>
</div>
<a id="aceeaf2599a1e103c7a6b2905e104050a" name="aceeaf2599a1e103c7a6b2905e104050a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aceeaf2599a1e103c7a6b2905e104050a">&#9670;&nbsp;</a></span>open_safe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::open_safe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l06218">6218</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06219" name="l06219"></a><span class="lineno"> 6219</span>{</div>
<div class="line"><a id="l06220" name="l06220"></a><span class="lineno"> 6220</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You open the unlocked safe.&quot;</span> ) );</div>
<div class="line"><a id="l06221" name="l06221"></a><span class="lineno"> 6221</span>    <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a8485e413e20e635e6f19058ec5a5a529">f_safe_o</a> );</div>
<div class="line"><a id="l06222" name="l06222"></a><span class="lineno"> 6222</span>}</div>
<div class="ttc" id="amapdata_8cpp_html_a8485e413e20e635e6f19058ec5a5a529"><div class="ttname"><a href="mapdata_8cpp.html#a8485e413e20e635e6f19058ec5a5a529">f_safe_o</a></div><div class="ttdeci">furn_id f_safe_o</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01120">mapdata.cpp:1120</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="mapdata_8cpp_source.html#l01120">f_safe_o</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, and <a class="el" href="enums_8h_source.html#l00265">m_info</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="aef18dcb88645994d8d4fed815b749d7b" name="aef18dcb88645994d8d4fed815b749d7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef18dcb88645994d8d4fed815b749d7b">&#9670;&nbsp;</a></span>pay_gas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::pay_gas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04440">4440</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04441" name="l04441"></a><span class="lineno"> 4441</span>{</div>
<div class="line"><a id="l04442" name="l04442"></a><span class="lineno"> 4442</span> </div>
<div class="line"><a id="l04443" name="l04443"></a><span class="lineno"> 4443</span>    <span class="keywordtype">int</span> choice = -1;</div>
<div class="line"><a id="l04444" name="l04444"></a><span class="lineno"> 4444</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> buy_gas = 1;</div>
<div class="line"><a id="l04445" name="l04445"></a><span class="lineno"> 4445</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> choose_pump = 2;</div>
<div class="line"><a id="l04446" name="l04446"></a><span class="lineno"> 4446</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> hack = 3;</div>
<div class="line"><a id="l04447" name="l04447"></a><span class="lineno"> 4447</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> refund = 4;</div>
<div class="line"><a id="l04448" name="l04448"></a><span class="lineno"> 4448</span> </div>
<div class="line"><a id="l04449" name="l04449"></a><span class="lineno"> 4449</span>    <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a> ) ) {</div>
<div class="line"><a id="l04450" name="l04450"></a><span class="lineno"> 4450</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re illiterate, and can&#39;t read the screen.&quot;</span> ) );</div>
<div class="line"><a id="l04451" name="l04451"></a><span class="lineno"> 4451</span>    }</div>
<div class="line"><a id="l04452" name="l04452"></a><span class="lineno"> 4452</span> </div>
<div class="line"><a id="l04453" name="l04453"></a><span class="lineno"> 4453</span>    <span class="keywordtype">int</span> pumpCount = <a class="code hl_function" href="iexamine_8cpp.html#a392786c55caddd4da5dbc69e9807d784">getNearPumpCount</a>( examp );</div>
<div class="line"><a id="l04454" name="l04454"></a><span class="lineno"> 4454</span>    <span class="keywordflow">if</span>( pumpCount == 0 ) {</div>
<div class="line"><a id="l04455" name="l04455"></a><span class="lineno"> 4455</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Failure!  No gas pumps found!&quot;</span> ) ) );</div>
<div class="line"><a id="l04456" name="l04456"></a><span class="lineno"> 4456</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04457" name="l04457"></a><span class="lineno"> 4457</span>    }</div>
<div class="line"><a id="l04458" name="l04458"></a><span class="lineno"> 4458</span> </div>
<div class="line"><a id="l04459" name="l04459"></a><span class="lineno"> 4459</span>    <span class="keywordtype">int</span> tankGasUnits;</div>
<div class="line"><a id="l04460" name="l04460"></a><span class="lineno"> 4460</span>    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pTank_ = <a class="code hl_function" href="namespaceiexamine.html#acdcb6865f2a40fffafcff3115d93b693">getNearFilledGasTank</a>( examp, tankGasUnits );</div>
<div class="line"><a id="l04461" name="l04461"></a><span class="lineno"> 4461</span>    <span class="keywordflow">if</span>( !pTank_ ) {</div>
<div class="line"><a id="l04462" name="l04462"></a><span class="lineno"> 4462</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Failure!  No gas tank found!&quot;</span> ) ) );</div>
<div class="line"><a id="l04463" name="l04463"></a><span class="lineno"> 4463</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04464" name="l04464"></a><span class="lineno"> 4464</span>    }</div>
<div class="line"><a id="l04465" name="l04465"></a><span class="lineno"> 4465</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> pTank = *pTank_;</div>
<div class="line"><a id="l04466" name="l04466"></a><span class="lineno"> 4466</span> </div>
<div class="line"><a id="l04467" name="l04467"></a><span class="lineno"> 4467</span>    <span class="keywordflow">if</span>( tankGasUnits == 0 ) {</div>
<div class="line"><a id="l04468" name="l04468"></a><span class="lineno"> 4468</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>(</div>
<div class="line"><a id="l04469" name="l04469"></a><span class="lineno"> 4469</span>                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This station is out of fuel.  We apologize for the inconvenience.&quot;</span> ) ) );</div>
<div class="line"><a id="l04470" name="l04470"></a><span class="lineno"> 4470</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04471" name="l04471"></a><span class="lineno"> 4471</span>    }</div>
<div class="line"><a id="l04472" name="l04472"></a><span class="lineno"> 4472</span> </div>
<div class="line"><a id="l04473" name="l04473"></a><span class="lineno"> 4473</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code hl_variable" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> + 1 &gt; pumpCount ) {</div>
<div class="line"><a id="l04474" name="l04474"></a><span class="lineno"> 4474</span>        <a class="code hl_variable" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code hl_variable" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> = 0;</div>
<div class="line"><a id="l04475" name="l04475"></a><span class="lineno"> 4475</span>    }</div>
<div class="line"><a id="l04476" name="l04476"></a><span class="lineno"> 4476</span> </div>
<div class="line"><a id="l04477" name="l04477"></a><span class="lineno"> 4477</span>    <span class="keywordtype">int</span> discount = <a class="code hl_function" href="iexamine_8cpp.html#a2fca445bbfe882b8dcbded90cfcd0190">findBestGasDiscount</a>( p );</div>
<div class="line"><a id="l04478" name="l04478"></a><span class="lineno"> 4478</span>    std::string discountName = <a class="code hl_function" href="iexamine_8cpp.html#ac76ca28673c019de7a65eff29863dd13">getGasDiscountName</a>( discount );</div>
<div class="line"><a id="l04479" name="l04479"></a><span class="lineno"> 4479</span> </div>
<div class="line"><a id="l04480" name="l04480"></a><span class="lineno"> 4480</span>    <span class="keywordtype">int</span> pricePerUnit = <a class="code hl_function" href="iexamine_8cpp.html#afca39ca1d122372a0da6581d3dc2a014">getGasPricePerLiter</a>( discount );</div>
<div class="line"><a id="l04481" name="l04481"></a><span class="lineno"> 4481</span> </div>
<div class="line"><a id="l04482" name="l04482"></a><span class="lineno"> 4482</span>    <span class="keywordtype">bool</span> can_hack = ( !p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a> ) &amp;&amp;</div>
<div class="line"><a id="l04483" name="l04483"></a><span class="lineno"> 4483</span>                      ( ( p.<a class="code hl_function" href="classCharacter.html#a9bff3208a5e121c4e3a71b81b378e4e7">has_charges</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac6f1491539d957d958940b200312a52f">itype_electrohack</a>, 25 ) ) ||</div>
<div class="line"><a id="l04484" name="l04484"></a><span class="lineno"> 4484</span>                        ( p.<a class="code hl_function" href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">has_bionic</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a75d08e5aa821ee5a24c2676f10377bd0">bio_fingerhack</a> ) &amp;&amp; p.<a class="code hl_function" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>() &gt; 24_kJ ) ) );</div>
<div class="line"><a id="l04485" name="l04485"></a><span class="lineno"> 4485</span> </div>
<div class="line"><a id="l04486" name="l04486"></a><span class="lineno"> 4486</span>    <a class="code hl_class" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a id="l04487" name="l04487"></a><span class="lineno"> 4487</span>    amenu.<a class="code hl_variable" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> = 1;</div>
<div class="line"><a id="l04488" name="l04488"></a><span class="lineno"> 4488</span>    amenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Welcome to AutoGas!&quot;</span> ) );</div>
<div class="line"><a id="l04489" name="l04489"></a><span class="lineno"> 4489</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 0, <span class="keyword">false</span>, -1, <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;What would you like to do?&quot;</span> ) ) );</div>
<div class="line"><a id="l04490" name="l04490"></a><span class="lineno"> 4490</span> </div>
<div class="line"><a id="l04491" name="l04491"></a><span class="lineno"> 4491</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( buy_gas, <span class="keyword">true</span>, <span class="charliteral">&#39;b&#39;</span>, <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Buy gas.&quot;</span> ) ) );</div>
<div class="line"><a id="l04492" name="l04492"></a><span class="lineno"> 4492</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( refund, <span class="keyword">true</span>, <span class="charliteral">&#39;r&#39;</span>, <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Refund cash.&quot;</span> ) ) );</div>
<div class="line"><a id="l04493" name="l04493"></a><span class="lineno"> 4493</span> </div>
<div class="line"><a id="l04494" name="l04494"></a><span class="lineno"> 4494</span>    std::string gaspumpselected = <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Current gas pump: &quot;</span> ) ) +</div>
<div class="line"><a id="l04495" name="l04495"></a><span class="lineno"> 4495</span>                                  <a class="code hl_function" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">std::to_string</a>( <a class="code hl_variable" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code hl_variable" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> + 1 );</div>
<div class="line"><a id="l04496" name="l04496"></a><span class="lineno"> 4496</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 0, <span class="keyword">false</span>, -1, gaspumpselected );</div>
<div class="line"><a id="l04497" name="l04497"></a><span class="lineno"> 4497</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( choose_pump, <span class="keyword">true</span>, <span class="charliteral">&#39;p&#39;</span>, <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Choose a gas pump.&quot;</span> ) ) );</div>
<div class="line"><a id="l04498" name="l04498"></a><span class="lineno"> 4498</span> </div>
<div class="line"><a id="l04499" name="l04499"></a><span class="lineno"> 4499</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 0, <span class="keyword">false</span>, -1, <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your discount: &quot;</span> ) ) + discountName );</div>
<div class="line"><a id="l04500" name="l04500"></a><span class="lineno"> 4500</span>    amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 0, <span class="keyword">false</span>, -1, <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your price per gasoline unit: &quot;</span> ) ) +</div>
<div class="line"><a id="l04501" name="l04501"></a><span class="lineno"> 4501</span>                    <a class="code hl_function" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( pricePerUnit ) );</div>
<div class="line"><a id="l04502" name="l04502"></a><span class="lineno"> 4502</span> </div>
<div class="line"><a id="l04503" name="l04503"></a><span class="lineno"> 4503</span>    <span class="keywordflow">if</span>( can_hack ) {</div>
<div class="line"><a id="l04504" name="l04504"></a><span class="lineno"> 4504</span>        amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( hack, <span class="keyword">true</span>, <span class="charliteral">&#39;h&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Hack console.&quot;</span> ) );</div>
<div class="line"><a id="l04505" name="l04505"></a><span class="lineno"> 4505</span>    }</div>
<div class="line"><a id="l04506" name="l04506"></a><span class="lineno"> 4506</span> </div>
<div class="line"><a id="l04507" name="l04507"></a><span class="lineno"> 4507</span>    amenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l04508" name="l04508"></a><span class="lineno"> 4508</span>    choice = amenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l04509" name="l04509"></a><span class="lineno"> 4509</span> </div>
<div class="line"><a id="l04510" name="l04510"></a><span class="lineno"> 4510</span>    <span class="keywordflow">if</span>( choose_pump == choice ) {</div>
<div class="line"><a id="l04511" name="l04511"></a><span class="lineno"> 4511</span>        <a class="code hl_class" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a id="l04512" name="l04512"></a><span class="lineno"> 4512</span>        amenu.<a class="code hl_variable" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> = <a class="code hl_variable" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code hl_variable" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a>;</div>
<div class="line"><a id="l04513" name="l04513"></a><span class="lineno"> 4513</span>        amenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Please choose gas pump:&quot;</span> ) );</div>
<div class="line"><a id="l04514" name="l04514"></a><span class="lineno"> 4514</span> </div>
<div class="line"><a id="l04515" name="l04515"></a><span class="lineno"> 4515</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; pumpCount; i++ ) {</div>
<div class="line"><a id="l04516" name="l04516"></a><span class="lineno"> 4516</span>            amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( i, <span class="keyword">true</span>, -1,</div>
<div class="line"><a id="l04517" name="l04517"></a><span class="lineno"> 4517</span>                            <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Pump &quot;</span> ) ) + <a class="code hl_function" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">std::to_string</a>( i + 1 ) );</div>
<div class="line"><a id="l04518" name="l04518"></a><span class="lineno"> 4518</span>        }</div>
<div class="line"><a id="l04519" name="l04519"></a><span class="lineno"> 4519</span>        amenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l04520" name="l04520"></a><span class="lineno"> 4520</span>        choice = amenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l04521" name="l04521"></a><span class="lineno"> 4521</span> </div>
<div class="line"><a id="l04522" name="l04522"></a><span class="lineno"> 4522</span>        <span class="keywordflow">if</span>( choice &lt; 0 ) {</div>
<div class="line"><a id="l04523" name="l04523"></a><span class="lineno"> 4523</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04524" name="l04524"></a><span class="lineno"> 4524</span>        }</div>
<div class="line"><a id="l04525" name="l04525"></a><span class="lineno"> 4525</span> </div>
<div class="line"><a id="l04526" name="l04526"></a><span class="lineno"> 4526</span>        <a class="code hl_variable" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code hl_variable" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> = choice;</div>
<div class="line"><a id="l04527" name="l04527"></a><span class="lineno"> 4527</span> </div>
<div class="line"><a id="l04528" name="l04528"></a><span class="lineno"> 4528</span>        <a class="code hl_function" href="iexamine_8cpp.html#a58f949b6ba3c9ca47a7c9f1fc1c31085">turnOnSelectedPump</a>( examp, <a class="code hl_variable" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code hl_variable" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> );</div>
<div class="line"><a id="l04529" name="l04529"></a><span class="lineno"> 4529</span> </div>
<div class="line"><a id="l04530" name="l04530"></a><span class="lineno"> 4530</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04531" name="l04531"></a><span class="lineno"> 4531</span> </div>
<div class="line"><a id="l04532" name="l04532"></a><span class="lineno"> 4532</span>    }</div>
<div class="line"><a id="l04533" name="l04533"></a><span class="lineno"> 4533</span> </div>
<div class="line"><a id="l04534" name="l04534"></a><span class="lineno"> 4534</span>    <span class="keywordflow">if</span>( buy_gas == choice ) {</div>
<div class="line"><a id="l04535" name="l04535"></a><span class="lineno"> 4535</span>        <span class="keywordtype">int</span> <a class="code hl_typedef" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> = p.<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a> );</div>
<div class="line"><a id="l04536" name="l04536"></a><span class="lineno"> 4536</span> </div>
<div class="line"><a id="l04537" name="l04537"></a><span class="lineno"> 4537</span>        <span class="keywordflow">if</span>( <a class="code hl_typedef" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> &lt; pricePerUnit ) {</div>
<div class="line"><a id="l04538" name="l04538"></a><span class="lineno"> 4538</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_function" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>(</div>
<div class="line"><a id="l04539" name="l04539"></a><span class="lineno"> 4539</span>                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Not enough money, please refill your cash card.&quot;</span> ) ) ); <span class="comment">//or ride on a solar car, ha ha ha</span></div>
<div class="line"><a id="l04540" name="l04540"></a><span class="lineno"> 4540</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04541" name="l04541"></a><span class="lineno"> 4541</span>        }</div>
<div class="line"><a id="l04542" name="l04542"></a><span class="lineno"> 4542</span> </div>
<div class="line"><a id="l04543" name="l04543"></a><span class="lineno"> 4543</span>        <span class="keywordtype">int</span> maximum_liters = std::min( <a class="code hl_typedef" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> / pricePerUnit, tankGasUnits / 1000 );</div>
<div class="line"><a id="l04544" name="l04544"></a><span class="lineno"> 4544</span> </div>
<div class="line"><a id="l04545" name="l04545"></a><span class="lineno"> 4545</span>        std::string popupmsg = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a id="l04546" name="l04546"></a><span class="lineno"> 4546</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;How many liters of gasoline to buy?  Max: %d L.  (0 to cancel)&quot;</span> ), maximum_liters );</div>
<div class="line"><a id="l04547" name="l04547"></a><span class="lineno"> 4547</span>        <span class="keywordtype">int</span> liters = <a class="code hl_class" href="classstring__input__popup.html">string_input_popup</a>()</div>
<div class="line"><a id="l04548" name="l04548"></a><span class="lineno"> 4548</span>                     .<a class="code hl_function" href="classstring__input__popup.html#aeced4fb3877cc8e24da36af12af2e519">title</a>( popupmsg )</div>
<div class="line"><a id="l04549" name="l04549"></a><span class="lineno"> 4549</span>                     .<a class="code hl_function" href="classstring__input__popup.html#acc88b6636bee68b1ee4f4dffc533d611">width</a>( 20 )</div>
<div class="line"><a id="l04550" name="l04550"></a><span class="lineno"> 4550</span>                     .<a class="code hl_function" href="classstring__input__popup.html#a42554f299ffa809034aa4cb4486e365b">text</a>( <a class="code hl_function" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">std::to_string</a>( maximum_liters ) )</div>
<div class="line"><a id="l04551" name="l04551"></a><span class="lineno"> 4551</span>                     .<a class="code hl_function" href="classstring__input__popup.html#add686042aff41369ff1bfa8754223ca0">only_digits</a>( <span class="keyword">true</span> )</div>
<div class="line"><a id="l04552" name="l04552"></a><span class="lineno"> 4552</span>                     .<a class="code hl_function" href="classstring__input__popup.html#ad9511310a3e0d119d5587fbf0f877c07">query_int</a>();</div>
<div class="line"><a id="l04553" name="l04553"></a><span class="lineno"> 4553</span>        <span class="keywordflow">if</span>( liters &lt;= 0 ) {</div>
<div class="line"><a id="l04554" name="l04554"></a><span class="lineno"> 4554</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04555" name="l04555"></a><span class="lineno"> 4555</span>        }</div>
<div class="line"><a id="l04556" name="l04556"></a><span class="lineno"> 4556</span>        <span class="keywordflow">if</span>( liters &gt; maximum_liters ) {</div>
<div class="line"><a id="l04557" name="l04557"></a><span class="lineno"> 4557</span>            liters = maximum_liters;</div>
<div class="line"><a id="l04558" name="l04558"></a><span class="lineno"> 4558</span>        }</div>
<div class="line"><a id="l04559" name="l04559"></a><span class="lineno"> 4559</span> </div>
<div class="line"><a id="l04560" name="l04560"></a><span class="lineno"> 4560</span>        <span class="keyword">const</span> std::optional&lt;tripoint&gt; pGasPump = <a class="code hl_function" href="namespaceiexamine.html#ada89967c78ff4632820932976c12ab8b">getGasPumpByNumber</a>( examp,</div>
<div class="line"><a id="l04561" name="l04561"></a><span class="lineno"> 4561</span>                <a class="code hl_variable" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code hl_variable" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> );</div>
<div class="line"><a id="l04562" name="l04562"></a><span class="lineno"> 4562</span>        <span class="keywordflow">if</span>( !pGasPump || !<a class="code hl_function" href="namespaceiexamine.html#a6987b7ccb6bfbaa1be3d45360eb106f6">toPumpFuel</a>( pTank, *pGasPump, liters * 1000 ) ) {</div>
<div class="line"><a id="l04563" name="l04563"></a><span class="lineno"> 4563</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04564" name="l04564"></a><span class="lineno"> 4564</span>        }</div>
<div class="line"><a id="l04565" name="l04565"></a><span class="lineno"> 4565</span> </div>
<div class="line"><a id="l04566" name="l04566"></a><span class="lineno"> 4566</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), 6, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::sound_t::activity</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Glug Glug Glug&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;tool&quot;</span>,</div>
<div class="line"><a id="l04567" name="l04567"></a><span class="lineno"> 4567</span>                       <span class="stringliteral">&quot;gaspump&quot;</span> );</div>
<div class="line"><a id="l04568" name="l04568"></a><span class="lineno"> 4568</span> </div>
<div class="line"><a id="l04569" name="l04569"></a><span class="lineno"> 4569</span>        <span class="keywordtype">int</span> cost = liters * pricePerUnit;</div>
<div class="line"><a id="l04570" name="l04570"></a><span class="lineno"> 4570</span>        <a class="code hl_typedef" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> -= cost;</div>
<div class="line"><a id="l04571" name="l04571"></a><span class="lineno"> 4571</span>        p.<a class="code hl_function" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a>, cost );</div>
<div class="line"><a id="l04572" name="l04572"></a><span class="lineno"> 4572</span> </div>
<div class="line"><a id="l04573" name="l04573"></a><span class="lineno"> 4573</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your cash cards now hold %s.&quot;</span> ), <a class="code hl_function" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( <a class="code hl_typedef" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> ) );</div>
<div class="line"><a id="l04574" name="l04574"></a><span class="lineno"> 4574</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 5_seconds );</div>
<div class="line"><a id="l04575" name="l04575"></a><span class="lineno"> 4575</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04576" name="l04576"></a><span class="lineno"> 4576</span>    }</div>
<div class="line"><a id="l04577" name="l04577"></a><span class="lineno"> 4577</span> </div>
<div class="line"><a id="l04578" name="l04578"></a><span class="lineno"> 4578</span>    <span class="keywordflow">if</span>( hack == choice ) {</div>
<div class="line"><a id="l04579" name="l04579"></a><span class="lineno"> 4579</span>        <a class="code hl_function" href="iexamine_8cpp.html#aae4267b3209a79d919707bd1ba1c2071">try_start_hacking</a>( p, examp );</div>
<div class="line"><a id="l04580" name="l04580"></a><span class="lineno"> 4580</span>    }</div>
<div class="line"><a id="l04581" name="l04581"></a><span class="lineno"> 4581</span> </div>
<div class="line"><a id="l04582" name="l04582"></a><span class="lineno"> 4582</span>    <span class="keywordflow">if</span>( refund == choice ) {</div>
<div class="line"><a id="l04583" name="l04583"></a><span class="lineno"> 4583</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> pos = p.<a class="code hl_variable" href="classCharacter.html#a3d69eddc0a03b21378fc68cc08d32c7f">inv</a>.<a class="code hl_function" href="classinventory.html#a83456dac16cd4a8057c9372ae8648a52">position_by_type</a>( <a class="code hl_typedef" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>( <span class="stringliteral">&quot;cash_card&quot;</span> ) );</div>
<div class="line"><a id="l04584" name="l04584"></a><span class="lineno"> 4584</span> </div>
<div class="line"><a id="l04585" name="l04585"></a><span class="lineno"> 4585</span>        <span class="keywordflow">if</span>( pos == INT_MIN ) {</div>
<div class="line"><a id="l04586" name="l04586"></a><span class="lineno"> 4586</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a id="l04587" name="l04587"></a><span class="lineno"> 4587</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04588" name="l04588"></a><span class="lineno"> 4588</span>        }</div>
<div class="line"><a id="l04589" name="l04589"></a><span class="lineno"> 4589</span> </div>
<div class="line"><a id="l04590" name="l04590"></a><span class="lineno"> 4590</span>        <a class="code hl_class" href="classitem.html">item</a> *cashcard = &amp;( p.<a class="code hl_function" href="classCharacter.html#a654ed96afe759517e0bf1a31c7a3ea11">i_at</a>( pos ) );</div>
<div class="line"><a id="l04591" name="l04591"></a><span class="lineno"> 4591</span>        <span class="comment">// Okay, we have a cash card. Now we need to know what&#39;s left in the pump.</span></div>
<div class="line"><a id="l04592" name="l04592"></a><span class="lineno"> 4592</span>        <span class="keyword">const</span> std::optional&lt;tripoint&gt; pGasPump = <a class="code hl_function" href="namespaceiexamine.html#ada89967c78ff4632820932976c12ab8b">getGasPumpByNumber</a>( examp,</div>
<div class="line"><a id="l04593" name="l04593"></a><span class="lineno"> 4593</span>                <a class="code hl_variable" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code hl_variable" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> );</div>
<div class="line"><a id="l04594" name="l04594"></a><span class="lineno"> 4594</span>        <span class="keywordtype">int</span> amount = pGasPump ? <a class="code hl_function" href="iexamine_8cpp.html#a33e3e7a76917c84ba0c01a57dd89d448">fromPumpFuel</a>( pTank, *pGasPump ) : 0;</div>
<div class="line"><a id="l04595" name="l04595"></a><span class="lineno"> 4595</span>        <span class="keywordflow">if</span>( amount &gt;= 0 ) {</div>
<div class="line"><a id="l04596" name="l04596"></a><span class="lineno"> 4596</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), 6, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::sound_t::activity</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Glug Glug Glug&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;tool&quot;</span>,</div>
<div class="line"><a id="l04597" name="l04597"></a><span class="lineno"> 4597</span>                           <span class="stringliteral">&quot;gaspump&quot;</span> );</div>
<div class="line"><a id="l04598" name="l04598"></a><span class="lineno"> 4598</span>            cashcard-&gt;<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> += amount * pricePerUnit / 1000.0f;</div>
<div class="line"><a id="l04599" name="l04599"></a><span class="lineno"> 4599</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your cash cards now hold %s.&quot;</span> ),</div>
<div class="line"><a id="l04600" name="l04600"></a><span class="lineno"> 4600</span>                     <a class="code hl_function" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( p.<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a> ) ) );</div>
<div class="line"><a id="l04601" name="l04601"></a><span class="lineno"> 4601</span>            p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 5_seconds );</div>
<div class="line"><a id="l04602" name="l04602"></a><span class="lineno"> 4602</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04603" name="l04603"></a><span class="lineno"> 4603</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04604" name="l04604"></a><span class="lineno"> 4604</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Unable to refund, no fuel in pump.&quot;</span> ) );</div>
<div class="line"><a id="l04605" name="l04605"></a><span class="lineno"> 4605</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04606" name="l04606"></a><span class="lineno"> 4606</span>        }</div>
<div class="line"><a id="l04607" name="l04607"></a><span class="lineno"> 4607</span>    }</div>
<div class="line"><a id="l04608" name="l04608"></a><span class="lineno"> 4608</span>}</div>
<div class="ttc" id="aclassCharacter_html_a3d69eddc0a03b21378fc68cc08d32c7f"><div class="ttname"><a href="classCharacter.html#a3d69eddc0a03b21378fc68cc08d32c7f">Character::inv</a></div><div class="ttdeci">inventory inv</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01581">character.h:1581</a></div></div>
<div class="ttc" id="aclassCharacter_html_a654ed96afe759517e0bf1a31c7a3ea11"><div class="ttname"><a href="classCharacter.html#a654ed96afe759517e0bf1a31c7a3ea11">Character::i_at</a></div><div class="ttdeci">item &amp; i_at(int position)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02349">character.cpp:2349</a></div></div>
<div class="ttc" id="aclassCharacter_html_add22510ff2fa20a662868b4dd86e030e"><div class="ttname"><a href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">Character::get_power_level</a></div><div class="ttdeci">units::energy get_power_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01904">character.cpp:1904</a></div></div>
<div class="ttc" id="aclassinventory_html_a83456dac16cd4a8057c9372ae8648a52"><div class="ttname"><a href="classinventory.html#a83456dac16cd4a8057c9372ae8648a52">inventory::position_by_type</a></div><div class="ttdeci">int position_by_type(const itype_id &amp;type) const</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00843">inventory.cpp:843</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html"><div class="ttname"><a href="classstring__input__popup.html">string_input_popup</a></div><div class="ttdoc">Shows a window querying the user for input.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00047">string_input_popup.h:48</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_a42554f299ffa809034aa4cb4486e365b"><div class="ttname"><a href="classstring__input__popup.html#a42554f299ffa809034aa4cb4486e365b">string_input_popup::text</a></div><div class="ttdeci">string_input_popup &amp; text(const std::string &amp;value)</div><div class="ttdoc">Set / get the text that can be modified by the user.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8cpp_source.html#l00538">string_input_popup.cpp:538</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_acc88b6636bee68b1ee4f4dffc533d611"><div class="ttname"><a href="classstring__input__popup.html#acc88b6636bee68b1ee4f4dffc533d611">string_input_popup::width</a></div><div class="ttdeci">string_input_popup &amp; width(int value)</div><div class="ttdoc">Width (in console cells) of the input field itself.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00143">string_input_popup.h:143</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_ad9511310a3e0d119d5587fbf0f877c07"><div class="ttname"><a href="classstring__input__popup.html#ad9511310a3e0d119d5587fbf0f877c07">string_input_popup::query_int</a></div><div class="ttdeci">int query_int(bool loop=true, bool draw_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8cpp_source.html#l00281">string_input_popup.cpp:281</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_add686042aff41369ff1bfa8754223ca0"><div class="ttname"><a href="classstring__input__popup.html#add686042aff41369ff1bfa8754223ca0">string_input_popup::only_digits</a></div><div class="ttdeci">string_input_popup &amp; only_digits(bool value)</div><div class="ttdoc">If true, any non-digit input cancels the input.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00158">string_input_popup.h:158</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_aeced4fb3877cc8e24da36af12af2e519"><div class="ttname"><a href="classstring__input__popup.html#aeced4fb3877cc8e24da36af12af2e519">string_input_popup::title</a></div><div class="ttdeci">string_input_popup &amp; title(const std::string &amp;value)</div><div class="ttdoc">The title: short string before the actual input field.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00105">string_input_popup.h:105</a></div></div>
<div class="ttc" id="aclassuilist_html_ab0890d56d6d29dd98a0b3f17bb3ebba3"><div class="ttname"><a href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">uilist::selected</a></div><div class="ttdeci">int selected</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00415">ui.h:415</a></div></div>
<div class="ttc" id="aclassuistatedata_html_ae286ee8af431b7530233b9052c0a7b8d"><div class="ttname"><a href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">uistatedata::ags_pay_gas_selected_pump</a></div><div class="ttdeci">int ags_pay_gas_selected_pump</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00087">uistate.h:87</a></div></div>
<div class="ttc" id="agame_8cpp_html_a764052f34a47c6dee072c67b842a222c"><div class="ttname"><a href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a></div><div class="ttdeci">uistatedata uistate</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00286">game.cpp:286</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a2fca445bbfe882b8dcbded90cfcd0190"><div class="ttname"><a href="iexamine_8cpp.html#a2fca445bbfe882b8dcbded90cfcd0190">findBestGasDiscount</a></div><div class="ttdeci">static int findBestGasDiscount(player &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04295">iexamine.cpp:4295</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a33e3e7a76917c84ba0c01a57dd89d448"><div class="ttname"><a href="iexamine_8cpp.html#a33e3e7a76917c84ba0c01a57dd89d448">fromPumpFuel</a></div><div class="ttdeci">static int fromPumpFuel(const tripoint &amp;dst, const tripoint &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04400">iexamine.cpp:4400</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a357572465dfb7a0a417d86e1be77af49"><div class="ttname"><a href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a></div><div class="ttdeci">static const trait_id trait_ILLITERATE(&quot;ILLITERATE&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a392786c55caddd4da5dbc69e9807d784"><div class="ttname"><a href="iexamine_8cpp.html#a392786c55caddd4da5dbc69e9807d784">getNearPumpCount</a></div><div class="ttdeci">static int getNearPumpCount(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04235">iexamine.cpp:4235</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a58f949b6ba3c9ca47a7c9f1fc1c31085"><div class="ttname"><a href="iexamine_8cpp.html#a58f949b6ba3c9ca47a7c9f1fc1c31085">turnOnSelectedPump</a></div><div class="ttdeci">static void turnOnSelectedPump(const tripoint &amp;p, int number)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04424">iexamine.cpp:4424</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a75d08e5aa821ee5a24c2676f10377bd0"><div class="ttname"><a href="iexamine_8cpp.html#a75d08e5aa821ee5a24c2676f10377bd0">bio_fingerhack</a></div><div class="ttdeci">static const bionic_id bio_fingerhack(&quot;bio_fingerhack&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab942a581db0860ae3e4a1b0e54b9f9bf"><div class="ttname"><a href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a></div><div class="ttdeci">static std::string str_to_illiterate_str(std::string s)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04314">iexamine.cpp:4314</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac2c5780a50f6dc653232de1aeffc85ab"><div class="ttname"><a href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a></div><div class="ttdeci">static const itype_id itype_cash_card(&quot;cash_card&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac6f1491539d957d958940b200312a52f"><div class="ttname"><a href="iexamine_8cpp.html#ac6f1491539d957d958940b200312a52f">itype_electrohack</a></div><div class="ttdeci">static const itype_id itype_electrohack(&quot;electrohack&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac76ca28673c019de7a65eff29863dd13"><div class="ttname"><a href="iexamine_8cpp.html#ac76ca28673c019de7a65eff29863dd13">getGasDiscountName</a></div><div class="ttdeci">static std::string getGasDiscountName(int discount)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04333">iexamine.cpp:4333</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_afca39ca1d122372a0da6581d3dc2a014"><div class="ttname"><a href="iexamine_8cpp.html#afca39ca1d122372a0da6581d3dc2a014">getGasPricePerLiter</a></div><div class="ttdeci">static int getGasPricePerLiter(int discount)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04346">iexamine.cpp:4346</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a6987b7ccb6bfbaa1be3d45360eb106f6"><div class="ttname"><a href="namespaceiexamine.html#a6987b7ccb6bfbaa1be3d45360eb106f6">iexamine::toPumpFuel</a></div><div class="ttdeci">bool toPumpFuel(const tripoint &amp;src, const tripoint &amp;dst, int units)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04370">iexamine.cpp:4370</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_acdcb6865f2a40fffafcff3115d93b693"><div class="ttname"><a href="namespaceiexamine.html#acdcb6865f2a40fffafcff3115d93b693">iexamine::getNearFilledGasTank</a></div><div class="ttdeci">std::optional&lt; tripoint &gt; getNearFilledGasTank(const tripoint &amp;center, int &amp;gas_units)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04248">iexamine.cpp:4248</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_ada89967c78ff4632820932976c12ab8b"><div class="ttname"><a href="namespaceiexamine.html#ada89967c78ff4632820932976c12ab8b">iexamine::getGasPumpByNumber</a></div><div class="ttdeci">std::optional&lt; tripoint &gt; getGasPumpByNumber(const tripoint &amp;p, int number)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04357">iexamine.cpp:4357</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::sound_t::activity</a></div><div class="ttdeci">@ activity</div></div>
<div class="ttc" id="anamespaceunits_html_a6bbf7141fbe187ada34446a4d1ed1b4e"><div class="ttname"><a href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">units::money</a></div><div class="ttdeci">quantity&lt; int, money_in_cent_tag &gt; money</div><div class="ttdef"><b>Definition:</b> <a href="units__money_8h_source.html#l00016">units_money.h:16</a></div></div>
<div class="ttc" id="aoutput_8h_html_afc5db1b09e0b37fa89eda5966c61b1f5"><div class="ttname"><a href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a></div><div class="ttdeci">std::string format_money(int cents)</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00932">output.h:932</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::activity</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="uistate_8h_source.html#l00087">uistatedata::ags_pay_gas_selected_pump</a>, <a class="el" href="iexamine_8cpp.html#a75d08e5aa821ee5a24c2676f10377bd0">bio_fingerhack</a>, <a class="el" href="item_8h_source.html#l02199">item::charges</a>, <a class="el" href="visitable_8cpp_source.html#l00946">visitable&lt; T &gt;::charges_of()</a>, <a class="el" href="iexamine_8cpp_source.html#l04295">findBestGasDiscount()</a>, <a class="el" href="output_8h_source.html#l00932">format_money()</a>, <a class="el" href="iexamine_8cpp_source.html#l04400">fromPumpFuel()</a>, <a class="el" href="character_8cpp_source.html#l01904">Character::get_power_level()</a>, <a class="el" href="iexamine_8cpp_source.html#l04333">getGasDiscountName()</a>, <a class="el" href="iexamine_8cpp_source.html#l04346">getGasPricePerLiter()</a>, <a class="el" href="iexamine_8cpp_source.html#l04357">getGasPumpByNumber()</a>, <a class="el" href="iexamine_8cpp_source.html#l04248">getNearFilledGasTank()</a>, <a class="el" href="iexamine_8cpp_source.html#l04235">getNearPumpCount()</a>, <a class="el" href="character_8cpp_source.html#l01814">Character::has_bionic()</a>, <a class="el" href="character_8cpp_source.html#l09605">Character::has_charges()</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="character_8cpp_source.html#l02349">Character::i_at()</a>, <a class="el" href="character_8h_source.html#l01581">Character::inv</a>, <a class="el" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a>, <a class="el" href="iexamine_8cpp.html#ac6f1491539d957d958940b200312a52f">itype_electrohack</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="string__input__popup_8h_source.html#l00158">string_input_popup::only_digits()</a>, <a class="el" href="output_8cpp_source.html#l00764">popup()</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="inventory_8cpp_source.html#l00843">inventory::position_by_type()</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="string__input__popup_8cpp_source.html#l00281">string_input_popup::query_int()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="ui_8h_source.html#l00415">uilist::selected</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="iexamine_8cpp_source.html#l04314">str_to_illiterate_str()</a>, <a class="el" href="string__formatter_8h_source.html#l00430">string_format()</a>, <a class="el" href="string__input__popup_8cpp_source.html#l00538">string_input_popup::text()</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="string__input__popup_8h_source.html#l00105">string_input_popup::title()</a>, <a class="el" href="calendar_8cpp_source.html#l00327">to_string()</a>, <a class="el" href="iexamine_8cpp_source.html#l04370">toPumpFuel()</a>, <a class="el" href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a>, <a class="el" href="iexamine_8cpp_source.html#l00979">try_start_hacking()</a>, <a class="el" href="iexamine_8cpp_source.html#l04424">turnOnSelectedPump()</a>, <a class="el" href="game_8cpp_source.html#l00286">uistate</a>, <a class="el" href="character_8cpp_source.html#l09665">Character::use_charges()</a>, and <a class="el" href="string__input__popup_8h_source.html#l00143">string_input_popup::width()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00792">get_hack_type()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ae0d1e44a94da47750704bf9737e8ea1f" name="ae0d1e44a94da47750704bf9737e8ea1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0d1e44a94da47750704bf9737e8ea1f">&#9670;&nbsp;</a></span>pedestal_temple()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::pedestal_temple </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Put petrified eye on pedestal causing it to sink into ground and open temple. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01725">1725</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>{</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>    <span class="keywordflow">if</span>( !items.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() &amp;&amp; items.<a class="code hl_function" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a> ) {</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The pedestal sinks into the ground…&quot;</span> ) );</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a> );</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>        here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;timed_events.add( <a class="code hl_enumvalue" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a76a9420dba7b1a2d5b6915dc17ede64b">TIMED_EVENT_TEMPLE_OPEN</a>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + 10_seconds );</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">has_amount</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a>, 1 ) &amp;&amp;</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>               <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Place your petrified eye on the pedestal?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>        p.<a class="code hl_function" href="classCharacter.html#a7cb114203e03014f9834a10fa4bff24e">use_amount</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a>, 1 );</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The pedestal sinks into the ground…&quot;</span> ) );</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a> );</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;timed_events.add( <a class="code hl_enumvalue" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a76a9420dba7b1a2d5b6915dc17ede64b">TIMED_EVENT_TEMPLE_OPEN</a>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + 10_seconds );</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This pedestal is engraved in eye-shaped diagrams, and has a &quot;</span></div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>                    <span class="stringliteral">&quot;large semi-spherical indentation at the top.&quot;</span> ) );</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>    }</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_a6603cf1f31fc21c92a70ca94953d6da2"><div class="ttname"><a href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a></div><div class="ttdeci">static const itype_id itype_petrified_eye(&quot;petrified_eye&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_aa4573ce2c594834a8ced806a5099f3e3"><div class="ttname"><a href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a></div><div class="ttdeci">ter_id t_dirt</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00627">mapdata.cpp:627</a></div></div>
<div class="ttc" id="atimed__event_8h_html_ad10eb56251f11e9a5694491529afbcc7a76a9420dba7b1a2d5b6915dc17ede64b"><div class="ttname"><a href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a76a9420dba7b1a2d5b6915dc17ede64b">TIMED_EVENT_TEMPLE_OPEN</a></div><div class="ttdeci">@ TIMED_EVENT_TEMPLE_OPEN</div><div class="ttdef"><b>Definition:</b> <a href="timed__event_8h_source.html#l00019">timed_event.h:19</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="visitable_8cpp_source.html#l01111">visitable&lt; T &gt;::has_amount()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l04247">map::i_clear()</a>, <a class="el" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a>, <a class="el" href="item__stack_8cpp_source.html#l00083">item_stack::only_item()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="mapdata_8cpp_source.html#l00627">t_dirt</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, <a class="el" href="timed__event_8h_source.html#l00019">TIMED_EVENT_TEMPLE_OPEN</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="item_8cpp_source.html#l08374">item::typeId()</a>, and <a class="el" href="character_8cpp_source.html#l09633">Character::use_amount()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a15a58448175eaa2334e7efb3918111f4" name="a15a58448175eaa2334e7efb3918111f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15a58448175eaa2334e7efb3918111f4">&#9670;&nbsp;</a></span>pedestal_wyrm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::pedestal_wyrm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Spawn 1d4 wyrms and sink pedestal into ground. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01689">1689</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>{</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>    <span class="keywordflow">if</span>( !items.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>        <span class="keywordflow">if</span>( items.<a class="code hl_function" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a> &amp;&amp;</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>            <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove the petrified eye from the pedestal?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>            here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span> </div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>            <a class="code hl_class" href="classitem.html">item</a> eye( <a class="code hl_variable" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a> );</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>            p.<a class="code hl_function" href="classCharacter.html#ab80b4bcd5228af487bb1a26c14864e5d">i_add_or_drop</a>( eye );</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span> </div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>            <span class="comment">// Send in a few wyrms to start things off.</span></div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>            <a class="code hl_function" href="event__bus_8h.html#a72d1fc749e644310b0165bfdd920288b">get_event_bus</a>().<a class="code hl_function" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code hl_enumvalue" href="event_8h.html#a430b444c74dd3fd1472a31714ec5f1ceac9d4fbdbb600ed5b519c7065aea1af90">event_type::awakes_dark_wyrms</a>&gt;();</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p : here.<a class="code hl_function" href="classmap.html#a61d83c54adde6e54f8abf5a2b6834ea1">points_on_zlevel</a>() ) {</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>                <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( p ) == <a class="code hl_typedef" href="type__id_8h.html#a52570fdf9996c7b72d444f8020a741e8">ter_id</a>( <span class="stringliteral">&quot;t_orifice&quot;</span> ) ) {</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_around( <a class="code hl_variable" href="iexamine_8cpp.html#a5561ff0e93d53b7928bfec9ba954ff40">mon_dark_wyrm</a>, p, 1 );</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>                }</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>            }</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span> </div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( examp, 80, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;an ominous grinding noise…&quot;</span> ), <span class="keyword">true</span>,</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>                           <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;stones_grinding&quot;</span> );</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The pedestal sinks into the ground…&quot;</span> ) );</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>            here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#ab2613433b5f86babc528fa43891dc75a">t_rock_floor</a> );</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;timed_events.add( <a class="code hl_enumvalue" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7ae6736c6f98f71b26e561fdb652d9c31a">TIMED_EVENT_SPAWN_WYRMS</a>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 30_seconds, 60_seconds ) );</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You decided to leave the petrified eye on the pedestal…&quot;</span> ) );</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>        }</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>    }</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>}</div>
<div class="ttc" id="aclassCharacter_html_ab80b4bcd5228af487bb1a26c14864e5d"><div class="ttname"><a href="classCharacter.html#ab80b4bcd5228af487bb1a26c14864e5d">Character::i_add_or_drop</a></div><div class="ttdeci">bool i_add_or_drop(item &amp;it, int qty=1)</div><div class="ttdoc">Sets invlet and adds to inventory if possible, drops otherwise, returns true if either succeeded.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02407">character.cpp:2407</a></div></div>
<div class="ttc" id="aclassevent__bus_html_ab753616a3a663185377ac52560068194"><div class="ttname"><a href="classevent__bus.html#ab753616a3a663185377ac52560068194">event_bus::send</a></div><div class="ttdeci">void send(const cata::event &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="event__bus_8cpp_source.html#l00058">event_bus.cpp:58</a></div></div>
<div class="ttc" id="aclassmap_html_a61d83c54adde6e54f8abf5a2b6834ea1"><div class="ttname"><a href="classmap.html#a61d83c54adde6e54f8abf5a2b6834ea1">map::points_on_zlevel</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_on_zlevel() const</div><div class="ttdoc">Yields a range of all points that are contained in the map and have the z-level of this map (abs_sub)...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08775">map.cpp:8775</a></div></div>
<div class="ttc" id="aevent_8h_html_a430b444c74dd3fd1472a31714ec5f1ceac9d4fbdbb600ed5b519c7065aea1af90"><div class="ttname"><a href="event_8h.html#a430b444c74dd3fd1472a31714ec5f1ceac9d4fbdbb600ed5b519c7065aea1af90">event_type::awakes_dark_wyrms</a></div><div class="ttdeci">@ awakes_dark_wyrms</div></div>
<div class="ttc" id="aevent__bus_8h_html_a72d1fc749e644310b0165bfdd920288b"><div class="ttname"><a href="event__bus_8h.html#a72d1fc749e644310b0165bfdd920288b">get_event_bus</a></div><div class="ttdeci">event_bus &amp; get_event_bus()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l12086">game.cpp:12086</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a5561ff0e93d53b7928bfec9ba954ff40"><div class="ttname"><a href="iexamine_8cpp.html#a5561ff0e93d53b7928bfec9ba954ff40">mon_dark_wyrm</a></div><div class="ttdeci">static const mtype_id mon_dark_wyrm(&quot;mon_dark_wyrm&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_ab2613433b5f86babc528fa43891dc75a"><div class="ttname"><a href="mapdata_8cpp.html#ab2613433b5f86babc528fa43891dc75a">t_rock_floor</a></div><div class="ttdeci">ter_id t_rock_floor</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00629">mapdata.cpp:629</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a></div><div class="ttdeci">@ combat</div></div>
<div class="ttc" id="atimed__event_8h_html_ad10eb56251f11e9a5694491529afbcc7ae6736c6f98f71b26e561fdb652d9c31a"><div class="ttname"><a href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7ae6736c6f98f71b26e561fdb652d9c31a">TIMED_EVENT_SPAWN_WYRMS</a></div><div class="ttdeci">@ TIMED_EVENT_SPAWN_WYRMS</div><div class="ttdef"><b>Definition:</b> <a href="timed__event_8h_source.html#l00015">timed_event.h:15</a></div></div>
<div class="ttc" id="atype__id_8h_html_a52570fdf9996c7b72d444f8020a741e8"><div class="ttname"><a href="type__id_8h.html#a52570fdf9996c7b72d444f8020a741e8">ter_id</a></div><div class="ttdeci">int_id&lt; ter_t &gt; ter_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00164">type_id.h:164</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="event_8h.html#a430b444c74dd3fd1472a31714ec5f1ceac9d4fbdbb600ed5b519c7065aea1af90">awakes_dark_wyrms</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="game_8cpp_source.html#l12086">get_event_bus()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="character_8cpp_source.html#l02407">Character::i_add_or_drop()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l04247">map::i_clear()</a>, <a class="el" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a>, <a class="el" href="iexamine_8cpp.html#a5561ff0e93d53b7928bfec9ba954ff40">mon_dark_wyrm</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="item__stack_8cpp_source.html#l00083">item_stack::only_item()</a>, <a class="el" href="map_8cpp_source.html#l08775">map::points_on_zlevel()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="event__bus_8cpp_source.html#l00058">event_bus::send()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="mapdata_8cpp_source.html#l00629">t_rock_floor</a>, <a class="el" href="map_8cpp_source.html#l01562">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, <a class="el" href="timed__event_8h_source.html#l00015">TIMED_EVENT_SPAWN_WYRMS</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, and <a class="el" href="item_8cpp_source.html#l08374">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="aa9ff11622165ffce0501d4e17e75427f" name="aa9ff11622165ffce0501d4e17e75427f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9ff11622165ffce0501d4e17e75427f">&#9670;&nbsp;</a></span>pit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::pit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If there is a 2x4 around, prompt placing it across pit. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01322">1322</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>{</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>    <span class="keyword">const</span> <a class="code hl_class" href="classinventory.html">inventory</a> &amp;crafting_inv = p.<a class="code hl_function" href="classCharacter.html#abd358c7a7757575b70b1613dbcce40a7">crafting_inventory</a>();</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>    <span class="keywordflow">if</span>( !crafting_inv.<a class="code hl_function" href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">has_amount</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a2903765637d33796105b203898a261ba">itype_2x4</a>, 1 ) ) {</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>    }</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>    std::vector&lt;item_comp&gt; planks;</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>    planks.push_back( <a class="code hl_struct" href="structitem__comp.html">item_comp</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a2903765637d33796105b203898a261ba">itype_2x4</a>, 1 ) );</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span> </div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Place a plank over the pit?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>        p.<a class="code hl_function" href="classplayer.html#ad1f5e6d21b83313ab148302140083b99">consume_items</a>( planks, 1, <a class="code hl_function" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp ) == <a class="code hl_variable" href="mapdata_8cpp.html#ae6822029506d9cb25c5077dfec866b86">t_pit</a> ) {</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>            here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a24622edabf6f96aeabccc50c07f3ed90">t_pit_covered</a> );</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a43a85ba4d54f41e63f95e1afd67d2788">t_pit_spiked</a> ) {</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>            here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a53e5c915dc63627182b7933e84c4fb9f">t_pit_spiked_covered</a> );</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a01dc0729d826a24eec2683a1b03da867">t_pit_glass</a> ) {</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>            here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a02704cfbc8d6fc013e47a89d682f2608">t_pit_glass_covered</a> );</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>        }</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You place a plank of wood over the pit.&quot;</span> ) );</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>        p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_turns&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>    }</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_a2903765637d33796105b203898a261ba"><div class="ttname"><a href="iexamine_8cpp.html#a2903765637d33796105b203898a261ba">itype_2x4</a></div><div class="ttdeci">static const itype_id itype_2x4(&quot;2x4&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_a01dc0729d826a24eec2683a1b03da867"><div class="ttname"><a href="mapdata_8cpp.html#a01dc0729d826a24eec2683a1b03da867">t_pit_glass</a></div><div class="ttdeci">ter_id t_pit_glass</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00628">mapdata.cpp:628</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a02704cfbc8d6fc013e47a89d682f2608"><div class="ttname"><a href="mapdata_8cpp.html#a02704cfbc8d6fc013e47a89d682f2608">t_pit_glass_covered</a></div><div class="ttdeci">ter_id t_pit_glass_covered</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00628">mapdata.cpp:628</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a24622edabf6f96aeabccc50c07f3ed90"><div class="ttname"><a href="mapdata_8cpp.html#a24622edabf6f96aeabccc50c07f3ed90">t_pit_covered</a></div><div class="ttdeci">ter_id t_pit_covered</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00628">mapdata.cpp:628</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a43a85ba4d54f41e63f95e1afd67d2788"><div class="ttname"><a href="mapdata_8cpp.html#a43a85ba4d54f41e63f95e1afd67d2788">t_pit_spiked</a></div><div class="ttdeci">ter_id t_pit_spiked</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00628">mapdata.cpp:628</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a53e5c915dc63627182b7933e84c4fb9f"><div class="ttname"><a href="mapdata_8cpp.html#a53e5c915dc63627182b7933e84c4fb9f">t_pit_spiked_covered</a></div><div class="ttdeci">ter_id t_pit_spiked_covered</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00628">mapdata.cpp:628</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_ae6822029506d9cb25c5077dfec866b86"><div class="ttname"><a href="mapdata_8cpp.html#ae6822029506d9cb25c5077dfec866b86">t_pit</a></div><div class="ttdeci">ter_id t_pit</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00627">mapdata.cpp:627</a></div></div>
<div class="ttc" id="astructitem__comp_html"><div class="ttname"><a href="structitem__comp.html">item_comp</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00116">requirements.h:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="crafting_8cpp_source.html#l01513">player::consume_items()</a>, <a class="el" href="crafting_8cpp_source.html#l00556">Character::crafting_inventory()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="visitable_8cpp_source.html#l01111">visitable&lt; T &gt;::has_amount()</a>, <a class="el" href="item_8h_source.html#l02265">is_crafting_component()</a>, <a class="el" href="iexamine_8cpp.html#a2903765637d33796105b203898a261ba">itype_2x4</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="mapdata_8cpp_source.html#l00627">t_pit</a>, <a class="el" href="mapdata_8cpp_source.html#l00628">t_pit_covered</a>, <a class="el" href="mapdata_8cpp_source.html#l00628">t_pit_glass</a>, <a class="el" href="mapdata_8cpp_source.html#l00628">t_pit_glass_covered</a>, <a class="el" href="mapdata_8cpp_source.html#l00628">t_pit_spiked</a>, <a class="el" href="mapdata_8cpp_source.html#l00628">t_pit_spiked_covered</a>, <a class="el" href="map_8cpp_source.html#l01562">map::ter()</a>, and <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="trapfunc_8cpp_source.html#l01071">trapfunc::sinkhole()</a>.</p>

</div>
</div>
<a id="aefb50727cba101f7638b0ceda003baa6" name="aefb50727cba101f7638b0ceda003baa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefb50727cba101f7638b0ceda003baa6">&#9670;&nbsp;</a></span>pit_covered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::pit_covered </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompt removing the 2x4 placed across the pit. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01350">1350</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>{</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove cover?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>    }</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span> </div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>    <a class="code hl_class" href="classitem.html">item</a> plank( <span class="stringliteral">&quot;2x4&quot;</span>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You remove the plank.&quot;</span> ) );</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>    here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), plank );</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span> </div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a24622edabf6f96aeabccc50c07f3ed90">t_pit_covered</a> ) {</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#ae6822029506d9cb25c5077dfec866b86">t_pit</a> );</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a53e5c915dc63627182b7933e84c4fb9f">t_pit_spiked_covered</a> ) {</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a43a85ba4d54f41e63f95e1afd67d2788">t_pit_spiked</a> );</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp ) == <a class="code hl_variable" href="mapdata_8cpp.html#a02704cfbc8d6fc013e47a89d682f2608">t_pit_glass_covered</a> ) {</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a01dc0729d826a24eec2683a1b03da867">t_pit_glass</a> );</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>    }</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>    p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_turns&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="mapdata_8cpp_source.html#l00627">t_pit</a>, <a class="el" href="mapdata_8cpp_source.html#l00628">t_pit_covered</a>, <a class="el" href="mapdata_8cpp_source.html#l00628">t_pit_glass</a>, <a class="el" href="mapdata_8cpp_source.html#l00628">t_pit_glass_covered</a>, <a class="el" href="mapdata_8cpp_source.html#l00628">t_pit_spiked</a>, <a class="el" href="mapdata_8cpp_source.html#l00628">t_pit_spiked_covered</a>, <a class="el" href="map_8cpp_source.html#l01562">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="acbcb2fec05977cfc1aeb875072177529" name="acbcb2fec05977cfc1aeb875072177529"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbcb2fec05977cfc1aeb875072177529">&#9670;&nbsp;</a></span>plant_seed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::plant_seed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>seed_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actual planting of selected seed. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02291">2291</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>{</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>    <a class="code hl_class" href="classplayer__activity.html">player_activity</a> <a class="code hl_variable" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a0d5aea7689f3beb0f49eac50cd882a8b">ACT_PLANT_SEED</a>, to_moves&lt;int&gt;( 30_seconds ) );</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>    <a class="code hl_variable" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.placement = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( examp );</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>    <a class="code hl_variable" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.str_values.emplace_back( seed_id );</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>    p.<a class="code hl_function" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code hl_variable" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> );</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>}</div>
<div class="ttc" id="aclassCharacter_html_af7d50915d362a56eeff40bc6b392326d"><div class="ttname"><a href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">Character::assign_activity</a></div><div class="ttdeci">void assign_activity(const activity_id &amp;type, int moves=calendar::INDEFINITELY_LONG, int index=-1, int pos=INT_MIN, const std::string &amp;name=&quot;&quot;)</div><div class="ttdoc">Legacy activity assignment, does not work for any activites using the new activity_actor class and ma...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09193">character.cpp:9193</a></div></div>
<div class="ttc" id="aclassplayer__activity_html"><div class="ttname"><a href="classplayer__activity.html">player_activity</a></div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00031">player_activity.h:32</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a0d5aea7689f3beb0f49eac50cd882a8b"><div class="ttname"><a href="iexamine_8cpp.html#a0d5aea7689f3beb0f49eac50cd882a8b">ACT_PLANT_SEED</a></div><div class="ttdeci">static const activity_id ACT_PLANT_SEED(&quot;ACT_PLANT_SEED&quot;)</div></div>
<div class="ttc" id="asounds_8cpp_html_ad9fe7b616a93a8209da903eba756237e"><div class="ttname"><a href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a></div><div class="ttdeci">activity_id act</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00075">sounds.cpp:75</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sounds_8cpp_source.html#l00075">act</a>, <a class="el" href="iexamine_8cpp.html#a0d5aea7689f3beb0f49eac50cd882a8b">ACT_PLANT_SEED</a>, <a class="el" href="character_8cpp_source.html#l09193">Character::assign_activity()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, and <a class="el" href="map_8cpp_source.html#l08399">map::getabs()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02302">dirtmound()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l02839">generic_multi_activity_do()</a>.</p>

</div>
</div>
<a id="a3a270e1ac53815f40b741ea24b35ae32" name="a3a270e1ac53815f40b741ea24b35ae32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a270e1ac53815f40b741ea24b35ae32">&#9670;&nbsp;</a></span>portable_structure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::portable_structure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine structure's type and prompts its removal. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01275">1275</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>{</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">furn_str_id</a> fid = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code hl_function" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>();</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>    <span class="keyword">const</span> std::pair&lt;itype_id, const deploy_tent_actor *&gt; tent_item_type = <a class="code hl_function" href="iexamine_8cpp.html#adbbb521883b37050b79bf17a70b8f29b">find_tent_itype</a>( fid );</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>    <span class="keywordflow">if</span>( tent_item_type.first.is_null() ) {</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;unknown furniture %s: don&#39;t know how to transform it into an item&quot;</span>, fid.<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>() );</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>    }</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span> </div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>    <a class="code hl_class" href="classstring__id.html">itype_id</a> dropped = tent_item_type.first;</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>    std::string <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( dropped );</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>    <span class="keywordtype">int</span> radius;</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span> </div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>    <span class="keywordflow">if</span>( tent_item_type.second ) {</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>        <span class="keyword">const</span> <a class="code hl_class" href="classdeploy__tent__actor.html">deploy_tent_actor</a> &amp;actor = *tent_item_type.second;</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>        <span class="keywordflow">if</span>( !actor.<a class="code hl_function" href="classdeploy__tent__actor.html#a2da9ea681c49cf945005dcd6228652b7">check_intact</a>( examp ) ) {</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>            <span class="keywordflow">if</span>( !actor.<a class="code hl_variable" href="classdeploy__tent__actor.html#ade88aa403abf0fdd70b0548d83437426">broken_type</a> ) {</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is broken and can not be picked up.&quot;</span> ), <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>                <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>            }</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>            dropped = *actor.<a class="code hl_variable" href="classdeploy__tent__actor.html#ade88aa403abf0fdd70b0548d83437426">broken_type</a>;</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>            <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;damaged %s&quot;</span> ), <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>        }</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>        radius = actor.<a class="code hl_variable" href="classdeploy__tent__actor.html#a260f63c66f89a2f9e89756689891e17a">radius</a>;</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span> </div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>        radius = std::max( 1, fid-&gt;<a class="code hl_variable" href="structmap__data__common__t.html#ad09f16bf5be54a69df7a005b1c9070d7">bash</a>.<a class="code hl_variable" href="structmap__bash__info.html#a25dd9c75c9b15f1f34061258239f8df2">collapse_radius</a> );</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>    }</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span> </div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Take down the %s?&quot;</span> ), <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) ) {</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>    }</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span> </div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>    p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_turns&lt;int&gt;( 2_seconds );</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;pt : here.<a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( examp, radius ) ) {</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( pt, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>    }</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span> </div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>    here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( examp, <a class="code hl_class" href="classitem.html">item</a>( dropped, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) );</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>}</div>
<div class="ttc" id="aclassdeploy__tent__actor_html"><div class="ttname"><a href="classdeploy__tent__actor.html">deploy_tent_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01210">iuse_actor.h:1211</a></div></div>
<div class="ttc" id="aclassdeploy__tent__actor_html_a260f63c66f89a2f9e89756689891e17a"><div class="ttname"><a href="classdeploy__tent__actor.html#a260f63c66f89a2f9e89756689891e17a">deploy_tent_actor::radius</a></div><div class="ttdeci">int radius</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01218">iuse_actor.h:1218</a></div></div>
<div class="ttc" id="aclassdeploy__tent__actor_html_a2da9ea681c49cf945005dcd6228652b7"><div class="ttname"><a href="classdeploy__tent__actor.html#a2da9ea681c49cf945005dcd6228652b7">deploy_tent_actor::check_intact</a></div><div class="ttdeci">bool check_intact(const tripoint &amp;center) const</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l04734">iuse_actor.cpp:4734</a></div></div>
<div class="ttc" id="aclassdeploy__tent__actor_html_ade88aa403abf0fdd70b0548d83437426"><div class="ttname"><a href="classdeploy__tent__actor.html#ade88aa403abf0fdd70b0548d83437426">deploy_tent_actor::broken_type</a></div><div class="ttdeci">std::optional&lt; itype_id &gt; broken_type</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01219">iuse_actor.h:1219</a></div></div>
<div class="ttc" id="aclassstring__id_html_aa7dabc565f0c067e1a237ea224b18f93"><div class="ttname"><a href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00255">string_id.h:255</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_adbbb521883b37050b79bf17a70b8f29b"><div class="ttname"><a href="iexamine_8cpp.html#adbbb521883b37050b79bf17a70b8f29b">find_tent_itype</a></div><div class="ttdeci">static std::pair&lt; itype_id, const deploy_tent_actor * &gt; find_tent_itype(const furn_str_id &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01253">iexamine.cpp:1253</a></div></div>
<div class="ttc" id="astructmap__bash__info_html_a25dd9c75c9b15f1f34061258239f8df2"><div class="ttname"><a href="structmap__bash__info.html#a25dd9c75c9b15f1f34061258239f8df2">map_bash_info::collapse_radius</a></div><div class="ttdeci">int collapse_radius</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00078">mapdata.h:78</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_ad09f16bf5be54a69df7a005b1c9070d7"><div class="ttname"><a href="structmap__data__common__t.html#ad09f16bf5be54a69df7a005b1c9070d7">map_data_common_t::bash</a></div><div class="ttdeci">map_bash_info bash</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00346">mapdata.h:346</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="mapdata_8h_source.html#l00346">map_data_common_t::bash</a>, <a class="el" href="iuse__actor_8h_source.html#l01219">deploy_tent_actor::broken_type</a>, <a class="el" href="iuse__actor_8cpp_source.html#l04734">deploy_tent_actor::check_intact()</a>, <a class="el" href="mapdata_8h_source.html#l00078">map_bash_info::collapse_radius</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="iexamine_8cpp_source.html#l01253">find_tent_itype()</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="overmap_8cpp_source.html#l04129">om_direction::name()</a>, <a class="el" href="item_8cpp_source.html#l09951">item::nname()</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="map_8cpp_source.html#l08754">map::points_in_radius()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="iuse__actor_8h_source.html#l01218">deploy_tent_actor::radius</a>, <a class="el" href="string__id_8h_source.html#l00255">string_id&lt; T &gt;::str()</a>, <a class="el" href="string__formatter_8h_source.html#l00430">string_format()</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a700893be2f824844fdc4b4ea4b2ee148" name="a700893be2f824844fdc4b4ea4b2ee148"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a700893be2f824844fdc4b4ea4b2ee148">&#9670;&nbsp;</a></span>pour_into_keg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iexamine::pour_into_keg </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>liquid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pour liquid into a keg (furniture) on the map. </p>
<p >The transferred charges (if any) will be removed from the liquid item. </p><dl class="section return"><dt>Returns</dt><dd>Whether any charges have been transferred at all. </dd></dl>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03421">3421</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03422" name="l03422"></a><span class="lineno"> 3422</span>{</div>
<div class="line"><a id="l03423" name="l03423"></a><span class="lineno"> 3423</span>    <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> keg_cap = <a class="code hl_function" href="iexamine_8cpp.html#a59732e8d3f1cbbbe942381c75cff885f">get_keg_capacity</a>( pos );</div>
<div class="line"><a id="l03424" name="l03424"></a><span class="lineno"> 3424</span>    <span class="keywordflow">if</span>( keg_cap &lt;= 0_ml ) {</div>
<div class="line"><a id="l03425" name="l03425"></a><span class="lineno"> 3425</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03426" name="l03426"></a><span class="lineno"> 3426</span>    }</div>
<div class="line"><a id="l03427" name="l03427"></a><span class="lineno"> 3427</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03428" name="l03428"></a><span class="lineno"> 3428</span>    <span class="keyword">const</span> <span class="keyword">auto</span> keg_name = here.<a class="code hl_function" href="classmap.html#a148fb7ddc87ffb1da97dd33e0529c983">name</a>( pos );</div>
<div class="line"><a id="l03429" name="l03429"></a><span class="lineno"> 3429</span> </div>
<div class="line"><a id="l03430" name="l03430"></a><span class="lineno"> 3430</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> stack = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( pos );</div>
<div class="line"><a id="l03431" name="l03431"></a><span class="lineno"> 3431</span>    <span class="keywordflow">if</span>( stack.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a id="l03432" name="l03432"></a><span class="lineno"> 3432</span>        here.<a class="code hl_function" href="classmap.html#a64d3ea19afd7a9c65f072dd65fb15405">add_item</a>( pos, liquid );</div>
<div class="line"><a id="l03433" name="l03433"></a><span class="lineno"> 3433</span>        here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( pos ).<a class="code hl_function" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 0; <span class="comment">// Will be set later</span></div>
<div class="line"><a id="l03434" name="l03434"></a><span class="lineno"> 3434</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( stack.<a class="code hl_function" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() != liquid.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() ) {</div>
<div class="line"><a id="l03435" name="l03435"></a><span class="lineno"> 3435</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s already contains some %s, you can&#39;t add a different liquid to it.&quot;</span> ),</div>
<div class="line"><a id="l03436" name="l03436"></a><span class="lineno"> 3436</span>                 keg_name, <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( stack.<a class="code hl_function" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() ) );</div>
<div class="line"><a id="l03437" name="l03437"></a><span class="lineno"> 3437</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03438" name="l03438"></a><span class="lineno"> 3438</span>    }</div>
<div class="line"><a id="l03439" name="l03439"></a><span class="lineno"> 3439</span> </div>
<div class="line"><a id="l03440" name="l03440"></a><span class="lineno"> 3440</span>    <a class="code hl_class" href="classitem.html">item</a> &amp;drink = stack.<a class="code hl_function" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>();</div>
<div class="line"><a id="l03441" name="l03441"></a><span class="lineno"> 3441</span>    <span class="keywordflow">if</span>( drink.<a class="code hl_function" href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">volume</a>() &gt;= keg_cap ) {</div>
<div class="line"><a id="l03442" name="l03442"></a><span class="lineno"> 3442</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is full.&quot;</span> ), keg_name );</div>
<div class="line"><a id="l03443" name="l03443"></a><span class="lineno"> 3443</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03444" name="l03444"></a><span class="lineno"> 3444</span>    }</div>
<div class="line"><a id="l03445" name="l03445"></a><span class="lineno"> 3445</span> </div>
<div class="line"><a id="l03446" name="l03446"></a><span class="lineno"> 3446</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You pour %1$s into the %2$s.&quot;</span> ), liquid.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>(), keg_name );</div>
<div class="line"><a id="l03447" name="l03447"></a><span class="lineno"> 3447</span>    <span class="keywordflow">while</span>( liquid.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt; 0 &amp;&amp; drink.<a class="code hl_function" href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">volume</a>() &lt; keg_cap ) {</div>
<div class="line"><a id="l03448" name="l03448"></a><span class="lineno"> 3448</span>        drink.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>++;</div>
<div class="line"><a id="l03449" name="l03449"></a><span class="lineno"> 3449</span>        liquid.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>--;</div>
<div class="line"><a id="l03450" name="l03450"></a><span class="lineno"> 3450</span>    }</div>
<div class="line"><a id="l03451" name="l03451"></a><span class="lineno"> 3451</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03452" name="l03452"></a><span class="lineno"> 3452</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04454">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="item_8h_source.html#l02199">item::charges</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="iexamine_8cpp_source.html#l03216">get_keg_capacity()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l01389">map::name()</a>, <a class="el" href="item_8cpp_source.html#l09951">item::nname()</a>, <a class="el" href="item__stack_8cpp_source.html#l00083">item_stack::only_item()</a>, <a class="el" href="item_8cpp_source.html#l04574">item::tname()</a>, <a class="el" href="item_8cpp_source.html#l08374">item::typeId()</a>, and <a class="el" href="item_8cpp_source.html#l05129">item::volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l01513">activity_handlers::fill_liquid_do_turn()</a>, <a class="el" href="iexamine_8cpp_source.html#l03256">keg()</a>, and <a class="el" href="handle__liquid_8cpp_source.html#l00306">liquid_handler::perform_liquid_transfer()</a>.</p>

</div>
</div>
<a id="a292307d5a4cfdf5634d7fe4f7be01cf7" name="a292307d5a4cfdf5634d7fe4f7be01cf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a292307d5a4cfdf5634d7fe4f7be01cf7">&#9670;&nbsp;</a></span>practice_survival_while_foraging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::practice_survival_while_foraging </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Intelligence Intelligence caps survival skill gains from foraging Survival decreases survival skill gain from foraging (NEGATIVE) 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l06397">6397</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06398" name="l06398"></a><span class="lineno"> 6398</span>{<span class="comment"></span></div>
<div class="line"><a id="l06399" name="l06399"></a><span class="lineno"> 6399</span><span class="comment">    ///\EFFECT_INT Intelligence caps survival skill gains from foraging</span></div>
<div class="line"><a id="l06400" name="l06400"></a><span class="lineno"> 6400</span><span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_forage_skill = p-&gt;<a class="code hl_variable" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> / 3 + 1;<span class="comment"></span></div>
<div class="line"><a id="l06401" name="l06401"></a><span class="lineno"> 6401</span><span class="comment">    ///\EFFECT_SURVIVAL decreases survival skill gain from foraging (NEGATIVE)</span></div>
<div class="line"><a id="l06402" name="l06402"></a><span class="lineno"> 6402</span><span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_exp = 2 * ( max_forage_skill - p-&gt;<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) );</div>
<div class="line"><a id="l06403" name="l06403"></a><span class="lineno"> 6403</span>    <span class="comment">// Award experience for foraging attempt regardless of success</span></div>
<div class="line"><a id="l06404" name="l06404"></a><span class="lineno"> 6404</span>    p-&gt;<a class="code hl_function" href="classCharacter.html#a3d70ebd707bada8879208e98f07f7223">practice</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, max_exp ), max_forage_skill );</div>
<div class="line"><a id="l06405" name="l06405"></a><span class="lineno"> 6405</span>}</div>
<div class="ttc" id="aclassCharacter_html_a994c83d61054215e81a6e87478d81203"><div class="ttname"><a href="classCharacter.html#a994c83d61054215e81a6e87478d81203">Character::int_cur</a></div><div class="ttdeci">int int_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00266">character.h:266</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l03351">Character::get_skill_level()</a>, <a class="el" href="character_8h_source.html#l00266">Character::int_cur</a>, <a class="el" href="character_8cpp_source.html#l03417">Character::practice()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l01697">activity_handlers::forage_finish()</a>, and <a class="el" href="iexamine_8cpp_source.html#l02037">harvest_common()</a>.</p>

</div>
</div>
<a id="a8d81e91c77356539faa7c664799aaa8e" name="a8d81e91c77356539faa7c664799aaa8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d81e91c77356539faa7c664799aaa8e">&#9670;&nbsp;</a></span>quern_examine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::quern_examine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l05822">5822</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05823" name="l05823"></a><span class="lineno"> 5823</span>{</div>
<div class="line"><a id="l05824" name="l05824"></a><span class="lineno"> 5824</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l05825" name="l05825"></a><span class="lineno"> 5825</span>    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_class" href="classstring__id.html">furn_str_id</a>( <span class="stringliteral">&quot;f_water_mill&quot;</span> ) ) {</div>
<div class="line"><a id="l05826" name="l05826"></a><span class="lineno"> 5826</span>        <span class="keywordflow">if</span>( !here.<a class="code hl_function" href="classmap.html#af9b776627d41969fbca5089c3d22162c">is_water_shallow_current</a>( examp ) ) {</div>
<div class="line"><a id="l05827" name="l05827"></a><span class="lineno"> 5827</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The water mill needs to be over shallow flowing water to work.&quot;</span> ) );</div>
<div class="line"><a id="l05828" name="l05828"></a><span class="lineno"> 5828</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05829" name="l05829"></a><span class="lineno"> 5829</span>        }</div>
<div class="line"><a id="l05830" name="l05830"></a><span class="lineno"> 5830</span>    }</div>
<div class="line"><a id="l05831" name="l05831"></a><span class="lineno"> 5831</span>    <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_class" href="classstring__id.html">furn_str_id</a>( <span class="stringliteral">&quot;f_wind_mill&quot;</span> ) ) {</div>
<div class="line"><a id="l05832" name="l05832"></a><span class="lineno"> 5832</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_sheltered( examp ) ) {</div>
<div class="line"><a id="l05833" name="l05833"></a><span class="lineno"> 5833</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The wind mill needs to be outside in the wind to work.&quot;</span> ) );</div>
<div class="line"><a id="l05834" name="l05834"></a><span class="lineno"> 5834</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05835" name="l05835"></a><span class="lineno"> 5835</span>        }</div>
<div class="line"><a id="l05836" name="l05836"></a><span class="lineno"> 5836</span>    }</div>
<div class="line"><a id="l05837" name="l05837"></a><span class="lineno"> 5837</span> </div>
<div class="line"><a id="l05838" name="l05838"></a><span class="lineno"> 5838</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_typedef" href="type__id_8h.html#a13fd56b9ac506b2517d4889040e0ef66">furn_str_id</a>( <span class="stringliteral">&quot;f_water_mill_active&quot;</span> ) ||</div>
<div class="line"><a id="l05839" name="l05839"></a><span class="lineno"> 5839</span>                        here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_typedef" href="type__id_8h.html#a13fd56b9ac506b2517d4889040e0ef66">furn_str_id</a>( <span class="stringliteral">&quot;f_wind_mill_active&quot;</span> );</div>
<div class="line"><a id="l05840" name="l05840"></a><span class="lineno"> 5840</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items_here = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l05841" name="l05841"></a><span class="lineno"> 5841</span> </div>
<div class="line"><a id="l05842" name="l05842"></a><span class="lineno"> 5842</span>    <span class="keywordflow">if</span>( items_here.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() &amp;&amp; active ) {</div>
<div class="line"><a id="l05843" name="l05843"></a><span class="lineno"> 5843</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;active mill was empty!&quot;</span> );</div>
<div class="line"><a id="l05844" name="l05844"></a><span class="lineno"> 5844</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_class" href="classstring__id.html">furn_str_id</a>( <span class="stringliteral">&quot;f_water_mill_active&quot;</span> ) ) {</div>
<div class="line"><a id="l05845" name="l05845"></a><span class="lineno"> 5845</span>            here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#aa8ee599d085db956194bf87c5db9da99">f_water_mill</a> );</div>
<div class="line"><a id="l05846" name="l05846"></a><span class="lineno"> 5846</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_class" href="classstring__id.html">furn_str_id</a>( <span class="stringliteral">&quot;f_wind_mill_active&quot;</span> ) ) {</div>
<div class="line"><a id="l05847" name="l05847"></a><span class="lineno"> 5847</span>            here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#ad8f895d0bf37d7e8a4a17a77f0d6d009">f_wind_mill</a> );</div>
<div class="line"><a id="l05848" name="l05848"></a><span class="lineno"> 5848</span>        }</div>
<div class="line"><a id="l05849" name="l05849"></a><span class="lineno"> 5849</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05850" name="l05850"></a><span class="lineno"> 5850</span>    }</div>
<div class="line"><a id="l05851" name="l05851"></a><span class="lineno"> 5851</span> </div>
<div class="line"><a id="l05852" name="l05852"></a><span class="lineno"> 5852</span>    <span class="keywordflow">if</span>( items_here.<a class="code hl_function" href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">size</a>() == 1 &amp;&amp; items_here.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>()-&gt;typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a> ) {</div>
<div class="line"><a id="l05853" name="l05853"></a><span class="lineno"> 5853</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;f_mill_active was empty, and had fake_milling_item!&quot;</span> );</div>
<div class="line"><a id="l05854" name="l05854"></a><span class="lineno"> 5854</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_class" href="classstring__id.html">furn_str_id</a>( <span class="stringliteral">&quot;f_water_mill_active&quot;</span> ) ) {</div>
<div class="line"><a id="l05855" name="l05855"></a><span class="lineno"> 5855</span>            here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#aa8ee599d085db956194bf87c5db9da99">f_water_mill</a> );</div>
<div class="line"><a id="l05856" name="l05856"></a><span class="lineno"> 5856</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_class" href="classstring__id.html">furn_str_id</a>( <span class="stringliteral">&quot;f_wind_mill_active&quot;</span> ) ) {</div>
<div class="line"><a id="l05857" name="l05857"></a><span class="lineno"> 5857</span>            here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#ad8f895d0bf37d7e8a4a17a77f0d6d009">f_wind_mill</a> );</div>
<div class="line"><a id="l05858" name="l05858"></a><span class="lineno"> 5858</span>        }</div>
<div class="line"><a id="l05859" name="l05859"></a><span class="lineno"> 5859</span>        items_here.<a class="code hl_function" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( items_here.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>() );</div>
<div class="line"><a id="l05860" name="l05860"></a><span class="lineno"> 5860</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05861" name="l05861"></a><span class="lineno"> 5861</span>    }</div>
<div class="line"><a id="l05862" name="l05862"></a><span class="lineno"> 5862</span> </div>
<div class="line"><a id="l05863" name="l05863"></a><span class="lineno"> 5863</span>    <a class="code hl_class" href="classtime__duration.html">time_duration</a> time_left = 0_turns;</div>
<div class="line"><a id="l05864" name="l05864"></a><span class="lineno"> 5864</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> f_volume = 0_ml;</div>
<div class="line"><a id="l05865" name="l05865"></a><span class="lineno"> 5865</span>    <span class="keywordtype">bool</span> f_check = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05866" name="l05866"></a><span class="lineno"> 5866</span> </div>
<div class="line"><a id="l05867" name="l05867"></a><span class="lineno"> 5867</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;it : items_here ) {</div>
<div class="line"><a id="l05868" name="l05868"></a><span class="lineno"> 5868</span>        <span class="keywordflow">if</span>( it.typeId() != <a class="code hl_variable" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a> ) {</div>
<div class="line"><a id="l05869" name="l05869"></a><span class="lineno"> 5869</span>            f_check = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05870" name="l05870"></a><span class="lineno"> 5870</span>            f_volume += it.volume();</div>
<div class="line"><a id="l05871" name="l05871"></a><span class="lineno"> 5871</span>        }</div>
<div class="line"><a id="l05872" name="l05872"></a><span class="lineno"> 5872</span>        <span class="keywordflow">if</span>( active &amp;&amp; it.typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a> ) {</div>
<div class="line"><a id="l05873" name="l05873"></a><span class="lineno"> 5873</span>            time_left = <a class="code hl_function" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( it.item_counter );</div>
<div class="line"><a id="l05874" name="l05874"></a><span class="lineno"> 5874</span>        }</div>
<div class="line"><a id="l05875" name="l05875"></a><span class="lineno"> 5875</span>    }</div>
<div class="line"><a id="l05876" name="l05876"></a><span class="lineno"> 5876</span> </div>
<div class="line"><a id="l05877" name="l05877"></a><span class="lineno"> 5877</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> empty = f_volume == 0_ml;</div>
<div class="line"><a id="l05878" name="l05878"></a><span class="lineno"> 5878</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> full = f_volume &gt;= <a class="code hl_variable" href="namespacesm__rack.html#a4c0565d55310ec1ac37c77821801a1fe">sm_rack::MAX_FOOD_VOLUME</a>;</div>
<div class="line"><a id="l05879" name="l05879"></a><span class="lineno"> 5879</span>    <span class="keyword">const</span> <span class="keyword">auto</span> remaining_capacity = <a class="code hl_variable" href="namespacesm__rack.html#a4c0565d55310ec1ac37c77821801a1fe">sm_rack::MAX_FOOD_VOLUME</a> - f_volume;</div>
<div class="line"><a id="l05880" name="l05880"></a><span class="lineno"> 5880</span> </div>
<div class="line"><a id="l05881" name="l05881"></a><span class="lineno"> 5881</span>    <a class="code hl_class" href="classuilist.html">uilist</a> smenu;</div>
<div class="line"><a id="l05882" name="l05882"></a><span class="lineno"> 5882</span>    smenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;What to do with the mill?&quot;</span> );</div>
<div class="line"><a id="l05883" name="l05883"></a><span class="lineno"> 5883</span>    smenu.<a class="code hl_variable" href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">desc_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05884" name="l05884"></a><span class="lineno"> 5884</span> </div>
<div class="line"><a id="l05885" name="l05885"></a><span class="lineno"> 5885</span>    smenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 0, <span class="keyword">true</span>, <span class="charliteral">&#39;i&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Inspect mill&quot;</span> ) );</div>
<div class="line"><a id="l05886" name="l05886"></a><span class="lineno"> 5886</span> </div>
<div class="line"><a id="l05887" name="l05887"></a><span class="lineno"> 5887</span>    <span class="keywordflow">if</span>( !active ) {</div>
<div class="line"><a id="l05888" name="l05888"></a><span class="lineno"> 5888</span>        smenu.<a class="code hl_function" href="classuilist.html#ae186aa01767463de50315306c6c51479">addentry_desc</a>( 1, !empty, <span class="charliteral">&#39;r&#39;</span>,</div>
<div class="line"><a id="l05889" name="l05889"></a><span class="lineno"> 5889</span>                             empty ?  <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove brake and start milling… insert some products for milling first&quot;</span> ) :</div>
<div class="line"><a id="l05890" name="l05890"></a><span class="lineno"> 5890</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove brake and start milling&quot;</span> ),</div>
<div class="line"><a id="l05891" name="l05891"></a><span class="lineno"> 5891</span>                             <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove brake and start milling, milling will take about %s.&quot;</span> ),</div>
<div class="line"><a id="l05892" name="l05892"></a><span class="lineno"> 5892</span>                                            <a class="code hl_function" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">to_string</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ab52e720c1cc88c381313199ac4a3b26a">milling_time</a> ) ) );</div>
<div class="line"><a id="l05893" name="l05893"></a><span class="lineno"> 5893</span> </div>
<div class="line"><a id="l05894" name="l05894"></a><span class="lineno"> 5894</span>        smenu.<a class="code hl_function" href="classuilist.html#ae186aa01767463de50315306c6c51479">addentry_desc</a>( 2, !full, <span class="charliteral">&#39;p&#39;</span>,</div>
<div class="line"><a id="l05895" name="l05895"></a><span class="lineno"> 5895</span>                             full ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Insert products for milling… mill is full&quot;</span> ) :</div>
<div class="line"><a id="l05896" name="l05896"></a><span class="lineno"> 5896</span>                             <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Insert products for milling… remaining capacity is %s %s&quot;</span> ),</div>
<div class="line"><a id="l05897" name="l05897"></a><span class="lineno"> 5897</span>                                            <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( remaining_capacity ), <a class="code hl_function" href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a>() ),</div>
<div class="line"><a id="l05898" name="l05898"></a><span class="lineno"> 5898</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Fill the mill with starchy products such as wheat, barley or oats.&quot;</span> ) );</div>
<div class="line"><a id="l05899" name="l05899"></a><span class="lineno"> 5899</span> </div>
<div class="line"><a id="l05900" name="l05900"></a><span class="lineno"> 5900</span>        <span class="keywordflow">if</span>( f_check ) {</div>
<div class="line"><a id="l05901" name="l05901"></a><span class="lineno"> 5901</span>            smenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 3, f_check, <span class="charliteral">&#39;e&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove products from mill&quot;</span> ) );</div>
<div class="line"><a id="l05902" name="l05902"></a><span class="lineno"> 5902</span>        }</div>
<div class="line"><a id="l05903" name="l05903"></a><span class="lineno"> 5903</span> </div>
<div class="line"><a id="l05904" name="l05904"></a><span class="lineno"> 5904</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05905" name="l05905"></a><span class="lineno"> 5905</span>        smenu.<a class="code hl_function" href="classuilist.html#ae186aa01767463de50315306c6c51479">addentry_desc</a>( 4, <span class="keyword">true</span>, <span class="charliteral">&#39;x&#39;</span>,</div>
<div class="line"><a id="l05906" name="l05906"></a><span class="lineno"> 5906</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Apply brake to mill&quot;</span> ),</div>
<div class="line"><a id="l05907" name="l05907"></a><span class="lineno"> 5907</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Applying the brake will stop milling process.&quot;</span> ) );</div>
<div class="line"><a id="l05908" name="l05908"></a><span class="lineno"> 5908</span>    }</div>
<div class="line"><a id="l05909" name="l05909"></a><span class="lineno"> 5909</span> </div>
<div class="line"><a id="l05910" name="l05910"></a><span class="lineno"> 5910</span>    smenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l05911" name="l05911"></a><span class="lineno"> 5911</span> </div>
<div class="line"><a id="l05912" name="l05912"></a><span class="lineno"> 5912</span>    <span class="keywordflow">switch</span>( smenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a id="l05913" name="l05913"></a><span class="lineno"> 5913</span>        <span class="keywordflow">case</span> 0: { <span class="comment">//inspect mill</span></div>
<div class="line"><a id="l05914" name="l05914"></a><span class="lineno"> 5914</span>            std::string pop;</div>
<div class="line"><a id="l05915" name="l05915"></a><span class="lineno"> 5915</span>            <span class="keywordflow">if</span>( active ) {</div>
<div class="line"><a id="l05916" name="l05916"></a><span class="lineno"> 5916</span>                pop = <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There&#39;s a mill here.  It is turning and milling.&quot;</span> ), <a class="code hl_define" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l05917" name="l05917"></a><span class="lineno"> 5917</span>                <span class="keywordflow">if</span>( time_left &gt; 0_turns ) {</div>
<div class="line"><a id="l05918" name="l05918"></a><span class="lineno"> 5918</span>                    pop += <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It should take about %s to finish milling.&quot;</span> ),</div>
<div class="line"><a id="l05919" name="l05919"></a><span class="lineno"> 5919</span>                                          <a class="code hl_function" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( time_left ) ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l05920" name="l05920"></a><span class="lineno"> 5920</span>                }</div>
<div class="line"><a id="l05921" name="l05921"></a><span class="lineno"> 5921</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05922" name="l05922"></a><span class="lineno"> 5922</span>                pop += <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There&#39;s a mill here.&quot;</span> ), <a class="code hl_define" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l05923" name="l05923"></a><span class="lineno"> 5923</span>            }</div>
<div class="line"><a id="l05924" name="l05924"></a><span class="lineno"> 5924</span>            pop += <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You inspect its contents and find: &quot;</span> ), <a class="code hl_define" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a id="l05925" name="l05925"></a><span class="lineno"> 5925</span>            <span class="keywordflow">if</span>( items_here.empty() ) {</div>
<div class="line"><a id="l05926" name="l05926"></a><span class="lineno"> 5926</span>                pop += <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;…that it is empty.&quot;</span> );</div>
<div class="line"><a id="l05927" name="l05927"></a><span class="lineno"> 5927</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05928" name="l05928"></a><span class="lineno"> 5928</span>                std::map&lt;item, int&gt; mill_list;</div>
<div class="line"><a id="l05929" name="l05929"></a><span class="lineno"> 5929</span>                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;it : items_here ) {</div>
<div class="line"><a id="l05930" name="l05930"></a><span class="lineno"> 5930</span>                    <span class="keywordflow">if</span>( it.typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a> ) {</div>
<div class="line"><a id="l05931" name="l05931"></a><span class="lineno"> 5931</span>                        pop += <span class="stringliteral">&quot;\n&quot;</span> + <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You see that the milling process is not yet complete.&quot;</span> ),</div>
<div class="line"><a id="l05932" name="l05932"></a><span class="lineno"> 5932</span>                                                <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l05933" name="l05933"></a><span class="lineno"> 5933</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05934" name="l05934"></a><span class="lineno"> 5934</span>                    }</div>
<div class="line"><a id="l05935" name="l05935"></a><span class="lineno"> 5935</span>                    mill_list[it] += it.count();</div>
<div class="line"><a id="l05936" name="l05936"></a><span class="lineno"> 5936</span>                }</div>
<div class="line"><a id="l05937" name="l05937"></a><span class="lineno"> 5937</span>                <span class="keywordflow">for</span>( <span class="keyword">auto</span> it_mill : mill_list ) {</div>
<div class="line"><a id="l05938" name="l05938"></a><span class="lineno"> 5938</span>                    pop += <span class="stringliteral">&quot;-&gt; &quot;</span> + <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( it_mill.first.typeId(),</div>
<div class="line"><a id="l05939" name="l05939"></a><span class="lineno"> 5939</span>                                                it_mill.first.count() ) + ( ( it_mill.second &gt; 1 ) ? <span class="stringliteral">&quot; (&quot;</span> + <a class="code hl_function" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">std::to_string</a>(</div>
<div class="line"><a id="l05940" name="l05940"></a><span class="lineno"> 5940</span>                                                            it_mill.second ) + <span class="stringliteral">&quot;)\n&quot;</span> : <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a id="l05941" name="l05941"></a><span class="lineno"> 5941</span>                }</div>
<div class="line"><a id="l05942" name="l05942"></a><span class="lineno"> 5942</span>            }</div>
<div class="line"><a id="l05943" name="l05943"></a><span class="lineno"> 5943</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( pop, <a class="code hl_enumvalue" href="output_8h.html#ab214b85345aeab978acdcea0250f27f5aad1f68b93664b1917fafc7cf9b7537d3">PF_NONE</a> );</div>
<div class="line"><a id="l05944" name="l05944"></a><span class="lineno"> 5944</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05945" name="l05945"></a><span class="lineno"> 5945</span>        }</div>
<div class="line"><a id="l05946" name="l05946"></a><span class="lineno"> 5946</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l05947" name="l05947"></a><span class="lineno"> 5947</span>            <span class="comment">//activate</span></div>
<div class="line"><a id="l05948" name="l05948"></a><span class="lineno"> 5948</span>            <span class="keywordflow">if</span>( active ) {</div>
<div class="line"><a id="l05949" name="l05949"></a><span class="lineno"> 5949</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It is already milling.&quot;</span> ) );</div>
<div class="line"><a id="l05950" name="l05950"></a><span class="lineno"> 5950</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05951" name="l05951"></a><span class="lineno"> 5951</span>                <a class="code hl_function" href="iexamine_8cpp.html#a4e11c9f4ca8658b8b4542c22960dadff">mill_activate</a>( p, examp );</div>
<div class="line"><a id="l05952" name="l05952"></a><span class="lineno"> 5952</span>            }</div>
<div class="line"><a id="l05953" name="l05953"></a><span class="lineno"> 5953</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05954" name="l05954"></a><span class="lineno"> 5954</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l05955" name="l05955"></a><span class="lineno"> 5955</span>            <span class="comment">// load food</span></div>
<div class="line"><a id="l05956" name="l05956"></a><span class="lineno"> 5956</span>            <a class="code hl_function" href="iexamine_8cpp.html#a72cc6e901560522812688637c2bce0d1">mill_load_food</a>( p, examp, remaining_capacity );</div>
<div class="line"><a id="l05957" name="l05957"></a><span class="lineno"> 5957</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05958" name="l05958"></a><span class="lineno"> 5958</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l05959" name="l05959"></a><span class="lineno"> 5959</span>            <span class="comment">// remove food</span></div>
<div class="line"><a id="l05960" name="l05960"></a><span class="lineno"> 5960</span>            <span class="keywordflow">for</span>( <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> it = items_here.begin(); it != items_here.end(); ) {</div>
<div class="line"><a id="l05961" name="l05961"></a><span class="lineno"> 5961</span>                <span class="keywordflow">if</span>( it-&gt;typeId() != <a class="code hl_variable" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a> ) {</div>
<div class="line"><a id="l05962" name="l05962"></a><span class="lineno"> 5962</span>                    <span class="comment">// get handling cost before the item reference is invalidated</span></div>
<div class="line"><a id="l05963" name="l05963"></a><span class="lineno"> 5963</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> handling_cost = -p.<a class="code hl_function" href="classCharacter.html#a33b54fd8799f4b1c9f6b0af42dbf33f8">item_handling_cost</a>( *it );</div>
<div class="line"><a id="l05964" name="l05964"></a><span class="lineno"> 5964</span> </div>
<div class="line"><a id="l05965" name="l05965"></a><span class="lineno"> 5965</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You remove %s from the mill.&quot;</span> ), it-&gt;tname() );</div>
<div class="line"><a id="l05966" name="l05966"></a><span class="lineno"> 5966</span>                    here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), *it );</div>
<div class="line"><a id="l05967" name="l05967"></a><span class="lineno"> 5967</span>                    it = items_here.erase( it );</div>
<div class="line"><a id="l05968" name="l05968"></a><span class="lineno"> 5968</span>                    p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( handling_cost );</div>
<div class="line"><a id="l05969" name="l05969"></a><span class="lineno"> 5969</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05970" name="l05970"></a><span class="lineno"> 5970</span>                    ++it;</div>
<div class="line"><a id="l05971" name="l05971"></a><span class="lineno"> 5971</span>                }</div>
<div class="line"><a id="l05972" name="l05972"></a><span class="lineno"> 5972</span>            }</div>
<div class="line"><a id="l05973" name="l05973"></a><span class="lineno"> 5973</span>            <span class="keywordflow">if</span>( active ) {</div>
<div class="line"><a id="l05974" name="l05974"></a><span class="lineno"> 5974</span>                <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_class" href="classstring__id.html">furn_str_id</a>( <span class="stringliteral">&quot;f_water_mill_active&quot;</span> ) ) {</div>
<div class="line"><a id="l05975" name="l05975"></a><span class="lineno"> 5975</span>                    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#aa8ee599d085db956194bf87c5db9da99">f_water_mill</a> );</div>
<div class="line"><a id="l05976" name="l05976"></a><span class="lineno"> 5976</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_class" href="classstring__id.html">furn_str_id</a>( <span class="stringliteral">&quot;f_wind_mill_active&quot;</span> ) ) {</div>
<div class="line"><a id="l05977" name="l05977"></a><span class="lineno"> 5977</span>                    here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#ad8f895d0bf37d7e8a4a17a77f0d6d009">f_wind_mill</a> );</div>
<div class="line"><a id="l05978" name="l05978"></a><span class="lineno"> 5978</span>                }</div>
<div class="line"><a id="l05979" name="l05979"></a><span class="lineno"> 5979</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You stop the milling process.&quot;</span> ) );</div>
<div class="line"><a id="l05980" name="l05980"></a><span class="lineno"> 5980</span>            }</div>
<div class="line"><a id="l05981" name="l05981"></a><span class="lineno"> 5981</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05982" name="l05982"></a><span class="lineno"> 5982</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l05983" name="l05983"></a><span class="lineno"> 5983</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a id="l05984" name="l05984"></a><span class="lineno"> 5984</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05985" name="l05985"></a><span class="lineno"> 5985</span>        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l05986" name="l05986"></a><span class="lineno"> 5986</span>            <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_class" href="classstring__id.html">furn_str_id</a>( <span class="stringliteral">&quot;f_water_mill_active&quot;</span> ) ) {</div>
<div class="line"><a id="l05987" name="l05987"></a><span class="lineno"> 5987</span>                here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#aa8ee599d085db956194bf87c5db9da99">f_water_mill</a> );</div>
<div class="line"><a id="l05988" name="l05988"></a><span class="lineno"> 5988</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_class" href="classstring__id.html">furn_str_id</a>( <span class="stringliteral">&quot;f_wind_mill_active&quot;</span> ) ) {</div>
<div class="line"><a id="l05989" name="l05989"></a><span class="lineno"> 5989</span>                here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#ad8f895d0bf37d7e8a4a17a77f0d6d009">f_wind_mill</a> );</div>
<div class="line"><a id="l05990" name="l05990"></a><span class="lineno"> 5990</span>            }</div>
<div class="line"><a id="l05991" name="l05991"></a><span class="lineno"> 5991</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You stop the milling process.&quot;</span> ) );</div>
<div class="line"><a id="l05992" name="l05992"></a><span class="lineno"> 5992</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05993" name="l05993"></a><span class="lineno"> 5993</span>    }</div>
<div class="line"><a id="l05994" name="l05994"></a><span class="lineno"> 5994</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a595c4d560d7152dceb681820e7e00882"><div class="ttname"><a href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a></div><div class="ttdeci">static std::string to_string_clipped(const int num, const clipped_unit type, const clipped_align align)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00228">calendar.cpp:228</a></div></div>
<div class="ttc" id="aclassCharacter_html_a33b54fd8799f4b1c9f6b0af42dbf33f8"><div class="ttname"><a href="classCharacter.html#a33b54fd8799f4b1c9f6b0af42dbf33f8">Character::item_handling_cost</a></div><div class="ttdeci">int item_handling_cost(const item &amp;it, bool penalties=true, int base_cost=INVENTORY_HANDLING_PENALTY) const</div><div class="ttdoc">Calculate (but do not deduct) the number of moves required when handling (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07472">character.cpp:7472</a></div></div>
<div class="ttc" id="aclassmap_html_af9b776627d41969fbca5089c3d22162c"><div class="ttname"><a href="classmap.html#af9b776627d41969fbca5089c3d22162c">map::is_water_shallow_current</a></div><div class="ttdeci">bool is_water_shallow_current(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02615">map.cpp:2615</a></div></div>
<div class="ttc" id="acolor_8h_html_a1cb87e74156596960610fd0a9ace766d"><div class="ttname"><a href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a></div><div class="ttdeci">#define c_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00022">color.h:22</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a04c54905099b56bd8994d8fabb786ce2"><div class="ttname"><a href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a></div><div class="ttdeci">static const itype_id itype_fake_milling_item(&quot;fake_milling_item&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a4e11c9f4ca8658b8b4542c22960dadff"><div class="ttname"><a href="iexamine_8cpp.html#a4e11c9f4ca8658b8b4542c22960dadff">mill_activate</a></div><div class="ttdeci">static void mill_activate(player &amp;p, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05332">iexamine.cpp:5332</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a72cc6e901560522812688637c2bce0d1"><div class="ttname"><a href="iexamine_8cpp.html#a72cc6e901560522812688637c2bce0d1">mill_load_food</a></div><div class="ttdeci">static void mill_load_food(player &amp;p, const tripoint &amp;examp, const units::volume &amp;remaining_capacity)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05706">iexamine.cpp:5706</a></div></div>
<div class="ttc" id="amutation__ui_8cpp_html_a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79"><div class="ttname"><a href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">mutation_tab_mode::active</a></div><div class="ttdeci">@ active</div></div>
<div class="ttc" id="anamespacesm__rack_html_a4c0565d55310ec1ac37c77821801a1fe"><div class="ttname"><a href="namespacesm__rack.html#a4c0565d55310ec1ac37c77821801a1fe">sm_rack::MAX_FOOD_VOLUME</a></div><div class="ttdeci">const units::volume MAX_FOOD_VOLUME</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05316">iexamine.cpp:5316</a></div></div>
<div class="ttc" id="aoutput_8h_html_ab214b85345aeab978acdcea0250f27f5aad1f68b93664b1917fafc7cf9b7537d3"><div class="ttname"><a href="output_8h.html#ab214b85345aeab978acdcea0250f27f5aad1f68b93664b1917fafc7cf9b7537d3">PF_NONE</a></div><div class="ttdeci">@ PF_NONE</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00450">output.h:450</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="ui_8cpp_source.html#l00952">uilist::addentry_desc()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="color_8h_source.html#l00022">c_green</a>, <a class="el" href="color_8h_source.html#l00021">c_red</a>, <a class="el" href="color_8cpp_source.html#l00669">colorize()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="ui_8h_source.html#l00352">uilist::desc_enabled</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00153">map_stack::erase()</a>, <a class="el" href="mapdata_8cpp_source.html#l01132">f_water_mill</a>, <a class="el" href="mapdata_8cpp_source.html#l01133">f_wind_mill</a>, <a class="el" href="output_8cpp_source.html#l02020">format_volume()</a>, <a class="el" href="calendar_8h_source.html#l00204">time_duration::from_turns()</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l02615">map::is_water_shallow_current()</a>, <a class="el" href="character_8cpp_source.html#l07472">Character::item_handling_cost()</a>, <a class="el" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="iexamine_8cpp_source.html#l05316">sm_rack::MAX_FOOD_VOLUME</a>, <a class="el" href="iexamine_8cpp_source.html#l05332">mill_activate()</a>, <a class="el" href="iexamine_8cpp_source.html#l05706">mill_load_food()</a>, <a class="el" href="iexamine_8cpp_source.html#l00248">milling_time</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="item_8cpp_source.html#l09951">item::nname()</a>, <a class="el" href="output_8h_source.html#l00450">PF_NONE</a>, <a class="el" href="output_8cpp_source.html#l00764">popup()</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="item__stack_8cpp_source.html#l00010">item_stack::size()</a>, <a class="el" href="string__formatter_8h_source.html#l00430">string_format()</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="calendar_8cpp_source.html#l00327">to_string()</a>, <a class="el" href="calendar_8cpp_source.html#l00228">to_string_clipped()</a>, and <a class="el" href="units__utility_8cpp_source.html#l00037">volume_units_abbr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a8076e42db14f124567108b5754caa31a" name="a8076e42db14f124567108b5754caa31a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8076e42db14f124567108b5754caa31a">&#9670;&nbsp;</a></span>query_seed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iexamine::query_seed </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>seed_entries</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Choose seed for planting. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02263">2263</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>{</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>    <a class="code hl_class" href="classuilist.html">uilist</a> smenu;</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span> </div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>    smenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use which seed?&quot;</span> );</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = 0;</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry : seed_entries ) {</div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>        <span class="keyword">const</span> std::string &amp;seed_name = std::get&lt;1&gt;( entry );</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>        <span class="keywordtype">int</span> seed_count = std::get&lt;2&gt;( entry );</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span> </div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>        std::string <a class="code hl_function" href="fmtlib__core_8h.html#a80bdffd1698c1834f081bcf015be1cff">format</a> = seed_count &gt; 0 ? <span class="stringliteral">&quot;%s (%d)&quot;</span> : <span class="stringliteral">&quot;%s&quot;</span>;</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span> </div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>        smenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>++, <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code hl_function" href="fmtlib__core_8h.html#a80bdffd1698c1834f081bcf015be1cff">format</a>.c_str(),</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>                        seed_name, seed_count );</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>    }</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span> </div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>    smenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span> </div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>    <span class="keywordflow">if</span>( smenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt;= 0 ) {</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>        <span class="keywordflow">return</span> smenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>        <span class="keywordflow">return</span> seed_entries.size();</div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>    }</div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>}</div>
<div class="ttc" id="afmtlib__core_8h_html_a80bdffd1698c1834f081bcf015be1cff"><div class="ttname"><a href="fmtlib__core_8h.html#a80bdffd1698c1834f081bcf015be1cff">format</a></div><div class="ttdeci">FMT_INLINE std::basic_string&lt; Char &gt; format(const S &amp;format_str, Args &amp;&amp;... args)</div><div class="ttdoc">\rst Formats arguments and returns the result as a string.</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__core_8h_source.html#l02316">fmtlib_core.h:2316</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="fmtlib__core_8h_source.html#l01073">detail::count()</a>, <a class="el" href="fmtlib__core_8h_source.html#l02316">format()</a>, <a class="el" href="ui_8h_source.html#l00031">MENU_AUTOASSIGN</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, and <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02302">dirtmound()</a>, <a class="el" href="clzones_8cpp_source.html#l00283">plot_options::query_seed()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01222">vehicle::reload_seeds()</a>.</p>

</div>
</div>
<a id="a0848d08fb97a7b960cac7e8235cfe349" name="a0848d08fb97a7b960cac7e8235cfe349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0848d08fb97a7b960cac7e8235cfe349">&#9670;&nbsp;</a></span>recycle_compactor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::recycle_compactor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03708">3708</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03709" name="l03709"></a><span class="lineno"> 3709</span>{</div>
<div class="line"><a id="l03710" name="l03710"></a><span class="lineno"> 3710</span>    <span class="comment">// choose what metal to recycle</span></div>
<div class="line"><a id="l03711" name="l03711"></a><span class="lineno"> 3711</span>    <span class="keyword">auto</span> metals = <a class="code hl_function" href="namespacematerials.html#ad0c19fd0b696e324e421cd59f0780c81">materials::get_compactable</a>();</div>
<div class="line"><a id="l03712" name="l03712"></a><span class="lineno"> 3712</span>    <a class="code hl_class" href="classuilist.html">uilist</a> choose_metal;</div>
<div class="line"><a id="l03713" name="l03713"></a><span class="lineno"> 3713</span>    choose_metal.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Recycle what metal?&quot;</span> );</div>
<div class="line"><a id="l03714" name="l03714"></a><span class="lineno"> 3714</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;m : metals ) {</div>
<div class="line"><a id="l03715" name="l03715"></a><span class="lineno"> 3715</span>        choose_metal.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( m.name() );</div>
<div class="line"><a id="l03716" name="l03716"></a><span class="lineno"> 3716</span>    }</div>
<div class="line"><a id="l03717" name="l03717"></a><span class="lineno"> 3717</span>    choose_metal.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l03718" name="l03718"></a><span class="lineno"> 3718</span>    <span class="keywordtype">int</span> m_idx = choose_metal.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l03719" name="l03719"></a><span class="lineno"> 3719</span>    <span class="keywordflow">if</span>( m_idx &lt; 0 || m_idx &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( metals.size() ) ) {</div>
<div class="line"><a id="l03720" name="l03720"></a><span class="lineno"> 3720</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a id="l03721" name="l03721"></a><span class="lineno"> 3721</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03722" name="l03722"></a><span class="lineno"> 3722</span>    }</div>
<div class="line"><a id="l03723" name="l03723"></a><span class="lineno"> 3723</span>    <a class="code hl_class" href="classmaterial__type.html">material_type</a> m = metals.at( m_idx );</div>
<div class="line"><a id="l03724" name="l03724"></a><span class="lineno"> 3724</span> </div>
<div class="line"><a id="l03725" name="l03725"></a><span class="lineno"> 3725</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03726" name="l03726"></a><span class="lineno"> 3726</span>    <span class="comment">// check inputs and tally total mass</span></div>
<div class="line"><a id="l03727" name="l03727"></a><span class="lineno"> 3727</span>    <span class="keyword">auto</span> inputs = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l03728" name="l03728"></a><span class="lineno"> 3728</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> sum_weight = 0_gram;</div>
<div class="line"><a id="l03729" name="l03729"></a><span class="lineno"> 3729</span>    <span class="keyword">auto</span> ca = m.<a class="code hl_function" href="classmaterial__type.html#a277528ab14622f384a43df1e91d471a6">compact_accepts</a>();</div>
<div class="line"><a id="l03730" name="l03730"></a><span class="lineno"> 3730</span>    std::set&lt;material_id&gt; accepts( ca.begin(), ca.end() );</div>
<div class="line"><a id="l03731" name="l03731"></a><span class="lineno"> 3731</span>    accepts.insert( m.<a class="code hl_variable" href="classmaterial__type.html#a69f574d3ac448a9e8ef7df2f5409b867">id</a> );</div>
<div class="line"><a id="l03732" name="l03732"></a><span class="lineno"> 3732</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;input : inputs ) {</div>
<div class="line"><a id="l03733" name="l03733"></a><span class="lineno"> 3733</span>        <span class="keywordflow">if</span>( !input.only_made_of( accepts ) ) {</div>
<div class="line"><a id="l03734" name="l03734"></a><span class="lineno"> 3734</span>            <span class="comment">//~ %1$s: an item in the compactor , %2$s: desired compactor output material</span></div>
<div class="line"><a id="l03735" name="l03735"></a><span class="lineno"> 3735</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You realize this isn&#39;t going to work because %1$s is not made purely of %2$s.&quot;</span> ),</div>
<div class="line"><a id="l03736" name="l03736"></a><span class="lineno"> 3736</span>                     input.tname(), m.<a class="code hl_function" href="classmaterial__type.html#a7583dadd47fed32747f6e9611fcbf267">name</a>() );</div>
<div class="line"><a id="l03737" name="l03737"></a><span class="lineno"> 3737</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03738" name="l03738"></a><span class="lineno"> 3738</span>        }</div>
<div class="line"><a id="l03739" name="l03739"></a><span class="lineno"> 3739</span>        <span class="keywordflow">if</span>( input.is_container() &amp;&amp; !input.is_container_empty() ) {</div>
<div class="line"><a id="l03740" name="l03740"></a><span class="lineno"> 3740</span>            <span class="comment">//~ %1$s: an item in the compactor</span></div>
<div class="line"><a id="l03741" name="l03741"></a><span class="lineno"> 3741</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You realize this isn&#39;t going to work because %1$s has not been emptied of its contents.&quot;</span> ),</div>
<div class="line"><a id="l03742" name="l03742"></a><span class="lineno"> 3742</span>                     input.tname() );</div>
<div class="line"><a id="l03743" name="l03743"></a><span class="lineno"> 3743</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03744" name="l03744"></a><span class="lineno"> 3744</span>        }</div>
<div class="line"><a id="l03745" name="l03745"></a><span class="lineno"> 3745</span>        sum_weight += input.weight();</div>
<div class="line"><a id="l03746" name="l03746"></a><span class="lineno"> 3746</span>    }</div>
<div class="line"><a id="l03747" name="l03747"></a><span class="lineno"> 3747</span>    <span class="keywordflow">if</span>( sum_weight &lt;= 0_gram ) {</div>
<div class="line"><a id="l03748" name="l03748"></a><span class="lineno"> 3748</span>        <span class="comment">//~ %1$s: desired compactor output material</span></div>
<div class="line"><a id="l03749" name="l03749"></a><span class="lineno"> 3749</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There is no %1$s in the compactor.  Drop some metal items onto it and try again.&quot;</span> ),</div>
<div class="line"><a id="l03750" name="l03750"></a><span class="lineno"> 3750</span>                 m.<a class="code hl_function" href="classmaterial__type.html#a7583dadd47fed32747f6e9611fcbf267">name</a>() );</div>
<div class="line"><a id="l03751" name="l03751"></a><span class="lineno"> 3751</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03752" name="l03752"></a><span class="lineno"> 3752</span>    }</div>
<div class="line"><a id="l03753" name="l03753"></a><span class="lineno"> 3753</span> </div>
<div class="line"><a id="l03754" name="l03754"></a><span class="lineno"> 3754</span>    <span class="comment">// See below for recover_factor (rng(6,9)/10), this</span></div>
<div class="line"><a id="l03755" name="l03755"></a><span class="lineno"> 3755</span>    <span class="comment">// is the normal value of that recover factor.</span></div>
<div class="line"><a id="l03756" name="l03756"></a><span class="lineno"> 3756</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> norm_recover_factor = 8.0 / 10.0;</div>
<div class="line"><a id="l03757" name="l03757"></a><span class="lineno"> 3757</span>    <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> norm_recover_weight = sum_weight * norm_recover_factor;</div>
<div class="line"><a id="l03758" name="l03758"></a><span class="lineno"> 3758</span> </div>
<div class="line"><a id="l03759" name="l03759"></a><span class="lineno"> 3759</span>    <span class="comment">// choose output</span></div>
<div class="line"><a id="l03760" name="l03760"></a><span class="lineno"> 3760</span>    <a class="code hl_class" href="classuilist.html">uilist</a> choose_output;</div>
<div class="line"><a id="l03761" name="l03761"></a><span class="lineno"> 3761</span>    <span class="comment">//~ %1$.3f: total mass of material in compactor, %2$s: weight units , %3$s: compactor output material</span></div>
<div class="line"><a id="l03762" name="l03762"></a><span class="lineno"> 3762</span>    choose_output.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Compact %1$.3f %2$s of %3$s into:&quot;</span> ),</div>
<div class="line"><a id="l03763" name="l03763"></a><span class="lineno"> 3763</span>                                        <a class="code hl_function" href="units__utility_8cpp.html#a6701113802c6412b3c5d3fa59149ca6c">convert_weight</a>( sum_weight ), <a class="code hl_function" href="units__utility_8cpp.html#a3556beacf095f6eb2944d7c9dbf235d3">weight_units</a>(), m.<a class="code hl_function" href="classmaterial__type.html#a7583dadd47fed32747f6e9611fcbf267">name</a>() );</div>
<div class="line"><a id="l03764" name="l03764"></a><span class="lineno"> 3764</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;ci : m.<a class="code hl_function" href="classmaterial__type.html#a10e7dccc82f95ade2f190e1539f4cfe3">compacts_into</a>() ) {</div>
<div class="line"><a id="l03765" name="l03765"></a><span class="lineno"> 3765</span>        <span class="keyword">auto</span> it = <a class="code hl_class" href="classitem.html">item</a>( ci, <a class="code hl_variable" href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a>, <a class="code hl_struct" href="structitem_1_1solitary__tag.html">item::solitary_tag</a>{} );</div>
<div class="line"><a id="l03766" name="l03766"></a><span class="lineno"> 3766</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> amount = norm_recover_weight / it.weight();</div>
<div class="line"><a id="l03767" name="l03767"></a><span class="lineno"> 3767</span>        <span class="comment">//~ %1$d: number of, %2$s: output item</span></div>
<div class="line"><a id="l03768" name="l03768"></a><span class="lineno"> 3768</span>        choose_output.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;about %1$d %2$s&quot;</span> ), amount,</div>
<div class="line"><a id="l03769" name="l03769"></a><span class="lineno"> 3769</span>                                               it.tname( amount ) ) );</div>
<div class="line"><a id="l03770" name="l03770"></a><span class="lineno"> 3770</span>    }</div>
<div class="line"><a id="l03771" name="l03771"></a><span class="lineno"> 3771</span>    choose_output.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l03772" name="l03772"></a><span class="lineno"> 3772</span>    <span class="keywordtype">int</span> o_idx = choose_output.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l03773" name="l03773"></a><span class="lineno"> 3773</span>    <span class="keywordflow">if</span>( o_idx &lt; 0 || o_idx &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( m.<a class="code hl_function" href="classmaterial__type.html#a10e7dccc82f95ade2f190e1539f4cfe3">compacts_into</a>().size() ) ) {</div>
<div class="line"><a id="l03774" name="l03774"></a><span class="lineno"> 3774</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a id="l03775" name="l03775"></a><span class="lineno"> 3775</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03776" name="l03776"></a><span class="lineno"> 3776</span>    }</div>
<div class="line"><a id="l03777" name="l03777"></a><span class="lineno"> 3777</span> </div>
<div class="line"><a id="l03778" name="l03778"></a><span class="lineno"> 3778</span>    <span class="comment">// remove items</span></div>
<div class="line"><a id="l03779" name="l03779"></a><span class="lineno"> 3779</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = inputs.begin(); it != inputs.end(); ) {</div>
<div class="line"><a id="l03780" name="l03780"></a><span class="lineno"> 3780</span>        it = inputs.erase( it );</div>
<div class="line"><a id="l03781" name="l03781"></a><span class="lineno"> 3781</span>    }</div>
<div class="line"><a id="l03782" name="l03782"></a><span class="lineno"> 3782</span> </div>
<div class="line"><a id="l03783" name="l03783"></a><span class="lineno"> 3783</span>    <span class="comment">// produce outputs</span></div>
<div class="line"><a id="l03784" name="l03784"></a><span class="lineno"> 3784</span>    <span class="keywordtype">double</span> recover_factor = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 6, 9 ) / 10.0;</div>
<div class="line"><a id="l03785" name="l03785"></a><span class="lineno"> 3785</span>    sum_weight = sum_weight * recover_factor;</div>
<div class="line"><a id="l03786" name="l03786"></a><span class="lineno"> 3786</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( examp, 80, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Ka-klunk!&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;tool&quot;</span>, <span class="stringliteral">&quot;compactor&quot;</span> );</div>
<div class="line"><a id="l03787" name="l03787"></a><span class="lineno"> 3787</span>    <span class="keywordtype">bool</span> out_desired = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03788" name="l03788"></a><span class="lineno"> 3788</span>    <span class="keywordtype">bool</span> out_any = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03789" name="l03789"></a><span class="lineno"> 3789</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = m.<a class="code hl_function" href="classmaterial__type.html#a10e7dccc82f95ade2f190e1539f4cfe3">compacts_into</a>().begin() + o_idx; it != m.<a class="code hl_function" href="classmaterial__type.html#a10e7dccc82f95ade2f190e1539f4cfe3">compacts_into</a>().end(); ++it ) {</div>
<div class="line"><a id="l03790" name="l03790"></a><span class="lineno"> 3790</span>        <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> ow = <a class="code hl_class" href="classitem.html">item</a>( *it, <a class="code hl_variable" href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a>, <a class="code hl_struct" href="structitem_1_1solitary__tag.html">item::solitary_tag</a>{} ).weight();</div>
<div class="line"><a id="l03791" name="l03791"></a><span class="lineno"> 3791</span>        <span class="keywordtype">int</span> <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = sum_weight / ow;</div>
<div class="line"><a id="l03792" name="l03792"></a><span class="lineno"> 3792</span>        sum_weight -= <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> * ow;</div>
<div class="line"><a id="l03793" name="l03793"></a><span class="lineno"> 3793</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> &gt; 0 ) {</div>
<div class="line"><a id="l03794" name="l03794"></a><span class="lineno"> 3794</span>            here.<a class="code hl_function" href="classmap.html#acfe43259087397daac52876165a3120c">spawn_item</a>( examp, *it, <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>, 1, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l03795" name="l03795"></a><span class="lineno"> 3795</span>            <span class="keywordflow">if</span>( !out_any ) {</div>
<div class="line"><a id="l03796" name="l03796"></a><span class="lineno"> 3796</span>                out_any = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03797" name="l03797"></a><span class="lineno"> 3797</span>                <span class="keywordflow">if</span>( it == m.<a class="code hl_function" href="classmaterial__type.html#a10e7dccc82f95ade2f190e1539f4cfe3">compacts_into</a>().begin() + o_idx ) {</div>
<div class="line"><a id="l03798" name="l03798"></a><span class="lineno"> 3798</span>                    out_desired = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03799" name="l03799"></a><span class="lineno"> 3799</span>                }</div>
<div class="line"><a id="l03800" name="l03800"></a><span class="lineno"> 3800</span>            }</div>
<div class="line"><a id="l03801" name="l03801"></a><span class="lineno"> 3801</span>        }</div>
<div class="line"><a id="l03802" name="l03802"></a><span class="lineno"> 3802</span>    }</div>
<div class="line"><a id="l03803" name="l03803"></a><span class="lineno"> 3803</span> </div>
<div class="line"><a id="l03804" name="l03804"></a><span class="lineno"> 3804</span>    <span class="comment">// feedback to user</span></div>
<div class="line"><a id="l03805" name="l03805"></a><span class="lineno"> 3805</span>    <span class="keywordflow">if</span>( !out_any ) {</div>
<div class="line"><a id="l03806" name="l03806"></a><span class="lineno"> 3806</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The compactor chews up all the items in its hopper.&quot;</span> ) );</div>
<div class="line"><a id="l03807" name="l03807"></a><span class="lineno"> 3807</span>        <span class="comment">//~ %1$s: compactor output material</span></div>
<div class="line"><a id="l03808" name="l03808"></a><span class="lineno"> 3808</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The compactor beeps: \&quot;No %1$s to process!\&quot;&quot;</span> ), m.<a class="code hl_function" href="classmaterial__type.html#a7583dadd47fed32747f6e9611fcbf267">name</a>() );</div>
<div class="line"><a id="l03809" name="l03809"></a><span class="lineno"> 3809</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03810" name="l03810"></a><span class="lineno"> 3810</span>    }</div>
<div class="line"><a id="l03811" name="l03811"></a><span class="lineno"> 3811</span>    <span class="keywordflow">if</span>( !out_desired ) {</div>
<div class="line"><a id="l03812" name="l03812"></a><span class="lineno"> 3812</span>        <span class="comment">//~ %1$s: compactor output material</span></div>
<div class="line"><a id="l03813" name="l03813"></a><span class="lineno"> 3813</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The compactor beeps: \&quot;Insufficient %1$s!\&quot;&quot;</span> ), m.<a class="code hl_function" href="classmaterial__type.html#a7583dadd47fed32747f6e9611fcbf267">name</a>() );</div>
<div class="line"><a id="l03814" name="l03814"></a><span class="lineno"> 3814</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It spits out an assortment of smaller pieces instead.&quot;</span> ) );</div>
<div class="line"><a id="l03815" name="l03815"></a><span class="lineno"> 3815</span>    }</div>
<div class="line"><a id="l03816" name="l03816"></a><span class="lineno"> 3816</span>}</div>
<div class="ttc" id="aclassmaterial__type_html"><div class="ttname"><a href="classmaterial__type.html">material_type</a></div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00026">material.h:27</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_a10e7dccc82f95ade2f190e1539f4cfe3"><div class="ttname"><a href="classmaterial__type.html#a10e7dccc82f95ade2f190e1539f4cfe3">material_type::compacts_into</a></div><div class="ttdeci">const mat_compacts_into &amp; compacts_into() const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00291">material.cpp:291</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_a277528ab14622f384a43df1e91d471a6"><div class="ttname"><a href="classmaterial__type.html#a277528ab14622f384a43df1e91d471a6">material_type::compact_accepts</a></div><div class="ttdeci">const material_id_list &amp; compact_accepts() const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00286">material.cpp:286</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_a69f574d3ac448a9e8ef7df2f5409b867"><div class="ttname"><a href="classmaterial__type.html#a69f574d3ac448a9e8ef7df2f5409b867">material_type::id</a></div><div class="ttdeci">material_id id</div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00029">material.h:29</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_a7583dadd47fed32747f6e9611fcbf267"><div class="ttname"><a href="classmaterial__type.html#a7583dadd47fed32747f6e9611fcbf267">material_type::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00155">material.cpp:155</a></div></div>
<div class="ttc" id="anamespacematerials_html_ad0c19fd0b696e324e421cd59f0780c81"><div class="ttname"><a href="namespacematerials.html#ad0c19fd0b696e324e421cd59f0780c81">materials::get_compactable</a></div><div class="ttdeci">material_list get_compactable()</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00316">material.cpp:316</a></div></div>
<div class="ttc" id="astructitem_1_1solitary__tag_html"><div class="ttname"><a href="structitem_1_1solitary__tag.html">item::solitary_tag</a></div><div class="ttdoc">Default (or randomized) charges except if counted by charges then only one charge.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00230">item.h:230</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a3556beacf095f6eb2944d7c9dbf235d3"><div class="ttname"><a href="units__utility_8cpp.html#a3556beacf095f6eb2944d7c9dbf235d3">weight_units</a></div><div class="ttdeci">const char * weight_units()</div><div class="ttdoc">Create a units label for a weight value.</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00032">units_utility.cpp:32</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a6701113802c6412b3c5d3fa59149ca6c"><div class="ttname"><a href="units__utility_8cpp.html#a6701113802c6412b3c5d3fa59149ca6c">convert_weight</a></div><div class="ttdeci">double convert_weight(const units::mass &amp;weight)</div><div class="ttdoc">Convert weight in grams to units defined by user (kg or lbs)</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00085">units_utility.cpp:85</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="material_8cpp_source.html#l00286">material_type::compact_accepts()</a>, <a class="el" href="material_8cpp_source.html#l00291">material_type::compacts_into()</a>, <a class="el" href="units__utility_8cpp_source.html#l00085">convert_weight()</a>, <a class="el" href="fmtlib__core_8h_source.html#l01073">detail::count()</a>, <a class="el" href="material_8cpp_source.html#l00316">materials::get_compactable()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="material_8h_source.html#l00029">material_type::id</a>, <a class="el" href="material_8cpp_source.html#l00155">material_type::name()</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="map_8cpp_source.html#l04313">map::spawn_item()</a>, <a class="el" href="calendar_8cpp_source.html#l00033">calendar::start_of_cataclysm</a>, <a class="el" href="string__formatter_8h_source.html#l00430">string_format()</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, and <a class="el" href="units__utility_8cpp_source.html#l00032">weight_units()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="aa030e7db01d6a9dd3c6e2cb7e42b7d47" name="aa030e7db01d6a9dd3c6e2cb7e42b7d47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa030e7db01d6a9dd3c6e2cb7e42b7d47">&#9670;&nbsp;</a></span>reload_furniture()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::reload_furniture </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03922">3922</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03923" name="l03923"></a><span class="lineno"> 3923</span>{</div>
<div class="line"><a id="l03924" name="l03924"></a><span class="lineno"> 3924</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03925" name="l03925"></a><span class="lineno"> 3925</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structfurn__t.html">furn_t</a> &amp;f = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a id="l03926" name="l03926"></a><span class="lineno"> 3926</span>    <span class="keyword">const</span> std::vector&lt;itype&gt; ammo_types = f.<a class="code hl_function" href="structfurn__t.html#a72fb416c3c7dba15192fe0064bdf6da6">crafting_ammo_item_types</a>();</div>
<div class="line"><a id="l03927" name="l03927"></a><span class="lineno"> 3927</span> </div>
<div class="line"><a id="l03928" name="l03928"></a><span class="lineno"> 3928</span>    <span class="comment">// No fake item, no ammo, something is wrong here.</span></div>
<div class="line"><a id="l03929" name="l03929"></a><span class="lineno"> 3929</span>    <span class="keywordflow">if</span>( ammo_types.empty() ) {</div>
<div class="line"><a id="l03930" name="l03930"></a><span class="lineno"> 3930</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( ( <span class="stringliteral">&quot;The %s has no crafting_pseudo_items or no defined ammo!&quot;</span> ), f.<a class="code hl_function" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() );</div>
<div class="line"><a id="l03931" name="l03931"></a><span class="lineno"> 3931</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03932" name="l03932"></a><span class="lineno"> 3932</span>    }</div>
<div class="line"><a id="l03933" name="l03933"></a><span class="lineno"> 3933</span> </div>
<div class="line"><a id="l03934" name="l03934"></a><span class="lineno"> 3934</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items_here = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l03935" name="l03935"></a><span class="lineno"> 3935</span>    std::vector&lt;std::string&gt; ammo_names;</div>
<div class="line"><a id="l03936" name="l03936"></a><span class="lineno"> 3936</span>    std::vector&lt;itype&gt; ammo_filtered;</div>
<div class="line"><a id="l03937" name="l03937"></a><span class="lineno"> 3937</span>    <span class="keywordtype">int</span> ammo_index = 0;</div>
<div class="line"><a id="l03938" name="l03938"></a><span class="lineno"> 3938</span> </div>
<div class="line"><a id="l03939" name="l03939"></a><span class="lineno"> 3939</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structitype.html">itype</a> &amp;at : ammo_types ) {</div>
<div class="line"><a id="l03940" name="l03940"></a><span class="lineno"> 3940</span>        <span class="keywordflow">if</span>( at.get_id() != <a class="code hl_variable" href="iexamine_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a> ) {</div>
<div class="line"><a id="l03941" name="l03941"></a><span class="lineno"> 3941</span>            ammo_names.emplace_back( at.nname( 1 ) );</div>
<div class="line"><a id="l03942" name="l03942"></a><span class="lineno"> 3942</span>            ammo_filtered.emplace_back( at );</div>
<div class="line"><a id="l03943" name="l03943"></a><span class="lineno"> 3943</span>        }</div>
<div class="line"><a id="l03944" name="l03944"></a><span class="lineno"> 3944</span>    }</div>
<div class="line"><a id="l03945" name="l03945"></a><span class="lineno"> 3945</span> </div>
<div class="line"><a id="l03946" name="l03946"></a><span class="lineno"> 3946</span>    <span class="keywordflow">if</span>( ammo_filtered.empty() ) {</div>
<div class="line"><a id="l03947" name="l03947"></a><span class="lineno"> 3947</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Furniture %s has no valid ammo to reload!&quot;</span>, f.<a class="code hl_function" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() );</div>
<div class="line"><a id="l03948" name="l03948"></a><span class="lineno"> 3948</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03949" name="l03949"></a><span class="lineno"> 3949</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ammo_names.size() &gt; 1 ) {</div>
<div class="line"><a id="l03950" name="l03950"></a><span class="lineno"> 3950</span>        ammo_index = <a class="code hl_class" href="classuilist.html">uilist</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;What would you like to change?&quot;</span> ), ammo_names );</div>
<div class="line"><a id="l03951" name="l03951"></a><span class="lineno"> 3951</span>        <span class="keywordflow">if</span>( ammo_index &lt; 0 || <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( ammo_index ) &gt;= ammo_names.size() ) {</div>
<div class="line"><a id="l03952" name="l03952"></a><span class="lineno"> 3952</span>            ammo_index = -1;</div>
<div class="line"><a id="l03953" name="l03953"></a><span class="lineno"> 3953</span>        }</div>
<div class="line"><a id="l03954" name="l03954"></a><span class="lineno"> 3954</span>    }</div>
<div class="line"><a id="l03955" name="l03955"></a><span class="lineno"> 3955</span>    <span class="keywordflow">if</span>( ammo_index &lt; 0 ) {</div>
<div class="line"><a id="l03956" name="l03956"></a><span class="lineno"> 3956</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03957" name="l03957"></a><span class="lineno"> 3957</span>    }</div>
<div class="line"><a id="l03958" name="l03958"></a><span class="lineno"> 3958</span> </div>
<div class="line"><a id="l03959" name="l03959"></a><span class="lineno"> 3959</span>    <span class="comment">// HACK: Yes I know I&#39;m converting from itype to itype_id and back again into a pointer.</span></div>
<div class="line"><a id="l03960" name="l03960"></a><span class="lineno"> 3960</span>    <span class="comment">// It seems to be needed to make the appropriate connections?</span></div>
<div class="line"><a id="l03961" name="l03961"></a><span class="lineno"> 3961</span>    <span class="comment">// Otherwise the part where it queries for the amount doesn&#39;t seem to work right.</span></div>
<div class="line"><a id="l03962" name="l03962"></a><span class="lineno"> 3962</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structitype.html">itype</a> *cur_ammo = &amp;*ammo_types.at( ammo_index ).<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>();</div>
<div class="line"><a id="l03963" name="l03963"></a><span class="lineno"> 3963</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> amount_in_furn = <a class="code hl_function" href="iexamine_8cpp.html#a0270df10fe59879068e7fde158e3fe0b">count_charges_in_list</a>( cur_ammo, items_here );</div>
<div class="line"><a id="l03964" name="l03964"></a><span class="lineno"> 3964</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> amount_in_inv = p.<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( cur_ammo-&gt;<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>() );</div>
<div class="line"><a id="l03965" name="l03965"></a><span class="lineno"> 3965</span>    <span class="keywordflow">if</span>( amount_in_furn &gt; 0 ) {</div>
<div class="line"><a id="l03966" name="l03966"></a><span class="lineno"> 3966</span>        <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classplayer.html#a341f7f0dc2d439c0aa12e55fb29d87a6">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s contains %2$d %3$s.  Unload?&quot;</span> ), f.<a class="code hl_function" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>(), amount_in_furn,</div>
<div class="line"><a id="l03967" name="l03967"></a><span class="lineno"> 3967</span>                        cur_ammo-&gt;<a class="code hl_function" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( amount_in_furn ) ) ) {</div>
<div class="line"><a id="l03968" name="l03968"></a><span class="lineno"> 3968</span>            <span class="keyword">auto</span> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l03969" name="l03969"></a><span class="lineno"> 3969</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;itm : items ) {</div>
<div class="line"><a id="l03970" name="l03970"></a><span class="lineno"> 3970</span>                <span class="keywordflow">if</span>( itm.type == cur_ammo ) {</div>
<div class="line"><a id="l03971" name="l03971"></a><span class="lineno"> 3971</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_class" href="classplayer__activity.html">player_activity</a>( <a class="code hl_class" href="classpickup__activity__actor.html">pickup_activity_actor</a>(</div>
<div class="line"><a id="l03972" name="l03972"></a><span class="lineno"> 3972</span>                    { { <a class="code hl_class" href="classitem__location.html">item_location</a>( <a class="code hl_class" href="classmap__cursor.html">map_cursor</a>( examp ), &amp;itm ), std::nullopt, {} } }, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) ) );</div>
<div class="line"><a id="l03973" name="l03973"></a><span class="lineno"> 3973</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03974" name="l03974"></a><span class="lineno"> 3974</span>                }</div>
<div class="line"><a id="l03975" name="l03975"></a><span class="lineno"> 3975</span>            }</div>
<div class="line"><a id="l03976" name="l03976"></a><span class="lineno"> 3976</span>        }</div>
<div class="line"><a id="l03977" name="l03977"></a><span class="lineno"> 3977</span>    }</div>
<div class="line"><a id="l03978" name="l03978"></a><span class="lineno"> 3978</span> </div>
<div class="line"><a id="l03979" name="l03979"></a><span class="lineno"> 3979</span>    <span class="comment">// Note that this can lead to hammerspace as each ammo type doesn&#39;t take other items on the tile into account.</span></div>
<div class="line"><a id="l03980" name="l03980"></a><span class="lineno"> 3980</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_amount_in_furn = cur_ammo-&gt;<a class="code hl_function" href="structitype.html#a437edaf34e4c8b5bd688005360507b7d">charges_per_volume</a>( f.<a class="code hl_variable" href="structmap__data__common__t.html#a690ea143a57dfd3d0521626a8d900255">max_volume</a> );</div>
<div class="line"><a id="l03981" name="l03981"></a><span class="lineno"> 3981</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_reload_amount = max_amount_in_furn - amount_in_furn;</div>
<div class="line"><a id="l03982" name="l03982"></a><span class="lineno"> 3982</span>    <span class="keywordflow">if</span>( max_reload_amount &lt;= 0 ) {</div>
<div class="line"><a id="l03983" name="l03983"></a><span class="lineno"> 3983</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03984" name="l03984"></a><span class="lineno"> 3984</span>    }</div>
<div class="line"><a id="l03985" name="l03985"></a><span class="lineno"> 3985</span>    <span class="keywordflow">if</span>( amount_in_inv == 0 ) {</div>
<div class="line"><a id="l03986" name="l03986"></a><span class="lineno"> 3986</span>        <span class="comment">//~ Reloading or restocking a piece of furniture, for example a forge.</span></div>
<div class="line"><a id="l03987" name="l03987"></a><span class="lineno"> 3987</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need some %1$s to reload this %2$s.&quot;</span> ),</div>
<div class="line"><a id="l03988" name="l03988"></a><span class="lineno"> 3988</span>                 cur_ammo-&gt;<a class="code hl_function" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 2 ),</div>
<div class="line"><a id="l03989" name="l03989"></a><span class="lineno"> 3989</span>                 f.<a class="code hl_function" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() );</div>
<div class="line"><a id="l03990" name="l03990"></a><span class="lineno"> 3990</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03991" name="l03991"></a><span class="lineno"> 3991</span>    }</div>
<div class="line"><a id="l03992" name="l03992"></a><span class="lineno"> 3992</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_amount = std::min( amount_in_inv, max_reload_amount );</div>
<div class="line"><a id="l03993" name="l03993"></a><span class="lineno"> 3993</span>    <span class="comment">//~ Loading fuel or other items into a piece of furniture.</span></div>
<div class="line"><a id="l03994" name="l03994"></a><span class="lineno"> 3994</span>    <span class="keyword">const</span> std::string popupmsg = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Put how many of the %1$s into the %2$s?&quot;</span> ),</div>
<div class="line"><a id="l03995" name="l03995"></a><span class="lineno"> 3995</span>                                 cur_ammo-&gt;<a class="code hl_function" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( max_amount ), f.<a class="code hl_function" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() );</div>
<div class="line"><a id="l03996" name="l03996"></a><span class="lineno"> 3996</span>    <span class="keywordtype">int</span> amount = <a class="code hl_class" href="classstring__input__popup.html">string_input_popup</a>()</div>
<div class="line"><a id="l03997" name="l03997"></a><span class="lineno"> 3997</span>                 .<a class="code hl_function" href="classstring__input__popup.html#aeced4fb3877cc8e24da36af12af2e519">title</a>( popupmsg )</div>
<div class="line"><a id="l03998" name="l03998"></a><span class="lineno"> 3998</span>                 .<a class="code hl_function" href="classstring__input__popup.html#acc88b6636bee68b1ee4f4dffc533d611">width</a>( 20 )</div>
<div class="line"><a id="l03999" name="l03999"></a><span class="lineno"> 3999</span>                 .<a class="code hl_function" href="classstring__input__popup.html#a42554f299ffa809034aa4cb4486e365b">text</a>( <a class="code hl_function" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">std::to_string</a>( max_amount ) )</div>
<div class="line"><a id="l04000" name="l04000"></a><span class="lineno"> 4000</span>                 .<a class="code hl_function" href="classstring__input__popup.html#add686042aff41369ff1bfa8754223ca0">only_digits</a>( <span class="keyword">true</span> )</div>
<div class="line"><a id="l04001" name="l04001"></a><span class="lineno"> 4001</span>                 .<a class="code hl_function" href="classstring__input__popup.html#ad9511310a3e0d119d5587fbf0f877c07">query_int</a>();</div>
<div class="line"><a id="l04002" name="l04002"></a><span class="lineno"> 4002</span>    <span class="keywordflow">if</span>( amount &lt;= 0 || amount &gt; max_amount ) {</div>
<div class="line"><a id="l04003" name="l04003"></a><span class="lineno"> 4003</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04004" name="l04004"></a><span class="lineno"> 4004</span>    }</div>
<div class="line"><a id="l04005" name="l04005"></a><span class="lineno"> 4005</span>    p.<a class="code hl_function" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( cur_ammo-&gt;<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>(), amount );</div>
<div class="line"><a id="l04006" name="l04006"></a><span class="lineno"> 4006</span>    <span class="keyword">auto</span> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l04007" name="l04007"></a><span class="lineno"> 4007</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;itm : items ) {</div>
<div class="line"><a id="l04008" name="l04008"></a><span class="lineno"> 4008</span>        <span class="keywordflow">if</span>( itm.type == cur_ammo ) {</div>
<div class="line"><a id="l04009" name="l04009"></a><span class="lineno"> 4009</span>            itm.charges += amount;</div>
<div class="line"><a id="l04010" name="l04010"></a><span class="lineno"> 4010</span>            amount = 0;</div>
<div class="line"><a id="l04011" name="l04011"></a><span class="lineno"> 4011</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04012" name="l04012"></a><span class="lineno"> 4012</span>        }</div>
<div class="line"><a id="l04013" name="l04013"></a><span class="lineno"> 4013</span>    }</div>
<div class="line"><a id="l04014" name="l04014"></a><span class="lineno"> 4014</span>    <span class="keywordflow">if</span>( amount != 0 ) {</div>
<div class="line"><a id="l04015" name="l04015"></a><span class="lineno"> 4015</span>        <a class="code hl_class" href="classitem.html">item</a> it( cur_ammo-&gt;<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>(), <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, amount );</div>
<div class="line"><a id="l04016" name="l04016"></a><span class="lineno"> 4016</span>        here.<a class="code hl_function" href="classmap.html#a64d3ea19afd7a9c65f072dd65fb15405">add_item</a>( examp, it );</div>
<div class="line"><a id="l04017" name="l04017"></a><span class="lineno"> 4017</span>    }</div>
<div class="line"><a id="l04018" name="l04018"></a><span class="lineno"> 4018</span> </div>
<div class="line"><a id="l04019" name="l04019"></a><span class="lineno"> 4019</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> amount_in_furn_after_placing = <a class="code hl_function" href="iexamine_8cpp.html#a0270df10fe59879068e7fde158e3fe0b">count_charges_in_list</a>( &amp;ammo_types.at( ammo_index ),</div>
<div class="line"><a id="l04020" name="l04020"></a><span class="lineno"> 4020</span>            items );</div>
<div class="line"><a id="l04021" name="l04021"></a><span class="lineno"> 4021</span>    <span class="comment">//~ %1$s - furniture, %2$d - number, %3$s items.</span></div>
<div class="line"><a id="l04022" name="l04022"></a><span class="lineno"> 4022</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s contains %2$d %3$s.&quot;</span> ), f.<a class="code hl_function" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>(), amount_in_furn_after_placing,</div>
<div class="line"><a id="l04023" name="l04023"></a><span class="lineno"> 4023</span>             cur_ammo-&gt;<a class="code hl_function" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( amount_in_furn_after_placing ) );</div>
<div class="line"><a id="l04024" name="l04024"></a><span class="lineno"> 4024</span> </div>
<div class="line"><a id="l04025" name="l04025"></a><span class="lineno"> 4025</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You reload the %s.&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) );</div>
<div class="line"><a id="l04026" name="l04026"></a><span class="lineno"> 4026</span>    p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 5_seconds );</div>
<div class="line"><a id="l04027" name="l04027"></a><span class="lineno"> 4027</span>}</div>
<div class="ttc" id="aclasspickup__activity__actor_html"><div class="ttname"><a href="classpickup__activity__actor.html">pickup_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00413">activity_actor_definitions.h:414</a></div></div>
<div class="ttc" id="aclassplayer_html_a341f7f0dc2d439c0aa12e55fb29d87a6"><div class="ttname"><a href="classplayer.html#a341f7f0dc2d439c0aa12e55fb29d87a6">player::query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;mes) const override</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l00403">player.cpp:403</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a0270df10fe59879068e7fde158e3fe0b"><div class="ttname"><a href="iexamine_8cpp.html#a0270df10fe59879068e7fde158e3fe0b">count_charges_in_list</a></div><div class="ttdeci">static int count_charges_in_list(const itype *type, const map_stack &amp;items)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03912">iexamine.cpp:3912</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab5f267c571dc194e5b7e0b10b5136a33"><div class="ttname"><a href="iexamine_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a></div><div class="ttdeci">static const itype_id itype_battery(&quot;battery&quot;)</div></div>
<div class="ttc" id="astructfurn__t_html"><div class="ttname"><a href="structfurn__t.html">furn_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00496">mapdata.h:496</a></div></div>
<div class="ttc" id="astructfurn__t_html_a72fb416c3c7dba15192fe0064bdf6da6"><div class="ttname"><a href="structfurn__t.html#a72fb416c3c7dba15192fe0064bdf6da6">furn_t::crafting_ammo_item_types</a></div><div class="ttdeci">std::vector&lt; itype &gt; crafting_ammo_item_types() const</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03896">iexamine.cpp:3896</a></div></div>
<div class="ttc" id="astructitype_html_abc2596bacfc718fba56ab8076bab5d6b"><div class="ttname"><a href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">itype::get_id</a></div><div class="ttdeci">const itype_id &amp; get_id() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00088">itype.cpp:88</a></div></div>
<div class="ttc" id="astructitype_html_ad35fbe0013544c1c396944b20b264421"><div class="ttname"><a href="structitype.html#ad35fbe0013544c1c396944b20b264421">itype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00078">itype.cpp:78</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_a690ea143a57dfd3d0521626a8d900255"><div class="ttname"><a href="structmap__data__common__t.html#a690ea143a57dfd3d0521626a8d900255">map_data_common_t::max_volume</a></div><div class="ttdeci">units::volume max_volume</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00387">mapdata.h:387</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04454">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="visitable_8cpp_source.html#l00946">visitable&lt; T &gt;::charges_of()</a>, <a class="el" href="itype_8cpp_source.html#l00131">itype::charges_per_volume()</a>, <a class="el" href="iexamine_8cpp_source.html#l03912">count_charges_in_list()</a>, <a class="el" href="iexamine_8cpp_source.html#l03896">furn_t::crafting_ammo_item_types()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01533">map::furnname()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="itype_8cpp_source.html#l00088">itype::get_id()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="iexamine_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="mapdata_8h_source.html#l00387">map_data_common_t::max_volume</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="mapdata_8cpp_source.html#l00513">map_data_common_t::name()</a>, <a class="el" href="itype_8cpp_source.html#l00078">itype::nname()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="string__input__popup_8h_source.html#l00158">string_input_popup::only_digits()</a>, <a class="el" href="string__input__popup_8cpp_source.html#l00281">string_input_popup::query_int()</a>, <a class="el" href="player_8cpp_source.html#l00403">player::query_yn()</a>, <a class="el" href="string__formatter_8h_source.html#l00430">string_format()</a>, <a class="el" href="string__input__popup_8cpp_source.html#l00538">string_input_popup::text()</a>, <a class="el" href="string__input__popup_8h_source.html#l00105">string_input_popup::title()</a>, <a class="el" href="calendar_8cpp_source.html#l00327">to_string()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="character_8cpp_source.html#l09665">Character::use_charges()</a>, and <a class="el" href="string__input__popup_8h_source.html#l00143">string_input_popup::width()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="iexamine_8cpp_source.html#l05996">smoker_options()</a>.</p>

</div>
</div>
<a id="a7ea00a0b58ab0716a30e1f15785cdcb8" name="a7ea00a0b58ab0716a30e1f15785cdcb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ea00a0b58ab0716a30e1f15785cdcb8">&#9670;&nbsp;</a></span>rubble()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::rubble </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompt removal of rubble. </p>
<p >Select best shovel and invoke "CLEAR_RUBBLE" on tile. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01136">1136</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>{</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>    <span class="keywordtype">int</span> moves;</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>    <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classvisitable.html#a62ad0b8f7866ec171a709c56e4a25ff2">has_quality</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a>, 3 ) || p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a17ec945038dd28db3e0041be27e319ad">trait_BURROW</a> ) ) {</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>        moves = to_moves&lt;int&gt;( 1_minutes );</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classvisitable.html#a62ad0b8f7866ec171a709c56e4a25ff2">has_quality</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a>, 2 ) ) {</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>        moves = to_moves&lt;int&gt;( 2_minutes );</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;If only you had a shovel…&quot;</span> ) );</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>    }</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>    <span class="keywordflow">if</span>( ( here.<a class="code hl_function" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( examp ) || !here.<a class="code hl_function" href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">tr_at</a>( examp ).<a class="code hl_function" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() ||</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>          <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( examp ) != <span class="keyword">nullptr</span> ) &amp;&amp;</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>        !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Clear up that %s?&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>    }</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>    p.<a class="code hl_function" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a5c474656425f78451d525598c1740ec6">ACT_CLEAR_RUBBLE</a>, moves, -1, 0 );</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>    p.<a class="code hl_variable" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code hl_variable" href="classplayer__activity.html#ad8add7819b06dcfa95ca4871447159f2">placement</a> = examp;</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>}</div>
<div class="ttc" id="aclassmap_html_a30ccb67ed3651d350f2caf214e0b5176"><div class="ttname"><a href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">map::tr_at</a></div><div class="ttdeci">const trap &amp; tr_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05257">map.cpp:5257</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01073">map.cpp:1073</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_ad8add7819b06dcfa95ca4871447159f2"><div class="ttname"><a href="classplayer__activity.html#ad8add7819b06dcfa95ca4871447159f2">player_activity::placement</a></div><div class="ttdeci">tripoint placement</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00062">player_activity.h:62</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a5c474656425f78451d525598c1740ec6"><div class="ttname"><a href="iexamine_8cpp.html#a5c474656425f78451d525598c1740ec6">ACT_CLEAR_RUBBLE</a></div><div class="ttdeci">static const activity_id ACT_CLEAR_RUBBLE(&quot;ACT_CLEAR_RUBBLE&quot;)</div></div>
<div class="ttc" id="astructtrap_html_a6a9ac96c5c81eb31093e049ffeac8b4f"><div class="ttname"><a href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">trap::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Whether this is the null-traps, aka no trap at all.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00245">trap.cpp:245</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="iexamine_8cpp.html#a5c474656425f78451d525598c1740ec6">ACT_CLEAR_RUBBLE</a>, <a class="el" href="character_8h_source.html#l01578">Character::activity</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l09193">Character::assign_activity()</a>, <a class="el" href="map_8cpp_source.html#l01533">map::furnname()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="visitable_8cpp_source.html#l00169">visitable&lt; T &gt;::has_quality()</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="trap_8cpp_source.html#l00245">trap::is_null()</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="player__activity_8h_source.html#l00062">player_activity::placement</a>, <a class="el" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="map_8cpp_source.html#l05257">map::tr_at()</a>, <a class="el" href="iexamine_8cpp.html#a17ec945038dd28db3e0041be27e319ad">trait_BURROW</a>, and <a class="el" href="map_8cpp_source.html#l01073">map::veh_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ac7d5f75dd77cb40f322824cb59244bd7" name="ac7d5f75dd77cb40f322824cb59244bd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7d5f75dd77cb40f322824cb59244bd7">&#9670;&nbsp;</a></span>safe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::safe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to crack safe through audio-feedback manual lock manipulation. </p>
<p >Try to unlock the safe by moving the dial and listening for the mechanism to "click into place." Time per attempt affected by perception and mechanics. 30 minutes per attempt minimum. Small chance of just guessing the combo without listening device. </p>
Perception speeds up safe cracking Mechanics speeds up safe cracking 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01420">1420</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>{</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>    <span class="keyword">auto</span> cracking_tool = p.<a class="code hl_function" href="classCharacter.html#abd358c7a7757575b70b1613dbcce40a7">crafting_inventory</a>().<a class="code hl_function" href="classvisitable.html#a5b3c37fbe8209cab68aa26d3cc7f4300">items_with</a>( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>        <a class="code hl_class" href="classitem.html">item</a> temporary_item( it.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>        <span class="keywordflow">return</span> temporary_item.has_flag( <a class="code hl_function" href="iexamine_8cpp.html#a5798db04de5b6630cc1c1f26051af306">flag_SAFECRACK</a> );</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>    } );</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span> </div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>    <span class="keywordflow">if</span>( !( !cracking_tool.empty() || p.<a class="code hl_function" href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">has_bionic</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a6e871c64f882862c5c067b02b72fe3a2">bio_ears</a> ) ) ) {</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>        p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_turns&lt;int&gt;( 10_seconds );</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>        <span class="comment">// one_in(30^3) chance of guessing</span></div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 27000 ) ) {</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>            p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You mess with the dial for a little bit… and it opens!&quot;</span> ) );</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>            <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a8485e413e20e635e6f19058ec5a5a529">f_safe_o</a> );</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>            p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You mess with the dial for a little bit.&quot;</span> ) );</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>        }</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>    }</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span> </div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>    <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#aecadb13556a47d015e1a1ac7c46d56a7">is_deaf</a>() ) {</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t crack a safe while deaf!&quot;</span> ) );</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac9366c6b0a0c6068675bf92321130b46">effect_earphones</a> ) ) {</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t crack a safe while listening to music!&quot;</span> ) );</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Attempt to crack the safe?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You start cracking the safe.&quot;</span> ) );</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>        <span class="comment">// 150 minutes +/- 20 minutes per mechanics point away from 3 +/- 10 minutes per</span></div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>        <span class="comment">// perception point away from 8; capped at 30 minutes minimum. *100 to convert to moves</span><span class="comment"></span></div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span><span class="comment">        ///\EFFECT_PER speeds up safe cracking</span></div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span><span class="comment">        ///\EFFECT_MECHANICS speeds up safe cracking</span></div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span><span class="comment"></span>        <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> <a class="code hl_enumvalue" href="relic_8h.html#a37cd9dd49ee6b62891ec331828640ddca07cc694b9b3fc636710fa08b6922c42b">time</a> = std::max( 150_minutes - 20_minutes * ( p.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>(</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>                <a class="code hl_variable" href="iexamine_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a> ) - 3 ) - 10_minutes * ( p.<a class="code hl_function" href="classCharacter.html#abb0a1847902e6db0bd3c923ee8187702">get_per</a>() - 8 ), 30_minutes );</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span> </div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>        p.<a class="code hl_function" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a8b1b40d79c6b01ce2debfda0f65cb626">ACT_CRACKING</a>, to_moves&lt;int&gt;( time ) );</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>        p.<a class="code hl_variable" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code hl_variable" href="classplayer__activity.html#ad8add7819b06dcfa95ca4871447159f2">placement</a> = examp;</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>    }</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>}</div>
<div class="ttc" id="aclassCharacter_html_abb0a1847902e6db0bd3c923ee8187702"><div class="ttname"><a href="classCharacter.html#abb0a1847902e6db0bd3c923ee8187702">Character::get_per</a></div><div class="ttdeci">virtual int get_per() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04098">character.cpp:4098</a></div></div>
<div class="ttc" id="aclassCharacter_html_aecadb13556a47d015e1a1ac7c46d56a7"><div class="ttname"><a href="classCharacter.html#aecadb13556a47d015e1a1ac7c46d56a7">Character::is_deaf</a></div><div class="ttdeci">bool is_deaf() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04512">character.cpp:4512</a></div></div>
<div class="ttc" id="aclassCreature_html_a6fb79df9315dc2bed6f34d9a2e37da90"><div class="ttname"><a href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, body_part bp=num_bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01206">creature.cpp:1206</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a53a27ba882bb24158d8752e53158bf46"><div class="ttname"><a href="iexamine_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a></div><div class="ttdeci">static const skill_id skill_mechanics(&quot;mechanics&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a5798db04de5b6630cc1c1f26051af306"><div class="ttname"><a href="iexamine_8cpp.html#a5798db04de5b6630cc1c1f26051af306">flag_SAFECRACK</a></div><div class="ttdeci">static const std::string flag_SAFECRACK(&quot;SAFECRACK&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a6e871c64f882862c5c067b02b72fe3a2"><div class="ttname"><a href="iexamine_8cpp.html#a6e871c64f882862c5c067b02b72fe3a2">bio_ears</a></div><div class="ttdeci">static const bionic_id bio_ears(&quot;bio_ears&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a8b1b40d79c6b01ce2debfda0f65cb626"><div class="ttname"><a href="iexamine_8cpp.html#a8b1b40d79c6b01ce2debfda0f65cb626">ACT_CRACKING</a></div><div class="ttdeci">static const activity_id ACT_CRACKING(&quot;ACT_CRACKING&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac9366c6b0a0c6068675bf92321130b46"><div class="ttname"><a href="iexamine_8cpp.html#ac9366c6b0a0c6068675bf92321130b46">effect_earphones</a></div><div class="ttdeci">static const efftype_id effect_earphones(&quot;earphones&quot;)</div></div>
<div class="ttc" id="arelic_8h_html_a37cd9dd49ee6b62891ec331828640ddca07cc694b9b3fc636710fa08b6922c42b"><div class="ttname"><a href="relic_8h.html#a37cd9dd49ee6b62891ec331828640ddca07cc694b9b3fc636710fa08b6922c42b">relic_recharge_type::time</a></div><div class="ttdeci">@ time</div><div class="ttdoc">Recharges slowly with time.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="iexamine_8cpp.html#a8b1b40d79c6b01ce2debfda0f65cb626">ACT_CRACKING</a>, <a class="el" href="character_8h_source.html#l01578">Character::activity</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l09193">Character::assign_activity()</a>, <a class="el" href="iexamine_8cpp.html#a6e871c64f882862c5c067b02b72fe3a2">bio_ears</a>, <a class="el" href="crafting_8cpp_source.html#l00556">Character::crafting_inventory()</a>, <a class="el" href="iexamine_8cpp.html#ac9366c6b0a0c6068675bf92321130b46">effect_earphones</a>, <a class="el" href="mapdata_8cpp_source.html#l01120">f_safe_o</a>, <a class="el" href="iexamine_8cpp.html#a5798db04de5b6630cc1c1f26051af306">flag_SAFECRACK()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="character_8cpp_source.html#l04098">Character::get_per()</a>, <a class="el" href="character_8cpp_source.html#l03351">Character::get_skill_level()</a>, <a class="el" href="character_8cpp_source.html#l01814">Character::has_bionic()</a>, <a class="el" href="creature_8cpp_source.html#l01206">Creature::has_effect()</a>, <a class="el" href="item_8cpp_source.html#l05328">item::has_flag()</a>, <a class="el" href="character_8cpp_source.html#l04512">Character::is_deaf()</a>, <a class="el" href="visitable_8cpp_source.html#l00324">visitable&lt; T &gt;::items_with()</a>, <a class="el" href="enums_8h_source.html#l00260">m_good</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="player__activity_8h_source.html#l00062">player_activity::placement</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="iexamine_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a>, <a class="el" href="relic_8h.html#a37cd9dd49ee6b62891ec331828640ddca07cc694b9b3fc636710fa08b6922c42b">time</a>, and <a class="el" href="item_8h_source.html#l02160">item::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l02720">Character::can_pick_weight()</a>, <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, <a class="el" href="vehicle_8cpp_source.html#l04196">vehicle::lift_thrust_of_rotorcraft()</a>, <a class="el" href="trapfunc_8cpp_source.html#l01028">sinkhole_safety_roll()</a>, <a class="el" href="teleport_8cpp_source.html#l00024">teleport::teleport()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00115">spell_effect::teleport_random()</a>, <a class="el" href="vehicle_8cpp_source.html#l03514">vehicle::total_power_w()</a>, and <a class="el" href="mutation_8cpp_source.html#l01485">try_reject_mutagen()</a>.</p>

</div>
</div>
<a id="a27a34c33783d2789846b7a0d57e183f7" name="a27a34c33783d2789846b7a0d57e183f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27a34c33783d2789846b7a0d57e183f7">&#9670;&nbsp;</a></span>shrub_marloss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::shrub_marloss </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03649">3649</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03650" name="l03650"></a><span class="lineno"> 3650</span>{</div>
<div class="line"><a id="l03651" name="l03651"></a><span class="lineno"> 3651</span>    <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> ) ) {</div>
<div class="line"><a id="l03652" name="l03652"></a><span class="lineno"> 3652</span>        <a class="code hl_function" href="iexamine_8cpp.html#a6af7598204724fe8f5a995fa31e9b33d">pick_plant</a>( p, examp, <a class="code hl_variable" href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a>, <a class="code hl_variable" href="mapdata_8cpp.html#a84b8675e97107ecd899bc30175d965cd">t_shrub_fungal</a> );</div>
<div class="line"><a id="l03653" name="l03653"></a><span class="lineno"> 3653</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a> ) ) {</div>
<div class="line"><a id="l03654" name="l03654"></a><span class="lineno"> 3654</span>        <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03655" name="l03655"></a><span class="lineno"> 3655</span>        here.<a class="code hl_function" href="classmap.html#acfe43259087397daac52876165a3120c">spawn_item</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), <a class="code hl_variable" href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a>, 1, 0, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l03656" name="l03656"></a><span class="lineno"> 3656</span>        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a70467a009777bde90374e399160abaf1">t_fungus</a> );</div>
<div class="line"><a id="l03657" name="l03657"></a><span class="lineno"> 3657</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The shrub offers up a fruit, then crumbles into a fungal bed.&quot;</span> ) );</div>
<div class="line"><a id="l03658" name="l03658"></a><span class="lineno"> 3658</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03659" name="l03659"></a><span class="lineno"> 3659</span>        <a class="code hl_function" href="iexamine_8cpp.html#a6af7598204724fe8f5a995fa31e9b33d">pick_plant</a>( p, examp, <a class="code hl_variable" href="iexamine_8cpp.html#a887b627a1c6aa9a02e110fe43e1ef025">itype_marloss_berry</a>, <a class="code hl_variable" href="mapdata_8cpp.html#a84b8675e97107ecd899bc30175d965cd">t_shrub_fungal</a> );</div>
<div class="line"><a id="l03660" name="l03660"></a><span class="lineno"> 3660</span>    }</div>
<div class="line"><a id="l03661" name="l03661"></a><span class="lineno"> 3661</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_a022d3e979db490c63a348af7ac50cffd"><div class="ttname"><a href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a></div><div class="ttdeci">static const itype_id itype_mycus_fruit(&quot;mycus_fruit&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a0d7873e243723a1ba7390f11e934f61f"><div class="ttname"><a href="iexamine_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a></div><div class="ttdeci">static const trait_id trait_THRESH_MARLOSS(&quot;THRESH_MARLOSS&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a6af7598204724fe8f5a995fa31e9b33d"><div class="ttname"><a href="iexamine_8cpp.html#a6af7598204724fe8f5a995fa31e9b33d">pick_plant</a></div><div class="ttdeci">static void pick_plant(player &amp;p, const tripoint &amp;examp, const itype_id &amp;itemType, ter_id new_ter, bool seeds=false)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03454">iexamine.cpp:3454</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a887b627a1c6aa9a02e110fe43e1ef025"><div class="ttname"><a href="iexamine_8cpp.html#a887b627a1c6aa9a02e110fe43e1ef025">itype_marloss_berry</a></div><div class="ttdeci">static const itype_id itype_marloss_berry(&quot;marloss_berry&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_a70467a009777bde90374e399160abaf1"><div class="ttname"><a href="mapdata_8cpp.html#a70467a009777bde90374e399160abaf1">t_fungus</a></div><div class="ttdeci">ter_id t_fungus</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00693">mapdata.cpp:693</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a84b8675e97107ecd899bc30175d965cd"><div class="ttname"><a href="mapdata_8cpp.html#a84b8675e97107ecd899bc30175d965cd">t_shrub_fungal</a></div><div class="ttdeci">ter_id t_shrub_fungal</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00693">mapdata.cpp:693</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="iexamine_8cpp.html#a887b627a1c6aa9a02e110fe43e1ef025">itype_marloss_berry</a>, <a class="el" href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="iexamine_8cpp_source.html#l03454">pick_plant()</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="map_8cpp_source.html#l04313">map::spawn_item()</a>, <a class="el" href="mapdata_8cpp_source.html#l00693">t_fungus</a>, <a class="el" href="mapdata_8cpp_source.html#l00693">t_shrub_fungal</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a>, <a class="el" href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l09095">game::place_player()</a>.</p>

</div>
</div>
<a id="a031b12463f4f2344b5ac98bac72a011f" name="a031b12463f4f2344b5ac98bac72a011f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a031b12463f4f2344b5ac98bac72a011f">&#9670;&nbsp;</a></span>shrub_wildveggies()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::shrub_wildveggies </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Survival speeds up foraging Perception randomly speeds up foraging 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03684">3684</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03685" name="l03685"></a><span class="lineno"> 3685</span>{</div>
<div class="line"><a id="l03686" name="l03686"></a><span class="lineno"> 3686</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03687" name="l03687"></a><span class="lineno"> 3687</span>    <span class="comment">// Ask if there&#39;s something possibly more interesting than this shrub here</span></div>
<div class="line"><a id="l03688" name="l03688"></a><span class="lineno"> 3688</span>    <span class="keywordflow">if</span>( ( !here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ||</div>
<div class="line"><a id="l03689" name="l03689"></a><span class="lineno"> 3689</span>          here.<a class="code hl_function" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( examp ) ||</div>
<div class="line"><a id="l03690" name="l03690"></a><span class="lineno"> 3690</span>          !here.<a class="code hl_function" href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">tr_at</a>( examp ).<a class="code hl_function" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() ||</div>
<div class="line"><a id="l03691" name="l03691"></a><span class="lineno"> 3691</span>          <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( examp ) != <span class="keyword">nullptr</span> ) &amp;&amp;</div>
<div class="line"><a id="l03692" name="l03692"></a><span class="lineno"> 3692</span>        !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Forage through %s?&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) ) ) {</div>
<div class="line"><a id="l03693" name="l03693"></a><span class="lineno"> 3693</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, examp );</div>
<div class="line"><a id="l03694" name="l03694"></a><span class="lineno"> 3694</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03695" name="l03695"></a><span class="lineno"> 3695</span>    }</div>
<div class="line"><a id="l03696" name="l03696"></a><span class="lineno"> 3696</span> </div>
<div class="line"><a id="l03697" name="l03697"></a><span class="lineno"> 3697</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You forage through the %s.&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) );<span class="comment"></span></div>
<div class="line"><a id="l03698" name="l03698"></a><span class="lineno"> 3698</span><span class="comment">    ///\EFFECT_SURVIVAL speeds up foraging</span></div>
<div class="line"><a id="l03699" name="l03699"></a><span class="lineno"> 3699</span><span class="comment"></span>    <span class="keywordtype">int</span> <a class="code hl_function" href="activity__item__handling_8cpp.html#a0572000ec0976f2d095ae0cd9d20e78b">move_cost</a> = 100000 / ( 2 * p.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) + 5 );<span class="comment"></span></div>
<div class="line"><a id="l03700" name="l03700"></a><span class="lineno"> 3700</span><span class="comment">    ///\EFFECT_PER randomly speeds up foraging</span></div>
<div class="line"><a id="l03701" name="l03701"></a><span class="lineno"> 3701</span><span class="comment"></span>    <a class="code hl_function" href="activity__item__handling_8cpp.html#a0572000ec0976f2d095ae0cd9d20e78b">move_cost</a> /= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( std::max( 4, p.<a class="code hl_variable" href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">per_cur</a> ), 4 + p.<a class="code hl_variable" href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">per_cur</a> * 2 );</div>
<div class="line"><a id="l03702" name="l03702"></a><span class="lineno"> 3702</span>    p.<a class="code hl_function" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ab0ad801a96d110a9f46c9b4a6e724889">ACT_FORAGE</a>, <a class="code hl_function" href="activity__item__handling_8cpp.html#a0572000ec0976f2d095ae0cd9d20e78b">move_cost</a>, 0 );</div>
<div class="line"><a id="l03703" name="l03703"></a><span class="lineno"> 3703</span>    p.<a class="code hl_variable" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code hl_variable" href="classplayer__activity.html#ad8add7819b06dcfa95ca4871447159f2">placement</a> = here.<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( examp );</div>
<div class="line"><a id="l03704" name="l03704"></a><span class="lineno"> 3704</span>    p.<a class="code hl_variable" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code hl_variable" href="classplayer__activity.html#a7009e282d5300da78140ba918c5bca18">auto_resume</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03705" name="l03705"></a><span class="lineno"> 3705</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03706" name="l03706"></a><span class="lineno"> 3706</span>}</div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a0572000ec0976f2d095ae0cd9d20e78b"><div class="ttname"><a href="activity__item__handling_8cpp.html#a0572000ec0976f2d095ae0cd9d20e78b">move_cost</a></div><div class="ttdeci">static int move_cost(const item &amp;it, const tripoint &amp;src, const tripoint &amp;dest)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00899">activity_item_handling.cpp:899</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad8a2bb942a756787aced3b83319176ff"><div class="ttname"><a href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">Character::per_cur</a></div><div class="ttdeci">int per_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00267">character.h:267</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a7009e282d5300da78140ba918c5bca18"><div class="ttname"><a href="classplayer__activity.html#a7009e282d5300da78140ba918c5bca18">player_activity::auto_resume</a></div><div class="ttdeci">bool auto_resume</div><div class="ttdoc">If true, the activity will be auto-resumed next time the player attempts an identical activity.</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00069">player_activity.h:69</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab0ad801a96d110a9f46c9b4a6e724889"><div class="ttname"><a href="iexamine_8cpp.html#ab0ad801a96d110a9f46c9b4a6e724889">ACT_FORAGE</a></div><div class="ttdeci">static const activity_id ACT_FORAGE(&quot;ACT_FORAGE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="iexamine_8cpp.html#ab0ad801a96d110a9f46c9b4a6e724889">ACT_FORAGE</a>, <a class="el" href="character_8h_source.html#l01578">Character::activity</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l09193">Character::assign_activity()</a>, <a class="el" href="player__activity_8h_source.html#l00069">player_activity::auto_resume</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="character_8cpp_source.html#l03351">Character::get_skill_level()</a>, <a class="el" href="map_8cpp_source.html#l08399">map::getabs()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="trap_8cpp_source.html#l00245">trap::is_null()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00899">move_cost()</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="character_8h_source.html#l00267">Character::per_cur</a>, <a class="el" href="player__activity_8h_source.html#l00062">player_activity::placement</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>, <a class="el" href="map_8cpp_source.html#l01773">map::tername()</a>, <a class="el" href="map_8cpp_source.html#l05257">map::tr_at()</a>, and <a class="el" href="map_8cpp_source.html#l01073">map::veh_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l09095">game::place_player()</a>.</p>

</div>
</div>
<a id="af36ea19e73945ee13457fe2ae028c149" name="af36ea19e73945ee13457fe2ae028c149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af36ea19e73945ee13457fe2ae028c149">&#9670;&nbsp;</a></span>sign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::sign </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04182">4182</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04183" name="l04183"></a><span class="lineno"> 4183</span>{</div>
<div class="line"><a id="l04184" name="l04184"></a><span class="lineno"> 4184</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l04185" name="l04185"></a><span class="lineno"> 4185</span>    std::string existing_signage = here.<a class="code hl_function" href="classmap.html#a5c968c93ff5170d9901823f7b25bb557">get_signage</a>( examp );</div>
<div class="line"><a id="l04186" name="l04186"></a><span class="lineno"> 4186</span>    <span class="keywordtype">bool</span> previous_signage_exists = !existing_signage.empty();</div>
<div class="line"><a id="l04187" name="l04187"></a><span class="lineno"> 4187</span> </div>
<div class="line"><a id="l04188" name="l04188"></a><span class="lineno"> 4188</span>    <span class="comment">// Display existing message, or lack thereof.</span></div>
<div class="line"><a id="l04189" name="l04189"></a><span class="lineno"> 4189</span>    <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a> ) ) {</div>
<div class="line"><a id="l04190" name="l04190"></a><span class="lineno"> 4190</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re illiterate, and can&#39;t read the message on the sign.&quot;</span> ) );</div>
<div class="line"><a id="l04191" name="l04191"></a><span class="lineno"> 4191</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( previous_signage_exists ) {</div>
<div class="line"><a id="l04192" name="l04192"></a><span class="lineno"> 4192</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( existing_signage.c_str() );</div>
<div class="line"><a id="l04193" name="l04193"></a><span class="lineno"> 4193</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04194" name="l04194"></a><span class="lineno"> 4194</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Nothing legible on the sign.&quot;</span> ) );</div>
<div class="line"><a id="l04195" name="l04195"></a><span class="lineno"> 4195</span>    }</div>
<div class="line"><a id="l04196" name="l04196"></a><span class="lineno"> 4196</span> </div>
<div class="line"><a id="l04197" name="l04197"></a><span class="lineno"> 4197</span>    <span class="comment">// Allow chance to modify message.</span></div>
<div class="line"><a id="l04198" name="l04198"></a><span class="lineno"> 4198</span>    std::vector&lt;tool_comp&gt; tools;</div>
<div class="line"><a id="l04199" name="l04199"></a><span class="lineno"> 4199</span>    std::vector&lt;const item *&gt; filter = p.<a class="code hl_function" href="classCharacter.html#abd358c7a7757575b70b1613dbcce40a7">crafting_inventory</a>().<a class="code hl_function" href="classvisitable.html#a5b3c37fbe8209cab68aa26d3cc7f4300">items_with</a>( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l04200" name="l04200"></a><span class="lineno"> 4200</span>        <span class="keywordflow">return</span> it.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <a class="code hl_function" href="iexamine_8cpp.html#adfffcc23025ef67af109ef4d8e232666">flag_WRITE_MESSAGE</a> ) &amp;&amp; it.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt; 0;</div>
<div class="line"><a id="l04201" name="l04201"></a><span class="lineno"> 4201</span>    } );</div>
<div class="line"><a id="l04202" name="l04202"></a><span class="lineno"> 4202</span>    tools.reserve( filter.size() );</div>
<div class="line"><a id="l04203" name="l04203"></a><span class="lineno"> 4203</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> *writing_item : filter ) {</div>
<div class="line"><a id="l04204" name="l04204"></a><span class="lineno"> 4204</span>        tools.push_back( <a class="code hl_struct" href="structtool__comp.html">tool_comp</a>( writing_item-&gt;typeId(), 1 ) );</div>
<div class="line"><a id="l04205" name="l04205"></a><span class="lineno"> 4205</span>    }</div>
<div class="line"><a id="l04206" name="l04206"></a><span class="lineno"> 4206</span> </div>
<div class="line"><a id="l04207" name="l04207"></a><span class="lineno"> 4207</span>    <span class="keywordflow">if</span>( !tools.empty() ) {</div>
<div class="line"><a id="l04208" name="l04208"></a><span class="lineno"> 4208</span>        <span class="comment">// Different messages if the sign already has writing associated with it.</span></div>
<div class="line"><a id="l04209" name="l04209"></a><span class="lineno"> 4209</span>        std::string query_message = previous_signage_exists ?</div>
<div class="line"><a id="l04210" name="l04210"></a><span class="lineno"> 4210</span>                                    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Overwrite the existing message on the sign?&quot;</span> ) :</div>
<div class="line"><a id="l04211" name="l04211"></a><span class="lineno"> 4211</span>                                    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Add a message to the sign?&quot;</span> );</div>
<div class="line"><a id="l04212" name="l04212"></a><span class="lineno"> 4212</span>        std::string ignore_message = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You leave the sign alone.&quot;</span> );</div>
<div class="line"><a id="l04213" name="l04213"></a><span class="lineno"> 4213</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( query_message ) ) {</div>
<div class="line"><a id="l04214" name="l04214"></a><span class="lineno"> 4214</span>            std::string signage = <a class="code hl_class" href="classstring__input__popup.html">string_input_popup</a>()</div>
<div class="line"><a id="l04215" name="l04215"></a><span class="lineno"> 4215</span>                                  .<a class="code hl_function" href="classstring__input__popup.html#aeced4fb3877cc8e24da36af12af2e519">title</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Write what?&quot;</span> ) )</div>
<div class="line"><a id="l04216" name="l04216"></a><span class="lineno"> 4216</span>                                  .<a class="code hl_function" href="classstring__input__popup.html#a0578bb68b8ef5ef289f8eb95118b0b08">identifier</a>( <span class="stringliteral">&quot;signage&quot;</span> )</div>
<div class="line"><a id="l04217" name="l04217"></a><span class="lineno"> 4217</span>                                  .<a class="code hl_function" href="classstring__input__popup.html#acd7eba6664e8c473cc2b754f5d8d2cde">query_string</a>();</div>
<div class="line"><a id="l04218" name="l04218"></a><span class="lineno"> 4218</span>            <span class="keywordflow">if</span>( signage.empty() ) {</div>
<div class="line"><a id="l04219" name="l04219"></a><span class="lineno"> 4219</span>                p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, ignore_message );</div>
<div class="line"><a id="l04220" name="l04220"></a><span class="lineno"> 4220</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04221" name="l04221"></a><span class="lineno"> 4221</span>                std::string spray_painted_message = previous_signage_exists ?</div>
<div class="line"><a id="l04222" name="l04222"></a><span class="lineno"> 4222</span>                                                    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You overwrite the previous message on the sign with your graffiti.&quot;</span> ) :</div>
<div class="line"><a id="l04223" name="l04223"></a><span class="lineno"> 4223</span>                                                    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You graffiti a message onto the sign.&quot;</span> );</div>
<div class="line"><a id="l04224" name="l04224"></a><span class="lineno"> 4224</span>                here.<a class="code hl_function" href="classmap.html#ae7ef998adaaa74d9755c10a5c61200a3">set_signage</a>( examp, signage );</div>
<div class="line"><a id="l04225" name="l04225"></a><span class="lineno"> 4225</span>                p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, spray_painted_message );</div>
<div class="line"><a id="l04226" name="l04226"></a><span class="lineno"> 4226</span>                p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( - 20 * signage.length() );</div>
<div class="line"><a id="l04227" name="l04227"></a><span class="lineno"> 4227</span>                p.<a class="code hl_function" href="classplayer.html#aafa6cc2db2568af687ab21f09f8e4c2e">consume_tools</a>( tools, 1 );</div>
<div class="line"><a id="l04228" name="l04228"></a><span class="lineno"> 4228</span>            }</div>
<div class="line"><a id="l04229" name="l04229"></a><span class="lineno"> 4229</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04230" name="l04230"></a><span class="lineno"> 4230</span>            p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, ignore_message );</div>
<div class="line"><a id="l04231" name="l04231"></a><span class="lineno"> 4231</span>        }</div>
<div class="line"><a id="l04232" name="l04232"></a><span class="lineno"> 4232</span>    }</div>
<div class="line"><a id="l04233" name="l04233"></a><span class="lineno"> 4233</span>}</div>
<div class="ttc" id="aclassmap_html_a5c968c93ff5170d9901823f7b25bb557"><div class="ttname"><a href="classmap.html#a5c968c93ff5170d9901823f7b25bb557">map::get_signage</a></div><div class="ttdeci">std::string get_signage(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04119">map.cpp:4119</a></div></div>
<div class="ttc" id="aclassmap_html_ae7ef998adaaa74d9755c10a5c61200a3"><div class="ttname"><a href="classmap.html#ae7ef998adaaa74d9755c10a5c61200a3">map::set_signage</a></div><div class="ttdeci">void set_signage(const tripoint &amp;p, const std::string &amp;message) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04130">map.cpp:4130</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_a0578bb68b8ef5ef289f8eb95118b0b08"><div class="ttname"><a href="classstring__input__popup.html#a0578bb68b8ef5ef289f8eb95118b0b08">string_input_popup::identifier</a></div><div class="ttdeci">string_input_popup &amp; identifier(const std::string &amp;value)</div><div class="ttdoc">An identifier to be used to store / get the input history.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00136">string_input_popup.h:136</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_acd7eba6664e8c473cc2b754f5d8d2cde"><div class="ttname"><a href="classstring__input__popup.html#acd7eba6664e8c473cc2b754f5d8d2cde">string_input_popup::query_string</a></div><div class="ttdeci">const std::string &amp; query_string(bool loop=true, bool draw_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8cpp_source.html#l00291">string_input_popup.cpp:291</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a></div><div class="ttdeci">@ m_neutral</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00267">enums.h:267</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_adfffcc23025ef67af109ef4d8e232666"><div class="ttname"><a href="iexamine_8cpp.html#adfffcc23025ef67af109ef4d8e232666">flag_WRITE_MESSAGE</a></div><div class="ttdeci">static const std::string flag_WRITE_MESSAGE(&quot;WRITE_MESSAGE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="item_8h_source.html#l02199">item::charges</a>, <a class="el" href="crafting_8cpp_source.html#l01845">player::consume_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l00556">Character::crafting_inventory()</a>, <a class="el" href="iexamine_8cpp.html#adfffcc23025ef67af109ef4d8e232666">flag_WRITE_MESSAGE()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04119">map::get_signage()</a>, <a class="el" href="item_8cpp_source.html#l05328">item::has_flag()</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="string__input__popup_8h_source.html#l00136">string_input_popup::identifier()</a>, <a class="el" href="visitable_8cpp_source.html#l00324">visitable&lt; T &gt;::items_with()</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="enums_8h_source.html#l00267">m_neutral</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="output_8cpp_source.html#l00764">popup()</a>, <a class="el" href="string__input__popup_8cpp_source.html#l00291">string_input_popup::query_string()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="map_8cpp_source.html#l04130">map::set_signage()</a>, <a class="el" href="string__input__popup_8h_source.html#l00105">string_input_popup::title()</a>, and <a class="el" href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a5290c180b285413e00fa5a8fd4dca3bb" name="a5290c180b285413e00fa5a8fd4dca3bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5290c180b285413e00fa5a8fd4dca3bb">&#9670;&nbsp;</a></span>slot_machine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::slot_machine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loop prompt to bet $10. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01375">1375</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>{</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> price = 10;</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>    <span class="keyword">auto</span> cents = []( <span class="keywordtype">int</span> x ) {</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>        <span class="keywordflow">return</span> x * 100;</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>    };</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>    <span class="keywordtype">bool</span> played = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>    <span class="keywordflow">while</span>( <span class="keyword">true</span> ) {</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>        <span class="keywordflow">if</span>( p.<a class="code hl_variable" href="classplayer.html#a38b455927fe69f32a4a0f9a4fba7cc0f">cash</a> &lt; cents( price ) ) {</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need $%d to play.&quot;</span> ), price );</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>        }</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( played ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Play again for $%d?&quot;</span> ) : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Insert $%d?&quot;</span> ), price ) ) {</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>        }</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>        p.<a class="code hl_variable" href="classplayer.html#a38b455927fe69f32a4a0f9a4fba7cc0f">cash</a> -= cents( price );</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>        played = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>        <span class="keywordtype">int</span> won;</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>            won = price;</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Three cherries… you get your money back!&quot;</span> ) );</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 20 ) ) {</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>            won = 50;</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Three bells… you win $%d!&quot;</span> ), won );</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 50 ) ) {</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>            won = 200;</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Three stars… you win $%d!&quot;</span> ), won );</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 1000 ) ) {</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>            won = 3000;</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;JACKPOT!  You win $%d!&quot;</span> ), won );</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>            won = 0;</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;No win.&quot;</span> ) );</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>        }</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>        p.<a class="code hl_variable" href="classplayer.html#a38b455927fe69f32a4a0f9a4fba7cc0f">cash</a> += cents( won );</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>    }</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>}</div>
<div class="ttc" id="aclassplayer_html_a38b455927fe69f32a4a0f9a4fba7cc0f"><div class="ttname"><a href="classplayer.html#a38b455927fe69f32a4a0f9a4fba7cc0f">player::cash</a></div><div class="ttdeci">int cash</div><div class="ttdef"><b>Definition:</b> <a href="player_8h_source.html#l00246">player.h:246</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="player_8h_source.html#l00246">player::cash</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="output_8cpp_source.html#l00764">popup()</a>, and <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a2b720f7a991d1e49c70ca03951445632" name="a2b720f7a991d1e49c70ca03951445632"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b720f7a991d1e49c70ca03951445632">&#9670;&nbsp;</a></span>smoker_options()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::smoker_options </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l05996">5996</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05997" name="l05997"></a><span class="lineno"> 5997</span>{</div>
<div class="line"><a id="l05998" name="l05998"></a><span class="lineno"> 5998</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l05999" name="l05999"></a><span class="lineno"> 5999</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_typedef" href="type__id_8h.html#a13fd56b9ac506b2517d4889040e0ef66">furn_str_id</a>( <span class="stringliteral">&quot;f_smoking_rack_active&quot;</span> ) ||</div>
<div class="line"><a id="l06000" name="l06000"></a><span class="lineno"> 6000</span>                        here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_typedef" href="type__id_8h.html#a13fd56b9ac506b2517d4889040e0ef66">furn_str_id</a>( <span class="stringliteral">&quot;f_metal_smoking_rack_active&quot;</span> );</div>
<div class="line"><a id="l06001" name="l06001"></a><span class="lineno"> 6001</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> portable = here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_typedef" href="type__id_8h.html#a13fd56b9ac506b2517d4889040e0ef66">furn_str_id</a>( <span class="stringliteral">&quot;f_metal_smoking_rack&quot;</span> ) ||</div>
<div class="line"><a id="l06002" name="l06002"></a><span class="lineno"> 6002</span>                          here.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code hl_typedef" href="type__id_8h.html#a13fd56b9ac506b2517d4889040e0ef66">furn_str_id</a>( <span class="stringliteral">&quot;f_metal_smoking_rack_active&quot;</span> );</div>
<div class="line"><a id="l06003" name="l06003"></a><span class="lineno"> 6003</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items_here = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l06004" name="l06004"></a><span class="lineno"> 6004</span> </div>
<div class="line"><a id="l06005" name="l06005"></a><span class="lineno"> 6005</span>    <span class="keywordflow">if</span>( portable &amp;&amp; items_here.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() &amp;&amp; active ) {</div>
<div class="line"><a id="l06006" name="l06006"></a><span class="lineno"> 6006</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;f_metal_smoking_rack_active was empty!&quot;</span> );</div>
<div class="line"><a id="l06007" name="l06007"></a><span class="lineno"> 6007</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a5c0cdd6ff07f840f6228246012664c32">f_metal_smoking_rack</a> );</div>
<div class="line"><a id="l06008" name="l06008"></a><span class="lineno"> 6008</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06009" name="l06009"></a><span class="lineno"> 6009</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( items_here.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() &amp;&amp; active ) {</div>
<div class="line"><a id="l06010" name="l06010"></a><span class="lineno"> 6010</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;f_smoking_rack_active was empty!&quot;</span> );</div>
<div class="line"><a id="l06011" name="l06011"></a><span class="lineno"> 6011</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a37895b88321fb802eb5d2b52e255ba22">f_smoking_rack</a> );</div>
<div class="line"><a id="l06012" name="l06012"></a><span class="lineno"> 6012</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06013" name="l06013"></a><span class="lineno"> 6013</span>    }</div>
<div class="line"><a id="l06014" name="l06014"></a><span class="lineno"> 6014</span>    <span class="keywordflow">if</span>( portable &amp;&amp; items_here.<a class="code hl_function" href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">size</a>() == 1 &amp;&amp; items_here.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>()-&gt;typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a45ff89d042bbbf58ef37ec47e791b58c">itype_fake_smoke_plume</a> ) {</div>
<div class="line"><a id="l06015" name="l06015"></a><span class="lineno"> 6015</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;f_metal_smoking_rack_active was empty, and had fake_smoke_plume!&quot;</span> );</div>
<div class="line"><a id="l06016" name="l06016"></a><span class="lineno"> 6016</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a5c0cdd6ff07f840f6228246012664c32">f_metal_smoking_rack</a> );</div>
<div class="line"><a id="l06017" name="l06017"></a><span class="lineno"> 6017</span>        items_here.<a class="code hl_function" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( items_here.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>() );</div>
<div class="line"><a id="l06018" name="l06018"></a><span class="lineno"> 6018</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06019" name="l06019"></a><span class="lineno"> 6019</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( items_here.<a class="code hl_function" href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">size</a>() == 1 &amp;&amp; items_here.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>()-&gt;typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a45ff89d042bbbf58ef37ec47e791b58c">itype_fake_smoke_plume</a> ) {</div>
<div class="line"><a id="l06020" name="l06020"></a><span class="lineno"> 6020</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;f_smoking_rack_active was empty, and had fake_smoke_plume!&quot;</span> );</div>
<div class="line"><a id="l06021" name="l06021"></a><span class="lineno"> 6021</span>        here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a37895b88321fb802eb5d2b52e255ba22">f_smoking_rack</a> );</div>
<div class="line"><a id="l06022" name="l06022"></a><span class="lineno"> 6022</span>        items_here.<a class="code hl_function" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( items_here.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>() );</div>
<div class="line"><a id="l06023" name="l06023"></a><span class="lineno"> 6023</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06024" name="l06024"></a><span class="lineno"> 6024</span>    }</div>
<div class="line"><a id="l06025" name="l06025"></a><span class="lineno"> 6025</span> </div>
<div class="line"><a id="l06026" name="l06026"></a><span class="lineno"> 6026</span>    <span class="keywordtype">bool</span> rem_f_opt = <span class="keyword">false</span>;</div>
<div class="line"><a id="l06027" name="l06027"></a><span class="lineno"> 6027</span>    <a class="code hl_class" href="classtime__duration.html">time_duration</a> time_left = 0_turns;</div>
<div class="line"><a id="l06028" name="l06028"></a><span class="lineno"> 6028</span>    <span class="keywordtype">int</span> hours_left = 0;</div>
<div class="line"><a id="l06029" name="l06029"></a><span class="lineno"> 6029</span>    <span class="keywordtype">int</span> minutes_left = 0;</div>
<div class="line"><a id="l06030" name="l06030"></a><span class="lineno"> 6030</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> f_volume = 0_ml;</div>
<div class="line"><a id="l06031" name="l06031"></a><span class="lineno"> 6031</span>    <span class="keywordtype">bool</span> f_check = <span class="keyword">false</span>;</div>
<div class="line"><a id="l06032" name="l06032"></a><span class="lineno"> 6032</span> </div>
<div class="line"><a id="l06033" name="l06033"></a><span class="lineno"> 6033</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;it : items_here ) {</div>
<div class="line"><a id="l06034" name="l06034"></a><span class="lineno"> 6034</span>        <span class="keywordflow">if</span>( it.is_food() ) {</div>
<div class="line"><a id="l06035" name="l06035"></a><span class="lineno"> 6035</span>            f_check = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06036" name="l06036"></a><span class="lineno"> 6036</span>            f_volume += it.volume();</div>
<div class="line"><a id="l06037" name="l06037"></a><span class="lineno"> 6037</span>        }</div>
<div class="line"><a id="l06038" name="l06038"></a><span class="lineno"> 6038</span>        <span class="keywordflow">if</span>( active &amp;&amp; it.typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a45ff89d042bbbf58ef37ec47e791b58c">itype_fake_smoke_plume</a> ) {</div>
<div class="line"><a id="l06039" name="l06039"></a><span class="lineno"> 6039</span>            time_left = <a class="code hl_function" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( it.item_counter );</div>
<div class="line"><a id="l06040" name="l06040"></a><span class="lineno"> 6040</span>            hours_left = to_hours&lt;int&gt;( time_left );</div>
<div class="line"><a id="l06041" name="l06041"></a><span class="lineno"> 6041</span>            minutes_left = to_minutes&lt;int&gt;( time_left ) + 1;</div>
<div class="line"><a id="l06042" name="l06042"></a><span class="lineno"> 6042</span>        }</div>
<div class="line"><a id="l06043" name="l06043"></a><span class="lineno"> 6043</span>    }</div>
<div class="line"><a id="l06044" name="l06044"></a><span class="lineno"> 6044</span> </div>
<div class="line"><a id="l06045" name="l06045"></a><span class="lineno"> 6045</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> empty = f_volume == 0_ml;</div>
<div class="line"><a id="l06046" name="l06046"></a><span class="lineno"> 6046</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> full = f_volume &gt;= <a class="code hl_variable" href="namespacesm__rack.html#a4c0565d55310ec1ac37c77821801a1fe">sm_rack::MAX_FOOD_VOLUME</a>;</div>
<div class="line"><a id="l06047" name="l06047"></a><span class="lineno"> 6047</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> full_portable = f_volume &gt;= <a class="code hl_variable" href="namespacesm__rack.html#a3bcab501bf1cf7fe8b9243df1c37f320">sm_rack::MAX_FOOD_VOLUME_PORTABLE</a>;</div>
<div class="line"><a id="l06048" name="l06048"></a><span class="lineno"> 6048</span>    <span class="keyword">const</span> <span class="keyword">auto</span> remaining_capacity = <a class="code hl_variable" href="namespacesm__rack.html#a4c0565d55310ec1ac37c77821801a1fe">sm_rack::MAX_FOOD_VOLUME</a> - f_volume;</div>
<div class="line"><a id="l06049" name="l06049"></a><span class="lineno"> 6049</span>    <span class="keyword">const</span> <span class="keyword">auto</span> remaining_capacity_portable = <a class="code hl_variable" href="namespacesm__rack.html#a3bcab501bf1cf7fe8b9243df1c37f320">sm_rack::MAX_FOOD_VOLUME_PORTABLE</a> - f_volume;</div>
<div class="line"><a id="l06050" name="l06050"></a><span class="lineno"> 6050</span>    <span class="keyword">const</span> <span class="keyword">auto</span> has_coal_in_inventory = p.<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a> ) &gt; 0;</div>
<div class="line"><a id="l06051" name="l06051"></a><span class="lineno"> 6051</span>    <span class="keyword">const</span> <span class="keyword">auto</span> coal_charges = <a class="code hl_function" href="iexamine_8cpp.html#a0270df10fe59879068e7fde158e3fe0b">count_charges_in_list</a>( &amp;*<a class="code hl_variable" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a>, items_here );</div>
<div class="line"><a id="l06052" name="l06052"></a><span class="lineno"> 6052</span>    <span class="keyword">const</span> <span class="keyword">auto</span> need_charges = <a class="code hl_function" href="iexamine_8cpp.html#a3ce49e4006756f57b68e826659d477db">get_charcoal_charges</a>( f_volume );</div>
<div class="line"><a id="l06053" name="l06053"></a><span class="lineno"> 6053</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_coal = coal_charges &gt; 0;</div>
<div class="line"><a id="l06054" name="l06054"></a><span class="lineno"> 6054</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_enough_coal = coal_charges &gt;= need_charges;</div>
<div class="line"><a id="l06055" name="l06055"></a><span class="lineno"> 6055</span> </div>
<div class="line"><a id="l06056" name="l06056"></a><span class="lineno"> 6056</span>    <a class="code hl_class" href="classuilist.html">uilist</a> smenu;</div>
<div class="line"><a id="l06057" name="l06057"></a><span class="lineno"> 6057</span>    smenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;What to do with the smoking rack:&quot;</span> );</div>
<div class="line"><a id="l06058" name="l06058"></a><span class="lineno"> 6058</span>    smenu.<a class="code hl_variable" href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">desc_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06059" name="l06059"></a><span class="lineno"> 6059</span> </div>
<div class="line"><a id="l06060" name="l06060"></a><span class="lineno"> 6060</span>    smenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 0, <span class="keyword">true</span>, <span class="charliteral">&#39;i&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Inspect smoking rack&quot;</span> ) );</div>
<div class="line"><a id="l06061" name="l06061"></a><span class="lineno"> 6061</span> </div>
<div class="line"><a id="l06062" name="l06062"></a><span class="lineno"> 6062</span>    <span class="keywordflow">if</span>( !active ) {</div>
<div class="line"><a id="l06063" name="l06063"></a><span class="lineno"> 6063</span>        smenu.<a class="code hl_function" href="classuilist.html#ae186aa01767463de50315306c6c51479">addentry_desc</a>( 1, !empty &amp;&amp; has_enough_coal, <span class="charliteral">&#39;l&#39;</span>,</div>
<div class="line"><a id="l06064" name="l06064"></a><span class="lineno"> 6064</span>                             empty ?  <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Light up and smoke food… insert some food for smoking first&quot;</span> ) :</div>
<div class="line"><a id="l06065" name="l06065"></a><span class="lineno"> 6065</span>                             !has_enough_coal ? <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a id="l06066" name="l06066"></a><span class="lineno"> 6066</span>                                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Light up and smoke food… need extra %d charges of charcoal&quot;</span> ),</div>
<div class="line"><a id="l06067" name="l06067"></a><span class="lineno"> 6067</span>                                 need_charges - coal_charges ) :</div>
<div class="line"><a id="l06068" name="l06068"></a><span class="lineno"> 6068</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Light up and smoke food&quot;</span> ),</div>
<div class="line"><a id="l06069" name="l06069"></a><span class="lineno"> 6069</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Light up the smoking rack and start smoking.  Smoking will take about 6 hours.&quot;</span> ) );</div>
<div class="line"><a id="l06070" name="l06070"></a><span class="lineno"> 6070</span>        <span class="keywordflow">if</span>( portable ) {</div>
<div class="line"><a id="l06071" name="l06071"></a><span class="lineno"> 6071</span>            smenu.<a class="code hl_function" href="classuilist.html#ae186aa01767463de50315306c6c51479">addentry_desc</a>( 2, !full_portable, <span class="charliteral">&#39;f&#39;</span>,</div>
<div class="line"><a id="l06072" name="l06072"></a><span class="lineno"> 6072</span>                                 full_portable ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Insert food for smoking… smoking rack is full&quot;</span> ) :</div>
<div class="line"><a id="l06073" name="l06073"></a><span class="lineno"> 6073</span>                                 <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Insert food for smoking… remaining capacity is %s %s&quot;</span> ),</div>
<div class="line"><a id="l06074" name="l06074"></a><span class="lineno"> 6074</span>                                                <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( remaining_capacity_portable ), <a class="code hl_function" href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a>() ),</div>
<div class="line"><a id="l06075" name="l06075"></a><span class="lineno"> 6075</span>                                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Fill the smoking rack with raw meat, fish or sausages for smoking or fruit or vegetable or smoked meat for drying.&quot;</span> ) );</div>
<div class="line"><a id="l06076" name="l06076"></a><span class="lineno"> 6076</span> </div>
<div class="line"><a id="l06077" name="l06077"></a><span class="lineno"> 6077</span>            smenu.<a class="code hl_function" href="classuilist.html#ae186aa01767463de50315306c6c51479">addentry_desc</a>( 8, !active, <span class="charliteral">&#39;z&#39;</span>,</div>
<div class="line"><a id="l06078" name="l06078"></a><span class="lineno"> 6078</span>                                 active ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You cannot disassemble this smoking rack while it is active!&quot;</span> ) :</div>
<div class="line"><a id="l06079" name="l06079"></a><span class="lineno"> 6079</span>                                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Disassemble the smoking rack&quot;</span> ), <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a id="l06080" name="l06080"></a><span class="lineno"> 6080</span> </div>
<div class="line"><a id="l06081" name="l06081"></a><span class="lineno"> 6081</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06082" name="l06082"></a><span class="lineno"> 6082</span>            smenu.<a class="code hl_function" href="classuilist.html#ae186aa01767463de50315306c6c51479">addentry_desc</a>( 2, !full, <span class="charliteral">&#39;f&#39;</span>,</div>
<div class="line"><a id="l06083" name="l06083"></a><span class="lineno"> 6083</span>                                 full ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Insert food for smoking… smoking rack is full&quot;</span> ) :</div>
<div class="line"><a id="l06084" name="l06084"></a><span class="lineno"> 6084</span>                                 <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Insert food for smoking… remaining capacity is %s %s&quot;</span> ),</div>
<div class="line"><a id="l06085" name="l06085"></a><span class="lineno"> 6085</span>                                                <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( remaining_capacity ), <a class="code hl_function" href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a>() ),</div>
<div class="line"><a id="l06086" name="l06086"></a><span class="lineno"> 6086</span>                                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Fill the smoking rack with raw meat, fish or sausages for smoking or fruit or vegetable or smoked meat for drying.&quot;</span> ) );</div>
<div class="line"><a id="l06087" name="l06087"></a><span class="lineno"> 6087</span>        }</div>
<div class="line"><a id="l06088" name="l06088"></a><span class="lineno"> 6088</span> </div>
<div class="line"><a id="l06089" name="l06089"></a><span class="lineno"> 6089</span>        <span class="keywordflow">if</span>( f_check ) {</div>
<div class="line"><a id="l06090" name="l06090"></a><span class="lineno"> 6090</span>            smenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 4, f_check, <span class="charliteral">&#39;e&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove food from smoking rack&quot;</span> ) );</div>
<div class="line"><a id="l06091" name="l06091"></a><span class="lineno"> 6091</span>        }</div>
<div class="line"><a id="l06092" name="l06092"></a><span class="lineno"> 6092</span> </div>
<div class="line"><a id="l06093" name="l06093"></a><span class="lineno"> 6093</span>        smenu.<a class="code hl_function" href="classuilist.html#ae186aa01767463de50315306c6c51479">addentry_desc</a>( 3, has_coal_in_inventory, <span class="charliteral">&#39;r&#39;</span>,</div>
<div class="line"><a id="l06094" name="l06094"></a><span class="lineno"> 6094</span>                             !has_coal_in_inventory ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Reload with charcoal… you don&#39;t have any&quot;</span> ) :</div>
<div class="line"><a id="l06095" name="l06095"></a><span class="lineno"> 6095</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Reload with charcoal&quot;</span> ),</div>
<div class="line"><a id="l06096" name="l06096"></a><span class="lineno"> 6096</span>                             <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a id="l06097" name="l06097"></a><span class="lineno"> 6097</span>                                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need %d charges of charcoal for %s %s of food.  Minimal amount of charcoal is %d charges.&quot;</span> ),</div>
<div class="line"><a id="l06098" name="l06098"></a><span class="lineno"> 6098</span>                                 <a class="code hl_variable" href="namespacesm__rack.html#a7cc090f68ea6ea6075047237c58e107a">sm_rack::CHARCOAL_PER_LITER</a>, <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( 1_liter ), <a class="code hl_function" href="units__utility_8cpp.html#a258633120714b8c5306866b2df52a41b">volume_units_long</a>(),</div>
<div class="line"><a id="l06099" name="l06099"></a><span class="lineno"> 6099</span>                                 <a class="code hl_variable" href="namespacesm__rack.html#aa933e8a2fbed5b7cad98eab58a025384">sm_rack::MIN_CHARCOAL</a> ) );</div>
<div class="line"><a id="l06100" name="l06100"></a><span class="lineno"> 6100</span> </div>
<div class="line"><a id="l06101" name="l06101"></a><span class="lineno"> 6101</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06102" name="l06102"></a><span class="lineno"> 6102</span>        smenu.<a class="code hl_function" href="classuilist.html#ae186aa01767463de50315306c6c51479">addentry_desc</a>( 7, <span class="keyword">true</span>, <span class="charliteral">&#39;x&#39;</span>,</div>
<div class="line"><a id="l06103" name="l06103"></a><span class="lineno"> 6103</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Quench burning charcoal&quot;</span> ),</div>
<div class="line"><a id="l06104" name="l06104"></a><span class="lineno"> 6104</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Quenching will stop smoking process, but also destroy all used charcoal.&quot;</span> ) );</div>
<div class="line"><a id="l06105" name="l06105"></a><span class="lineno"> 6105</span>    }</div>
<div class="line"><a id="l06106" name="l06106"></a><span class="lineno"> 6106</span> </div>
<div class="line"><a id="l06107" name="l06107"></a><span class="lineno"> 6107</span>    <span class="keywordflow">if</span>( has_coal ) {</div>
<div class="line"><a id="l06108" name="l06108"></a><span class="lineno"> 6108</span>        smenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 5, <span class="keyword">true</span>, <span class="charliteral">&#39;c&#39;</span>,</div>
<div class="line"><a id="l06109" name="l06109"></a><span class="lineno"> 6109</span>                        active ? <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Rake out %d excess charges of charcoal from smoking rack&quot;</span> ),</div>
<div class="line"><a id="l06110" name="l06110"></a><span class="lineno"> 6110</span>                                                coal_charges ) :</div>
<div class="line"><a id="l06111" name="l06111"></a><span class="lineno"> 6111</span>                        <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove %d charges of charcoal from smoking rack&quot;</span> ), coal_charges ) );</div>
<div class="line"><a id="l06112" name="l06112"></a><span class="lineno"> 6112</span>    }</div>
<div class="line"><a id="l06113" name="l06113"></a><span class="lineno"> 6113</span> </div>
<div class="line"><a id="l06114" name="l06114"></a><span class="lineno"> 6114</span>    smenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l06115" name="l06115"></a><span class="lineno"> 6115</span> </div>
<div class="line"><a id="l06116" name="l06116"></a><span class="lineno"> 6116</span>    <span class="keywordflow">switch</span>( smenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a id="l06117" name="l06117"></a><span class="lineno"> 6117</span>        <span class="keywordflow">case</span> 0: { <span class="comment">//inspect smoking rack</span></div>
<div class="line"><a id="l06118" name="l06118"></a><span class="lineno"> 6118</span>            std::string pop;</div>
<div class="line"><a id="l06119" name="l06119"></a><span class="lineno"> 6119</span>            <span class="keywordflow">if</span>( active ) {</div>
<div class="line"><a id="l06120" name="l06120"></a><span class="lineno"> 6120</span>                pop += <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There&#39;s a smoking rack here.  It is lit and smoking.&quot;</span> ), <a class="code hl_define" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l06121" name="l06121"></a><span class="lineno"> 6121</span>                <span class="keywordflow">if</span>( time_left &gt; 0_turns ) {</div>
<div class="line"><a id="l06122" name="l06122"></a><span class="lineno"> 6122</span>                    <span class="keywordflow">if</span>( minutes_left &gt; 60 ) {</div>
<div class="line"><a id="l06123" name="l06123"></a><span class="lineno"> 6123</span>                        pop += <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;It will finish smoking in about %d hour.&quot;</span>,</div>
<div class="line"><a id="l06124" name="l06124"></a><span class="lineno"> 6124</span>                                                        <span class="stringliteral">&quot;It will finish smoking in about %d hours.&quot;</span>,</div>
<div class="line"><a id="l06125" name="l06125"></a><span class="lineno"> 6125</span>                                                        hours_left ), hours_left ) + <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a id="l06126" name="l06126"></a><span class="lineno"> 6126</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( minutes_left &gt; 30 ) {</div>
<div class="line"><a id="l06127" name="l06127"></a><span class="lineno"> 6127</span>                        pop += <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It will finish smoking in less than an hour.&quot;</span> ) + std::string( <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a id="l06128" name="l06128"></a><span class="lineno"> 6128</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06129" name="l06129"></a><span class="lineno"> 6129</span>                        pop += <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It should take about %d minutes to finish smoking.&quot;</span> ),</div>
<div class="line"><a id="l06130" name="l06130"></a><span class="lineno"> 6130</span>                                              minutes_left ) + <span class="stringliteral">&quot;\n &quot;</span>;</div>
<div class="line"><a id="l06131" name="l06131"></a><span class="lineno"> 6131</span>                    }</div>
<div class="line"><a id="l06132" name="l06132"></a><span class="lineno"> 6132</span>                }</div>
<div class="line"><a id="l06133" name="l06133"></a><span class="lineno"> 6133</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06134" name="l06134"></a><span class="lineno"> 6134</span>                pop += <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There&#39;s a smoking rack here.&quot;</span> ), <a class="code hl_define" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l06135" name="l06135"></a><span class="lineno"> 6135</span>            }</div>
<div class="line"><a id="l06136" name="l06136"></a><span class="lineno"> 6136</span>            pop += <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You inspect its contents and find: &quot;</span> ), <a class="code hl_define" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l06137" name="l06137"></a><span class="lineno"> 6137</span>            <span class="keywordflow">if</span>( items_here.empty() ) {</div>
<div class="line"><a id="l06138" name="l06138"></a><span class="lineno"> 6138</span>                pop += <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;…that it is empty.&quot;</span> );</div>
<div class="line"><a id="l06139" name="l06139"></a><span class="lineno"> 6139</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06140" name="l06140"></a><span class="lineno"> 6140</span>                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;it : items_here ) {</div>
<div class="line"><a id="l06141" name="l06141"></a><span class="lineno"> 6141</span>                    <span class="keywordflow">if</span>( it.typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#a45ff89d042bbbf58ef37ec47e791b58c">itype_fake_smoke_plume</a> ) {</div>
<div class="line"><a id="l06142" name="l06142"></a><span class="lineno"> 6142</span>                        pop += <span class="stringliteral">&quot;\n&quot;</span> + <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You see some smoldering embers there.&quot;</span> ), <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l06143" name="l06143"></a><span class="lineno"> 6143</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06144" name="l06144"></a><span class="lineno"> 6144</span>                    }</div>
<div class="line"><a id="l06145" name="l06145"></a><span class="lineno"> 6145</span>                    pop += <span class="stringliteral">&quot;-&gt; &quot;</span> + <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( it.typeId(), it.charges ) + <span class="stringliteral">&quot; (&quot;</span> + <a class="code hl_function" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">std::to_string</a>( it.charges ) + <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line"><a id="l06146" name="l06146"></a><span class="lineno"> 6146</span>                }</div>
<div class="line"><a id="l06147" name="l06147"></a><span class="lineno"> 6147</span>            }</div>
<div class="line"><a id="l06148" name="l06148"></a><span class="lineno"> 6148</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( pop, <a class="code hl_enumvalue" href="output_8h.html#ab214b85345aeab978acdcea0250f27f5aad1f68b93664b1917fafc7cf9b7537d3">PF_NONE</a> );</div>
<div class="line"><a id="l06149" name="l06149"></a><span class="lineno"> 6149</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06150" name="l06150"></a><span class="lineno"> 6150</span>        }</div>
<div class="line"><a id="l06151" name="l06151"></a><span class="lineno"> 6151</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l06152" name="l06152"></a><span class="lineno"> 6152</span>            <span class="comment">//activate</span></div>
<div class="line"><a id="l06153" name="l06153"></a><span class="lineno"> 6153</span>            <span class="keywordflow">if</span>( active ) {</div>
<div class="line"><a id="l06154" name="l06154"></a><span class="lineno"> 6154</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It is already lit and smoking.&quot;</span> ) );</div>
<div class="line"><a id="l06155" name="l06155"></a><span class="lineno"> 6155</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06156" name="l06156"></a><span class="lineno"> 6156</span>                <a class="code hl_function" href="iexamine_8cpp.html#a4b31b0ee2de59eed6a505ed3e49577be">smoker_activate</a>( p, examp );</div>
<div class="line"><a id="l06157" name="l06157"></a><span class="lineno"> 6157</span>            }</div>
<div class="line"><a id="l06158" name="l06158"></a><span class="lineno"> 6158</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06159" name="l06159"></a><span class="lineno"> 6159</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l06160" name="l06160"></a><span class="lineno"> 6160</span>            <span class="comment">// load food</span></div>
<div class="line"><a id="l06161" name="l06161"></a><span class="lineno"> 6161</span>            <span class="keywordflow">if</span>( portable ) {</div>
<div class="line"><a id="l06162" name="l06162"></a><span class="lineno"> 6162</span>                <a class="code hl_function" href="iexamine_8cpp.html#a594fb6d834257ee8c00fc30c91beb9ba">smoker_load_food</a>( p, examp, remaining_capacity_portable );</div>
<div class="line"><a id="l06163" name="l06163"></a><span class="lineno"> 6163</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06164" name="l06164"></a><span class="lineno"> 6164</span>                <a class="code hl_function" href="iexamine_8cpp.html#a594fb6d834257ee8c00fc30c91beb9ba">smoker_load_food</a>( p, examp, remaining_capacity );</div>
<div class="line"><a id="l06165" name="l06165"></a><span class="lineno"> 6165</span>            }</div>
<div class="line"><a id="l06166" name="l06166"></a><span class="lineno"> 6166</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06167" name="l06167"></a><span class="lineno"> 6167</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l06168" name="l06168"></a><span class="lineno"> 6168</span>            <span class="comment">// load charcoal</span></div>
<div class="line"><a id="l06169" name="l06169"></a><span class="lineno"> 6169</span>            <a class="code hl_function" href="namespaceiexamine.html#aa030e7db01d6a9dd3c6e2cb7e42b7d47">reload_furniture</a>( p, examp );</div>
<div class="line"><a id="l06170" name="l06170"></a><span class="lineno"> 6170</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06171" name="l06171"></a><span class="lineno"> 6171</span>        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l06172" name="l06172"></a><span class="lineno"> 6172</span>            <span class="comment">// remove food</span></div>
<div class="line"><a id="l06173" name="l06173"></a><span class="lineno"> 6173</span>            rem_f_opt = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06174" name="l06174"></a><span class="lineno"> 6174</span>        <span class="comment">/* fallthrough */</span></div>
<div class="line"><a id="l06175" name="l06175"></a><span class="lineno"> 6175</span>        <span class="keywordflow">case</span> 5: {</div>
<div class="line"><a id="l06176" name="l06176"></a><span class="lineno"> 6176</span>            <span class="comment">//remove charcoal</span></div>
<div class="line"><a id="l06177" name="l06177"></a><span class="lineno"> 6177</span>            <span class="keywordflow">for</span>( <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> it = items_here.begin(); it != items_here.end(); ) {</div>
<div class="line"><a id="l06178" name="l06178"></a><span class="lineno"> 6178</span>                <span class="keywordflow">if</span>( ( rem_f_opt &amp;&amp; it-&gt;is_food() ) || ( !rem_f_opt &amp;&amp; ( it-&gt;typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a> ) ) ) {</div>
<div class="line"><a id="l06179" name="l06179"></a><span class="lineno"> 6179</span>                    <span class="comment">// get handling cost before the item reference is invalidated</span></div>
<div class="line"><a id="l06180" name="l06180"></a><span class="lineno"> 6180</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> handling_cost = -p.<a class="code hl_function" href="classCharacter.html#a33b54fd8799f4b1c9f6b0af42dbf33f8">item_handling_cost</a>( *it );</div>
<div class="line"><a id="l06181" name="l06181"></a><span class="lineno"> 6181</span> </div>
<div class="line"><a id="l06182" name="l06182"></a><span class="lineno"> 6182</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You remove %s from the rack.&quot;</span> ), it-&gt;tname() );</div>
<div class="line"><a id="l06183" name="l06183"></a><span class="lineno"> 6183</span>                    here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), *it );</div>
<div class="line"><a id="l06184" name="l06184"></a><span class="lineno"> 6184</span>                    it = items_here.erase( it );</div>
<div class="line"><a id="l06185" name="l06185"></a><span class="lineno"> 6185</span>                    p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( handling_cost );</div>
<div class="line"><a id="l06186" name="l06186"></a><span class="lineno"> 6186</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06187" name="l06187"></a><span class="lineno"> 6187</span>                    ++it;</div>
<div class="line"><a id="l06188" name="l06188"></a><span class="lineno"> 6188</span>                }</div>
<div class="line"><a id="l06189" name="l06189"></a><span class="lineno"> 6189</span>            }</div>
<div class="line"><a id="l06190" name="l06190"></a><span class="lineno"> 6190</span>            <span class="keywordflow">if</span>( portable &amp;&amp; active &amp;&amp; rem_f_opt ) {</div>
<div class="line"><a id="l06191" name="l06191"></a><span class="lineno"> 6191</span>                here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a5c0cdd6ff07f840f6228246012664c32">f_metal_smoking_rack</a> );</div>
<div class="line"><a id="l06192" name="l06192"></a><span class="lineno"> 6192</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You stop the smoking process.&quot;</span> ) );</div>
<div class="line"><a id="l06193" name="l06193"></a><span class="lineno"> 6193</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( active &amp;&amp; rem_f_opt ) {</div>
<div class="line"><a id="l06194" name="l06194"></a><span class="lineno"> 6194</span>                here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a37895b88321fb802eb5d2b52e255ba22">f_smoking_rack</a> );</div>
<div class="line"><a id="l06195" name="l06195"></a><span class="lineno"> 6195</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You stop the smoking process.&quot;</span> ) );</div>
<div class="line"><a id="l06196" name="l06196"></a><span class="lineno"> 6196</span>            }</div>
<div class="line"><a id="l06197" name="l06197"></a><span class="lineno"> 6197</span>        }</div>
<div class="line"><a id="l06198" name="l06198"></a><span class="lineno"> 6198</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06199" name="l06199"></a><span class="lineno"> 6199</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l06200" name="l06200"></a><span class="lineno"> 6200</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a id="l06201" name="l06201"></a><span class="lineno"> 6201</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06202" name="l06202"></a><span class="lineno"> 6202</span>        <span class="keywordflow">case</span> 7:</div>
<div class="line"><a id="l06203" name="l06203"></a><span class="lineno"> 6203</span>            <span class="keywordflow">if</span>( portable ) {</div>
<div class="line"><a id="l06204" name="l06204"></a><span class="lineno"> 6204</span>                here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a5c0cdd6ff07f840f6228246012664c32">f_metal_smoking_rack</a> );</div>
<div class="line"><a id="l06205" name="l06205"></a><span class="lineno"> 6205</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You stop the smoking process.&quot;</span> ) );</div>
<div class="line"><a id="l06206" name="l06206"></a><span class="lineno"> 6206</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06207" name="l06207"></a><span class="lineno"> 6207</span>                here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a37895b88321fb802eb5d2b52e255ba22">f_smoking_rack</a> );</div>
<div class="line"><a id="l06208" name="l06208"></a><span class="lineno"> 6208</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You stop the smoking process.&quot;</span> ) );</div>
<div class="line"><a id="l06209" name="l06209"></a><span class="lineno"> 6209</span>            }</div>
<div class="line"><a id="l06210" name="l06210"></a><span class="lineno"> 6210</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06211" name="l06211"></a><span class="lineno"> 6211</span>        <span class="keywordflow">case</span> 8:</div>
<div class="line"><a id="l06212" name="l06212"></a><span class="lineno"> 6212</span>            here.<a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a5c0cdd6ff07f840f6228246012664c32">f_metal_smoking_rack</a> );</div>
<div class="line"><a id="l06213" name="l06213"></a><span class="lineno"> 6213</span>            <a class="code hl_function" href="namespaceiexamine.html#ac5019d45288b6ccbee9d1b57c1ebbb33">deployed_furniture</a>( p, examp );</div>
<div class="line"><a id="l06214" name="l06214"></a><span class="lineno"> 6214</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06215" name="l06215"></a><span class="lineno"> 6215</span>    }</div>
<div class="line"><a id="l06216" name="l06216"></a><span class="lineno"> 6216</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_a3ce49e4006756f57b68e826659d477db"><div class="ttname"><a href="iexamine_8cpp.html#a3ce49e4006756f57b68e826659d477db">get_charcoal_charges</a></div><div class="ttdeci">static int get_charcoal_charges(units::volume food)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05320">iexamine.cpp:5320</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a45ff89d042bbbf58ef37ec47e791b58c"><div class="ttname"><a href="iexamine_8cpp.html#a45ff89d042bbbf58ef37ec47e791b58c">itype_fake_smoke_plume</a></div><div class="ttdeci">static const itype_id itype_fake_smoke_plume(&quot;fake_smoke_plume&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a4b31b0ee2de59eed6a505ed3e49577be"><div class="ttname"><a href="iexamine_8cpp.html#a4b31b0ee2de59eed6a505ed3e49577be">smoker_activate</a></div><div class="ttdeci">static void smoker_activate(player &amp;p, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05391">iexamine.cpp:5391</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a594fb6d834257ee8c00fc30c91beb9ba"><div class="ttname"><a href="iexamine_8cpp.html#a594fb6d834257ee8c00fc30c91beb9ba">smoker_load_food</a></div><div class="ttdeci">static void smoker_load_food(player &amp;p, const tripoint &amp;examp, const units::volume &amp;remaining_capacity)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05597">iexamine.cpp:5597</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a37895b88321fb802eb5d2b52e255ba22"><div class="ttname"><a href="mapdata_8cpp.html#a37895b88321fb802eb5d2b52e255ba22">f_smoking_rack</a></div><div class="ttdeci">furn_id f_smoking_rack</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01131">mapdata.cpp:1131</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a5c0cdd6ff07f840f6228246012664c32"><div class="ttname"><a href="mapdata_8cpp.html#a5c0cdd6ff07f840f6228246012664c32">f_metal_smoking_rack</a></div><div class="ttdeci">furn_id f_metal_smoking_rack</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01131">mapdata.cpp:1131</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_aa030e7db01d6a9dd3c6e2cb7e42b7d47"><div class="ttname"><a href="namespaceiexamine.html#aa030e7db01d6a9dd3c6e2cb7e42b7d47">iexamine::reload_furniture</a></div><div class="ttdeci">void reload_furniture(player &amp;p, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03922">iexamine.cpp:3922</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_ac5019d45288b6ccbee9d1b57c1ebbb33"><div class="ttname"><a href="namespaceiexamine.html#ac5019d45288b6ccbee9d1b57c1ebbb33">iexamine::deployed_furniture</a></div><div class="ttdeci">void deployed_furniture(player &amp;p, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01240">iexamine.cpp:1240</a></div></div>
<div class="ttc" id="anamespacesm__rack_html_a3bcab501bf1cf7fe8b9243df1c37f320"><div class="ttname"><a href="namespacesm__rack.html#a3bcab501bf1cf7fe8b9243df1c37f320">sm_rack::MAX_FOOD_VOLUME_PORTABLE</a></div><div class="ttdeci">const units::volume MAX_FOOD_VOLUME_PORTABLE</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05317">iexamine.cpp:5317</a></div></div>
<div class="ttc" id="anamespacesm__rack_html_a7cc090f68ea6ea6075047237c58e107a"><div class="ttname"><a href="namespacesm__rack.html#a7cc090f68ea6ea6075047237c58e107a">sm_rack::CHARCOAL_PER_LITER</a></div><div class="ttdeci">const int CHARCOAL_PER_LITER</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05315">iexamine.cpp:5315</a></div></div>
<div class="ttc" id="anamespacesm__rack_html_aa933e8a2fbed5b7cad98eab58a025384"><div class="ttname"><a href="namespacesm__rack.html#aa933e8a2fbed5b7cad98eab58a025384">sm_rack::MIN_CHARCOAL</a></div><div class="ttdeci">const int MIN_CHARCOAL</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05314">iexamine.cpp:5314</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a258633120714b8c5306866b2df52a41b"><div class="ttname"><a href="units__utility_8cpp.html#a258633120714b8c5306866b2df52a41b">volume_units_long</a></div><div class="ttdeci">const char * volume_units_long()</div><div class="ttdoc">Create a units label for a volume value.</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00049">units_utility.cpp:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="ui_8cpp_source.html#l00952">uilist::addentry_desc()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="color_8h_source.html#l00022">c_green</a>, <a class="el" href="color_8h_source.html#l00021">c_red</a>, <a class="el" href="iexamine_8cpp_source.html#l05315">sm_rack::CHARCOAL_PER_LITER</a>, <a class="el" href="visitable_8cpp_source.html#l00946">visitable&lt; T &gt;::charges_of()</a>, <a class="el" href="color_8cpp_source.html#l00669">colorize()</a>, <a class="el" href="iexamine_8cpp_source.html#l03912">count_charges_in_list()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="iexamine_8cpp_source.html#l01240">deployed_furniture()</a>, <a class="el" href="ui_8h_source.html#l00352">uilist::desc_enabled</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00153">map_stack::erase()</a>, <a class="el" href="mapdata_8cpp_source.html#l01131">f_metal_smoking_rack</a>, <a class="el" href="mapdata_8cpp_source.html#l01131">f_smoking_rack</a>, <a class="el" href="output_8cpp_source.html#l02020">format_volume()</a>, <a class="el" href="calendar_8h_source.html#l00204">time_duration::from_turns()</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01424">map::furn_set()</a>, <a class="el" href="iexamine_8cpp_source.html#l05320">get_charcoal_charges()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="character_8cpp_source.html#l07472">Character::item_handling_cost()</a>, <a class="el" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a>, <a class="el" href="iexamine_8cpp.html#a45ff89d042bbbf58ef37ec47e791b58c">itype_fake_smoke_plume</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="iexamine_8cpp_source.html#l05316">sm_rack::MAX_FOOD_VOLUME</a>, <a class="el" href="iexamine_8cpp_source.html#l05317">sm_rack::MAX_FOOD_VOLUME_PORTABLE</a>, <a class="el" href="iexamine_8cpp_source.html#l05314">sm_rack::MIN_CHARCOAL</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="item_8cpp_source.html#l09951">item::nname()</a>, <a class="el" href="output_8h_source.html#l00450">PF_NONE</a>, <a class="el" href="output_8cpp_source.html#l00764">popup()</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="iexamine_8cpp_source.html#l03922">reload_furniture()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="item__stack_8cpp_source.html#l00010">item_stack::size()</a>, <a class="el" href="iexamine_8cpp_source.html#l05391">smoker_activate()</a>, <a class="el" href="iexamine_8cpp_source.html#l05597">smoker_load_food()</a>, <a class="el" href="string__formatter_8h_source.html#l00430">string_format()</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="calendar_8cpp_source.html#l00327">to_string()</a>, <a class="el" href="translations_8cpp_source.html#l00036">vgettext()</a>, <a class="el" href="units__utility_8cpp_source.html#l00037">volume_units_abbr()</a>, and <a class="el" href="units__utility_8cpp_source.html#l00049">volume_units_long()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ad884d29edd1296ac800ef9e187ecee5a" name="ad884d29edd1296ac800ef9e187ecee5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad884d29edd1296ac800ef9e187ecee5a">&#9670;&nbsp;</a></span>toilet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::toilet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If there's water, allow its usage but add chance of poison. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00858">858</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>{</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    <span class="keyword">auto</span> items = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>    <span class="keyword">auto</span> water = items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>();</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>    <span class="keywordflow">for</span>( ; water != items.end(); ++water ) {</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>        <span class="keywordflow">if</span>( water-&gt;typeId() == <a class="code hl_variable" href="iexamine_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) {</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>        }</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>    }</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span> </div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>    <span class="keywordflow">if</span>( water == items.end() ) {</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This toilet is empty.&quot;</span> ) );</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !water-&gt;made_of( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) ) {</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The toilet water is frozen solid!&quot;</span> ) );</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>        <span class="comment">// Use a different poison value each time water is drawn from the toilet.</span></div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>        water-&gt;poison = <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ? 0 : <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 3 );</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span> </div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>        <span class="comment">// TODO: use me</span></div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>        ( void ) p;</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>        <a class="code hl_function" href="namespaceliquid__handler.html#ae4b5ac39dbc51d5559ba9d6f901395f0">liquid_handler::handle_liquid_from_ground</a>( water, examp );</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>    }</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_abfd8b1d23930a50d7f122f0d39538649"><div class="ttname"><a href="iexamine_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a></div><div class="ttdeci">static const itype_id itype_water(&quot;water&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00114">liquid_handler::handle_liquid_from_ground()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="iexamine_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, <a class="el" href="enums_8h_source.html#l00175">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, and <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="inventory_8cpp_source.html#l00509">inventory::form_from_map()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a6987b7ccb6bfbaa1be3d45360eb106f6" name="a6987b7ccb6bfbaa1be3d45360eb106f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6987b7ccb6bfbaa1be3d45360eb106f6">&#9670;&nbsp;</a></span>toPumpFuel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iexamine::toPumpFuel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>units</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04370">4370</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04371" name="l04371"></a><span class="lineno"> 4371</span>{</div>
<div class="line"><a id="l04372" name="l04372"></a><span class="lineno"> 4372</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l04373" name="l04373"></a><span class="lineno"> 4373</span>    <span class="keyword">auto</span> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( src );</div>
<div class="line"><a id="l04374" name="l04374"></a><span class="lineno"> 4374</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> item_it = items.begin(); item_it != items.end(); ++item_it ) {</div>
<div class="line"><a id="l04375" name="l04375"></a><span class="lineno"> 4375</span>        <span class="keywordflow">if</span>( item_it-&gt;made_of( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) ) {</div>
<div class="line"><a id="l04376" name="l04376"></a><span class="lineno"> 4376</span>            <span class="keywordflow">if</span>( item_it-&gt;charges &lt; <a class="code hl_namespace" href="namespaceunits.html">units</a> ) {</div>
<div class="line"><a id="l04377" name="l04377"></a><span class="lineno"> 4377</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04378" name="l04378"></a><span class="lineno"> 4378</span>            }</div>
<div class="line"><a id="l04379" name="l04379"></a><span class="lineno"> 4379</span> </div>
<div class="line"><a id="l04380" name="l04380"></a><span class="lineno"> 4380</span>            item_it-&gt;charges -= <a class="code hl_namespace" href="namespaceunits.html">units</a>;</div>
<div class="line"><a id="l04381" name="l04381"></a><span class="lineno"> 4381</span> </div>
<div class="line"><a id="l04382" name="l04382"></a><span class="lineno"> 4382</span>            <a class="code hl_class" href="classitem.html">item</a> liq_d( item_it-&gt;type, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <a class="code hl_namespace" href="namespaceunits.html">units</a> );</div>
<div class="line"><a id="l04383" name="l04383"></a><span class="lineno"> 4383</span> </div>
<div class="line"><a id="l04384" name="l04384"></a><span class="lineno"> 4384</span>            <span class="keyword">const</span> <span class="keyword">auto</span> backup_pump = here.<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( dst );</div>
<div class="line"><a id="l04385" name="l04385"></a><span class="lineno"> 4385</span>            here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( dst, <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">ter_str_id::NULL_ID</a>() );</div>
<div class="line"><a id="l04386" name="l04386"></a><span class="lineno"> 4386</span>            here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( dst, liq_d );</div>
<div class="line"><a id="l04387" name="l04387"></a><span class="lineno"> 4387</span>            here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( dst, backup_pump );</div>
<div class="line"><a id="l04388" name="l04388"></a><span class="lineno"> 4388</span> </div>
<div class="line"><a id="l04389" name="l04389"></a><span class="lineno"> 4389</span>            <span class="keywordflow">if</span>( item_it-&gt;charges &lt; 1 ) {</div>
<div class="line"><a id="l04390" name="l04390"></a><span class="lineno"> 4390</span>                items.erase( item_it );</div>
<div class="line"><a id="l04391" name="l04391"></a><span class="lineno"> 4391</span>            }</div>
<div class="line"><a id="l04392" name="l04392"></a><span class="lineno"> 4392</span> </div>
<div class="line"><a id="l04393" name="l04393"></a><span class="lineno"> 4393</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04394" name="l04394"></a><span class="lineno"> 4394</span>        }</div>
<div class="line"><a id="l04395" name="l04395"></a><span class="lineno"> 4395</span>    }</div>
<div class="line"><a id="l04396" name="l04396"></a><span class="lineno"> 4396</span> </div>
<div class="line"><a id="l04397" name="l04397"></a><span class="lineno"> 4397</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04398" name="l04398"></a><span class="lineno"> 4398</span>}</div>
<div class="ttc" id="aclassstring__id_html_ae29dd8ed38d2b5eb443a65ad46f10b2d"><div class="ttname"><a href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">string_id&lt; ter_t &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; ter_t &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="anamespaceunits_html"><div class="ttname"><a href="namespaceunits.html">units</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8cpp_source.html#l00007">units.cpp:8</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="enums_8h_source.html#l00175">LIQUID</a>, <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">string_id&lt; ter_t &gt;::NULL_ID()</a>, <a class="el" href="map_8cpp_source.html#l01562">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00813">hacking_activity_actor::finish()</a>, and <a class="el" href="iexamine_8cpp_source.html#l04440">pay_gas()</a>.</p>

</div>
</div>
<a id="ab9103bcb0e9cb4755b445e5395a0a62f" name="ab9103bcb0e9cb4755b445e5395a0a62f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9103bcb0e9cb4755b445e5395a0a62f">&#9670;&nbsp;</a></span>transform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::transform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transform the examined object into the object specified by its transforms_into property. </p>
<p >If the new object has a message property, it is displayed as if the notify examine_action was used. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01642">1642</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>{</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>    std::string <a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a>;</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>    std::string <a class="code hl_enumvalue" href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61a29ea7ce63137484da296feacfa4f021c">prompt</a>;</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span> </div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_furn( pos ) ) {</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>        <a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.furn( pos ).obj().message;</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>        <a class="code hl_enumvalue" href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61a29ea7ce63137484da296feacfa4f021c">prompt</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.furn( pos ).obj().prompt;</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>        <a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter( pos ).obj().message;</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>        <a class="code hl_enumvalue" href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61a29ea7ce63137484da296feacfa4f021c">prompt</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter( pos ).obj().prompt;</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>    }</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span> </div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>    <a class="code hl_class" href="classuilist.html">uilist</a> selection_menu;</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>    selection_menu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Select an action&quot;</span> );</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>    selection_menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 0, <span class="keyword">true</span>, <span class="charliteral">&#39;g&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Get items&quot;</span> ) );</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>    selection_menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 1, <span class="keyword">true</span>, <span class="charliteral">&#39;t&#39;</span>, !<a class="code hl_enumvalue" href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61a29ea7ce63137484da296feacfa4f021c">prompt</a>.empty() ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <a class="code hl_enumvalue" href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61a29ea7ce63137484da296feacfa4f021c">prompt</a> ) : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Transform furniture&quot;</span> ) );</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>    selection_menu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span> </div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>    <span class="keywordflow">switch</span>( selection_menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>        <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, pos );</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>            <a class="code hl_function" href="namespacepickup.html#a4346ea9e7a9b05efee7cef2fa3838f16">pickup::pick_up</a>( pos, 0 );</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>        <span class="keywordflow">case</span> 1: {</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_furn( pos ) ) {</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>                <span class="keywordflow">if</span>( !<a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a>.empty() ) {</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> ) );</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>                }</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.furn_set( pos, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.get_furn_transforms_into( pos ) );</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>                <span class="keywordflow">if</span>( !<a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a>.empty() ) {</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <a class="code hl_variable" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> ) );</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>                }</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter_set( pos, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.get_ter_transforms_into( pos ) );</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>            }</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>        }</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( p, pos );</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>    }</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>}</div>
<div class="ttc" id="anamespacepickup_html_a03a2e6f98be01a67be0ad42cb7aa4c61a29ea7ce63137484da296feacfa4f021c"><div class="ttname"><a href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61a29ea7ce63137484da296feacfa4f021c">pickup::prompt</a></div><div class="ttdeci">@ prompt</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00031">pickup.h:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="mapgen_8cpp_source.html#l00411">mapgen_defer::message</a>, <a class="el" href="dialogue_8h_source.html#l00033">none</a>, <a class="el" href="pickup_8cpp_source.html#l00575">pickup::pick_up()</a>, <a class="el" href="pickup_8h_source.html#l00030">pickup::prompt</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, and <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>.</p>

<p class="reference">Referenced by <a class="el" href="inventory__ui_8cpp_source.html#l01168">inventory_selector::add_items()</a>, <a class="el" href="mod__manager_8cpp_source.html#l00122">mod_manager::all_mods()</a>, <a class="el" href="coordinates_8h_source.html#l00596">closest_points_first()</a>, <a class="el" href="requirements_8cpp_source.html#l01401">deduped_requirement_data::deduped_requirement_data()</a>, <a class="el" href="help_8cpp_source.html#l00140">help::display_help()</a>, <a class="el" href="output_8h_source.html#l00746">draw_tabs()</a>, <a class="el" href="dump_8cpp_source.html#l00039">game::dump_stats()</a>, <a class="el" href="filesystem_8cpp_source.html#l00449">ensure_valid_file_name()</a>, <a class="el" href="game_8cpp_source.html#l05463">game::examine()</a>, <a class="el" href="item_8cpp_source.html#l03646">item::final_info()</a>, <a class="el" href="harvest_8cpp_source.html#l00108">harvest_list::finalize()</a>, <a class="el" href="effect_8cpp_source.html#l00067">find_all_effect_types()</a>, <a class="el" href="scores__ui_8cpp_source.html#l00024">get_achievements_text()</a>, <a class="el" href="mission_8cpp_source.html#l00467">mission::get_all_item_group_matches()</a>, <a class="el" href="crafting_8cpp_source.html#l02384">crafting::get_books_for_recipe()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l01315">overmapbuffer::get_camps_near()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l01349">overmapbuffer::get_cities_near()</a>, <a class="el" href="input_8cpp_source.html#l00955">input_context::get_direction()</a>, <a class="el" href="skill_8cpp_source.html#l00067">Skill::get_skills_sorted_by()</a>, <a class="el" href="inventory__ui_8cpp_source.html#l01485">inventory_selector::get_stats()</a>, <a class="el" href="item_8cpp_source.html#l07855">item::gun_all_modes()</a>, <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, <a class="el" href="item__action_8cpp_source.html#l00231">game::item_action_menu()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l01773">inscribe_actor::item_inscription()</a>, <a class="el" href="string__utils_8cpp_source.html#l00012">lcmatch()</a>, <a class="el" href="coordinates_8h_source.html#l00548">line_to()</a>, <a class="el" href="mapdata_8cpp_source.html#l01286">map_data_common_t::load()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02634">holster_actor::load()</a>, <a class="el" href="action_8cpp_source.html#l00663">anonymous_namespace{action.cpp}::make_register_actions()</a>, <a class="el" href="action_8cpp_source.html#l00673">anonymous_namespace{action.cpp}::make_register_categories()</a>, <a class="el" href="debug_8cpp_source.html#l01511">game_info::mods_loaded()</a>, <a class="el" href="mutation_8cpp_source.html#l00674">normalized_map()</a>, <a class="el" href="item_8cpp_source.html#l04317">item::on_wear()</a>, <a class="el" href="overmap__special_8h_source.html#l00152">overmap_special_batch::overmap_special_batch()</a>, <a class="el" href="requirements_8cpp_source.html#l00370">requirement_data::print_all_objs()</a>, <a class="el" href="ranged_8cpp_source.html#l01393">print_ranged_chance()</a>, <a class="el" href="messages_8cpp_source.html#l00244">anonymous_namespace{messages.cpp}::messages_impl::recent_messages()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02871">bandolier_actor::reload()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00458">pickup::reorder_for_dropping()</a>, <a class="el" href="character__functions_8cpp_source.html#l00750">character_funcs::select_ammo()</a>, <a class="el" href="crafting__gui_8cpp_source.html#l00163">select_crafting_recipe()</a>, <a class="el" href="character_8cpp_source.html#l07634">Character::shout()</a>, <a class="el" href="cata__algo_8h_source.html#l00025">cata::sort_by_rating()</a>, <a class="el" href="string__utils_8cpp_source.html#l00243">to_lower_case()</a>, <a class="el" href="string__utils_8cpp_source.html#l00227">to_upper_case()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00911">spell_effect::transform_blast()</a>, <a class="el" href="character__functions_8cpp_source.html#l00506">character_funcs::try_wield_contents()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02722">holster_actor::use()</a>, and <a class="el" href="wish_8cpp_source.html#l00660">debug_menu::wishitem()</a>.</p>

</div>
</div>
<a id="a12c889cd7f3451693608bd69ab282009" name="a12c889cd7f3451693608bd69ab282009"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12c889cd7f3451693608bd69ab282009">&#9670;&nbsp;</a></span>translocator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::translocator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00392">392</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>{</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> omt_loc( <a class="code hl_function" href="coordinate__conversions_8cpp.html#ad1ca17bea3d4e8bbd38de078f5d504bf">ms_to_omt_copy</a>( <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().getabs( examp ) ) );</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <a class="code hl_class" href="classavatar.html">avatar</a> &amp;player_character = <a class="code hl_function" href="avatar_8cpp.html#a2eddae690431cd32ce7a091217d68a3a">get_avatar</a>();</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> activated = player_character.<a class="code hl_variable" href="classavatar.html#a50440050ab962a28f493c25bca4bb441">translocators</a>-&gt;knows_translocator( omt_loc );</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="keywordflow">if</span>( !activated ) {</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.translocators-&gt;activate_teleporter( omt_loc, examp );</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Translocator gate active.&quot;</span> ) );</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Do you want to deactivate this active Translocator?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.translocators-&gt;deactivate_teleporter( omt_loc, examp );</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>        }</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    }</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>}</div>
<div class="ttc" id="aavatar_8cpp_html_a2eddae690431cd32ce7a091217d68a3a"><div class="ttname"><a href="avatar_8cpp.html#a2eddae690431cd32ce7a091217d68a3a">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00104">avatar.cpp:104</a></div></div>
<div class="ttc" id="aclassavatar_html_a50440050ab962a28f493c25bca4bb441"><div class="ttname"><a href="classavatar.html#a50440050ab962a28f493c25bca4bb441">avatar::translocators</a></div><div class="ttdeci">pimpl&lt; teleporter_list &gt; translocators</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00179">avatar.h:179</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="avatar_8cpp_source.html#l00104">get_avatar()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="coordinate__conversions_8cpp_source.html#l00162">ms_to_omt_copy()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, and <a class="el" href="avatar_8h_source.html#l00179">avatar::translocators</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a774f651039acdb513863b4ab929bcadb" name="a774f651039acdb513863b4ab929bcadb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a774f651039acdb513863b4ab929bcadb">&#9670;&nbsp;</a></span>trap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::trap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03818">3818</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03819" name="l03819"></a><span class="lineno"> 3819</span>{</div>
<div class="line"><a id="l03820" name="l03820"></a><span class="lineno"> 3820</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03821" name="l03821"></a><span class="lineno"> 3821</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;tr = here.<a class="code hl_function" href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">tr_at</a>( examp );</div>
<div class="line"><a id="l03822" name="l03822"></a><span class="lineno"> 3822</span>    <span class="keywordflow">if</span>( !p.<a class="code hl_function" href="classplayer.html#af4d6390315e3c781edf8649c5ae59a33">is_player</a>() || tr.is_null() ) {</div>
<div class="line"><a id="l03823" name="l03823"></a><span class="lineno"> 3823</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03824" name="l03824"></a><span class="lineno"> 3824</span>    }</div>
<div class="line"><a id="l03825" name="l03825"></a><span class="lineno"> 3825</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> possible = tr.<a class="code hl_function" href="structtrap.html#aba1617730ea581913a51524df89e1142">get_difficulty</a>();</div>
<div class="line"><a id="l03826" name="l03826"></a><span class="lineno"> 3826</span>    <span class="keywordtype">bool</span> seen = tr.can_see( examp, p );</div>
<div class="line"><a id="l03827" name="l03827"></a><span class="lineno"> 3827</span>    <span class="keywordflow">if</span>( tr.loadid == <a class="code hl_variable" href="iexamine_8cpp.html#a8fd90c11d7a509a3c0af0144cd1e0b12">tr_unfinished_construction</a> || here.<a class="code hl_function" href="classmap.html#ab39ceb8f855edf31f6af0fa91864048b">partial_con_at</a>( examp ) ) {</div>
<div class="line"><a id="l03828" name="l03828"></a><span class="lineno"> 3828</span>        <a class="code hl_struct" href="structpartial__con.html">partial_con</a> *pc = here.<a class="code hl_function" href="classmap.html#ab39ceb8f855edf31f6af0fa91864048b">partial_con_at</a>( examp );</div>
<div class="line"><a id="l03829" name="l03829"></a><span class="lineno"> 3829</span>        <span class="keywordflow">if</span>( pc ) {</div>
<div class="line"><a id="l03830" name="l03830"></a><span class="lineno"> 3830</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="namespacecharacter__funcs.html#a813a9decd34980fe53f38ba18ffd6374">character_funcs::can_see_fine_details</a>( p ) &amp;&amp; !p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a2ba9e40123e7b42ccc2327d637311c5a">trait_DEBUG_HS</a> ) ) {</div>
<div class="line"><a id="l03831" name="l03831"></a><span class="lineno"> 3831</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It is too dark to construct right now.&quot;</span> ) );</div>
<div class="line"><a id="l03832" name="l03832"></a><span class="lineno"> 3832</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03833" name="l03833"></a><span class="lineno"> 3833</span>            }</div>
<div class="line"><a id="l03834" name="l03834"></a><span class="lineno"> 3834</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structconstruction.html">construction</a> &amp;built = pc-&gt;<a class="code hl_variable" href="structpartial__con.html#a1cbf6d24b8616500c5af5d5355c8983b">id</a>.<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a id="l03835" name="l03835"></a><span class="lineno"> 3835</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Unfinished task: %s, %d%% complete here, continue construction?&quot;</span> ),</div>
<div class="line"><a id="l03836" name="l03836"></a><span class="lineno"> 3836</span>                           built.<a class="code hl_variable" href="structconstruction.html#aa437285d9bdea6ba7ceccaa12e063838">group</a>-&gt;<a class="code hl_function" href="structconstruction__group.html#a025640b4b5fb5d6694a4d3064d6bba98">name</a>(), pc-&gt;<a class="code hl_variable" href="structpartial__con.html#a85b4cad2bfa67cb504ee89ca3129c17d">counter</a> / 100000 ) ) {</div>
<div class="line"><a id="l03837" name="l03837"></a><span class="lineno"> 3837</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Cancel construction?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l03838" name="l03838"></a><span class="lineno"> 3838</span>                    here.<a class="code hl_function" href="classmap.html#af36e4659abd2e9886fbfcb72153b36ce">disarm_trap</a>( examp );</div>
<div class="line"><a id="l03839" name="l03839"></a><span class="lineno"> 3839</span>                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;it : pc-&gt;<a class="code hl_variable" href="structpartial__con.html#a4660d0ab4eb556e12889b93c20742923">components</a> ) {</div>
<div class="line"><a id="l03840" name="l03840"></a><span class="lineno"> 3840</span>                        here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), it );</div>
<div class="line"><a id="l03841" name="l03841"></a><span class="lineno"> 3841</span>                    }</div>
<div class="line"><a id="l03842" name="l03842"></a><span class="lineno"> 3842</span>                    here.<a class="code hl_function" href="classmap.html#ab28692303adbeea326cea5252f0a461a">partial_con_remove</a>( examp );</div>
<div class="line"><a id="l03843" name="l03843"></a><span class="lineno"> 3843</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03844" name="l03844"></a><span class="lineno"> 3844</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03845" name="l03845"></a><span class="lineno"> 3845</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03846" name="l03846"></a><span class="lineno"> 3846</span>                }</div>
<div class="line"><a id="l03847" name="l03847"></a><span class="lineno"> 3847</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03848" name="l03848"></a><span class="lineno"> 3848</span>                p.<a class="code hl_function" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac4155153aad418822a30e271955f0d73">ACT_BUILD</a> );</div>
<div class="line"><a id="l03849" name="l03849"></a><span class="lineno"> 3849</span>                p.<a class="code hl_variable" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code hl_variable" href="classplayer__activity.html#ad8add7819b06dcfa95ca4871447159f2">placement</a> = here.<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( examp );</div>
<div class="line"><a id="l03850" name="l03850"></a><span class="lineno"> 3850</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03851" name="l03851"></a><span class="lineno"> 3851</span>            }</div>
<div class="line"><a id="l03852" name="l03852"></a><span class="lineno"> 3852</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03853" name="l03853"></a><span class="lineno"> 3853</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03854" name="l03854"></a><span class="lineno"> 3854</span>        }</div>
<div class="line"><a id="l03855" name="l03855"></a><span class="lineno"> 3855</span>    }</div>
<div class="line"><a id="l03856" name="l03856"></a><span class="lineno"> 3856</span>    <span class="keywordflow">if</span>( seen &amp;&amp; possible &gt;= 99 ) {</div>
<div class="line"><a id="l03857" name="l03857"></a><span class="lineno"> 3857</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;That %s looks too dangerous to mess with.  Best leave it alone.&quot;</span> ),</div>
<div class="line"><a id="l03858" name="l03858"></a><span class="lineno"> 3858</span>                 tr.name() );</div>
<div class="line"><a id="l03859" name="l03859"></a><span class="lineno"> 3859</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03860" name="l03860"></a><span class="lineno"> 3860</span>    }</div>
<div class="line"><a id="l03861" name="l03861"></a><span class="lineno"> 3861</span>    <span class="comment">// Some traps are not actual traps. Those should get a different query.</span></div>
<div class="line"><a id="l03862" name="l03862"></a><span class="lineno"> 3862</span>    <span class="keywordflow">if</span>( seen &amp;&amp; possible == 0 &amp;&amp;</div>
<div class="line"><a id="l03863" name="l03863"></a><span class="lineno"> 3863</span>        tr.get_avoidance() == 0 ) { <span class="comment">// Separated so saying no doesn&#39;t trigger the other query.</span></div>
<div class="line"><a id="l03864" name="l03864"></a><span class="lineno"> 3864</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There is a %s there.  Take down?&quot;</span> ), tr.name() ) ) {</div>
<div class="line"><a id="l03865" name="l03865"></a><span class="lineno"> 3865</span>            here.<a class="code hl_function" href="classmap.html#af36e4659abd2e9886fbfcb72153b36ce">disarm_trap</a>( examp );</div>
<div class="line"><a id="l03866" name="l03866"></a><span class="lineno"> 3866</span>        }</div>
<div class="line"><a id="l03867" name="l03867"></a><span class="lineno"> 3867</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( seen &amp;&amp; <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There is a %s there.  Disarm?&quot;</span> ), tr.name() ) ) {</div>
<div class="line"><a id="l03868" name="l03868"></a><span class="lineno"> 3868</span>        here.<a class="code hl_function" href="classmap.html#af36e4659abd2e9886fbfcb72153b36ce">disarm_trap</a>( examp );</div>
<div class="line"><a id="l03869" name="l03869"></a><span class="lineno"> 3869</span>    }</div>
<div class="line"><a id="l03870" name="l03870"></a><span class="lineno"> 3870</span>}</div>
<div class="ttc" id="aclassmap_html_ab28692303adbeea326cea5252f0a461a"><div class="ttname"><a href="classmap.html#ab28692303adbeea326cea5252f0a461a">map::partial_con_remove</a></div><div class="ttdeci">void partial_con_remove(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05287">map.cpp:5287</a></div></div>
<div class="ttc" id="aclassmap_html_ab39ceb8f855edf31f6af0fa91864048b"><div class="ttname"><a href="classmap.html#ab39ceb8f855edf31f6af0fa91864048b">map::partial_con_at</a></div><div class="ttdeci">partial_con * partial_con_at(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05273">map.cpp:5273</a></div></div>
<div class="ttc" id="aclassmap_html_af36e4659abd2e9886fbfcb72153b36ce"><div class="ttname"><a href="classmap.html#af36e4659abd2e9886fbfcb72153b36ce">map::disarm_trap</a></div><div class="ttdeci">void disarm_trap(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05335">map.cpp:5335</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a2ba9e40123e7b42ccc2327d637311c5a"><div class="ttname"><a href="iexamine_8cpp.html#a2ba9e40123e7b42ccc2327d637311c5a">trait_DEBUG_HS</a></div><div class="ttdeci">static const trait_id trait_DEBUG_HS(&quot;DEBUG_HS&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a8fd90c11d7a509a3c0af0144cd1e0b12"><div class="ttname"><a href="iexamine_8cpp.html#a8fd90c11d7a509a3c0af0144cd1e0b12">tr_unfinished_construction</a></div><div class="ttdeci">static const trap_str_id tr_unfinished_construction(&quot;tr_unfinished_construction&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac4155153aad418822a30e271955f0d73"><div class="ttname"><a href="iexamine_8cpp.html#ac4155153aad418822a30e271955f0d73">ACT_BUILD</a></div><div class="ttdeci">static const activity_id ACT_BUILD(&quot;ACT_BUILD&quot;)</div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a813a9decd34980fe53f38ba18ffd6374"><div class="ttname"><a href="namespacecharacter__funcs.html#a813a9decd34980fe53f38ba18ffd6374">character_funcs::can_see_fine_details</a></div><div class="ttdeci">bool can_see_fine_details(const Character &amp;who)</div><div class="ttdoc">Checks whether character vision at given pos is good enough to see fine details.</div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8cpp_source.html#l00172">character_functions.cpp:172</a></div></div>
<div class="ttc" id="astructconstruction__group_html_a025640b4b5fb5d6694a4d3064d6bba98"><div class="ttname"><a href="structconstruction__group.html#a025640b4b5fb5d6694a4d3064d6bba98">construction_group::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="construction__group_8cpp_source.html#l00021">construction_group.cpp:21</a></div></div>
<div class="ttc" id="astructconstruction_html"><div class="ttname"><a href="structconstruction.html">construction</a></div><div class="ttdef"><b>Definition:</b> <a href="construction_8h_source.html#l00038">construction.h:38</a></div></div>
<div class="ttc" id="astructconstruction_html_aa437285d9bdea6ba7ceccaa12e063838"><div class="ttname"><a href="structconstruction.html#aa437285d9bdea6ba7ceccaa12e063838">construction::group</a></div><div class="ttdeci">construction_group_str_id group</div><div class="ttdef"><b>Definition:</b> <a href="construction_8h_source.html#l00050">construction.h:50</a></div></div>
<div class="ttc" id="astructpartial__con_html"><div class="ttname"><a href="structpartial__con.html">partial_con</a></div><div class="ttdef"><b>Definition:</b> <a href="construction__partial_8h_source.html#l00010">construction_partial.h:10</a></div></div>
<div class="ttc" id="astructpartial__con_html_a1cbf6d24b8616500c5af5d5355c8983b"><div class="ttname"><a href="structpartial__con.html#a1cbf6d24b8616500c5af5d5355c8983b">partial_con::id</a></div><div class="ttdeci">construction_id id</div><div class="ttdef"><b>Definition:</b> <a href="construction__partial_8h_source.html#l00013">construction_partial.h:13</a></div></div>
<div class="ttc" id="astructpartial__con_html_a4660d0ab4eb556e12889b93c20742923"><div class="ttname"><a href="structpartial__con.html#a4660d0ab4eb556e12889b93c20742923">partial_con::components</a></div><div class="ttdeci">std::list&lt; item &gt; components</div><div class="ttdef"><b>Definition:</b> <a href="construction__partial_8h_source.html#l00012">construction_partial.h:12</a></div></div>
<div class="ttc" id="astructpartial__con_html_a85b4cad2bfa67cb504ee89ca3129c17d"><div class="ttname"><a href="structpartial__con.html#a85b4cad2bfa67cb504ee89ca3129c17d">partial_con::counter</a></div><div class="ttdeci">int counter</div><div class="ttdef"><b>Definition:</b> <a href="construction__partial_8h_source.html#l00011">construction_partial.h:11</a></div></div>
<div class="ttc" id="astructtrap_html_aba1617730ea581913a51524df89e1142"><div class="ttname"><a href="structtrap.html#aba1617730ea581913a51524df89e1142">trap::get_difficulty</a></div><div class="ttdeci">int get_difficulty() const</div><div class="ttdoc">This is used when disarming the trap.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00152">trap.h:152</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="iexamine_8cpp.html#ac4155153aad418822a30e271955f0d73">ACT_BUILD</a>, <a class="el" href="character_8h_source.html#l01578">Character::activity</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l09193">Character::assign_activity()</a>, <a class="el" href="character__functions_8cpp_source.html#l00172">character_funcs::can_see_fine_details()</a>, <a class="el" href="construction__partial_8h_source.html#l00012">partial_con::components</a>, <a class="el" href="construction__partial_8h_source.html#l00011">partial_con::counter</a>, <a class="el" href="map_8cpp_source.html#l05335">map::disarm_trap()</a>, <a class="el" href="trap_8h_source.html#l00152">trap::get_difficulty()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="map_8cpp_source.html#l08399">map::getabs()</a>, <a class="el" href="construction_8h_source.html#l00050">construction::group</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="construction__partial_8h_source.html#l00013">partial_con::id</a>, <a class="el" href="player_8h_source.html#l00093">player::is_player()</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="construction__group_8cpp_source.html#l00021">construction_group::name()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="map_8cpp_source.html#l05273">map::partial_con_at()</a>, <a class="el" href="map_8cpp_source.html#l05287">map::partial_con_remove()</a>, <a class="el" href="player__activity_8h_source.html#l00062">player_activity::placement</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="map_8cpp_source.html#l05257">map::tr_at()</a>, <a class="el" href="iexamine_8cpp.html#a8fd90c11d7a509a3c0af0144cd1e0b12">tr_unfinished_construction</a>, and <a class="el" href="iexamine_8cpp.html#a2ba9e40123e7b42ccc2327d637311c5a">trait_DEBUG_HS</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l05463">game::examine()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a2a0207fa80f1ecb61b2ca3cf6a799c88" name="a2a0207fa80f1ecb61b2ca3cf6a799c88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a0207fa80f1ecb61b2ca3cf6a799c88">&#9670;&nbsp;</a></span>tree_hickory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::tree_hickory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Survival increases hickory root number per tree Survival speeds up hickory root digging 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03485">3485</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03486" name="l03486"></a><span class="lineno"> 3486</span>{</div>
<div class="line"><a id="l03487" name="l03487"></a><span class="lineno"> 3487</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03488" name="l03488"></a><span class="lineno"> 3488</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="iexamine_8cpp.html#a2581c83e4682bf7f7a287b0577413c0c">harvest_common</a>( p, examp, <span class="keyword">false</span>, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l03489" name="l03489"></a><span class="lineno"> 3489</span>        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, here.<a class="code hl_function" href="classmap.html#aa644647b252ed03e1724952f4bf45b33">get_ter_transforms_into</a>( examp ) );</div>
<div class="line"><a id="l03490" name="l03490"></a><span class="lineno"> 3490</span>    }</div>
<div class="line"><a id="l03491" name="l03491"></a><span class="lineno"> 3491</span>    <span class="keywordflow">if</span>( !p.<a class="code hl_function" href="classvisitable.html#a62ad0b8f7866ec171a709c56e4a25ff2">has_quality</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a> ) ) {</div>
<div class="line"><a id="l03492" name="l03492"></a><span class="lineno"> 3492</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You have no tool to dig with…&quot;</span> ) );</div>
<div class="line"><a id="l03493" name="l03493"></a><span class="lineno"> 3493</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03494" name="l03494"></a><span class="lineno"> 3494</span>    }</div>
<div class="line"><a id="l03495" name="l03495"></a><span class="lineno"> 3495</span>    <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classplayer.html#af4d6390315e3c781edf8649c5ae59a33">is_player</a>() &amp;&amp;</div>
<div class="line"><a id="l03496" name="l03496"></a><span class="lineno"> 3496</span>        !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Dig up %s?  This kills the tree!&quot;</span> ), here.<a class="code hl_function" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) ) ) {</div>
<div class="line"><a id="l03497" name="l03497"></a><span class="lineno"> 3497</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03498" name="l03498"></a><span class="lineno"> 3498</span>    }</div>
<div class="line"><a id="l03499" name="l03499"></a><span class="lineno"> 3499</span><span class="comment"></span> </div>
<div class="line"><a id="l03500" name="l03500"></a><span class="lineno"> 3500</span><span class="comment">    ///\EFFECT_SURVIVAL increases hickory root number per tree</span></div>
<div class="line"><a id="l03501" name="l03501"></a><span class="lineno"> 3501</span><span class="comment"></span>    here.<a class="code hl_function" href="classmap.html#acfe43259087397daac52876165a3120c">spawn_item</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), <a class="code hl_variable" href="iexamine_8cpp.html#a4f9ea60e4ca2b958b45699b4bbdb6771">itype_hickory_root</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 3 + p.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) ), 0,</div>
<div class="line"><a id="l03502" name="l03502"></a><span class="lineno"> 3502</span>                     <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l03503" name="l03503"></a><span class="lineno"> 3503</span>    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a99d9856a9e4fe8ba9db2304f9488b8a6">t_tree_hickory_dead</a> );<span class="comment"></span></div>
<div class="line"><a id="l03504" name="l03504"></a><span class="lineno"> 3504</span><span class="comment">    ///\EFFECT_SURVIVAL speeds up hickory root digging</span></div>
<div class="line"><a id="l03505" name="l03505"></a><span class="lineno"> 3505</span><span class="comment"></span>    p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= to_moves&lt;int&gt;( 20_seconds ) / ( p.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) + 1 ) + 100;</div>
<div class="line"><a id="l03506" name="l03506"></a><span class="lineno"> 3506</span>}</div>
<div class="ttc" id="aiexamine_8cpp_html_a4f9ea60e4ca2b958b45699b4bbdb6771"><div class="ttname"><a href="iexamine_8cpp.html#a4f9ea60e4ca2b958b45699b4bbdb6771">itype_hickory_root</a></div><div class="ttdeci">static const itype_id itype_hickory_root(&quot;hickory_root&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_a99d9856a9e4fe8ba9db2304f9488b8a6"><div class="ttname"><a href="mapdata_8cpp.html#a99d9856a9e4fe8ba9db2304f9488b8a6">t_tree_hickory_dead</a></div><div class="ttdeci">ter_id t_tree_hickory_dead</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00684">mapdata.cpp:684</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="player_8cpp_source.html#l00366">player::add_msg_if_player()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="character_8cpp_source.html#l03351">Character::get_skill_level()</a>, <a class="el" href="map_8cpp_source.html#l01671">map::get_ter_transforms_into()</a>, <a class="el" href="iexamine_8cpp_source.html#l02037">harvest_common()</a>, <a class="el" href="visitable_8cpp_source.html#l00169">visitable&lt; T &gt;::has_quality()</a>, <a class="el" href="player_8h_source.html#l00093">player::is_player()</a>, <a class="el" href="iexamine_8cpp.html#a4f9ea60e4ca2b958b45699b4bbdb6771">itype_hickory_root</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>, <a class="el" href="map_8cpp_source.html#l04313">map::spawn_item()</a>, <a class="el" href="mapdata_8cpp_source.html#l00684">t_tree_hickory_dead</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, <a class="el" href="map_8cpp_source.html#l01773">map::tername()</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ae6bb471ed7ab19f1a41a53813159ed2d" name="ae6bb471ed7ab19f1a41a53813159ed2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6bb471ed7ab19f1a41a53813159ed2d">&#9670;&nbsp;</a></span>tree_maple()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::tree_maple </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03516">3516</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03517" name="l03517"></a><span class="lineno"> 3517</span>{</div>
<div class="line"><a id="l03518" name="l03518"></a><span class="lineno"> 3518</span>    <span class="keywordflow">if</span>( !p.<a class="code hl_function" href="classvisitable.html#a62ad0b8f7866ec171a709c56e4a25ff2">has_quality</a>( <a class="code hl_class" href="classstring__id.html">quality_id</a>( <span class="stringliteral">&quot;DRILL&quot;</span> ) ) ) {</div>
<div class="line"><a id="l03519" name="l03519"></a><span class="lineno"> 3519</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need a tool to drill the crust to tap this maple tree.&quot;</span> ) );</div>
<div class="line"><a id="l03520" name="l03520"></a><span class="lineno"> 3520</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03521" name="l03521"></a><span class="lineno"> 3521</span>    }</div>
<div class="line"><a id="l03522" name="l03522"></a><span class="lineno"> 3522</span> </div>
<div class="line"><a id="l03523" name="l03523"></a><span class="lineno"> 3523</span>    <span class="keywordflow">if</span>( !p.<a class="code hl_function" href="classvisitable.html#a62ad0b8f7866ec171a709c56e4a25ff2">has_quality</a>( <a class="code hl_class" href="classstring__id.html">quality_id</a>( <span class="stringliteral">&quot;HAMMER&quot;</span> ) ) ) {</div>
<div class="line"><a id="l03524" name="l03524"></a><span class="lineno"> 3524</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l03525" name="l03525"></a><span class="lineno"> 3525</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need a tool to hammer the spile into the crust to tap this maple tree.&quot;</span> ) );</div>
<div class="line"><a id="l03526" name="l03526"></a><span class="lineno"> 3526</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03527" name="l03527"></a><span class="lineno"> 3527</span>    }</div>
<div class="line"><a id="l03528" name="l03528"></a><span class="lineno"> 3528</span> </div>
<div class="line"><a id="l03529" name="l03529"></a><span class="lineno"> 3529</span>    <span class="keyword">const</span> <a class="code hl_class" href="classinventory.html">inventory</a> &amp;crafting_inv = p.<a class="code hl_function" href="classCharacter.html#abd358c7a7757575b70b1613dbcce40a7">crafting_inventory</a>();</div>
<div class="line"><a id="l03530" name="l03530"></a><span class="lineno"> 3530</span> </div>
<div class="line"><a id="l03531" name="l03531"></a><span class="lineno"> 3531</span>    <span class="keywordflow">if</span>( !crafting_inv.<a class="code hl_function" href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">has_amount</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a200bb81df19e2159c60d1900eb600840">itype_tree_spile</a>, 1 ) ) {</div>
<div class="line"><a id="l03532" name="l03532"></a><span class="lineno"> 3532</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need a %s to tap this maple tree.&quot;</span> ),</div>
<div class="line"><a id="l03533" name="l03533"></a><span class="lineno"> 3533</span>                 <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a200bb81df19e2159c60d1900eb600840">itype_tree_spile</a> ) );</div>
<div class="line"><a id="l03534" name="l03534"></a><span class="lineno"> 3534</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03535" name="l03535"></a><span class="lineno"> 3535</span>    }</div>
<div class="line"><a id="l03536" name="l03536"></a><span class="lineno"> 3536</span> </div>
<div class="line"><a id="l03537" name="l03537"></a><span class="lineno"> 3537</span>    std::vector&lt;item_comp&gt; comps;</div>
<div class="line"><a id="l03538" name="l03538"></a><span class="lineno"> 3538</span>    comps.push_back( <a class="code hl_struct" href="structitem__comp.html">item_comp</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a200bb81df19e2159c60d1900eb600840">itype_tree_spile</a>, 1 ) );</div>
<div class="line"><a id="l03539" name="l03539"></a><span class="lineno"> 3539</span>    p.<a class="code hl_function" href="classplayer.html#ad1f5e6d21b83313ab148302140083b99">consume_items</a>( comps, 1, <a class="code hl_function" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a id="l03540" name="l03540"></a><span class="lineno"> 3540</span> </div>
<div class="line"><a id="l03541" name="l03541"></a><span class="lineno"> 3541</span>    p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 20_seconds ) );</div>
<div class="line"><a id="l03542" name="l03542"></a><span class="lineno"> 3542</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03543" name="l03543"></a><span class="lineno"> 3543</span>    here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a4f454c04c35ff940b9b70c2292dd029c">t_tree_maple_tapped</a> );</div>
<div class="line"><a id="l03544" name="l03544"></a><span class="lineno"> 3544</span> </div>
<div class="line"><a id="l03545" name="l03545"></a><span class="lineno"> 3545</span>    <span class="keyword">auto</span> cont_loc = <a class="code hl_function" href="iexamine_8cpp.html#a7a6988f567c168dd00257f3dd3340aee">maple_tree_sap_container</a>();</div>
<div class="line"><a id="l03546" name="l03546"></a><span class="lineno"> 3546</span> </div>
<div class="line"><a id="l03547" name="l03547"></a><span class="lineno"> 3547</span>    <a class="code hl_class" href="classitem.html">item</a> *container = cont_loc.get_item();</div>
<div class="line"><a id="l03548" name="l03548"></a><span class="lineno"> 3548</span>    <span class="keywordflow">if</span>( container ) {</div>
<div class="line"><a id="l03549" name="l03549"></a><span class="lineno"> 3549</span>        here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( examp, *container, <span class="keyword">false</span> );</div>
<div class="line"><a id="l03550" name="l03550"></a><span class="lineno"> 3550</span> </div>
<div class="line"><a id="l03551" name="l03551"></a><span class="lineno"> 3551</span>        cont_loc.<a class="code hl_function" href="classvisitable.html#adeb03e3af46e1b106a5f88f112add296">remove_item</a>();</div>
<div class="line"><a id="l03552" name="l03552"></a><span class="lineno"> 3552</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03553" name="l03553"></a><span class="lineno"> 3553</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;No container added.  The sap will just spill on the ground.&quot;</span> ) );</div>
<div class="line"><a id="l03554" name="l03554"></a><span class="lineno"> 3554</span>    }</div>
<div class="line"><a id="l03555" name="l03555"></a><span class="lineno"> 3555</span>}</div>
<div class="ttc" id="aclassvisitable_html_adeb03e3af46e1b106a5f88f112add296"><div class="ttname"><a href="classvisitable.html#adeb03e3af46e1b106a5f88f112add296">visitable::remove_item</a></div><div class="ttdeci">item remove_item(item &amp;it)</div><div class="ttdoc">Removes and returns the item which must be contained by this instance.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00564">visitable.cpp:564</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a200bb81df19e2159c60d1900eb600840"><div class="ttname"><a href="iexamine_8cpp.html#a200bb81df19e2159c60d1900eb600840">itype_tree_spile</a></div><div class="ttdeci">static const itype_id itype_tree_spile(&quot;tree_spile&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a7a6988f567c168dd00257f3dd3340aee"><div class="ttname"><a href="iexamine_8cpp.html#a7a6988f567c168dd00257f3dd3340aee">maple_tree_sap_container</a></div><div class="ttdeci">static item_location maple_tree_sap_container()</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03508">iexamine.cpp:3508</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a4f454c04c35ff940b9b70c2292dd029c"><div class="ttname"><a href="mapdata_8cpp.html#a4f454c04c35ff940b9b70c2292dd029c">t_tree_maple_tapped</a></div><div class="ttdeci">ter_id t_tree_maple_tapped</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00683">mapdata.cpp:683</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="crafting_8cpp_source.html#l01513">player::consume_items()</a>, <a class="el" href="crafting_8cpp_source.html#l00556">Character::crafting_inventory()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="visitable_8cpp_source.html#l01111">visitable&lt; T &gt;::has_amount()</a>, <a class="el" href="visitable_8cpp_source.html#l00169">visitable&lt; T &gt;::has_quality()</a>, <a class="el" href="item_8h_source.html#l02265">is_crafting_component()</a>, <a class="el" href="iexamine_8cpp.html#a200bb81df19e2159c60d1900eb600840">itype_tree_spile</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="iexamine_8cpp_source.html#l03508">maple_tree_sap_container()</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="item_8cpp_source.html#l09951">item::nname()</a>, <a class="el" href="visitable_8cpp_source.html#l00564">visitable&lt; T &gt;::remove_item()</a>, <a class="el" href="mapdata_8cpp_source.html#l00683">t_tree_maple_tapped</a>, and <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a2bcb40d08bb0723929edb66b5536d4bb" name="a2bcb40d08bb0723929edb66b5536d4bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bcb40d08bb0723929edb66b5536d4bb">&#9670;&nbsp;</a></span>tree_maple_tapped()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::tree_maple_tapped </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03557">3557</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03558" name="l03558"></a><span class="lineno"> 3558</span>{</div>
<div class="line"><a id="l03559" name="l03559"></a><span class="lineno"> 3559</span>    <span class="keywordtype">bool</span> has_sap = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03560" name="l03560"></a><span class="lineno"> 3560</span>    <a class="code hl_class" href="classitem.html">item</a> *container = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l03561" name="l03561"></a><span class="lineno"> 3561</span>    <span class="keywordtype">int</span> charges = 0;</div>
<div class="line"><a id="l03562" name="l03562"></a><span class="lineno"> 3562</span> </div>
<div class="line"><a id="l03563" name="l03563"></a><span class="lineno"> 3563</span>    <span class="keyword">const</span> std::string maple_sap_name = <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ae32c47387b792bb03fa0e569bff713f2">itype_maple_sap</a> );</div>
<div class="line"><a id="l03564" name="l03564"></a><span class="lineno"> 3564</span> </div>
<div class="line"><a id="l03565" name="l03565"></a><span class="lineno"> 3565</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03566" name="l03566"></a><span class="lineno"> 3566</span>    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l03567" name="l03567"></a><span class="lineno"> 3567</span>    <span class="keywordflow">if</span>( !items.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a id="l03568" name="l03568"></a><span class="lineno"> 3568</span>        <a class="code hl_class" href="classitem.html">item</a> &amp;it = items.<a class="code hl_function" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>();</div>
<div class="line"><a id="l03569" name="l03569"></a><span class="lineno"> 3569</span>        <span class="keywordflow">if</span>( it.<a class="code hl_function" href="classitem.html#ab3f85f52bf0b1191bfdc2a940d95454e">is_bucket</a>() || it.<a class="code hl_function" href="classitem.html#a22ad63b72a459c8f95893a853348cb06">is_watertight_container</a>() ) {</div>
<div class="line"><a id="l03570" name="l03570"></a><span class="lineno"> 3570</span>            container = &amp;it;</div>
<div class="line"><a id="l03571" name="l03571"></a><span class="lineno"> 3571</span> </div>
<div class="line"><a id="l03572" name="l03572"></a><span class="lineno"> 3572</span>            <span class="keywordflow">if</span>( !it.<a class="code hl_function" href="classitem.html#a5996f63ca1797fc01482678b51a87680">is_container_empty</a>() &amp;&amp; it.<a class="code hl_variable" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code hl_function" href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">front</a>().<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="iexamine_8cpp.html#ae32c47387b792bb03fa0e569bff713f2">itype_maple_sap</a> ) {</div>
<div class="line"><a id="l03573" name="l03573"></a><span class="lineno"> 3573</span>                has_sap = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03574" name="l03574"></a><span class="lineno"> 3574</span>                charges = it.<a class="code hl_variable" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code hl_function" href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">front</a>().<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a id="l03575" name="l03575"></a><span class="lineno"> 3575</span>            }</div>
<div class="line"><a id="l03576" name="l03576"></a><span class="lineno"> 3576</span>        }</div>
<div class="line"><a id="l03577" name="l03577"></a><span class="lineno"> 3577</span>    }</div>
<div class="line"><a id="l03578" name="l03578"></a><span class="lineno"> 3578</span> </div>
<div class="line"><a id="l03579" name="l03579"></a><span class="lineno"> 3579</span>    <span class="keyword">enum</span> <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a> {</div>
<div class="line"><a id="l03580" name="l03580"></a><span class="lineno"> 3580</span>        REMOVE_TAP,</div>
<div class="line"><a id="l03581" name="l03581"></a><span class="lineno"> 3581</span>        ADD_CONTAINER,</div>
<div class="line"><a id="l03582" name="l03582"></a><span class="lineno"> 3582</span>        HARVEST_SAP,</div>
<div class="line"><a id="l03583" name="l03583"></a><span class="lineno"> 3583</span>        REMOVE_CONTAINER,</div>
<div class="line"><a id="l03584" name="l03584"></a><span class="lineno"> 3584</span>    };</div>
<div class="line"><a id="l03585" name="l03585"></a><span class="lineno"> 3585</span>    <a class="code hl_class" href="classuilist.html">uilist</a> selectmenu;</div>
<div class="line"><a id="l03586" name="l03586"></a><span class="lineno"> 3586</span>    selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( REMOVE_TAP, <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove tap&quot;</span> ) );</div>
<div class="line"><a id="l03587" name="l03587"></a><span class="lineno"> 3587</span>    selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( ADD_CONTAINER, !container, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a id="l03588" name="l03588"></a><span class="lineno"> 3588</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Add a container to receive the %s&quot;</span> ), maple_sap_name );</div>
<div class="line"><a id="l03589" name="l03589"></a><span class="lineno"> 3589</span>    selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( HARVEST_SAP, has_sap, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Harvest current %s (%d)&quot;</span> ),</div>
<div class="line"><a id="l03590" name="l03590"></a><span class="lineno"> 3590</span>                         maple_sap_name, charges );</div>
<div class="line"><a id="l03591" name="l03591"></a><span class="lineno"> 3591</span>    selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( REMOVE_CONTAINER, container, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove container&quot;</span> ) );</div>
<div class="line"><a id="l03592" name="l03592"></a><span class="lineno"> 3592</span> </div>
<div class="line"><a id="l03593" name="l03593"></a><span class="lineno"> 3593</span>    selectmenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Select an action&quot;</span> );</div>
<div class="line"><a id="l03594" name="l03594"></a><span class="lineno"> 3594</span>    selectmenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l03595" name="l03595"></a><span class="lineno"> 3595</span> </div>
<div class="line"><a id="l03596" name="l03596"></a><span class="lineno"> 3596</span>    <span class="keywordflow">switch</span>( selectmenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a id="l03597" name="l03597"></a><span class="lineno"> 3597</span>        <span class="keywordflow">case</span> REMOVE_TAP: {</div>
<div class="line"><a id="l03598" name="l03598"></a><span class="lineno"> 3598</span>            <span class="keywordflow">if</span>( !p.<a class="code hl_function" href="classvisitable.html#a62ad0b8f7866ec171a709c56e4a25ff2">has_quality</a>( <a class="code hl_class" href="classstring__id.html">quality_id</a>( <span class="stringliteral">&quot;HAMMER&quot;</span> ) ) ) {</div>
<div class="line"><a id="l03599" name="l03599"></a><span class="lineno"> 3599</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need a hammering tool to remove the spile from the crust.&quot;</span> ) );</div>
<div class="line"><a id="l03600" name="l03600"></a><span class="lineno"> 3600</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03601" name="l03601"></a><span class="lineno"> 3601</span>            }</div>
<div class="line"><a id="l03602" name="l03602"></a><span class="lineno"> 3602</span> </div>
<div class="line"><a id="l03603" name="l03603"></a><span class="lineno"> 3603</span>            <a class="code hl_class" href="classitem.html">item</a> tree_spile( <span class="stringliteral">&quot;tree_spile&quot;</span> );</div>
<div class="line"><a id="l03604" name="l03604"></a><span class="lineno"> 3604</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You remove the %s.&quot;</span> ), tree_spile.tname( 1 ) );</div>
<div class="line"><a id="l03605" name="l03605"></a><span class="lineno"> 3605</span>            here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), tree_spile );</div>
<div class="line"><a id="l03606" name="l03606"></a><span class="lineno"> 3606</span> </div>
<div class="line"><a id="l03607" name="l03607"></a><span class="lineno"> 3607</span>            <span class="keywordflow">if</span>( container ) {</div>
<div class="line"><a id="l03608" name="l03608"></a><span class="lineno"> 3608</span>                here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), *container );</div>
<div class="line"><a id="l03609" name="l03609"></a><span class="lineno"> 3609</span>            }</div>
<div class="line"><a id="l03610" name="l03610"></a><span class="lineno"> 3610</span>            here.<a class="code hl_function" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a id="l03611" name="l03611"></a><span class="lineno"> 3611</span> </div>
<div class="line"><a id="l03612" name="l03612"></a><span class="lineno"> 3612</span>            p.<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 20_seconds ) );</div>
<div class="line"><a id="l03613" name="l03613"></a><span class="lineno"> 3613</span>            here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a481498fda9f4df0a12e0dd3a4cfcde24">t_tree_maple</a> );</div>
<div class="line"><a id="l03614" name="l03614"></a><span class="lineno"> 3614</span> </div>
<div class="line"><a id="l03615" name="l03615"></a><span class="lineno"> 3615</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03616" name="l03616"></a><span class="lineno"> 3616</span>        }</div>
<div class="line"><a id="l03617" name="l03617"></a><span class="lineno"> 3617</span> </div>
<div class="line"><a id="l03618" name="l03618"></a><span class="lineno"> 3618</span>        <span class="keywordflow">case</span> ADD_CONTAINER: {</div>
<div class="line"><a id="l03619" name="l03619"></a><span class="lineno"> 3619</span>            <span class="keyword">auto</span> cont_loc = <a class="code hl_function" href="iexamine_8cpp.html#a7a6988f567c168dd00257f3dd3340aee">maple_tree_sap_container</a>();</div>
<div class="line"><a id="l03620" name="l03620"></a><span class="lineno"> 3620</span> </div>
<div class="line"><a id="l03621" name="l03621"></a><span class="lineno"> 3621</span>            container = cont_loc.get_item();</div>
<div class="line"><a id="l03622" name="l03622"></a><span class="lineno"> 3622</span>            <span class="keywordflow">if</span>( container ) {</div>
<div class="line"><a id="l03623" name="l03623"></a><span class="lineno"> 3623</span>                here.<a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( examp, *container, <span class="keyword">false</span> );</div>
<div class="line"><a id="l03624" name="l03624"></a><span class="lineno"> 3624</span> </div>
<div class="line"><a id="l03625" name="l03625"></a><span class="lineno"> 3625</span>                cont_loc.<a class="code hl_function" href="classvisitable.html#adeb03e3af46e1b106a5f88f112add296">remove_item</a>();</div>
<div class="line"><a id="l03626" name="l03626"></a><span class="lineno"> 3626</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03627" name="l03627"></a><span class="lineno"> 3627</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;No container added.  The sap will just spill on the ground.&quot;</span> ) );</div>
<div class="line"><a id="l03628" name="l03628"></a><span class="lineno"> 3628</span>            }</div>
<div class="line"><a id="l03629" name="l03629"></a><span class="lineno"> 3629</span> </div>
<div class="line"><a id="l03630" name="l03630"></a><span class="lineno"> 3630</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03631" name="l03631"></a><span class="lineno"> 3631</span>        }</div>
<div class="line"><a id="l03632" name="l03632"></a><span class="lineno"> 3632</span> </div>
<div class="line"><a id="l03633" name="l03633"></a><span class="lineno"> 3633</span>        <span class="keywordflow">case</span> HARVEST_SAP: {</div>
<div class="line"><a id="l03634" name="l03634"></a><span class="lineno"> 3634</span>            <a class="code hl_function" href="namespaceliquid__handler.html#a9df963755dc50d58f0c5fcbd704791c4">liquid_handler::handle_liquid_from_container</a>( *container, <a class="code hl_variable" href="cached__options_8cpp.html#a1467e25ae6a1c8f9d4489be4a8e014a3">PICKUP_RANGE</a> );</div>
<div class="line"><a id="l03635" name="l03635"></a><span class="lineno"> 3635</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03636" name="l03636"></a><span class="lineno"> 3636</span>        }</div>
<div class="line"><a id="l03637" name="l03637"></a><span class="lineno"> 3637</span> </div>
<div class="line"><a id="l03638" name="l03638"></a><span class="lineno"> 3638</span>        <span class="keywordflow">case</span> REMOVE_CONTAINER: {</div>
<div class="line"><a id="l03639" name="l03639"></a><span class="lineno"> 3639</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_class" href="classplayer__activity.html">player_activity</a>( <a class="code hl_class" href="classpickup__activity__actor.html">pickup_activity_actor</a>(</div>
<div class="line"><a id="l03640" name="l03640"></a><span class="lineno"> 3640</span>            { { <a class="code hl_class" href="classitem__location.html">item_location</a>( <a class="code hl_class" href="classmap__cursor.html">map_cursor</a>( examp ), container ), std::nullopt, {} } }, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) ) );</div>
<div class="line"><a id="l03641" name="l03641"></a><span class="lineno"> 3641</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03642" name="l03642"></a><span class="lineno"> 3642</span>        }</div>
<div class="line"><a id="l03643" name="l03643"></a><span class="lineno"> 3643</span> </div>
<div class="line"><a id="l03644" name="l03644"></a><span class="lineno"> 3644</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03645" name="l03645"></a><span class="lineno"> 3645</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03646" name="l03646"></a><span class="lineno"> 3646</span>    }</div>
<div class="line"><a id="l03647" name="l03647"></a><span class="lineno"> 3647</span>}</div>
<div class="ttc" id="aclassitem__contents_html_a14299e40ca1440af11623c86e0b84072"><div class="ttname"><a href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">item_contents::front</a></div><div class="ttdeci">item &amp; front()</div><div class="ttdoc">this is an artifact of the previous code using front() everywhere for contents.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00190">item_contents.cpp:190</a></div></div>
<div class="ttc" id="aclassitem_html_a22ad63b72a459c8f95893a853348cb06"><div class="ttname"><a href="classitem.html#a22ad63b72a459c8f95893a853348cb06">item::is_watertight_container</a></div><div class="ttdeci">bool is_watertight_container() const</div><div class="ttdoc">Whether this is a container which can be used to store liquids.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06749">item.cpp:6749</a></div></div>
<div class="ttc" id="aclassitem_html_a4afe851abb42cbff0857065860f96e0e"><div class="ttname"><a href="classitem.html#a4afe851abb42cbff0857065860f96e0e">item::contents</a></div><div class="ttdeci">item_contents contents</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02161">item.h:2161</a></div></div>
<div class="ttc" id="aclassitem_html_ab3f85f52bf0b1191bfdc2a940d95454e"><div class="ttname"><a href="classitem.html#ab3f85f52bf0b1191bfdc2a940d95454e">item::is_bucket</a></div><div class="ttdeci">bool is_bucket() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06759">item.cpp:6759</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ae32c47387b792bb03fa0e569bff713f2"><div class="ttname"><a href="iexamine_8cpp.html#ae32c47387b792bb03fa0e569bff713f2">itype_maple_sap</a></div><div class="ttdeci">static const itype_id itype_maple_sap(&quot;maple_sap&quot;)</div></div>
<div class="ttc" id="amapdata_8cpp_html_a481498fda9f4df0a12e0dd3a4cfcde24"><div class="ttname"><a href="mapdata_8cpp.html#a481498fda9f4df0a12e0dd3a4cfcde24">t_tree_maple</a></div><div class="ttdeci">ter_id t_tree_maple</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00683">mapdata.cpp:683</a></div></div>
<div class="ttc" id="anamespaceliquid__handler_html_a9df963755dc50d58f0c5fcbd704791c4"><div class="ttname"><a href="namespaceliquid__handler.html#a9df963755dc50d58f0c5fcbd704791c4">liquid_handler::handle_liquid_from_container</a></div><div class="ttdeci">bool handle_liquid_from_container(item *in_container, item &amp;container, int radius)</div><div class="ttdoc">Handle liquid from inside a container item.</div><div class="ttdef"><b>Definition:</b> <a href="handle__liquid_8cpp_source.html#l00127">handle_liquid.cpp:127</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="map_8cpp_source.html#l04354">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="item_8h_source.html#l02199">item::charges</a>, <a class="el" href="item_8h_source.html#l02161">item::contents</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="item__contents_8cpp_source.html#l00190">item_contents::front()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00127">liquid_handler::handle_liquid_from_container()</a>, <a class="el" href="visitable_8cpp_source.html#l00169">visitable&lt; T &gt;::has_quality()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l04247">map::i_clear()</a>, <a class="el" href="item_8cpp_source.html#l06759">item::is_bucket()</a>, <a class="el" href="item_8cpp_source.html#l06862">item::is_container_empty()</a>, <a class="el" href="item_8cpp_source.html#l06749">item::is_watertight_container()</a>, <a class="el" href="iexamine_8cpp.html#ae32c47387b792bb03fa0e569bff713f2">itype_maple_sap</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="iexamine_8cpp_source.html#l03508">maple_tree_sap_container()</a>, <a class="el" href="ui_8h_source.html#l00031">MENU_AUTOASSIGN</a>, <a class="el" href="creature_8cpp_source.html#l01448">Creature::mod_moves()</a>, <a class="el" href="item_8cpp_source.html#l09951">item::nname()</a>, <a class="el" href="item__stack_8cpp_source.html#l00083">item_stack::only_item()</a>, <a class="el" href="path__info_8cpp_source.html#l00230">PATH_INFO::options()</a>, <a class="el" href="cached__options_8cpp_source.html#l00019">PICKUP_RANGE</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="visitable_8cpp_source.html#l00564">visitable&lt; T &gt;::remove_item()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="mapdata_8cpp_source.html#l00683">t_tree_maple</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l04574">item::tname()</a>, and <a class="el" href="item_8cpp_source.html#l08374">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="affda378c4e994d5970fa6f7c6ce086cd" name="affda378c4e994d5970fa6f7c6ce086cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affda378c4e994d5970fa6f7c6ce086cd">&#9670;&nbsp;</a></span>tree_marloss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::tree_marloss </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03663">3663</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03664" name="l03664"></a><span class="lineno"> 3664</span>{</div>
<div class="line"><a id="l03665" name="l03665"></a><span class="lineno"> 3665</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03666" name="l03666"></a><span class="lineno"> 3666</span>    <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> ) ) {</div>
<div class="line"><a id="l03667" name="l03667"></a><span class="lineno"> 3667</span>        <a class="code hl_function" href="iexamine_8cpp.html#a6af7598204724fe8f5a995fa31e9b33d">pick_plant</a>( p, examp, <a class="code hl_variable" href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a>, <a class="code hl_variable" href="mapdata_8cpp.html#a7d12b590a17e64d80031bc8a1470fe33">t_tree_fungal</a> );</div>
<div class="line"><a id="l03668" name="l03668"></a><span class="lineno"> 3668</span>        <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a> ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l03669" name="l03669"></a><span class="lineno"> 3669</span>            <span class="comment">// Folks have a better shot at keeping fed.</span></div>
<div class="line"><a id="l03670" name="l03670"></a><span class="lineno"> 3670</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l03671" name="l03671"></a><span class="lineno"> 3671</span>                     <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;We have located a particularly vital nutrient deposit underneath this location.&quot;</span> ) );</div>
<div class="line"><a id="l03672" name="l03672"></a><span class="lineno"> 3672</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Additional nourishment is available.&quot;</span> ) );</div>
<div class="line"><a id="l03673" name="l03673"></a><span class="lineno"> 3673</span>            here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a089b3090dcfb8710ee9281aa090e4f77">t_marloss_tree</a> );</div>
<div class="line"><a id="l03674" name="l03674"></a><span class="lineno"> 3674</span>        }</div>
<div class="line"><a id="l03675" name="l03675"></a><span class="lineno"> 3675</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="iexamine_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a> ) ) {</div>
<div class="line"><a id="l03676" name="l03676"></a><span class="lineno"> 3676</span>        here.<a class="code hl_function" href="classmap.html#acfe43259087397daac52876165a3120c">spawn_item</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), <a class="code hl_variable" href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a>, 1, 0, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l03677" name="l03677"></a><span class="lineno"> 3677</span>        here.<a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( examp, <a class="code hl_variable" href="mapdata_8cpp.html#a7d12b590a17e64d80031bc8a1470fe33">t_tree_fungal</a> );</div>
<div class="line"><a id="l03678" name="l03678"></a><span class="lineno"> 3678</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The tree offers up a fruit, then shrivels into a fungal tree.&quot;</span> ) );</div>
<div class="line"><a id="l03679" name="l03679"></a><span class="lineno"> 3679</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03680" name="l03680"></a><span class="lineno"> 3680</span>        <a class="code hl_function" href="iexamine_8cpp.html#a6af7598204724fe8f5a995fa31e9b33d">pick_plant</a>( p, examp, <a class="code hl_variable" href="iexamine_8cpp.html#a887b627a1c6aa9a02e110fe43e1ef025">itype_marloss_berry</a>, <a class="code hl_variable" href="mapdata_8cpp.html#a7d12b590a17e64d80031bc8a1470fe33">t_tree_fungal</a> );</div>
<div class="line"><a id="l03681" name="l03681"></a><span class="lineno"> 3681</span>    }</div>
<div class="line"><a id="l03682" name="l03682"></a><span class="lineno"> 3682</span>}</div>
<div class="ttc" id="amapdata_8cpp_html_a089b3090dcfb8710ee9281aa090e4f77"><div class="ttname"><a href="mapdata_8cpp.html#a089b3090dcfb8710ee9281aa090e4f77">t_marloss_tree</a></div><div class="ttdeci">ter_id t_marloss_tree</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00693">mapdata.cpp:693</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a7d12b590a17e64d80031bc8a1470fe33"><div class="ttname"><a href="mapdata_8cpp.html#a7d12b590a17e64d80031bc8a1470fe33">t_tree_fungal</a></div><div class="ttdeci">ter_id t_tree_fungal</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00693">mapdata.cpp:693</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="iexamine_8cpp.html#a887b627a1c6aa9a02e110fe43e1ef025">itype_marloss_berry</a>, <a class="el" href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a>, <a class="el" href="enums_8h_source.html#l00260">m_good</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="iexamine_8cpp_source.html#l03454">pick_plant()</a>, <a class="el" href="character_8cpp_source.html#l00601">Character::pos()</a>, <a class="el" href="map_8cpp_source.html#l04313">map::spawn_item()</a>, <a class="el" href="mapdata_8cpp_source.html#l00693">t_marloss_tree</a>, <a class="el" href="mapdata_8cpp_source.html#l00693">t_tree_fungal</a>, <a class="el" href="map_8cpp_source.html#l01703">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a>, <a class="el" href="iexamine_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a>, <a class="el" href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l09095">game::place_player()</a>.</p>

</div>
</div>
<a id="ab2172a3ae52a0002ada7cba5f3fe55bc" name="ab2172a3ae52a0002ada7cba5f3fe55bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2172a3ae52a0002ada7cba5f3fe55bc">&#9670;&nbsp;</a></span>use_furn_fake_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::use_furn_fake_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04030">4030</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04031" name="l04031"></a><span class="lineno"> 4031</span>{</div>
<div class="line"><a id="l04032" name="l04032"></a><span class="lineno"> 4032</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;m = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l04033" name="l04033"></a><span class="lineno"> 4033</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> abspos( m.<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( examp ) );</div>
<div class="line"><a id="l04034" name="l04034"></a><span class="lineno"> 4034</span> </div>
<div class="line"><a id="l04035" name="l04035"></a><span class="lineno"> 4035</span>    <span class="keywordflow">if</span>( !m.<a class="code hl_function" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( examp ) ) {</div>
<div class="line"><a id="l04036" name="l04036"></a><span class="lineno"> 4036</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;lost furniture at %s&quot;</span>, examp.<a class="code hl_function" href="structtripoint.html#adf8e33de958b8f34a7c4ffff8cc87b02">to_string</a>() );</div>
<div class="line"><a id="l04037" name="l04037"></a><span class="lineno"> 4037</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04038" name="l04038"></a><span class="lineno"> 4038</span>    }</div>
<div class="line"><a id="l04039" name="l04039"></a><span class="lineno"> 4039</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structfurn__t.html">furn_t</a> &amp;furniture = m.<a class="code hl_function" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a id="l04040" name="l04040"></a><span class="lineno"> 4040</span>    <span class="keyword">const</span> std::vector&lt;itype&gt; item_type_list = furniture.crafting_pseudo_item_types();</div>
<div class="line"><a id="l04041" name="l04041"></a><span class="lineno"> 4041</span>    std::vector&lt;itype&gt; usable_item_types;</div>
<div class="line"><a id="l04042" name="l04042"></a><span class="lineno"> 4042</span>    std::vector&lt;std::string&gt; usable_item_names;</div>
<div class="line"><a id="l04043" name="l04043"></a><span class="lineno"> 4043</span>    <span class="keywordflow">if</span>( item_type_list.empty() ) {</div>
<div class="line"><a id="l04044" name="l04044"></a><span class="lineno"> 4044</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>(</div>
<div class="line"><a id="l04045" name="l04045"></a><span class="lineno"> 4045</span>            <span class="stringliteral">&quot;Furniture ( %s ) with use_furn_fake_item does not have fake item to use.&quot;</span>,</div>
<div class="line"><a id="l04046" name="l04046"></a><span class="lineno"> 4046</span>            furniture.id.c_str()</div>
<div class="line"><a id="l04047" name="l04047"></a><span class="lineno"> 4047</span>        );</div>
<div class="line"><a id="l04048" name="l04048"></a><span class="lineno"> 4048</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04049" name="l04049"></a><span class="lineno"> 4049</span>    }</div>
<div class="line"><a id="l04050" name="l04050"></a><span class="lineno"> 4050</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structitype.html">itype</a> &amp;itt : item_type_list ) {</div>
<div class="line"><a id="l04051" name="l04051"></a><span class="lineno"> 4051</span>        <span class="keywordflow">if</span>( !itt.has_use() ) {</div>
<div class="line"><a id="l04052" name="l04052"></a><span class="lineno"> 4052</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04053" name="l04053"></a><span class="lineno"> 4053</span>        }</div>
<div class="line"><a id="l04054" name="l04054"></a><span class="lineno"> 4054</span>        usable_item_types.push_back( itt );</div>
<div class="line"><a id="l04055" name="l04055"></a><span class="lineno"> 4055</span>        usable_item_names.push_back( itt.nname( 1 ) );</div>
<div class="line"><a id="l04056" name="l04056"></a><span class="lineno"> 4056</span>    }</div>
<div class="line"><a id="l04057" name="l04057"></a><span class="lineno"> 4057</span>    <span class="keywordflow">if</span>( usable_item_types.empty() ) {</div>
<div class="line"><a id="l04058" name="l04058"></a><span class="lineno"> 4058</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>(</div>
<div class="line"><a id="l04059" name="l04059"></a><span class="lineno"> 4059</span>            <span class="stringliteral">&quot;Furniture ( %s ) with use_furn_fake_item has no fake item with uses&quot;</span>,</div>
<div class="line"><a id="l04060" name="l04060"></a><span class="lineno"> 4060</span>            <a class="code hl_enumvalue" href="namespaceactivity__handlers_1_1repair__activity__hack_1_1anonymous__namespace_02activity__handlers_8cpp_03.html#a4c4a5f7284a7a2fd49013383f2530f3eafd87f5969ecaa22eaca667dd742f916d">furniture</a>.id.c_str() );</div>
<div class="line"><a id="l04061" name="l04061"></a><span class="lineno"> 4061</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04062" name="l04062"></a><span class="lineno"> 4062</span>    }</div>
<div class="line"><a id="l04063" name="l04063"></a><span class="lineno"> 4063</span> </div>
<div class="line"><a id="l04064" name="l04064"></a><span class="lineno"> 4064</span>    <span class="keywordtype">int</span> tool_index = 0;</div>
<div class="line"><a id="l04065" name="l04065"></a><span class="lineno"> 4065</span>    <span class="keywordflow">if</span>( usable_item_types.size() &gt; 1 ) {</div>
<div class="line"><a id="l04066" name="l04066"></a><span class="lineno"> 4066</span>        tool_index = <a class="code hl_class" href="classuilist.html">uilist</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Which tool do you want to use?&quot;</span> ), usable_item_names );</div>
<div class="line"><a id="l04067" name="l04067"></a><span class="lineno"> 4067</span>        <span class="keywordflow">if</span>( tool_index &lt; 0 || <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( tool_index ) &gt;= usable_item_types.size() ) {</div>
<div class="line"><a id="l04068" name="l04068"></a><span class="lineno"> 4068</span>            tool_index = -1;</div>
<div class="line"><a id="l04069" name="l04069"></a><span class="lineno"> 4069</span>        }</div>
<div class="line"><a id="l04070" name="l04070"></a><span class="lineno"> 4070</span>    }</div>
<div class="line"><a id="l04071" name="l04071"></a><span class="lineno"> 4071</span>    <span class="keywordflow">if</span>( tool_index &lt; 0 ) {</div>
<div class="line"><a id="l04072" name="l04072"></a><span class="lineno"> 4072</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04073" name="l04073"></a><span class="lineno"> 4073</span>    }</div>
<div class="line"><a id="l04074" name="l04074"></a><span class="lineno"> 4074</span> </div>
<div class="line"><a id="l04075" name="l04075"></a><span class="lineno"> 4075</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structitype.html">itype</a> &amp;cur_tool = usable_item_types.at( tool_index );</div>
<div class="line"><a id="l04076" name="l04076"></a><span class="lineno"> 4076</span>    <a class="code hl_class" href="classitem.html">item</a> fake_item( cur_tool.<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>(), <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, 0 );</div>
<div class="line"><a id="l04077" name="l04077"></a><span class="lineno"> 4077</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> ammo = fake_item.ammo_default();</div>
<div class="line"><a id="l04078" name="l04078"></a><span class="lineno"> 4078</span>    fake_item.set_flag( <span class="stringliteral">&quot;PSEUDO&quot;</span> );</div>
<div class="line"><a id="l04079" name="l04079"></a><span class="lineno"> 4079</span> </div>
<div class="line"><a id="l04080" name="l04080"></a><span class="lineno"> 4080</span>    <span class="keyword">enum class</span> charges_type {</div>
<div class="line"><a id="l04081" name="l04081"></a><span class="lineno"> 4081</span>        grid, ammo_from_map, <a class="code hl_enumvalue" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a></div>
<div class="line"><a id="l04082" name="l04082"></a><span class="lineno"> 4082</span>    };</div>
<div class="line"><a id="l04083" name="l04083"></a><span class="lineno"> 4083</span> </div>
<div class="line"><a id="l04084" name="l04084"></a><span class="lineno"> 4084</span>    charges_type charge_type = <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">charges_type::none</a>;</div>
<div class="line"><a id="l04085" name="l04085"></a><span class="lineno"> 4085</span>    fake_item.charges = 0;</div>
<div class="line"><a id="l04086" name="l04086"></a><span class="lineno"> 4086</span> </div>
<div class="line"><a id="l04087" name="l04087"></a><span class="lineno"> 4087</span>    <span class="keywordflow">if</span>( fake_item.has_flag( <span class="stringliteral">&quot;USES_GRID_POWER&quot;</span> ) ) {</div>
<div class="line"><a id="l04088" name="l04088"></a><span class="lineno"> 4088</span>        <span class="keyword">const</span> <a class="code hl_class" href="classdistribution__grid.html">distribution_grid</a> &amp;grid = <a class="code hl_function" href="distribution__grid_8h.html#ae8e6a5ac44a7f17ff6b6d1d86522d942">get_distribution_grid_tracker</a>().<a class="code hl_function" href="classdistribution__grid__tracker.html#a6fce22c007b9a8b4532aabefc8321aa5">grid_at</a>( abspos );</div>
<div class="line"><a id="l04089" name="l04089"></a><span class="lineno"> 4089</span>        fake_item.charges = grid.<a class="code hl_function" href="classdistribution__grid.html#a7beaf038705d51885b0f6644391d19bc">get_resource</a>();</div>
<div class="line"><a id="l04090" name="l04090"></a><span class="lineno"> 4090</span>        charge_type = charges_type::grid;</div>
<div class="line"><a id="l04091" name="l04091"></a><span class="lineno"> 4091</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ammo != <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">itype_id::NULL_ID</a>() ) {</div>
<div class="line"><a id="l04092" name="l04092"></a><span class="lineno"> 4092</span>        fake_item.charges = <a class="code hl_function" href="iexamine_8cpp.html#a0270df10fe59879068e7fde158e3fe0b">count_charges_in_list</a>( &amp;*ammo, m.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ) );</div>
<div class="line"><a id="l04093" name="l04093"></a><span class="lineno"> 4093</span>        charge_type = charges_type::ammo_from_map;</div>
<div class="line"><a id="l04094" name="l04094"></a><span class="lineno"> 4094</span>    }</div>
<div class="line"><a id="l04095" name="l04095"></a><span class="lineno"> 4095</span> </div>
<div class="line"><a id="l04096" name="l04096"></a><span class="lineno"> 4096</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> original_charges = fake_item.charges;</div>
<div class="line"><a id="l04097" name="l04097"></a><span class="lineno"> 4097</span>    p.<a class="code hl_function" href="classCharacter.html#a4dbec601ddf5ba1b6059b20785dfc329">invoke_item</a>( &amp;fake_item );</div>
<div class="line"><a id="l04098" name="l04098"></a><span class="lineno"> 4098</span> </div>
<div class="line"><a id="l04099" name="l04099"></a><span class="lineno"> 4099</span>    <span class="comment">// HACK: Evil hack incoming</span></div>
<div class="line"><a id="l04100" name="l04100"></a><span class="lineno"> 4100</span>    <a class="code hl_function" href="namespaceactivity__handlers_1_1repair__activity__hack.html#a3e3ae9542f50ef9949b9840ef4fce32c">activity_handlers::repair_activity_hack::patch_activity_for_furniture</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity, examp,</div>
<div class="line"><a id="l04101" name="l04101"></a><span class="lineno"> 4101</span>            cur_tool.<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>() );</div>
<div class="line"><a id="l04102" name="l04102"></a><span class="lineno"> 4102</span> </div>
<div class="line"><a id="l04103" name="l04103"></a><span class="lineno"> 4103</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> discharged_ammo = original_charges - fake_item.charges;</div>
<div class="line"><a id="l04104" name="l04104"></a><span class="lineno"> 4104</span> </div>
<div class="line"><a id="l04105" name="l04105"></a><span class="lineno"> 4105</span>    <span class="keywordflow">if</span>( discharged_ammo == 0 ) {</div>
<div class="line"><a id="l04106" name="l04106"></a><span class="lineno"> 4106</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04107" name="l04107"></a><span class="lineno"> 4107</span>    }</div>
<div class="line"><a id="l04108" name="l04108"></a><span class="lineno"> 4108</span> </div>
<div class="line"><a id="l04109" name="l04109"></a><span class="lineno"> 4109</span>    <span class="keywordflow">switch</span>( charge_type ) {</div>
<div class="line"><a id="l04110" name="l04110"></a><span class="lineno"> 4110</span>        <span class="keywordflow">case</span> charges_type::grid: {</div>
<div class="line"><a id="l04111" name="l04111"></a><span class="lineno"> 4111</span>            <a class="code hl_class" href="classdistribution__grid.html">distribution_grid</a> &amp;grid = <a class="code hl_function" href="distribution__grid_8h.html#ae8e6a5ac44a7f17ff6b6d1d86522d942">get_distribution_grid_tracker</a>().<a class="code hl_function" href="classdistribution__grid__tracker.html#a6fce22c007b9a8b4532aabefc8321aa5">grid_at</a>( abspos );</div>
<div class="line"><a id="l04112" name="l04112"></a><span class="lineno"> 4112</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> remainder = grid.<a class="code hl_function" href="classdistribution__grid.html#aef129840452104139c57dcad9f76eccb">mod_resource</a>( -discharged_ammo );</div>
<div class="line"><a id="l04113" name="l04113"></a><span class="lineno"> 4113</span>            <span class="keywordflow">if</span>( remainder != 0 ) {</div>
<div class="line"><a id="l04114" name="l04114"></a><span class="lineno"> 4114</span>                <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Fake item %s discharged more charges than have in grid at %s.&quot;</span>,</div>
<div class="line"><a id="l04115" name="l04115"></a><span class="lineno"> 4115</span>                          cur_tool.<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>().<a class="code hl_function" href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">c_str</a>(), abspos.to_string() );</div>
<div class="line"><a id="l04116" name="l04116"></a><span class="lineno"> 4116</span>            }</div>
<div class="line"><a id="l04117" name="l04117"></a><span class="lineno"> 4117</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04118" name="l04118"></a><span class="lineno"> 4118</span>        }</div>
<div class="line"><a id="l04119" name="l04119"></a><span class="lineno"> 4119</span>        <span class="keywordflow">case</span> charges_type::ammo_from_map: {</div>
<div class="line"><a id="l04120" name="l04120"></a><span class="lineno"> 4120</span>            <span class="keywordtype">int</span> by_ref = discharged_ammo;</div>
<div class="line"><a id="l04121" name="l04121"></a><span class="lineno"> 4121</span>            m.<a class="code hl_function" href="classmap.html#a303a4950ef1850ddcc5e8f902418ac82">use_charges</a>( examp, 0, ammo-&gt;<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>(), by_ref );</div>
<div class="line"><a id="l04122" name="l04122"></a><span class="lineno"> 4122</span>            <span class="keywordflow">if</span>( by_ref != 0 ) {</div>
<div class="line"><a id="l04123" name="l04123"></a><span class="lineno"> 4123</span>                <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Discharged fake item %s more ammo than %s has at %s.&quot;</span>,</div>
<div class="line"><a id="l04124" name="l04124"></a><span class="lineno"> 4124</span>                          cur_tool.<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>().<a class="code hl_function" href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">c_str</a>(),</div>
<div class="line"><a id="l04125" name="l04125"></a><span class="lineno"> 4125</span>                          <a class="code hl_enumvalue" href="namespaceactivity__handlers_1_1repair__activity__hack_1_1anonymous__namespace_02activity__handlers_8cpp_03.html#a4c4a5f7284a7a2fd49013383f2530f3eafd87f5969ecaa22eaca667dd742f916d">furniture</a>.id.c_str(),</div>
<div class="line"><a id="l04126" name="l04126"></a><span class="lineno"> 4126</span>                          examp.<a class="code hl_function" href="structtripoint.html#adf8e33de958b8f34a7c4ffff8cc87b02">to_string</a>()</div>
<div class="line"><a id="l04127" name="l04127"></a><span class="lineno"> 4127</span>                        );</div>
<div class="line"><a id="l04128" name="l04128"></a><span class="lineno"> 4128</span>            }</div>
<div class="line"><a id="l04129" name="l04129"></a><span class="lineno"> 4129</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04130" name="l04130"></a><span class="lineno"> 4130</span>        }</div>
<div class="line"><a id="l04131" name="l04131"></a><span class="lineno"> 4131</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">charges_type::none</a>:</div>
<div class="line"><a id="l04132" name="l04132"></a><span class="lineno"> 4132</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Somehow changed charges of fake item %s without ammo type to %d.&quot;</span>,</div>
<div class="line"><a id="l04133" name="l04133"></a><span class="lineno"> 4133</span>                      cur_tool.<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>().<a class="code hl_function" href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">c_str</a>(),</div>
<div class="line"><a id="l04134" name="l04134"></a><span class="lineno"> 4134</span>                      fake_item.charges</div>
<div class="line"><a id="l04135" name="l04135"></a><span class="lineno"> 4135</span>                    );</div>
<div class="line"><a id="l04136" name="l04136"></a><span class="lineno"> 4136</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04137" name="l04137"></a><span class="lineno"> 4137</span>    }</div>
<div class="line"><a id="l04138" name="l04138"></a><span class="lineno"> 4138</span>}</div>
<div class="ttc" id="aactive__item__cache_8h_html_acc683dc9a32f0cb3fb0032b41c6e17b5a334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5a334c4a4c42fdb79d7ebc3e73b517e6f8">special_item_type::none</a></div><div class="ttdeci">@ none</div></div>
<div class="ttc" id="aclassCharacter_html_a4dbec601ddf5ba1b6059b20785dfc329"><div class="ttname"><a href="classCharacter.html#a4dbec601ddf5ba1b6059b20785dfc329">Character::invoke_item</a></div><div class="ttdeci">virtual bool invoke_item(item *, const tripoint &amp;pt)</div><div class="ttdoc">Asks how to use the item (if it has more than one use_method) and uses it.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07226">character.cpp:7226</a></div></div>
<div class="ttc" id="aclassdistribution__grid_html"><div class="ttname"><a href="classdistribution__grid.html">distribution_grid</a></div><div class="ttdoc">A cache that organizes producers, storage and consumers of some resource, like electricity.</div><div class="ttdef"><b>Definition:</b> <a href="distribution__grid_8h_source.html#l00036">distribution_grid.h:37</a></div></div>
<div class="ttc" id="aclassdistribution__grid_html_aef129840452104139c57dcad9f76eccb"><div class="ttname"><a href="classdistribution__grid.html#aef129840452104139c57dcad9f76eccb">distribution_grid::mod_resource</a></div><div class="ttdeci">int mod_resource(int amt, bool recurse=true)</div><div class="ttdef"><b>Definition:</b> <a href="distribution__grid_8cpp_source.html#l00072">distribution_grid.cpp:72</a></div></div>
<div class="ttc" id="aclassmap_html_a303a4950ef1850ddcc5e8f902418ac82"><div class="ttname"><a href="classmap.html#a303a4950ef1850ddcc5e8f902418ac82">map::use_charges</a></div><div class="ttdeci">std::list&lt; item &gt; use_charges(const tripoint &amp;origin, int range, const itype_id &amp;type, int &amp;quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, basecamp *bcp=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05037">map.cpp:5037</a></div></div>
<div class="ttc" id="anamespaceactivity__handlers_1_1repair__activity__hack_1_1anonymous__namespace_02activity__handlers_8cpp_03_html_a4c4a5f7284a7a2fd49013383f2530f3eafd87f5969ecaa22eaca667dd742f916d"><div class="ttname"><a href="namespaceactivity__handlers_1_1repair__activity__hack_1_1anonymous__namespace_02activity__handlers_8cpp_03.html#a4c4a5f7284a7a2fd49013383f2530f3eafd87f5969ecaa22eaca667dd742f916d">activity_handlers::repair_activity_hack::anonymous_namespace{activity_handlers.cpp}::hack_type_t::furniture</a></div><div class="ttdeci">@ furniture</div></div>
<div class="ttc" id="anamespaceactivity__handlers_1_1repair__activity__hack_html_a3e3ae9542f50ef9949b9840ef4fce32c"><div class="ttname"><a href="namespaceactivity__handlers_1_1repair__activity__hack.html#a3e3ae9542f50ef9949b9840ef4fce32c">activity_handlers::repair_activity_hack::patch_activity_for_furniture</a></div><div class="ttdeci">void patch_activity_for_furniture(player_activity &amp;activity, const tripoint &amp;furniture_position, const itype_id &amp;itt)</div><div class="ttdef"><b>Definition:</b> <a href="activity__handlers_8cpp_source.html#l02802">activity_handlers.cpp:2802</a></div></div>
<div class="ttc" id="astructtripoint_html_adf8e33de958b8f34a7c4ffff8cc87b02"><div class="ttname"><a href="structtripoint.html#adf8e33de958b8f34a7c4ffff8cc87b02">tripoint::to_string</a></div><div class="ttdeci">std::string to_string() const</div><div class="ttdef"><b>Definition:</b> <a href="point_8cpp_source.html#l00034">point.cpp:34</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="item_8cpp_source.html#l07613">item::ammo_default()</a>, <a class="el" href="string__id_8h_source.html#l00247">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="item_8h_source.html#l02199">item::charges</a>, <a class="el" href="iexamine_8cpp_source.html#l03912">count_charges_in_list()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="map_8cpp_source.html#l01412">map::furn()</a>, <a class="el" href="game_8cpp_source.html#l00283">g</a>, <a class="el" href="game_8cpp_source.html#l12091">get_distribution_grid_tracker()</a>, <a class="el" href="itype_8cpp_source.html#l00088">itype::get_id()</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="distribution__grid_8cpp_source.html#l00121">distribution_grid::get_resource()</a>, <a class="el" href="map_8cpp_source.html#l08399">map::getabs()</a>, <a class="el" href="distribution__grid_8cpp_source.html#l00263">distribution_grid_tracker::grid_at()</a>, <a class="el" href="item_8cpp_source.html#l05328">item::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l01407">map::has_furn()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="character_8cpp_source.html#l07226">Character::invoke_item()</a>, <a class="el" href="distribution__grid_8cpp_source.html#l00072">distribution_grid::mod_resource()</a>, <a class="el" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">string_id&lt; itype &gt;::NULL_ID()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02802">activity_handlers::repair_activity_hack::patch_activity_for_furniture()</a>, <a class="el" href="item_8cpp_source.html#l05357">item::set_flag()</a>, <a class="el" href="coordinates_8h_source.html#l00140">coords::coord_point&lt; Point, Origin, Scale &gt;::to_string()</a>, <a class="el" href="point_8cpp_source.html#l00034">tripoint::to_string()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, and <a class="el" href="map_8cpp_source.html#l05037">map::use_charges()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="a360f69227ebd74f2248665b2fe67acd7" name="a360f69227ebd74f2248665b2fe67acd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a360f69227ebd74f2248665b2fe67acd7">&#9670;&nbsp;</a></span>vending()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::vending </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates vending machine UI and allows players to purchase contained items with a cash card. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00675">675</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>{</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> moves_cost = to_turns&lt;int&gt;( 5_seconds );</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>    <span class="keywordtype">int</span> <a class="code hl_typedef" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> = p.<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a> );</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    <span class="keyword">auto</span> vend_items = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span> </div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    <span class="keywordflow">if</span>( vend_items.empty() ) {</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The vending machine is empty.&quot;</span> ) );</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    }</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span> </div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>    <span class="keywordflow">if</span>( !<a class="code hl_typedef" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> ) {</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need some money on a cash card to buy things.&quot;</span> ) );</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>    }</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span> </div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    <span class="keywordtype">int</span> w_items_w = 0;</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    <span class="keywordtype">int</span> w_info_w = 0;</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    <span class="keywordtype">int</span> list_lines = 0;</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>    <span class="keywordtype">int</span> lines_above = 0;</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>    <span class="keywordtype">int</span> lines_below = 0;</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> first_item_offset = 3; <span class="comment">// header size</span></div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span> </div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    <a class="code hl_class" href="classcatacurses_1_1window.html">catacurses::window</a> w;</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    <a class="code hl_class" href="classcatacurses_1_1window.html">catacurses::window</a> w_item_info;</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span> </div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>    <a class="code hl_class" href="classui__adaptor.html">ui_adaptor</a> <a class="code hl_namespace" href="namespaceui.html">ui</a>;</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>    <a class="code hl_namespace" href="namespaceui.html">ui</a>.on_screen_resize( [&amp;]( <a class="code hl_class" href="classui__adaptor.html">ui_adaptor</a> &amp; <a class="code hl_namespace" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> padding( std::max( 0, <a class="code hl_variable" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> - <a class="code hl_variable" href="output_8cpp.html#af24921c70e875c1d0888315b9452b562">FULL_SCREEN_WIDTH</a> ) / 4, std::max( 0,</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>                             <a class="code hl_variable" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> - <a class="code hl_variable" href="output_8cpp.html#a32bc92e8282b63d800068ce8e182b269">FULL_SCREEN_HEIGHT</a> ) / 6 );</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> window_h   = <a class="code hl_variable" href="output_8cpp.html#a32bc92e8282b63d800068ce8e182b269">FULL_SCREEN_HEIGHT</a> + std::max( 0, <a class="code hl_variable" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> - <a class="code hl_variable" href="output_8cpp.html#a32bc92e8282b63d800068ce8e182b269">FULL_SCREEN_HEIGHT</a> ) * 2 / 3;</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> window_w   = <a class="code hl_variable" href="output_8cpp.html#af24921c70e875c1d0888315b9452b562">FULL_SCREEN_WIDTH</a> + std::max( 0, <a class="code hl_variable" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> - <a class="code hl_variable" href="output_8cpp.html#af24921c70e875c1d0888315b9452b562">FULL_SCREEN_WIDTH</a> ) / 2;</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>        w_items_w  = window_w / 2;</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>        w_info_w   = window_w - w_items_w;</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>        list_lines = window_h - 4; <span class="comment">// minus for header and footer</span></div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span> </div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>        lines_above = list_lines / 2;                  <span class="comment">// lines above the selector</span></div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>        lines_below = list_lines / 2 + list_lines % 2; <span class="comment">// lines below the selector</span></div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span> </div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>        w = <a class="code hl_function" href="namespacecatacurses.html#a46f283ad0553e1f25b069e41c3a6bd3f">catacurses::newwin</a>( window_h, w_items_w,</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>                                padding );</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>        w_item_info = <a class="code hl_function" href="namespacecatacurses.html#a46f283ad0553e1f25b069e41c3a6bd3f">catacurses::newwin</a>( window_h, w_info_w,</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>                                          padding + <a class="code hl_struct" href="structpoint.html">point</a>( w_items_w, 0 ) );</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span> </div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>        <a class="code hl_namespace" href="namespaceui.html">ui</a>.position( padding, <a class="code hl_struct" href="structpoint.html">point</a>( window_w, window_h ) );</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    } );</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>    <a class="code hl_namespace" href="namespaceui.html">ui</a>.mark_resize();</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span> </div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>    <span class="keywordtype">bool</span> used_machine = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>    <a class="code hl_class" href="classinput__context.html">input_context</a> ctxt( <span class="stringliteral">&quot;VENDING_MACHINE&quot;</span> );</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    ctxt.register_updown();</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>    ctxt.register_action( <span class="stringliteral">&quot;CONFIRM&quot;</span> );</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>    ctxt.register_action( <span class="stringliteral">&quot;QUIT&quot;</span> );</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    ctxt.register_action( <span class="stringliteral">&quot;HELP_KEYBINDINGS&quot;</span> );</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span> </div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <span class="comment">// Collate identical items.</span></div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    <span class="comment">// First, build a map {item::tname} =&gt; {item_it, item_it, item_it...}</span></div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>    <span class="keyword">using</span> <a class="code hl_typedef" href="namespacedetail.html#a204148e9216ddc0ae7fdbea1c42e457a">iterator_t</a> = <span class="keyword">decltype</span>( std::begin( vend_items ) ); <span class="comment">// map_stack::iterator doesn&#39;t exist.</span></div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span> </div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>    std::map&lt;std::string, std::vector&lt;iterator_t&gt;&gt; item_map;</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = std::begin( vend_items ); it != std::end( vend_items ); ++it ) {</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>        <span class="comment">// |# {name}|</span></div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>        <span class="comment">// 123      4</span></div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>        item_map[it-&gt;tname()].push_back( it );</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>    }</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span> </div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>    <span class="comment">// Next, put pointers to the pairs in the map in a vector to allow indexing.</span></div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>    std::vector&lt;std::map&lt;std::string, std::vector&lt;iterator_t&gt;&gt;::value_type *&gt; item_list;</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>    item_list.reserve( item_map.size() );</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;pair : item_map ) {</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>        item_list.emplace_back( &amp;pair );</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    }</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span> </div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>    <span class="keywordtype">int</span> cur_pos = 0;</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>    <a class="code hl_namespace" href="namespaceui.html">ui</a>.on_redraw( [&amp;]( <span class="keyword">const</span> <a class="code hl_class" href="classui__adaptor.html">ui_adaptor</a> &amp; ) {</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> num_items = item_list.size();</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> page_size = std::min( num_items, list_lines );</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span> </div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>        <a class="code hl_function" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( w );</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>        <a class="code hl_function" href="namespacecatacurses.html#a4b4f58d631572c4763be9efe9af6c6bc">wborder</a>( w, <a class="code hl_define" href="output_8h.html#a33ab4e0193402fed8f74590a30fadc3c">LINE_XOXO</a>, <a class="code hl_define" href="output_8h.html#a33ab4e0193402fed8f74590a30fadc3c">LINE_XOXO</a>, <a class="code hl_define" href="output_8h.html#a435355aeca1be3844e79fc4db8e691e1">LINE_OXOX</a>, <a class="code hl_define" href="output_8h.html#a435355aeca1be3844e79fc4db8e691e1">LINE_OXOX</a>,</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>                 <a class="code hl_define" href="output_8h.html#a6405dcdb708433c3c3dde836aa8a15cc">LINE_OXXO</a>, <a class="code hl_define" href="output_8h.html#a479e8a9ad84c68ed5f8609d4b536a8bb">LINE_OOXX</a>, <a class="code hl_define" href="output_8h.html#af6d239f277e1b763f690b94efa469792">LINE_XXOO</a>, <a class="code hl_define" href="output_8h.html#ad3a54f998264087befce6de30cb787b0">LINE_XOOX</a> );</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>        <a class="code hl_function" href="namespacecatacurses.html#ab5533daa5f2a9fcf1f9f313a3556d7f4">mvwhline</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( 1, first_item_offset - 1 ), <a class="code hl_define" href="output_8h.html#a435355aeca1be3844e79fc4db8e691e1">LINE_OXOX</a>, w_items_w - 2 );</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>        <a class="code hl_function" href="namespacecatacurses.html#a9db44d32ed9ffa121c71f636076a2cda">mvwaddch</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( 0, first_item_offset - 1 ), <a class="code hl_define" href="output_8h.html#a4b80f0039259ebe61dc2e58ca4b31043">LINE_XXXO</a> ); <span class="comment">// |-</span></div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>        <a class="code hl_function" href="namespacecatacurses.html#a9db44d32ed9ffa121c71f636076a2cda">mvwaddch</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( w_items_w - 1, first_item_offset - 1 ), <a class="code hl_define" href="output_8h.html#a0803e4570f3cd69d38952bc2b4555c24">LINE_XOXX</a> ); <span class="comment">// -|</span></div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span> </div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>        <a class="code hl_function" href="output_8cpp.html#abd2ce6d9082aacd564cfd8d5fbb82bb8">trim_and_print</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( 2, 1 ), w_items_w - 3, <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>,</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>                        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Money left: %s&quot;</span> ), <a class="code hl_function" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( <a class="code hl_typedef" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> ) );</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span> </div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        <span class="comment">// Keep the item selector centered in the page.</span></div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>        <span class="keywordtype">int</span> page_beg;</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>        <span class="keywordflow">if</span>( cur_pos &lt; num_items - cur_pos ) {</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>            page_beg = std::max( 0, cur_pos - lines_above );</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>            <span class="keywordtype">int</span> page_end = std::min( num_items, cur_pos + lines_below );</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>            page_beg = std::max( 0, page_end - list_lines );</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>        }</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span> </div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> <a class="code hl_function" href="mapgen_8cpp.html#a7a9bb2e98af3268deb7dd8fda06a7d2e">line</a> = 0; <a class="code hl_function" href="mapgen_8cpp.html#a7a9bb2e98af3268deb7dd8fda06a7d2e">line</a> &lt; page_size; ++<a class="code hl_function" href="mapgen_8cpp.html#a7a9bb2e98af3268deb7dd8fda06a7d2e">line</a> ) {</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> i = page_beg + <a class="code hl_function" href="mapgen_8cpp.html#a7a9bb2e98af3268deb7dd8fda06a7d2e">line</a>;</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>            <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = ( i == cur_pos ) ? <a class="code hl_define" href="color_8h.html#ab13a4a0b8847d4df7c32c9453a2670e6">h_light_gray</a> : <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>            <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem = item_list[i];</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = elem-&gt;second.size();</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>            <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> = ( <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> &lt; 10 ) ? ( <span class="charliteral">&#39;0&#39;</span> + <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> ) : <span class="charliteral">&#39;*&#39;</span>;</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>            <a class="code hl_function" href="output_8cpp.html#abd2ce6d9082aacd564cfd8d5fbb82bb8">trim_and_print</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( 1, first_item_offset + <a class="code hl_function" href="mapgen_8cpp.html#a7a9bb2e98af3268deb7dd8fda06a7d2e">line</a> ), w_items_w - 3, <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>, <span class="stringliteral">&quot;%c %s&quot;</span>, <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>,</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>                            elem-&gt;first.c_str() );</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>        }</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span> </div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>        <a class="code hl_function" href="output_8cpp.html#ac8f51dbe355dcbc024ffb57307c1e79e">draw_scrollbar</a>( w, cur_pos, list_lines, num_items, <a class="code hl_struct" href="structpoint.html">point</a>( 0, first_item_offset ) );</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>        <a class="code hl_function" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( w );</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span> </div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        <span class="comment">// Item info</span></div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>        <span class="keyword">auto</span> &amp;cur_items = item_list[<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( cur_pos )]-&gt;second;</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>        <span class="keyword">auto</span> &amp;cur_item  = cur_items.back();</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span> </div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>        <a class="code hl_function" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( w_item_info );</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>        <span class="comment">// | {line}|</span></div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>        <span class="comment">// 12      3</span></div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>        <a class="code hl_function" href="output_8cpp.html#a8fe6897b9287a349d2eb4159b864afe8">fold_and_print</a>( w_item_info, <a class="code hl_struct" href="structpoint.html">point</a>( 2, 1 ), w_info_w - 3, <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, cur_item-&gt;info_string() );</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>        <a class="code hl_function" href="namespacecatacurses.html#a4b4f58d631572c4763be9efe9af6c6bc">wborder</a>( w_item_info, <a class="code hl_define" href="output_8h.html#a33ab4e0193402fed8f74590a30fadc3c">LINE_XOXO</a>, <a class="code hl_define" href="output_8h.html#a33ab4e0193402fed8f74590a30fadc3c">LINE_XOXO</a>, <a class="code hl_define" href="output_8h.html#a435355aeca1be3844e79fc4db8e691e1">LINE_OXOX</a>, <a class="code hl_define" href="output_8h.html#a435355aeca1be3844e79fc4db8e691e1">LINE_OXOX</a>,</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>                 <a class="code hl_define" href="output_8h.html#a6405dcdb708433c3c3dde836aa8a15cc">LINE_OXXO</a>, <a class="code hl_define" href="output_8h.html#a479e8a9ad84c68ed5f8609d4b536a8bb">LINE_OOXX</a>, <a class="code hl_define" href="output_8h.html#af6d239f277e1b763f690b94efa469792">LINE_XXOO</a>, <a class="code hl_define" href="output_8h.html#ad3a54f998264087befce6de30cb787b0">LINE_XOOX</a> );</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span> </div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>        <span class="comment">//+&lt;{name}&gt;+</span></div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>        <span class="comment">//12      34</span></div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>        <span class="keyword">const</span> std::string <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = <a class="code hl_function" href="catacharset_8cpp.html#ad959840e392a0d3b79d93cfe64119ca9">utf8_truncate</a>( cur_item-&gt;display_name(),</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>                                                <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( w_info_w - 4 ) );</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span> </div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>        <span class="keyword">const</span> <span class="keyword">auto</span> cost = <a class="code hl_function" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( cur_item-&gt;price( <span class="keyword">false</span> ) );</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>        <a class="code hl_function" href="namespacecatacurses.html#abe25c16ff9629ebead2700627a024798">mvwprintw</a>( w_item_info, <a class="code hl_variable" href="point_8h.html#aff73fd5bf470a3db5291c5dec855bb71">point_east</a>, <span class="stringliteral">&quot;&lt;%s&gt; %s&quot;</span>, <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, cost );</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>        <a class="code hl_function" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( w_item_info );</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>    } );</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span> </div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>    <span class="keywordflow">for</span>( ;; ) {</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>        <a class="code hl_function" href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a>();</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span> </div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> num_items = item_list.size();</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span> </div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>        <span class="comment">// Item info</span></div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>        <span class="keyword">auto</span> &amp;cur_items = item_list[<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( cur_pos )]-&gt;second;</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>        <span class="keyword">auto</span> &amp;cur_item  = cur_items.back();</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span> </div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>        <span class="keyword">const</span> std::string &amp;<a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = ctxt.handle_input();</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>        <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;DOWN&quot;</span> ) {</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>            cur_pos = ( cur_pos + 1 ) % num_items;</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;UP&quot;</span> ) {</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>            cur_pos = ( cur_pos + num_items - 1 ) % num_items;</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;CONFIRM&quot;</span> ) {</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> iprice = cur_item-&gt;price( <span class="keyword">false</span> );</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span> </div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>            <span class="keywordflow">if</span>( iprice &gt; <a class="code hl_typedef" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> ) {</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>                <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t afford that item.&quot;</span> ) );</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>            }</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span> </div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>            <span class="keywordflow">if</span>( !used_machine ) {</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>                used_machine = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>                p.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= moves_cost;</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>            }</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span> </div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>            <a class="code hl_typedef" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> -= iprice;</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>            p.<a class="code hl_function" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( <a class="code hl_variable" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a>, iprice );</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>            p.<a class="code hl_function" href="classCharacter.html#ab80b4bcd5228af487bb1a26c14864e5d">i_add_or_drop</a>( *cur_item );</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span> </div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>            vend_items.erase( cur_item );</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>            cur_items.pop_back();</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>            <span class="keywordflow">if</span>( !cur_items.empty() ) {</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>            }</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span> </div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>            item_list.erase( std::begin( item_list ) + cur_pos );</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>            <span class="keywordflow">if</span>( item_list.empty() ) {</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;With a beep, the empty vending machine shuts down.&quot;</span> ) );</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur_pos == num_items - 1 ) {</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>                cur_pos--;</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>            }</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;QUIT&quot;</span> ) {</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>        }</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>    }</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>}</div>
<div class="ttc" id="acatacharset_8cpp_html_ad959840e392a0d3b79d93cfe64119ca9"><div class="ttname"><a href="catacharset_8cpp.html#ad959840e392a0d3b79d93cfe64119ca9">utf8_truncate</a></div><div class="ttdeci">std::string utf8_truncate(const std::string &amp;s, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00238">catacharset.cpp:238</a></div></div>
<div class="ttc" id="aclasscatacurses_1_1window_html"><div class="ttname"><a href="classcatacurses_1_1window.html">catacurses::window</a></div><div class="ttdoc">A wrapper over a pointer to a curses window.</div><div class="ttdef"><b>Definition:</b> <a href="cursesdef_8h_source.html#l00054">cursesdef.h:55</a></div></div>
<div class="ttc" id="aclassinput__context_html"><div class="ttname"><a href="classinput__context.html">input_context</a></div><div class="ttdoc">Represents a context in which a set of actions can be performed.</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00381">input.h:382</a></div></div>
<div class="ttc" id="aclassui__adaptor_html"><div class="ttname"><a href="classui__adaptor.html">ui_adaptor</a></div><div class="ttdoc">Adaptor between UI code and the UI management system.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8h_source.html#l00064">ui_manager.h:65</a></div></div>
<div class="ttc" id="acolor_8h_html_a1b1e3c0bef566a83c3535e38a93ad733"><div class="ttname"><a href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a></div><div class="ttdeci">#define c_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
<div class="ttc" id="acolor_8h_html_ab13a4a0b8847d4df7c32c9453a2670e6"><div class="ttname"><a href="color_8h.html#ab13a4a0b8847d4df7c32c9453a2670e6">h_light_gray</a></div><div class="ttdeci">#define h_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00036">color.h:36</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a></div><div class="ttdeci">@ action</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00037">dialogue.h:36</a></div></div>
<div class="ttc" id="aeditmap_8cpp_html_a025a5c063205294df20818edc4cfe355"><div class="ttname"><a href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a></div><div class="ttdeci">static nc_color color(const T_t &amp;t)</div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01032">magic.cpp:1032</a></div></div>
<div class="ttc" id="amapgen_8cpp_html_a7a9bb2e98af3268deb7dd8fda06a7d2e"><div class="ttname"><a href="mapgen_8cpp.html#a7a9bb2e98af3268deb7dd8fda06a7d2e">line</a></div><div class="ttdeci">void line(map *m, const ter_id &amp;type, point p1, point p2)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l06281">mapgen.cpp:6281</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a46f283ad0553e1f25b069e41c3a6bd3f"><div class="ttname"><a href="namespacecatacurses.html#a46f283ad0553e1f25b069e41c3a6bd3f">catacurses::newwin</a></div><div class="ttdeci">window newwin(int nlines, int ncols, point begin)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00034">ncurses_def.cpp:34</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a4b4f58d631572c4763be9efe9af6c6bc"><div class="ttname"><a href="namespacecatacurses.html#a4b4f58d631572c4763be9efe9af6c6bc">catacurses::wborder</a></div><div class="ttdeci">void wborder(const window &amp;win, chtype ls, chtype rs, chtype ts, chtype bs, chtype tl, chtype tr, chtype bl, chtype br)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00145">ncurses_def.cpp:145</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a9db44d32ed9ffa121c71f636076a2cda"><div class="ttname"><a href="namespacecatacurses.html#a9db44d32ed9ffa121c71f636076a2cda">catacurses::mvwaddch</a></div><div class="ttdeci">void mvwaddch(const window &amp;win, point p, chtype ch)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00164">ncurses_def.cpp:164</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_aa9823d249c21fa50daf277957fabb175"><div class="ttname"><a href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">catacurses::wnoutrefresh</a></div><div class="ttdeci">void wnoutrefresh(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00043">ncurses_def.cpp:43</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_ab5533daa5f2a9fcf1f9f313a3556d7f4"><div class="ttname"><a href="namespacecatacurses.html#ab5533daa5f2a9fcf1f9f313a3556d7f4">catacurses::mvwhline</a></div><div class="ttdeci">void mvwhline(const window &amp;win, point p, chtype ch, int n)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00152">ncurses_def.cpp:152</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_abe25c16ff9629ebead2700627a024798"><div class="ttname"><a href="namespacecatacurses.html#abe25c16ff9629ebead2700627a024798">catacurses::mvwprintw</a></div><div class="ttdeci">void mvwprintw(const window &amp;win, point p, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00103">ncurses_def.cpp:103</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_ace2ce3990cb812fb83adf6e4ea1f9e8e"><div class="ttname"><a href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">catacurses::werase</a></div><div class="ttdeci">void werase(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00053">ncurses_def.cpp:53</a></div></div>
<div class="ttc" id="anamespacedetail_html_a204148e9216ddc0ae7fdbea1c42e457a"><div class="ttname"><a href="namespacedetail.html#a204148e9216ddc0ae7fdbea1c42e457a">detail::iterator_t</a></div><div class="ttdeci">decltype(std::begin(std::declval&lt; T &amp; &gt;())) iterator_t</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format_8h_source.html#l00377">fmtlib_format.h:377</a></div></div>
<div class="ttc" id="anamespaceui__manager_html_ae38f3a918052ef286ee60daac47f52d4"><div class="ttname"><a href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a></div><div class="ttdeci">void redraw()</div><div class="ttdoc">Invalidate the top window and redraw all invalidated windows.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00389">ui_manager.cpp:389</a></div></div>
<div class="ttc" id="anamespaceui_html"><div class="ttname"><a href="namespaceui.html">ui</a></div><div class="ttdef"><b>Definition:</b> <a href="overmap__ui_8h_source.html#l00016">overmap_ui.h:17</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a000abea6447dfafd5f9b787aa6753609"><div class="ttname"><a href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a></div><div class="ttdeci">int TERMX</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00047">output.cpp:47</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a32bc92e8282b63d800068ce8e182b269"><div class="ttname"><a href="output_8cpp.html#a32bc92e8282b63d800068ce8e182b269">FULL_SCREEN_HEIGHT</a></div><div class="ttdeci">int FULL_SCREEN_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00056">output.cpp:56</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a567a63be8cb70cc3eb47bf8affced8e5"><div class="ttname"><a href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a></div><div class="ttdeci">int TERMY</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00048">output.cpp:48</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a8fe6897b9287a349d2eb4159b864afe8"><div class="ttname"><a href="output_8cpp.html#a8fe6897b9287a349d2eb4159b864afe8">fold_and_print</a></div><div class="ttdeci">int fold_and_print(const catacurses::window &amp;w, point begin, int width, const nc_color &amp;base_color, const std::string &amp;text, const char split)</div><div class="ttdoc">Fold and print text in the given window.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00299">output.cpp:299</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_abd2ce6d9082aacd564cfd8d5fbb82bb8"><div class="ttname"><a href="output_8cpp.html#abd2ce6d9082aacd564cfd8d5fbb82bb8">trim_and_print</a></div><div class="ttdeci">void trim_and_print(const catacurses::window &amp;w, point begin, const int width, const nc_color &amp;base_color, const std::string &amp;text, const report_color_error color_error)</div><div class="ttdoc">Prints a single line of text.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00214">output.cpp:214</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ac8f51dbe355dcbc024ffb57307c1e79e"><div class="ttname"><a href="output_8cpp.html#ac8f51dbe355dcbc024ffb57307c1e79e">draw_scrollbar</a></div><div class="ttdeci">void draw_scrollbar(const catacurses::window &amp;window, const int iCurrentLine, const int iContentHeight, const int iNumLines, point offset, nc_color bar_color, const bool bDoNotScrollToEnd)</div><div class="ttdoc">Draw a scrollbar (Legacy function, use class scrollbar instead!)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l01314">output.cpp:1314</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_af24921c70e875c1d0888315b9452b562"><div class="ttname"><a href="output_8cpp.html#af24921c70e875c1d0888315b9452b562">FULL_SCREEN_WIDTH</a></div><div class="ttdeci">int FULL_SCREEN_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00055">output.cpp:55</a></div></div>
<div class="ttc" id="aoutput_8h_html_a0803e4570f3cd69d38952bc2b4555c24"><div class="ttname"><a href="output_8h.html#a0803e4570f3cd69d38952bc2b4555c24">LINE_XOXX</a></div><div class="ttdeci">#define LINE_XOXX</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00047">output.h:47</a></div></div>
<div class="ttc" id="aoutput_8h_html_a33ab4e0193402fed8f74590a30fadc3c"><div class="ttname"><a href="output_8h.html#a33ab4e0193402fed8f74590a30fadc3c">LINE_XOXO</a></div><div class="ttdeci">#define LINE_XOXO</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00039">output.h:39</a></div></div>
<div class="ttc" id="aoutput_8h_html_a435355aeca1be3844e79fc4db8e691e1"><div class="ttname"><a href="output_8h.html#a435355aeca1be3844e79fc4db8e691e1">LINE_OXOX</a></div><div class="ttdeci">#define LINE_OXOX</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00040">output.h:40</a></div></div>
<div class="ttc" id="aoutput_8h_html_a479e8a9ad84c68ed5f8609d4b536a8bb"><div class="ttname"><a href="output_8h.html#a479e8a9ad84c68ed5f8609d4b536a8bb">LINE_OOXX</a></div><div class="ttdeci">#define LINE_OOXX</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00043">output.h:43</a></div></div>
<div class="ttc" id="aoutput_8h_html_a4b80f0039259ebe61dc2e58ca4b31043"><div class="ttname"><a href="output_8h.html#a4b80f0039259ebe61dc2e58ca4b31043">LINE_XXXO</a></div><div class="ttdeci">#define LINE_XXXO</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00045">output.h:45</a></div></div>
<div class="ttc" id="aoutput_8h_html_a6405dcdb708433c3c3dde836aa8a15cc"><div class="ttname"><a href="output_8h.html#a6405dcdb708433c3c3dde836aa8a15cc">LINE_OXXO</a></div><div class="ttdeci">#define LINE_OXXO</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00042">output.h:42</a></div></div>
<div class="ttc" id="aoutput_8h_html_ad3a54f998264087befce6de30cb787b0"><div class="ttname"><a href="output_8h.html#ad3a54f998264087befce6de30cb787b0">LINE_XOOX</a></div><div class="ttdeci">#define LINE_XOOX</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00044">output.h:44</a></div></div>
<div class="ttc" id="aoutput_8h_html_af6d239f277e1b763f690b94efa469792"><div class="ttname"><a href="output_8h.html#af6d239f277e1b763f690b94efa469792">LINE_XXOO</a></div><div class="ttdeci">#define LINE_XXOO</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00041">output.h:41</a></div></div>
<div class="ttc" id="apoint_8h_html_aff73fd5bf470a3db5291c5dec855bb71"><div class="ttname"><a href="point_8h.html#aff73fd5bf470a3db5291c5dec855bb71">point_east</a></div><div class="ttdeci">static constexpr point point_east</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00264">point.h:264</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00035">point.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="dialogue_8h_source.html#l00036">action</a>, <a class="el" href="messages_8cpp_source.html#l00910">add_msg()</a>, <a class="el" href="magic_8cpp_source.html#l01032">c</a>, <a class="el" href="color_8h_source.html#l00019">c_light_gray</a>, <a class="el" href="visitable_8cpp_source.html#l00946">visitable&lt; T &gt;::charges_of()</a>, <a class="el" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color()</a>, <a class="el" href="fmtlib__core_8h_source.html#l01073">detail::count()</a>, <a class="el" href="output_8cpp_source.html#l01314">draw_scrollbar()</a>, <a class="el" href="output_8cpp_source.html#l00299">fold_and_print()</a>, <a class="el" href="output_8h_source.html#l00932">format_money()</a>, <a class="el" href="output_8cpp_source.html#l00056">FULL_SCREEN_HEIGHT</a>, <a class="el" href="output_8cpp_source.html#l00055">FULL_SCREEN_WIDTH</a>, <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="color_8h_source.html#l00036">h_light_gray</a>, <a class="el" href="input_8cpp_source.html#l00848">input_context::handle_input()</a>, <a class="el" href="character_8cpp_source.html#l02407">Character::i_add_or_drop()</a>, <a class="el" href="map_8cpp_source.html#l04209">map::i_at()</a>, <a class="el" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a>, <a class="el" href="mapgen_8cpp_source.html#l06281">line()</a>, <a class="el" href="output_8h_source.html#l00043">LINE_OOXX</a>, <a class="el" href="output_8h_source.html#l00040">LINE_OXOX</a>, <a class="el" href="output_8h_source.html#l00042">LINE_OXXO</a>, <a class="el" href="output_8h_source.html#l00044">LINE_XOOX</a>, <a class="el" href="output_8h_source.html#l00039">LINE_XOXO</a>, <a class="el" href="output_8h_source.html#l00047">LINE_XOXX</a>, <a class="el" href="output_8h_source.html#l00041">LINE_XXOO</a>, <a class="el" href="output_8h_source.html#l00045">LINE_XXXO</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="creature_8h_source.html#l00582">Creature::moves</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00164">catacurses::mvwaddch()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00152">catacurses::mvwhline()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00103">catacurses::mvwprintw()</a>, <a class="el" href="overmap_8cpp_source.html#l04129">om_direction::name()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00034">catacurses::newwin()</a>, <a class="el" href="point_8h_source.html#l00264">point_east</a>, <a class="el" href="output_8cpp_source.html#l00764">popup()</a>, <a class="el" href="ui__manager_8cpp_source.html#l00389">ui_manager::redraw()</a>, <a class="el" href="input_8cpp_source.html#l00672">input_context::register_action()</a>, <a class="el" href="input_8cpp_source.html#l00918">input_context::register_updown()</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">second</a>, <a class="el" href="output_8cpp_source.html#l00047">TERMX</a>, <a class="el" href="output_8cpp_source.html#l00048">TERMY</a>, <a class="el" href="output_8cpp_source.html#l00214">trim_and_print()</a>, <a class="el" href="character_8cpp_source.html#l09665">Character::use_charges()</a>, <a class="el" href="catacharset_8cpp_source.html#l00238">utf8_truncate()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00145">catacurses::wborder()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00053">catacurses::werase()</a>, and <a class="el" href="ncurses__def_8cpp_source.html#l00043">catacurses::wnoutrefresh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>.</p>

</div>
</div>
<a id="ad419b04851e9070c7bb2e15bf97cfb00" name="ad419b04851e9070c7bb2e15bf97cfb00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad419b04851e9070c7bb2e15bf97cfb00">&#9670;&nbsp;</a></span>water_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::water_source </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03872">3872</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03873" name="l03873"></a><span class="lineno"> 3873</span>{</div>
<div class="line"><a id="l03874" name="l03874"></a><span class="lineno"> 3874</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l03875" name="l03875"></a><span class="lineno"> 3875</span>    <a class="code hl_class" href="classitem.html">item</a> water = here.<a class="code hl_function" href="classmap.html#a3fea339e0cf553409e982fd0fb385d84">water_from</a>( examp );</div>
<div class="line"><a id="l03876" name="l03876"></a><span class="lineno"> 3876</span>    <span class="comment">// TODO: use me</span></div>
<div class="line"><a id="l03877" name="l03877"></a><span class="lineno"> 3877</span>    ( void ) p;</div>
<div class="line"><a id="l03878" name="l03878"></a><span class="lineno"> 3878</span>    <a class="code hl_function" href="namespaceliquid__handler.html#a30393ea5ae789bd91dc85e09f7c504e2">liquid_handler::handle_liquid</a>( water, <span class="keyword">nullptr</span>, 0, &amp;examp );</div>
<div class="line"><a id="l03879" name="l03879"></a><span class="lineno"> 3879</span>}</div>
<div class="ttc" id="aclassmap_html_a3fea339e0cf553409e982fd0fb385d84"><div class="ttname"><a href="classmap.html#a3fea339e0cf553409e982fd0fb385d84">map::water_from</a></div><div class="ttdeci">item water_from(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04505">map.cpp:4505</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l00147">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00400">liquid_handler::handle_liquid()</a>, and <a class="el" href="map_8cpp_source.html#l04505">map::water_from()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l06734">colorized_ter_name_flags_at()</a>, <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="map_8cpp_source.html#l04505">map::water_from()</a>.</p>

</div>
</div>
<a id="a1562d040bf1e91a0140086bd6f905802" name="a1562d040bf1e91a0140086bd6f905802"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1562d040bf1e91a0140086bd6f905802">&#9670;&nbsp;</a></span>workbench()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::workbench </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l06224">6224</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06225" name="l06225"></a><span class="lineno"> 6225</span>{</div>
<div class="line"><a id="l06226" name="l06226"></a><span class="lineno"> 6226</span>    <span class="comment">// Dummied out and only used for function equality check</span></div>
<div class="line"><a id="l06227" name="l06227"></a><span class="lineno"> 6227</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l05463">game::examine()</a>, <a class="el" href="mapdata_8cpp_source.html#l01609">finalize_furn()</a>, <a class="el" href="iexamine_8cpp_source.html#l06298">iexamine_function_from_string()</a>, and <a class="el" href="crafting_8cpp_source.html#l00674">set_item_map_or_vehicle()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceiexamine.html">iexamine</a></li>
    <li class="footer">Generated on Thu Aug 24 2023 03:26:25 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
